<html>
<head><meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<style type="text/css">
<!--
span.cls_002{font-family:Arial,serif;font-size:14.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_002{font-family:Arial,serif;font-size:14.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_003{font-family:Arial,serif;font-size:11.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_003{font-family:Arial,serif;font-size:11.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_004{font-family:Arial,serif;font-size:13.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_004{font-family:Arial,serif;font-size:13.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_005{font-family:Arial,serif;font-size:8.1px;color:rgb(161,161,161);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_005{font-family:Arial,serif;font-size:8.1px;color:rgb(161,161,161);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_006{font-family:Times,serif;font-size:8.1px;color:rgb(161,161,161);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_006{font-family:Times,serif;font-size:8.1px;color:rgb(161,161,161);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_007{font-family:Arial,serif;font-size:28.1px;color:rgb(189,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_007{font-family:Arial,serif;font-size:28.1px;color:rgb(189,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_008{font-family:Arial,serif;font-size:10.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_008{font-family:Arial,serif;font-size:10.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_009{font-family:Arial,serif;font-size:8.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_009{font-family:Arial,serif;font-size:8.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_010{font-family:Times,serif;font-size:8.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_010{font-family:Times,serif;font-size:8.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_011{font-family:Arial,serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_011{font-family:Arial,serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_012{font-family:Arial,serif;font-size:9.6px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_012{font-family:Arial,serif;font-size:9.6px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_013{font-family:Arial,serif;font-size:7.5px;color:rgb(255,255,255);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_013{font-family:Arial,serif;font-size:7.5px;color:rgb(255,255,255);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_014{font-family:Arial,serif;font-size:21.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_014{font-family:Arial,serif;font-size:21.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_015{font-family:Arial,serif;font-size:10.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_015{font-family:Arial,serif;font-size:10.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_016{font-family:Arial,serif;font-size:21.1px;color:rgb(255,255,255);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_016{font-family:Arial,serif;font-size:21.1px;color:rgb(255,255,255);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_017{font-family:Arial,serif;font-size:14.1px;color:rgb(189,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_017{font-family:Arial,serif;font-size:14.1px;color:rgb(189,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_018{font-family:Arial,serif;font-size:12.1px;color:rgb(189,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_018{font-family:Arial,serif;font-size:12.1px;color:rgb(189,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_019{font-family:Arial,serif;font-size:8.1px;color:rgb(75,76,76);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_019{font-family:Arial,serif;font-size:8.1px;color:rgb(75,76,76);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_020{font-family:Arial,serif;font-size:8.6px;color:rgb(189,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_020{font-family:Arial,serif;font-size:8.6px;color:rgb(189,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_021{font-family:"Liberation Sans Narrow",serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_021{font-family:"Liberation Sans Narrow",serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_022{font-family:Arial,serif;font-size:9.6px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_022{font-family:Arial,serif;font-size:9.6px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_023{font-family:Arial,serif;font-size:9.6px;color:rgb(189,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_023{font-family:Arial,serif;font-size:9.6px;color:rgb(189,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_024{font-family:Arial,serif;font-size:16.1px;color:rgb(189,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_024{font-family:Arial,serif;font-size:16.1px;color:rgb(189,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_025{font-family:Arial,serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_025{font-family:Arial,serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_026{font-family:"Liberation Sans Narrow",serif;font-size:8.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_026{font-family:"Liberation Sans Narrow",serif;font-size:8.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_027{font-family:"Liberation Sans Narrow Bold",serif;font-size:8.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_027{font-family:"Liberation Sans Narrow Bold",serif;font-size:8.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_028{font-family:"Liberation Sans Narrow Italic",serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
div.cls_028{font-family:"Liberation Sans Narrow Italic",serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
span.cls_029{font-family:"Liberation Sans Narrow Italic",serif;font-size:8.1px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
div.cls_029{font-family:"Liberation Sans Narrow Italic",serif;font-size:8.1px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
span.cls_030{font-family:Arial,serif;font-size:16.1px;color:rgb(255,255,255);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_030{font-family:Arial,serif;font-size:16.1px;color:rgb(255,255,255);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_031{font-family:Arial,serif;font-size:25.1px;color:rgb(255,255,255);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_031{font-family:Arial,serif;font-size:25.1px;color:rgb(255,255,255);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_032{font-family:Arial,serif;font-size:8.1px;color:rgb(189,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_032{font-family:Arial,serif;font-size:8.1px;color:rgb(189,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_033{font-family:Arial,serif;font-size:9.6px;color:rgb(146,146,146);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_033{font-family:Arial,serif;font-size:9.6px;color:rgb(146,146,146);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_034{font-family:Arial,serif;font-size:18.1px;color:rgb(60,47,133);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_034{font-family:Arial,serif;font-size:18.1px;color:rgb(60,47,133);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_035{font-family:Arial,serif;font-size:9.6px;color:rgb(60,47,133);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_035{font-family:Arial,serif;font-size:9.6px;color:rgb(60,47,133);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_036{font-family:Arial,serif;font-size:9.6px;color:rgb(161,161,161);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_036{font-family:Arial,serif;font-size:9.6px;color:rgb(161,161,161);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_037{font-family:Arial,serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
div.cls_037{font-family:Arial,serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
span.cls_038{font-family:Arial,serif;font-size:18.1px;color:rgb(26,150,213);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_038{font-family:Arial,serif;font-size:18.1px;color:rgb(26,150,213);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_039{font-family:Arial,serif;font-size:14.1px;color:rgb(26,150,213);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_039{font-family:Arial,serif;font-size:14.1px;color:rgb(26,150,213);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_040{font-family:"Liberation Sans Narrow Bold Italic",serif;font-size:8.1px;color:rgb(0,0,0);font-weight:bold;font-style:italic;text-decoration: none}
div.cls_040{font-family:"Liberation Sans Narrow Bold Italic",serif;font-size:8.1px;color:rgb(0,0,0);font-weight:bold;font-style:italic;text-decoration: none}
span.cls_041{font-family:"Liberation Sans Narrow Bold Italic",serif;font-size:9.6px;color:rgb(0,0,0);font-weight:bold;font-style:italic;text-decoration: none}
div.cls_041{font-family:"Liberation Sans Narrow Bold Italic",serif;font-size:9.6px;color:rgb(0,0,0);font-weight:bold;font-style:italic;text-decoration: none}
span.cls_042{font-family:Arial,serif;font-size:18.1px;color:rgb(94,169,67);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_042{font-family:Arial,serif;font-size:18.1px;color:rgb(94,169,67);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_043{font-family:Arial,serif;font-size:14.1px;color:rgb(94,169,67);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_043{font-family:Arial,serif;font-size:14.1px;color:rgb(94,169,67);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_044{font-family:"Liberation Sans Narrow Bold",serif;font-size:9.6px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_044{font-family:"Liberation Sans Narrow Bold",serif;font-size:9.6px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_045{font-family:Arial,serif;font-size:7.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_045{font-family:Arial,serif;font-size:7.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_046{font-family:"Liberation Sans Narrow Bold",serif;font-size:9.6px;color:rgb(60,47,133);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_046{font-family:"Liberation Sans Narrow Bold",serif;font-size:9.6px;color:rgb(60,47,133);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_047{font-family:"Liberation Sans Narrow",serif;font-size:8.1px;color:rgb(60,47,133);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_047{font-family:"Liberation Sans Narrow",serif;font-size:8.1px;color:rgb(60,47,133);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_048{font-family:"Liberation Sans Narrow",serif;font-size:9.6px;color:rgb(161,161,161);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_048{font-family:"Liberation Sans Narrow",serif;font-size:9.6px;color:rgb(161,161,161);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_049{font-family:Arial,serif;font-size:14.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_049{font-family:Arial,serif;font-size:14.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_050{font-family:Arial,serif;font-size:8.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_050{font-family:Arial,serif;font-size:8.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
-->
</style>
<script type="text/javascript" src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/wz_jsgraphics.js"></script>
</head>
<body>
<div style="position:absolute;left:50%;margin-left:-306px;top:0px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background001.jpg" width=612 height=792></div>
<div style="position:absolute;left:124.90px;top:268.14px" class="cls_002"><span class="cls_002">Student Workbook (ROLE)</span></div>
<div style="position:absolute;left:124.90px;top:291.17px" class="cls_003"><span class="cls_003">OCP 4.5 DO180</span></div>
<div style="position:absolute;left:124.90px;top:305.78px" class="cls_004"><span class="cls_004">Red Hat OpenShift I: Containers &</span></div>
<div style="position:absolute;left:124.90px;top:321.78px" class="cls_004"><span class="cls_004">Kubernetes</span></div>
<div style="position:absolute;left:124.90px;top:338.67px" class="cls_003"><span class="cls_003">Edition 3</span></div>
<div style="position:absolute;left:54.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:448.94px;top:751.13px" class="cls_005"><span class="cls_005">Copyright </span><span class="cls_006">©</span><span class="cls_005">2020 Red Hat, Inc.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:802px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background002.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:1604px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background003.jpg" width=612 height=792></div>
<div style="position:absolute;left:79.90px;top:191.47px" class="cls_007"><span class="cls_007">Red Hat OpenShift</span></div>
<div style="position:absolute;left:79.90px;top:220.47px" class="cls_007"><span class="cls_007">I: Containers &</span></div>
<div style="position:absolute;left:79.90px;top:249.47px" class="cls_007"><span class="cls_007">Kubernetes</span></div>
<div style="position:absolute;left:54.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:448.94px;top:751.13px" class="cls_005"><span class="cls_005">Copyright </span><span class="cls_006">©</span><span class="cls_005">2020 Red Hat, Inc.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:2406px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background004.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:53.54px" class="cls_002"><span class="cls_002">OCP 4.5 DO180</span></div>
<div style="position:absolute;left:90.00px;top:70.54px" class="cls_002"><span class="cls_002">Red Hat OpenShift I: Containers & Kubernetes</span></div>
<div style="position:absolute;left:90.00px;top:87.54px" class="cls_002"><span class="cls_002">Edition 3 20201217</span></div>
<div style="position:absolute;left:90.00px;top:104.54px" class="cls_002"><span class="cls_002">Publication date 20201217</span></div>
<div style="position:absolute;left:90.00px;top:145.66px" class="cls_008"><span class="cls_008">Authors:</span></div>
<div style="position:absolute;left:205.00px;top:145.66px" class="cls_008"><span class="cls_008">Zach Gutterman, Dan Kolepp, Eduardo Ramirez Ronco,</span></div>
<div style="position:absolute;left:205.00px;top:157.66px" class="cls_008"><span class="cls_008">Jordi Sola Alaball, Richard Allred</span></div>
<div style="position:absolute;left:90.00px;top:169.66px" class="cls_008"><span class="cls_008">Editor:</span></div>
<div style="position:absolute;left:205.00px;top:169.66px" class="cls_008"><span class="cls_008">Seth Kenlon, Dave Sacco, Connie Petlitzer</span></div>
<div style="position:absolute;left:90.00px;top:190.92px" class="cls_009"><span class="cls_009">Copyright </span><span class="cls_010">©</span><span class="cls_009"> 2019 Red Hat, Inc.</span></div>
<div style="position:absolute;left:90.00px;top:210.92px" class="cls_009"><span class="cls_009">The contents of this course and all its modules and related materials, including handouts to audience members, are</span></div>
<div style="position:absolute;left:90.00px;top:222.92px" class="cls_009"><span class="cls_009">Copyright </span><span class="cls_010">©</span><span class="cls_009"> 2019 Red Hat, Inc.</span></div>
<div style="position:absolute;left:90.00px;top:242.91px" class="cls_009"><span class="cls_009">No part of this publication may be stored in a retrieval system, transmitted or reproduced in any way, including, but</span></div>
<div style="position:absolute;left:90.00px;top:254.91px" class="cls_009"><span class="cls_009">not limited to, photocopy, photograph, magnetic, electronic or other record, without the prior written permission of</span></div>
<div style="position:absolute;left:90.00px;top:266.91px" class="cls_009"><span class="cls_009">Red Hat, Inc.</span></div>
<div style="position:absolute;left:90.00px;top:286.91px" class="cls_009"><span class="cls_009">This instructional program, including all material provided herein, is supplied without any guarantees from Red Hat,</span></div>
<div style="position:absolute;left:90.00px;top:298.91px" class="cls_009"><span class="cls_009">Inc. Red Hat, Inc. assumes no liability for damages or legal action arising from the use or misuse of contents or details</span></div>
<div style="position:absolute;left:90.00px;top:310.90px" class="cls_009"><span class="cls_009">contained herein.</span></div>
<div style="position:absolute;left:90.00px;top:330.90px" class="cls_009"><span class="cls_009">If you believe Red Hat training materials are being used, copied, or otherwise improperly distributed, please send</span></div>
<div style="position:absolute;left:90.00px;top:342.90px" class="cls_009"><span class="cls_009">email to training@redhat.com or phone toll-free (USA) +1 (866) 626-2994 or +1 (919) 754-3700.</span></div>
<div style="position:absolute;left:90.00px;top:362.90px" class="cls_009"><span class="cls_009">Red Hat, Red Hat Enterprise Linux, the Red Hat logo, JBoss, Hibernate, Fedora, the Infinity logo, and RHCE are</span></div>
<div style="position:absolute;left:90.00px;top:374.90px" class="cls_009"><span class="cls_009">trademarks of Red Hat, Inc., registered in the United States and other countries.</span></div>
<div style="position:absolute;left:90.00px;top:394.89px" class="cls_009"><span class="cls_009">Linux</span><span class="cls_010">®</span><span class="cls_009"> is the registered trademark of Linus Torvalds in the United States and other countries.</span></div>
<div style="position:absolute;left:90.00px;top:414.89px" class="cls_009"><span class="cls_009">Java</span><span class="cls_010">®</span><span class="cls_009"> is a registered trademark of Oracle and/or its affiliates.</span></div>
<div style="position:absolute;left:90.00px;top:434.89px" class="cls_009"><span class="cls_009">XFS</span><span class="cls_010">®</span><span class="cls_009"> is a registered trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or</span></div>
<div style="position:absolute;left:90.00px;top:446.89px" class="cls_009"><span class="cls_009">other countries.</span></div>
<div style="position:absolute;left:90.00px;top:466.89px" class="cls_009"><span class="cls_009">The OpenStack</span><span class="cls_010">®</span><span class="cls_009"> word mark and the Square O Design, together or apart, are trademarks or registered trademarks</span></div>
<div style="position:absolute;left:90.00px;top:478.88px" class="cls_009"><span class="cls_009">of OpenStack Foundation in the United States and other countries, and are used with the OpenStack Foundation's</span></div>
<div style="position:absolute;left:90.00px;top:490.88px" class="cls_009"><span class="cls_009">permission. Red Hat, Inc. is not affiliated with, endorsed by, or sponsored by the OpenStack Foundation or the</span></div>
<div style="position:absolute;left:90.00px;top:502.88px" class="cls_009"><span class="cls_009">OpenStack community.</span></div>
<div style="position:absolute;left:90.00px;top:522.88px" class="cls_009"><span class="cls_009">All other trademarks are the property of their respective owners.</span></div>
<div style="position:absolute;left:90.00px;top:545.42px" class="cls_011"><span class="cls_011">Contributors: Michael Jarrett, Forrest Taylor, Manuel Aude Morales, James Mighion, and Michael</span></div>
<div style="position:absolute;left:90.00px;top:557.42px" class="cls_011"><span class="cls_011">Phillips</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:3208px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background005.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:53.88px" class="cls_012"><span class="cls_012">Document Conventions</span></div>
<div style="position:absolute;left:512.63px;top:53.88px" class="cls_012"><span class="cls_012">vii</span></div>
<div style="position:absolute;left:108.00px;top:73.09px" class="cls_012"><span class="cls_012">Introduction</span></div>
<div style="position:absolute;left:515.62px;top:73.09px" class="cls_012"><span class="cls_012">ix</span></div>
<div style="position:absolute;left:132.00px;top:85.22px" class="cls_011"><span class="cls_011">DO180: Red Hat OpenShift I: Containers & Kubernetes</span></div>
<div style="position:absolute;left:516.64px;top:85.22px" class="cls_011"><span class="cls_011">ix</span></div>
<div style="position:absolute;left:132.00px;top:97.22px" class="cls_011"><span class="cls_011">Orientation to the Classroom Environment</span></div>
<div style="position:absolute;left:518.43px;top:97.22px" class="cls_011"><span class="cls_011">x</span></div>
<div style="position:absolute;left:132.00px;top:109.21px" class="cls_011"><span class="cls_011">Internationalization</span></div>
<div style="position:absolute;left:513.27px;top:109.21px" class="cls_011"><span class="cls_011">xiii</span></div>
<div style="position:absolute;left:108.00px;top:128.30px" class="cls_012"><span class="cls_012">1. Introducing Container Technology</span></div>
<div style="position:absolute;left:519.57px;top:128.30px" class="cls_012"><span class="cls_012">1</span></div>
<div style="position:absolute;left:132.00px;top:140.43px" class="cls_011"><span class="cls_011">Overview of Container Technology</span></div>
<div style="position:absolute;left:518.12px;top:140.43px" class="cls_011"><span class="cls_011">2</span></div>
<div style="position:absolute;left:132.00px;top:152.42px" class="cls_011"><span class="cls_011">Quiz: Overview of Container Technology</span></div>
<div style="position:absolute;left:517.74px;top:152.42px" class="cls_011"><span class="cls_011">5</span></div>
<div style="position:absolute;left:132.00px;top:164.42px" class="cls_011"><span class="cls_011">Overview of Container Architecture</span></div>
<div style="position:absolute;left:517.44px;top:164.42px" class="cls_011"><span class="cls_011">9</span></div>
<div style="position:absolute;left:132.00px;top:176.42px" class="cls_011"><span class="cls_011">Quiz: Overview of Container Architecture</span></div>
<div style="position:absolute;left:515.21px;top:176.42px" class="cls_011"><span class="cls_011">12</span></div>
<div style="position:absolute;left:132.00px;top:188.42px" class="cls_011"><span class="cls_011">Overview of Kubernetes and OpenShift</span></div>
<div style="position:absolute;left:514.52px;top:188.42px" class="cls_011"><span class="cls_011">14</span></div>
<div style="position:absolute;left:132.00px;top:200.41px" class="cls_011"><span class="cls_011">Quiz: Describing Kubernetes and OpenShift</span></div>
<div style="position:absolute;left:515.03px;top:200.41px" class="cls_011"><span class="cls_011">17</span></div>
<div style="position:absolute;left:132.00px;top:212.41px" class="cls_011"><span class="cls_011">Guided Exercise: Configuring the Classroom Environment</span></div>
<div style="position:absolute;left:514.15px;top:212.41px" class="cls_011"><span class="cls_011">19</span></div>
<div style="position:absolute;left:132.00px;top:224.41px" class="cls_011"><span class="cls_011">Summary</span></div>
<div style="position:absolute;left:513.32px;top:224.41px" class="cls_011"><span class="cls_011">25</span></div>
<div style="position:absolute;left:108.00px;top:243.49px" class="cls_012"><span class="cls_012">2. Creating Containerized Services</span></div>
<div style="position:absolute;left:511.67px;top:243.49px" class="cls_012"><span class="cls_012">27</span></div>
<div style="position:absolute;left:132.00px;top:255.62px" class="cls_011"><span class="cls_011">Provisioning Containerized Services</span></div>
<div style="position:absolute;left:512.23px;top:255.62px" class="cls_011"><span class="cls_011">28</span></div>
<div style="position:absolute;left:132.00px;top:267.62px" class="cls_011"><span class="cls_011">Guided Exercise: Creating a MySQL Database Instance</span></div>
<div style="position:absolute;left:511.35px;top:267.62px" class="cls_011"><span class="cls_011">34</span></div>
<div style="position:absolute;left:132.00px;top:279.62px" class="cls_011"><span class="cls_011">Lab: Creating Containerized Services</span></div>
<div style="position:absolute;left:512.39px;top:279.62px" class="cls_011"><span class="cls_011">37</span></div>
<div style="position:absolute;left:132.00px;top:291.61px" class="cls_011"><span class="cls_011">Summary</span></div>
<div style="position:absolute;left:512.83px;top:291.61px" class="cls_011"><span class="cls_011">42</span></div>
<div style="position:absolute;left:108.00px;top:310.70px" class="cls_012"><span class="cls_012">3. Managing Containers</span></div>
<div style="position:absolute;left:510.78px;top:310.70px" class="cls_012"><span class="cls_012">43</span></div>
<div style="position:absolute;left:132.00px;top:322.83px" class="cls_011"><span class="cls_011">Managing the Life Cycle of Containers</span></div>
<div style="position:absolute;left:511.39px;top:322.83px" class="cls_011"><span class="cls_011">44</span></div>
<div style="position:absolute;left:132.00px;top:334.82px" class="cls_011"><span class="cls_011">Guided Exercise: Managing a MySQL Container</span></div>
<div style="position:absolute;left:512.39px;top:334.82px" class="cls_011"><span class="cls_011">52</span></div>
<div style="position:absolute;left:132.00px;top:346.82px" class="cls_011"><span class="cls_011">Attaching Persistent Storage to Containers</span></div>
<div style="position:absolute;left:512.26px;top:346.82px" class="cls_011"><span class="cls_011">55</span></div>
<div style="position:absolute;left:132.00px;top:358.82px" class="cls_011"><span class="cls_011">Guided Exercise: Persisting a MySQL Database</span></div>
<div style="position:absolute;left:511.71px;top:358.82px" class="cls_011"><span class="cls_011">58</span></div>
<div style="position:absolute;left:132.00px;top:370.82px" class="cls_011"><span class="cls_011">Accessing Containers</span></div>
<div style="position:absolute;left:515.02px;top:370.82px" class="cls_011"><span class="cls_011">61</span></div>
<div style="position:absolute;left:132.00px;top:382.81px" class="cls_011"><span class="cls_011">Guided Exercise: Loading the Database</span></div>
<div style="position:absolute;left:511.92px;top:382.81px" class="cls_011"><span class="cls_011">65</span></div>
<div style="position:absolute;left:132.00px;top:394.81px" class="cls_011"><span class="cls_011">Lab: Managing Containers</span></div>
<div style="position:absolute;left:511.79px;top:394.81px" class="cls_011"><span class="cls_011">68</span></div>
<div style="position:absolute;left:132.00px;top:406.81px" class="cls_011"><span class="cls_011">Summary</span></div>
<div style="position:absolute;left:513.32px;top:406.81px" class="cls_011"><span class="cls_011">77</span></div>
<div style="position:absolute;left:108.00px;top:425.89px" class="cls_012"><span class="cls_012">4. Managing Container Images</span></div>
<div style="position:absolute;left:511.20px;top:425.89px" class="cls_012"><span class="cls_012">79</span></div>
<div style="position:absolute;left:132.00px;top:438.02px" class="cls_011"><span class="cls_011">Accessing Registries</span></div>
<div style="position:absolute;left:511.46px;top:438.02px" class="cls_011"><span class="cls_011">80</span></div>
<div style="position:absolute;left:132.00px;top:450.02px" class="cls_011"><span class="cls_011">Quiz: Working With Registries</span></div>
<div style="position:absolute;left:511.72px;top:450.02px" class="cls_011"><span class="cls_011">86</span></div>
<div style="position:absolute;left:132.00px;top:462.02px" class="cls_011"><span class="cls_011">Manipulating Container Images</span></div>
<div style="position:absolute;left:511.24px;top:462.02px" class="cls_011"><span class="cls_011">90</span></div>
<div style="position:absolute;left:132.00px;top:474.01px" class="cls_011"><span class="cls_011">Guided Exercise: Creating a Custom Apache Container Image</span></div>
<div style="position:absolute;left:510.97px;top:474.01px" class="cls_011"><span class="cls_011">96</span></div>
<div style="position:absolute;left:132.00px;top:486.01px" class="cls_011"><span class="cls_011">Lab: Managing Images</span></div>
<div style="position:absolute;left:508.21px;top:486.01px" class="cls_011"><span class="cls_011">100</span></div>
<div style="position:absolute;left:132.00px;top:498.01px" class="cls_011"><span class="cls_011">Summary</span></div>
<div style="position:absolute;left:508.97px;top:498.01px" class="cls_011"><span class="cls_011">108</span></div>
<div style="position:absolute;left:108.00px;top:517.09px" class="cls_012"><span class="cls_012">5. Creating Custom Container Images</span></div>
<div style="position:absolute;left:506.75px;top:517.09px" class="cls_012"><span class="cls_012">109</span></div>
<div style="position:absolute;left:132.00px;top:529.22px" class="cls_011"><span class="cls_011">Designing Custom Container Images</span></div>
<div style="position:absolute;left:511.42px;top:529.22px" class="cls_011"><span class="cls_011">110</span></div>
<div style="position:absolute;left:132.00px;top:541.22px" class="cls_011"><span class="cls_011">Quiz: Approaches to Container Image Design</span></div>
<div style="position:absolute;left:511.62px;top:541.22px" class="cls_011"><span class="cls_011">114</span></div>
<div style="position:absolute;left:132.00px;top:553.22px" class="cls_011"><span class="cls_011">Building Custom Container Images with Dockerfiles</span></div>
<div style="position:absolute;left:511.54px;top:553.22px" class="cls_011"><span class="cls_011">116</span></div>
<div style="position:absolute;left:132.00px;top:565.21px" class="cls_011"><span class="cls_011">Guided Exercise: Creating a Basic Apache Container Image</span></div>
<div style="position:absolute;left:512.02px;top:565.21px" class="cls_011"><span class="cls_011">121</span></div>
<div style="position:absolute;left:132.00px;top:577.21px" class="cls_011"><span class="cls_011">Lab: Creating Custom Container Images</span></div>
<div style="position:absolute;left:509.81px;top:577.21px" class="cls_011"><span class="cls_011">125</span></div>
<div style="position:absolute;left:132.00px;top:589.21px" class="cls_011"><span class="cls_011">Summary</span></div>
<div style="position:absolute;left:510.42px;top:589.21px" class="cls_011"><span class="cls_011">132</span></div>
<div style="position:absolute;left:108.00px;top:608.29px" class="cls_012"><span class="cls_012">6. Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:507.15px;top:608.29px" class="cls_012"><span class="cls_012">133</span></div>
<div style="position:absolute;left:132.00px;top:620.42px" class="cls_011"><span class="cls_011">Describing Kubernetes and OpenShift Architecture</span></div>
<div style="position:absolute;left:508.68px;top:620.42px" class="cls_011"><span class="cls_011">134</span></div>
<div style="position:absolute;left:132.00px;top:632.42px" class="cls_011"><span class="cls_011">Quiz: Describing Kubernetes and OpenShift</span></div>
<div style="position:absolute;left:508.10px;top:632.42px" class="cls_011"><span class="cls_011">140</span></div>
<div style="position:absolute;left:132.00px;top:644.42px" class="cls_011"><span class="cls_011">Creating Kubernetes Resources</span></div>
<div style="position:absolute;left:508.79px;top:644.42px" class="cls_011"><span class="cls_011">144</span></div>
<div style="position:absolute;left:132.00px;top:656.41px" class="cls_011"><span class="cls_011">Guided Exercise: Deploying a Database Server on OpenShift</span></div>
<div style="position:absolute;left:509.07px;top:656.41px" class="cls_011"><span class="cls_011">155</span></div>
<div style="position:absolute;left:132.00px;top:668.41px" class="cls_011"><span class="cls_011">Creating Routes</span></div>
<div style="position:absolute;left:508.83px;top:668.41px" class="cls_011"><span class="cls_011">160</span></div>
<div style="position:absolute;left:132.00px;top:680.41px" class="cls_011"><span class="cls_011">Guided Exercise: Exposing a Service as a Route</span></div>
<div style="position:absolute;left:508.48px;top:680.41px" class="cls_011"><span class="cls_011">164</span></div>
<div style="position:absolute;left:132.00px;top:692.41px" class="cls_011"><span class="cls_011">Creating Applications with Source-to-Image</span></div>
<div style="position:absolute;left:508.62px;top:692.41px" class="cls_011"><span class="cls_011">169</span></div>
<div style="position:absolute;left:132.00px;top:704.41px" class="cls_011"><span class="cls_011">Guided Exercise: Creating a Containerized Application with Source-to-Image</span></div>
<div style="position:absolute;left:508.40px;top:704.41px" class="cls_011"><span class="cls_011">179</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:512.46px;top:751.59px" class="cls_013"><span class="cls_013">v</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:4010px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background006.jpg" width=612 height=792></div>
<div style="position:absolute;left:114.00px;top:54.01px" class="cls_011"><span class="cls_011">Creating Applications with the OpenShift Web Console</span></div>
<div style="position:absolute;left:490.76px;top:54.01px" class="cls_011"><span class="cls_011">185</span></div>
<div style="position:absolute;left:114.00px;top:66.01px" class="cls_011"><span class="cls_011">Guided Exercise: Creating an Application with the Web Console</span></div>
<div style="position:absolute;left:493.26px;top:66.01px" class="cls_011"><span class="cls_011">191</span></div>
<div style="position:absolute;left:114.00px;top:78.00px" class="cls_011"><span class="cls_011">Lab: Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:487.41px;top:78.00px" class="cls_011"><span class="cls_011">208</span></div>
<div style="position:absolute;left:114.00px;top:90.00px" class="cls_011"><span class="cls_011">Summary</span></div>
<div style="position:absolute;left:492.42px;top:90.00px" class="cls_011"><span class="cls_011">213</span></div>
<div style="position:absolute;left:90.00px;top:107.87px" class="cls_012"><span class="cls_012">7. Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:489.96px;top:107.87px" class="cls_012"><span class="cls_012">215</span></div>
<div style="position:absolute;left:114.00px;top:120.00px" class="cls_011"><span class="cls_011">Considerations for Multi-Container Applications</span></div>
<div style="position:absolute;left:491.21px;top:120.00px" class="cls_011"><span class="cls_011">216</span></div>
<div style="position:absolute;left:114.00px;top:132.00px" class="cls_011"><span class="cls_011">Guided Exercise: Deploying the Web Application and MySQL Containers</span></div>
<div style="position:absolute;left:491.30px;top:132.00px" class="cls_011"><span class="cls_011">221</span></div>
<div style="position:absolute;left:114.00px;top:143.99px" class="cls_011"><span class="cls_011">Deploying a Multi-Container Application on OpenShift</span></div>
<div style="position:absolute;left:488.61px;top:143.99px" class="cls_011"><span class="cls_011">228</span></div>
<div style="position:absolute;left:114.00px;top:155.99px" class="cls_011"><span class="cls_011">Guided Exercise: Creating an Application with a Template</span></div>
<div style="position:absolute;left:488.16px;top:155.99px" class="cls_011"><span class="cls_011">238</span></div>
<div style="position:absolute;left:114.00px;top:167.99px" class="cls_011"><span class="cls_011">Lab: Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:488.07px;top:167.99px" class="cls_011"><span class="cls_011">244</span></div>
<div style="position:absolute;left:114.00px;top:179.99px" class="cls_011"><span class="cls_011">Summary</span></div>
<div style="position:absolute;left:492.56px;top:179.99px" class="cls_011"><span class="cls_011">251</span></div>
<div style="position:absolute;left:90.00px;top:197.86px" class="cls_012"><span class="cls_012">8. Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:487.40px;top:197.86px" class="cls_012"><span class="cls_012">253</span></div>
<div style="position:absolute;left:114.00px;top:209.98px" class="cls_011"><span class="cls_011">Troubleshooting S2I Builds and Deployments</span></div>
<div style="position:absolute;left:488.54px;top:209.98px" class="cls_011"><span class="cls_011">254</span></div>
<div style="position:absolute;left:114.00px;top:221.98px" class="cls_011"><span class="cls_011">Guided Exercise: Troubleshooting an OpenShift Build</span></div>
<div style="position:absolute;left:488.41px;top:221.98px" class="cls_011"><span class="cls_011">259</span></div>
<div style="position:absolute;left:114.00px;top:233.98px" class="cls_011"><span class="cls_011">Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:488.77px;top:233.98px" class="cls_011"><span class="cls_011">267</span></div>
<div style="position:absolute;left:114.00px;top:245.98px" class="cls_011"><span class="cls_011">Guided Exercise: Configuring Apache Container Logs for Debugging</span></div>
<div style="position:absolute;left:488.46px;top:245.98px" class="cls_011"><span class="cls_011">273</span></div>
<div style="position:absolute;left:114.00px;top:257.98px" class="cls_011"><span class="cls_011">Lab: Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:488.65px;top:257.98px" class="cls_011"><span class="cls_011">276</span></div>
<div style="position:absolute;left:114.00px;top:269.97px" class="cls_011"><span class="cls_011">Summary</span></div>
<div style="position:absolute;left:489.56px;top:269.97px" class="cls_011"><span class="cls_011">287</span></div>
<div style="position:absolute;left:90.00px;top:287.84px" class="cls_012"><span class="cls_012">9. Comprehensive Review</span></div>
<div style="position:absolute;left:487.50px;top:287.84px" class="cls_012"><span class="cls_012">289</span></div>
<div style="position:absolute;left:114.00px;top:299.97px" class="cls_011"><span class="cls_011">Comprehensive Review</span></div>
<div style="position:absolute;left:488.24px;top:299.97px" class="cls_011"><span class="cls_011">290</span></div>
<div style="position:absolute;left:114.00px;top:311.97px" class="cls_011"><span class="cls_011">Lab: Containerizing and Deploying a Software Application</span></div>
<div style="position:absolute;left:488.17px;top:311.97px" class="cls_011"><span class="cls_011">293</span></div>
<div style="position:absolute;left:90.00px;top:329.84px" class="cls_012"><span class="cls_012">A. Implementing Microservices Architecture</span></div>
<div style="position:absolute;left:486.31px;top:329.84px" class="cls_012"><span class="cls_012">303</span></div>
<div style="position:absolute;left:114.00px;top:341.96px" class="cls_011"><span class="cls_011">Implementing Microservices Architectures</span></div>
<div style="position:absolute;left:487.34px;top:341.96px" class="cls_011"><span class="cls_011">304</span></div>
<div style="position:absolute;left:114.00px;top:353.96px" class="cls_011"><span class="cls_011">Guided Exercise: Refactoring the To Do List Application</span></div>
<div style="position:absolute;left:487.06px;top:353.96px" class="cls_011"><span class="cls_011">308</span></div>
<div style="position:absolute;left:114.00px;top:365.96px" class="cls_011"><span class="cls_011">Summary</span></div>
<div style="position:absolute;left:492.04px;top:365.96px" class="cls_011"><span class="cls_011">313</span></div>
<div style="position:absolute;left:90.00px;top:383.83px" class="cls_012"><span class="cls_012">B. Creating a GitHub Account</span></div>
<div style="position:absolute;left:489.82px;top:383.83px" class="cls_012"><span class="cls_012">315</span></div>
<div style="position:absolute;left:114.00px;top:395.96px" class="cls_011"><span class="cls_011">Creating a GitHub Account</span></div>
<div style="position:absolute;left:491.32px;top:395.96px" class="cls_011"><span class="cls_011">316</span></div>
<div style="position:absolute;left:90.00px;top:413.83px" class="cls_012"><span class="cls_012">C. Creating a Quay Account</span></div>
<div style="position:absolute;left:489.60px;top:413.83px" class="cls_012"><span class="cls_012">319</span></div>
<div style="position:absolute;left:114.00px;top:425.95px" class="cls_011"><span class="cls_011">Creating a Quay Account</span></div>
<div style="position:absolute;left:488.48px;top:425.95px" class="cls_011"><span class="cls_011">320</span></div>
<div style="position:absolute;left:114.00px;top:437.95px" class="cls_011"><span class="cls_011">Repositories Visibility</span></div>
<div style="position:absolute;left:489.34px;top:437.95px" class="cls_011"><span class="cls_011">323</span></div>
<div style="position:absolute;left:90.00px;top:455.82px" class="cls_012"><span class="cls_012">D. Useful Git Commands</span></div>
<div style="position:absolute;left:487.89px;top:455.82px" class="cls_012"><span class="cls_012">327</span></div>
<div style="position:absolute;left:114.00px;top:467.95px" class="cls_011"><span class="cls_011">Git Commands</span></div>
<div style="position:absolute;left:489.17px;top:467.95px" class="cls_011"><span class="cls_011">328</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">vi</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:4812px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background007.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:83.06px" class="cls_014"><span class="cls_014">Document Conventions</span></div>
<div style="position:absolute;left:144.00px;top:145.50px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:144.00px;top:159.88px" class="cls_011"><span class="cls_011">"References" describe where to find external documentation relevant to a subject.</span></div>
<div style="position:absolute;left:144.00px;top:214.74px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:229.12px" class="cls_011"><span class="cls_011">"Notes" are tips, shortcuts or alternative approaches to the task at hand. Ignoring a</span></div>
<div style="position:absolute;left:144.00px;top:241.11px" class="cls_011"><span class="cls_011">note should have no negative consequences, but you might miss out on a trick that</span></div>
<div style="position:absolute;left:144.00px;top:253.11px" class="cls_011"><span class="cls_011">makes your life easier.</span></div>
<div style="position:absolute;left:144.00px;top:301.54px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:144.00px;top:315.91px" class="cls_011"><span class="cls_011">"Important" boxes detail things that are easily missed: configuration changes that</span></div>
<div style="position:absolute;left:144.00px;top:327.91px" class="cls_011"><span class="cls_011">only apply to the current session, or services that need restarting before an update</span></div>
<div style="position:absolute;left:144.00px;top:339.91px" class="cls_011"><span class="cls_011">will apply. Ignoring a box labeled "Important" will not cause data loss, but may cause</span></div>
<div style="position:absolute;left:144.00px;top:351.90px" class="cls_011"><span class="cls_011">irritation and frustration.</span></div>
<div style="position:absolute;left:144.00px;top:400.33px" class="cls_015"><span class="cls_015">Warning</span></div>
<div style="position:absolute;left:144.00px;top:414.70px" class="cls_011"><span class="cls_011">"Warnings" should not be ignored. Ignoring warnings will most likely cause data loss.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:508.52px;top:751.59px" class="cls_013"><span class="cls_013">vii</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:5614px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background008.jpg" width=612 height=792></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">viii</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:6416px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background009.jpg" width=612 height=792></div>
<div style="position:absolute;left:126.00px;top:109.98px" class="cls_016"><span class="cls_016">Introduction</span></div>
<div style="position:absolute;left:144.00px;top:161.04px" class="cls_017"><span class="cls_017">DO180: Red Hat OpenShift I: Containers &</span></div>
<div style="position:absolute;left:144.00px;top:177.04px" class="cls_017"><span class="cls_017">Kubernetes</span></div>
<div style="position:absolute;left:144.00px;top:193.66px" class="cls_008"><span class="cls_008">DO180: Red Hat OpenShift I: Containers & Kubernetes is a hands-on course</span></div>
<div style="position:absolute;left:144.00px;top:205.66px" class="cls_008"><span class="cls_008">that teaches students how to create, deploy, and manage containers using</span></div>
<div style="position:absolute;left:144.00px;top:217.66px" class="cls_008"><span class="cls_008">Podman, Kubernetes, and the Red Hat OpenShift Container Platform.</span></div>
<div style="position:absolute;left:144.00px;top:239.66px" class="cls_008"><span class="cls_008">One of the key tenants of the DevOps movement is continuous integration</span></div>
<div style="position:absolute;left:144.00px;top:251.66px" class="cls_008"><span class="cls_008">and continuous deployment. Containers have become a key technology</span></div>
<div style="position:absolute;left:144.00px;top:263.66px" class="cls_008"><span class="cls_008">for the configuration and deployment of applications and microservices.</span></div>
<div style="position:absolute;left:144.00px;top:275.66px" class="cls_008"><span class="cls_008">Red Hat OpenShift Container Platform is an implementation of Kubernetes, a</span></div>
<div style="position:absolute;left:144.00px;top:287.66px" class="cls_008"><span class="cls_008">container orchestration system.</span></div>
<div style="position:absolute;left:150.00px;top:334.32px" class="cls_018"><span class="cls_018">Course</span></div>
<div style="position:absolute;left:256.88px;top:335.66px" class="cls_008"><span class="cls_008">• Demonstrate knowledge of the container</span></div>
<div style="position:absolute;left:266.88px;top:347.66px" class="cls_008"><span class="cls_008">ecosystem.</span></div>
<div style="position:absolute;left:150.00px;top:350.32px" class="cls_018"><span class="cls_018">Objectives</span></div>
<div style="position:absolute;left:256.88px;top:363.66px" class="cls_008"><span class="cls_008">• Manage Linux containers using Podman.</span></div>
<div style="position:absolute;left:256.88px;top:379.66px" class="cls_008"><span class="cls_008">• Deploy containers on a Kubernetes cluster</span></div>
<div style="position:absolute;left:266.88px;top:391.66px" class="cls_008"><span class="cls_008">using the OpenShift Container Platform.</span></div>
<div style="position:absolute;left:256.88px;top:407.66px" class="cls_008"><span class="cls_008">• Demonstrate basic container design and the</span></div>
<div style="position:absolute;left:266.88px;top:419.66px" class="cls_008"><span class="cls_008">ability to build container images.</span></div>
<div style="position:absolute;left:256.88px;top:435.66px" class="cls_008"><span class="cls_008">• Implement a container-based architecture</span></div>
<div style="position:absolute;left:266.88px;top:447.66px" class="cls_008"><span class="cls_008">using knowledge of containers, Kubernetes, and</span></div>
<div style="position:absolute;left:266.88px;top:459.66px" class="cls_008"><span class="cls_008">OpenShift.</span></div>
<div style="position:absolute;left:150.00px;top:490.32px" class="cls_018"><span class="cls_018">Audience</span></div>
<div style="position:absolute;left:256.88px;top:491.66px" class="cls_008"><span class="cls_008">• System Administrators</span></div>
<div style="position:absolute;left:256.88px;top:507.66px" class="cls_008"><span class="cls_008">• Developers</span></div>
<div style="position:absolute;left:256.88px;top:523.66px" class="cls_008"><span class="cls_008">• IT Leaders and Infrastructure Architects</span></div>
<div style="position:absolute;left:150.00px;top:554.32px" class="cls_018"><span class="cls_018">Prerequisites</span></div>
<div style="position:absolute;left:256.88px;top:555.66px" class="cls_008"><span class="cls_008">Students should meet one or more of the</span></div>
<div style="position:absolute;left:256.88px;top:567.66px" class="cls_008"><span class="cls_008">following prerequisites:</span></div>
<div style="position:absolute;left:256.88px;top:589.66px" class="cls_008"><span class="cls_008">• Be able to use a Linux terminal session and</span></div>
<div style="position:absolute;left:266.88px;top:601.66px" class="cls_008"><span class="cls_008">issue operating system commands. An RHCSA</span></div>
<div style="position:absolute;left:266.88px;top:613.66px" class="cls_008"><span class="cls_008">certification is recommended but not required.</span></div>
<div style="position:absolute;left:256.88px;top:629.66px" class="cls_008"><span class="cls_008">• Have experience with web application</span></div>
<div style="position:absolute;left:266.88px;top:641.66px" class="cls_008"><span class="cls_008">architectures and their corresponding</span></div>
<div style="position:absolute;left:266.88px;top:653.66px" class="cls_008"><span class="cls_008">technologies.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:510.68px;top:751.59px" class="cls_013"><span class="cls_013">ix</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:7218px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background010.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_019"><span class="cls_019">Introduction</span></div>
<div style="position:absolute;left:90.00px;top:62.06px" class="cls_014"><span class="cls_014">Orientation to the Classroom</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Environment</span></div>
<div style="position:absolute;left:228.34px;top:309.46px" class="cls_020"><span class="cls_020">Figure 0.1: Classroom environment</span></div>
<div style="position:absolute;left:90.00px;top:332.38px" class="cls_011"><span class="cls_011">In this course, the main computer system used for hands-on learning activities is </span><span class="cls_021">workstation</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:344.38px" class="cls_011"><span class="cls_011">This is a virtual machine (VM) named </span><span class="cls_021">workstation.lab.example.com</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:365.88px" class="cls_011"><span class="cls_011">All student computer systems have a standard user account, </span><span class="cls_021">student</span><span class="cls_011">, which has the password</span></div>
<div style="position:absolute;left:90.00px;top:377.87px" class="cls_021"><span class="cls_021">student</span><span class="cls_011">. The </span><span class="cls_021">root</span><span class="cls_011"> password on all student systems is </span><span class="cls_021">redhat</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:403.82px" class="cls_022"><span class="cls_022">Classroom Machines</span></div>
<div style="position:absolute;left:96.25px;top:430.07px" class="cls_023"><span class="cls_023">Machine name</span></div>
<div style="position:absolute;left:255.48px;top:430.07px" class="cls_023"><span class="cls_023">IP addresses</span></div>
<div style="position:absolute;left:351.02px;top:430.07px" class="cls_023"><span class="cls_023">Role</span></div>
<div style="position:absolute;left:96.25px;top:452.65px" class="cls_011"><span class="cls_011">content.example.com,</span></div>
<div style="position:absolute;left:255.48px;top:452.62px" class="cls_011"><span class="cls_011">172.25.252.254,</span></div>
<div style="position:absolute;left:351.02px;top:452.62px" class="cls_011"><span class="cls_011">Classroom utility server</span></div>
<div style="position:absolute;left:96.25px;top:464.65px" class="cls_011"><span class="cls_011">materials.example.com,</span></div>
<div style="position:absolute;left:255.48px;top:464.62px" class="cls_011"><span class="cls_011">172.25.253.254,</span></div>
<div style="position:absolute;left:96.25px;top:476.65px" class="cls_011"><span class="cls_011">classroom.example.com</span></div>
<div style="position:absolute;left:255.48px;top:476.62px" class="cls_011"><span class="cls_011">172.25.254.254</span></div>
<div style="position:absolute;left:96.25px;top:499.15px" class="cls_011"><span class="cls_011">workstation.lab.example.com</span></div>
<div style="position:absolute;left:255.48px;top:499.11px" class="cls_011"><span class="cls_011">172.25.250.254,</span></div>
<div style="position:absolute;left:351.02px;top:499.11px" class="cls_011"><span class="cls_011">Student graphical workstation</span></div>
<div style="position:absolute;left:255.48px;top:511.11px" class="cls_011"><span class="cls_011">172.25.252.1</span></div>
<div style="position:absolute;left:90.00px;top:536.86px" class="cls_011"><span class="cls_011">Several systems in the classroom provide supporting services. Two servers,</span></div>
<div style="position:absolute;left:90.00px;top:548.86px" class="cls_021"><span class="cls_021">content.example.com</span><span class="cls_011"> and </span><span class="cls_021">materials.example.com</span><span class="cls_011">, are sources for software and lab</span></div>
<div style="position:absolute;left:90.00px;top:560.86px" class="cls_011"><span class="cls_011">materials used in hands-on activities. Information on how to use these servers is provided in the</span></div>
<div style="position:absolute;left:90.00px;top:572.85px" class="cls_011"><span class="cls_011">instructions for those activities.</span></div>
<div style="position:absolute;left:90.00px;top:594.35px" class="cls_011"><span class="cls_011">Students use the </span><span class="cls_021">workstation</span><span class="cls_011"> machine to access a shared OpenShift cluster hosted externally</span></div>
<div style="position:absolute;left:90.00px;top:606.35px" class="cls_011"><span class="cls_011">in AWS. Students do not have cluster administrator privileges on the cluster, but that is not</span></div>
<div style="position:absolute;left:90.00px;top:618.35px" class="cls_011"><span class="cls_011">necessary to complete the DO180 content.</span></div>
<div style="position:absolute;left:90.00px;top:639.85px" class="cls_011"><span class="cls_011">Students are provisioned an account on a shared OpenShift 4 cluster when they provision their</span></div>
<div style="position:absolute;left:90.00px;top:651.84px" class="cls_011"><span class="cls_011">environments in the Red Hat Online Learning interface. Cluster information such as the API</span></div>
<div style="position:absolute;left:90.00px;top:663.84px" class="cls_011"><span class="cls_011">endpoint, and cluster-ID, as well as their username and password are presented to them when they</span></div>
<div style="position:absolute;left:90.00px;top:675.84px" class="cls_011"><span class="cls_011">provision their environment.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">x</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:8020px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background011.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_019"><span class="cls_019">Introduction</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">Students also have access to a MySQL and a Nexus server hosted by either the OpenShift cluster</span></div>
<div style="position:absolute;left:108.00px;top:65.97px" class="cls_011"><span class="cls_011">or by AWS. Hands-on activities in this course provide instructions to access these servers when</span></div>
<div style="position:absolute;left:108.00px;top:77.97px" class="cls_011"><span class="cls_011">required.</span></div>
<div style="position:absolute;left:108.00px;top:99.47px" class="cls_011"><span class="cls_011">Hands-on activities in DO180 also require that students have personal accounts on a two public,</span></div>
<div style="position:absolute;left:108.00px;top:111.47px" class="cls_011"><span class="cls_011">free internet services: GitHub and Quay.io. Students need to create these accounts if they do not</span></div>
<div style="position:absolute;left:108.00px;top:123.47px" class="cls_011"><span class="cls_011">already have them (see Appendix) and verify their access by signing in to these services before</span></div>
<div style="position:absolute;left:108.00px;top:135.46px" class="cls_011"><span class="cls_011">starting the class.</span></div>
<div style="position:absolute;left:108.00px;top:157.75px" class="cls_024"><span class="cls_024">Controlling Your Systems</span></div>
<div style="position:absolute;left:108.00px;top:182.46px" class="cls_011"><span class="cls_011">Students are assigned remote computers in a Red Hat Online Learning classroom. They are</span></div>
<div style="position:absolute;left:108.00px;top:194.46px" class="cls_011"><span class="cls_011">accessed through a web application hosted at </span><A HREF="http://rol.redhat.com">rol.redhat.com</A><span class="cls_011"> [<A HREF="http://rol.redhat.com">http://rol.redhat.com</A>]. Students</div>
<div style="position:absolute;left:108.00px;top:206.46px" class="cls_011"><span class="cls_011">should log in to this site using their Red Hat Customer Portal user credentials.</span></div>
<div style="position:absolute;left:108.00px;top:230.52px" class="cls_002"><span class="cls_002">Controlling the Virtual Machines</span></div>
<div style="position:absolute;left:108.00px;top:252.46px" class="cls_011"><span class="cls_011">The virtual machines in your classroom environment are controlled through a web page. The state</span></div>
<div style="position:absolute;left:108.00px;top:264.45px" class="cls_011"><span class="cls_011">of each virtual machine in the classroom is displayed on the page under the Online Lab tab.</span></div>
<div style="position:absolute;left:108.00px;top:290.40px" class="cls_022"><span class="cls_022">Machine States</span></div>
<div style="position:absolute;left:114.25px;top:316.64px" class="cls_023"><span class="cls_023">Virtual Machine</span></div>
<div style="position:absolute;left:217.75px;top:316.64px" class="cls_023"><span class="cls_023">Description</span></div>
<div style="position:absolute;left:114.25px;top:328.64px" class="cls_023"><span class="cls_023">State</span></div>
<div style="position:absolute;left:114.25px;top:351.23px" class="cls_011"><span class="cls_011">STARTING</span></div>
<div style="position:absolute;left:217.75px;top:351.20px" class="cls_011"><span class="cls_011">The virtual machine is in the process of booting.</span></div>
<div style="position:absolute;left:114.25px;top:373.73px" class="cls_011"><span class="cls_011">STARTED</span></div>
<div style="position:absolute;left:217.75px;top:373.70px" class="cls_011"><span class="cls_011">The virtual machine is running and available (or, when booting, soon</span></div>
<div style="position:absolute;left:217.75px;top:385.69px" class="cls_011"><span class="cls_011">will be).</span></div>
<div style="position:absolute;left:114.25px;top:408.23px" class="cls_011"><span class="cls_011">STOPPING</span></div>
<div style="position:absolute;left:217.75px;top:408.19px" class="cls_011"><span class="cls_011">The virtual machine is in the process of shutting down.</span></div>
<div style="position:absolute;left:114.25px;top:430.72px" class="cls_011"><span class="cls_011">STOPPED</span></div>
<div style="position:absolute;left:217.75px;top:430.69px" class="cls_011"><span class="cls_011">The virtual machine is completely shut down. Upon starting, the virtual</span></div>
<div style="position:absolute;left:217.75px;top:442.69px" class="cls_011"><span class="cls_011">machine boots into the same state as when it was shut down (the disk</span></div>
<div style="position:absolute;left:217.75px;top:454.69px" class="cls_011"><span class="cls_011">will have been preserved).</span></div>
<div style="position:absolute;left:114.25px;top:477.22px" class="cls_011"><span class="cls_011">PUBLISHING</span></div>
<div style="position:absolute;left:217.75px;top:477.18px" class="cls_011"><span class="cls_011">The initial creation of the virtual machine is being performed.</span></div>
<div style="position:absolute;left:114.25px;top:499.71px" class="cls_011"><span class="cls_011">WAITING_TO_START</span></div>
<div style="position:absolute;left:217.75px;top:499.68px" class="cls_011"><span class="cls_011">The virtual machine is waiting for other virtual machines to start.</span></div>
<div style="position:absolute;left:108.00px;top:525.43px" class="cls_011"><span class="cls_011">Depending on the state of a machine, a selection of the following actions is available.</span></div>
<div style="position:absolute;left:108.00px;top:551.37px" class="cls_022"><span class="cls_022">Classroom/Machine Actions</span></div>
<div style="position:absolute;left:114.25px;top:577.62px" class="cls_023"><span class="cls_023">Button or Action</span></div>
<div style="position:absolute;left:217.75px;top:577.62px" class="cls_023"><span class="cls_023">Description</span></div>
<div style="position:absolute;left:114.25px;top:600.21px" class="cls_011"><span class="cls_011">PROVISION LAB</span></div>
<div style="position:absolute;left:217.75px;top:600.18px" class="cls_011"><span class="cls_011">Create the ROL classroom. Creates all of the virtual machines needed</span></div>
<div style="position:absolute;left:217.75px;top:612.17px" class="cls_011"><span class="cls_011">for the classroom and starts them. This can take several minutes to</span></div>
<div style="position:absolute;left:217.75px;top:624.17px" class="cls_011"><span class="cls_011">complete.</span></div>
<div style="position:absolute;left:114.25px;top:646.70px" class="cls_011"><span class="cls_011">DELETE LAB</span></div>
<div style="position:absolute;left:217.75px;top:646.67px" class="cls_011"><span class="cls_011">Delete the ROL classroom. Destroys all virtual machines in the</span></div>
<div style="position:absolute;left:217.75px;top:658.67px" class="cls_011"><span class="cls_011">classroom. </span><span class="cls_022">Caution: Any work generated on the disks is lost.</span></div>
<div style="position:absolute;left:114.25px;top:681.20px" class="cls_011"><span class="cls_011">START LAB</span></div>
<div style="position:absolute;left:217.75px;top:681.17px" class="cls_011"><span class="cls_011">Start all virtual machines in the classroom.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:510.68px;top:751.59px" class="cls_013"><span class="cls_013">xi</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:8822px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background012.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_019"><span class="cls_019">Introduction</span></div>
<div style="position:absolute;left:96.25px;top:60.17px" class="cls_023"><span class="cls_023">Button or Action</span></div>
<div style="position:absolute;left:199.75px;top:60.17px" class="cls_023"><span class="cls_023">Description</span></div>
<div style="position:absolute;left:96.25px;top:82.76px" class="cls_011"><span class="cls_011">SHUTDOWN LAB</span></div>
<div style="position:absolute;left:199.75px;top:82.72px" class="cls_011"><span class="cls_011">Stop all virtual machines in the classroom.</span></div>
<div style="position:absolute;left:96.25px;top:105.25px" class="cls_011"><span class="cls_011">OPEN CONSOLE</span></div>
<div style="position:absolute;left:199.75px;top:105.22px" class="cls_011"><span class="cls_011">Open a new tab in the browser and connect to the console of the</span></div>
<div style="position:absolute;left:199.75px;top:117.22px" class="cls_011"><span class="cls_011">virtual machine. Students can log in directly to the virtual machine</span></div>
<div style="position:absolute;left:199.75px;top:129.22px" class="cls_011"><span class="cls_011">and run commands. In most cases, students should log in to the</span></div>
<div style="position:absolute;left:199.75px;top:141.22px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011"> virtual machine and use </span><span class="cls_021">ssh</span><span class="cls_011"> to connect to the other</span></div>
<div style="position:absolute;left:199.75px;top:153.21px" class="cls_011"><span class="cls_011">virtual machines.</span></div>
<div style="position:absolute;left:96.25px;top:173.85px" class="cls_011"><span class="cls_011">ACTION</span><span class="cls_025"> → </span><span class="cls_011">Start</span></div>
<div style="position:absolute;left:199.75px;top:175.71px" class="cls_011"><span class="cls_011">Start (power on) the virtual machine.</span></div>
<div style="position:absolute;left:96.25px;top:196.34px" class="cls_011"><span class="cls_011">ACTION</span><span class="cls_025"> →</span></div>
<div style="position:absolute;left:199.75px;top:198.21px" class="cls_011"><span class="cls_011">Gracefully shut down the virtual machine, preserving the contents of</span></div>
<div style="position:absolute;left:96.25px;top:210.24px" class="cls_011"><span class="cls_011">Shutdown</span></div>
<div style="position:absolute;left:199.75px;top:210.21px" class="cls_011"><span class="cls_011">its disk.</span></div>
<div style="position:absolute;left:96.25px;top:230.84px" class="cls_011"><span class="cls_011">ACTION</span><span class="cls_025"> → </span><span class="cls_011">Power</span></div>
<div style="position:absolute;left:199.75px;top:232.71px" class="cls_011"><span class="cls_011">Forcefully shut down the virtual machine, preserving the contents of its</span></div>
<div style="position:absolute;left:96.25px;top:244.74px" class="cls_011"><span class="cls_011">Off</span></div>
<div style="position:absolute;left:199.75px;top:244.70px" class="cls_011"><span class="cls_011">disk. This is equivalent to removing the power from a physical machine.</span></div>
<div style="position:absolute;left:96.25px;top:265.33px" class="cls_011"><span class="cls_011">ACTION</span><span class="cls_025"> → </span><span class="cls_011">Reset</span></div>
<div style="position:absolute;left:199.75px;top:267.20px" class="cls_011"><span class="cls_011">Forcefully shut down the virtual machine and reset the disk to its initial</span></div>
<div style="position:absolute;left:199.75px;top:279.20px" class="cls_011"><span class="cls_011">state. </span><span class="cls_022">Caution: Any work generated on the disk is lost.</span></div>
<div style="position:absolute;left:90.00px;top:303.05px" class="cls_011"><span class="cls_011">At the start of an exercise, if instructed to reset a single virtual machine node, click ACTION</span><span class="cls_025"> →</span></div>
<div style="position:absolute;left:90.00px;top:316.95px" class="cls_011"><span class="cls_011">Reset for only the specific virtual machine.</span></div>
<div style="position:absolute;left:90.00px;top:336.54px" class="cls_011"><span class="cls_011">At the start of an exercise, if instructed to reset all virtual machines, click ACTION</span><span class="cls_025"> → </span><span class="cls_011">Reset</span></div>
<div style="position:absolute;left:90.00px;top:359.94px" class="cls_011"><span class="cls_011">If you want to return the classroom environment to its original state at the start of the course,</span></div>
<div style="position:absolute;left:90.00px;top:371.94px" class="cls_011"><span class="cls_011">you can click DELETE LAB to remove the entire classroom environment. After the lab has been</span></div>
<div style="position:absolute;left:90.00px;top:383.94px" class="cls_011"><span class="cls_011">deleted, click PROVISION LAB to provision a new set of classroom systems.</span></div>
<div style="position:absolute;left:126.00px;top:414.96px" class="cls_015"><span class="cls_015">Warning</span></div>
<div style="position:absolute;left:126.00px;top:429.34px" class="cls_011"><span class="cls_011">The DELETE LAB operation cannot be undone. Any work you have completed in the</span></div>
<div style="position:absolute;left:126.00px;top:441.33px" class="cls_011"><span class="cls_011">classroom environment up to that point will be lost.</span></div>
<div style="position:absolute;left:90.00px;top:477.30px" class="cls_002"><span class="cls_002">The Autostop Timer</span></div>
<div style="position:absolute;left:90.00px;top:499.23px" class="cls_011"><span class="cls_011">The Red Hat Online Learning enrollment entitles students to a certain amount of computer time.</span></div>
<div style="position:absolute;left:90.00px;top:511.23px" class="cls_011"><span class="cls_011">To help conserve allotted computer time, the ROL classroom has an associated countdown timer,</span></div>
<div style="position:absolute;left:90.00px;top:523.23px" class="cls_011"><span class="cls_011">which shuts down the classroom environment when the timer expires.</span></div>
<div style="position:absolute;left:90.00px;top:544.73px" class="cls_011"><span class="cls_011">To adjust the timer, click MODIFY to display the New Autostop Time dialog box. Set the number</span></div>
<div style="position:absolute;left:90.00px;top:556.72px" class="cls_011"><span class="cls_011">of hours and minutes until the classroom should automatically stop. Note that there is a maximum</span></div>
<div style="position:absolute;left:90.00px;top:568.72px" class="cls_011"><span class="cls_011">time of ten hours. Click ADJUST TIME to apply this change to the timer settings.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">xii</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:9624px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background013.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_019"><span class="cls_019">Introduction</span></div>
<div style="position:absolute;left:108.00px;top:83.06px" class="cls_014"><span class="cls_014">Internationalization</span></div>
<div style="position:absolute;left:108.00px;top:134.26px" class="cls_024"><span class="cls_024">Per-user Language Selection</span></div>
<div style="position:absolute;left:108.00px;top:158.98px" class="cls_011"><span class="cls_011">Your users might prefer to use a different language for their desktop environment than the</span></div>
<div style="position:absolute;left:108.00px;top:170.97px" class="cls_011"><span class="cls_011">system-wide default. They might also want to use a different keyboard layout or input method for</span></div>
<div style="position:absolute;left:108.00px;top:182.97px" class="cls_011"><span class="cls_011">their account.</span></div>
<div style="position:absolute;left:108.00px;top:207.03px" class="cls_002"><span class="cls_002">Language Settings</span></div>
<div style="position:absolute;left:108.00px;top:228.97px" class="cls_011"><span class="cls_011">In the GNOME desktop environment, the user might be prompted to set their preferred language</span></div>
<div style="position:absolute;left:108.00px;top:240.97px" class="cls_011"><span class="cls_011">and input method on first login. If not, then the easiest way for an individual user to adjust their</span></div>
<div style="position:absolute;left:108.00px;top:252.97px" class="cls_011"><span class="cls_011">preferred language and input method settings is to use the Region & Language application.</span></div>
<div style="position:absolute;left:108.00px;top:274.46px" class="cls_011"><span class="cls_011">You can start this application in two ways. You can run the command </span><span class="cls_021">gnome-control-center</span></div>
<div style="position:absolute;left:108.00px;top:286.46px" class="cls_021"><span class="cls_021">region</span><span class="cls_011"> from a terminal window, or on the top bar, from the system menu in the right corner,</span></div>
<div style="position:absolute;left:108.00px;top:298.46px" class="cls_011"><span class="cls_011">select the settings button (which has a crossed screwdriver and wrench for an icon) from the</span></div>
<div style="position:absolute;left:108.00px;top:310.46px" class="cls_011"><span class="cls_011">bottom left of the menu.</span></div>
<div style="position:absolute;left:108.00px;top:331.96px" class="cls_011"><span class="cls_011">In the window that opens, select Region & Language. Click the Language box and select the</span></div>
<div style="position:absolute;left:108.00px;top:343.95px" class="cls_011"><span class="cls_011">preferred language from the list that appears. This also updates the Formats setting to the default</span></div>
<div style="position:absolute;left:108.00px;top:355.95px" class="cls_011"><span class="cls_011">for that language. The next time you log in, these changes will take full effect.</span></div>
<div style="position:absolute;left:108.00px;top:377.45px" class="cls_011"><span class="cls_011">These settings affect the GNOME desktop environment and any applications such as </span><span class="cls_021">gnome-</span></div>
<div style="position:absolute;left:108.00px;top:389.45px" class="cls_021"><span class="cls_021">terminal</span><span class="cls_011"> that are started inside it. However, by default they do not apply to that account if</span></div>
<div style="position:absolute;left:108.00px;top:401.45px" class="cls_011"><span class="cls_011">accessed through an </span><span class="cls_021">ssh</span><span class="cls_011"> login from a remote system or a text-based login on a virtual console</span></div>
<div style="position:absolute;left:108.00px;top:413.44px" class="cls_011"><span class="cls_011">(such as </span><span class="cls_021">tty5</span><span class="cls_011">).</span></div>
<div style="position:absolute;left:144.00px;top:446.37px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:460.74px" class="cls_011"><span class="cls_011">You can make your shell environment use the same </span><span class="cls_021">LANG</span><span class="cls_011"> setting as your graphical</span></div>
<div style="position:absolute;left:144.00px;top:472.74px" class="cls_011"><span class="cls_011">environment, even when you log in through a text-based virtual console or over</span></div>
<div style="position:absolute;left:144.00px;top:484.74px" class="cls_021"><span class="cls_021">ssh</span><span class="cls_011">. One way to do this is to place code similar to the following in your </span><span class="cls_021">~/.bashrc</span></div>
<div style="position:absolute;left:144.00px;top:496.74px" class="cls_011"><span class="cls_011">file. This example code will set the language used on a text login to match the one</span></div>
<div style="position:absolute;left:144.00px;top:508.73px" class="cls_011"><span class="cls_011">currently set for the user's GNOME desktop environment:</span></div>
<div style="position:absolute;left:128.72px;top:536.45px" class="cls_026"><span class="cls_026">i=$(grep 'Language=' /var/lib/AccountsService/users/${USER} \</span></div>
<div style="position:absolute;left:138.32px;top:548.45px" class="cls_026"><span class="cls_026">| sed 's/Language=//')</span></div>
<div style="position:absolute;left:128.72px;top:560.45px" class="cls_026"><span class="cls_026">if [ "$i" != "" ]; then</span></div>
<div style="position:absolute;left:147.92px;top:572.45px" class="cls_026"><span class="cls_026">export LANG=$i</span></div>
<div style="position:absolute;left:128.72px;top:584.44px" class="cls_026"><span class="cls_026">fi</span></div>
<div style="position:absolute;left:144.00px;top:612.22px" class="cls_011"><span class="cls_011">Japanese, Korean, Chinese, and other languages with a non-Latin character set</span></div>
<div style="position:absolute;left:144.00px;top:624.22px" class="cls_011"><span class="cls_011">might not display properly on text-based virtual consoles.</span></div>
<div style="position:absolute;left:108.00px;top:662.12px" class="cls_011"><span class="cls_011">Individual commands can be made to use another language by setting the </span><span class="cls_021">LANG</span><span class="cls_011"> variable on the</span></div>
<div style="position:absolute;left:108.00px;top:674.12px" class="cls_011"><span class="cls_011">command line:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:506.76px;top:751.59px" class="cls_013"><span class="cls_013">xiii</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:10426px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background014.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_019"><span class="cls_019">Introduction</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">[user@host ~]$ </span><span class="cls_027">LANG=fr_FR.utf8 date</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">jeu. avril 25 17:55:01 CET 2019</span></div>
<div style="position:absolute;left:90.00px;top:101.47px" class="cls_011"><span class="cls_011">Subsequent commands will revert to using the system's default language for output. The </span><span class="cls_021">locale</span></div>
<div style="position:absolute;left:90.00px;top:113.47px" class="cls_011"><span class="cls_011">command can be used to determine the current value of </span><span class="cls_021">LANG</span><span class="cls_011"> and other related environment</span></div>
<div style="position:absolute;left:90.00px;top:125.47px" class="cls_011"><span class="cls_011">variables.</span></div>
<div style="position:absolute;left:90.00px;top:149.53px" class="cls_002"><span class="cls_002">Input Method Settings</span></div>
<div style="position:absolute;left:90.00px;top:171.47px" class="cls_011"><span class="cls_011">GNOME 3 in Red Hat Enterprise Linux 7 or later automatically uses the IBus input method</span></div>
<div style="position:absolute;left:90.00px;top:183.46px" class="cls_011"><span class="cls_011">selection system, which makes it easy to change keyboard layouts and input methods quickly.</span></div>
<div style="position:absolute;left:90.00px;top:204.96px" class="cls_011"><span class="cls_011">The Region & Language application can also be used to enable alternative input methods. In the</span></div>
<div style="position:absolute;left:90.00px;top:216.96px" class="cls_011"><span class="cls_011">Region & Language application window, the Input Sources box shows what input methods are</span></div>
<div style="position:absolute;left:90.00px;top:228.96px" class="cls_011"><span class="cls_011">currently available. By default, English (US) may be the only available method. Highlight English</span></div>
<div style="position:absolute;left:90.00px;top:240.96px" class="cls_011"><span class="cls_011">(US) and click the keyboard icon to see the current keyboard layout.</span></div>
<div style="position:absolute;left:90.00px;top:262.45px" class="cls_011"><span class="cls_011">To add another input method, click the + button at the bottom left of the Input Sources window.</span></div>
<div style="position:absolute;left:90.00px;top:274.45px" class="cls_011"><span class="cls_011">An Add an Input Source window will open. Select your language, and then your preferred input</span></div>
<div style="position:absolute;left:90.00px;top:286.45px" class="cls_011"><span class="cls_011">method or keyboard layout.</span></div>
<div style="position:absolute;left:90.00px;top:307.95px" class="cls_011"><span class="cls_011">When more than one input method is configured, the user can switch between them quickly by</span></div>
<div style="position:absolute;left:90.00px;top:319.95px" class="cls_011"><span class="cls_011">typing </span><span class="cls_021">Super</span><span class="cls_011">+</span><span class="cls_021">Space</span><span class="cls_011"> (sometimes called </span><span class="cls_021">Windows</span><span class="cls_011">+</span><span class="cls_021">Space</span><span class="cls_011">). A status indicator will also appear in</span></div>
<div style="position:absolute;left:90.00px;top:331.94px" class="cls_011"><span class="cls_011">the GNOME top bar, which has two functions: It indicates which input method is active, and acts</span></div>
<div style="position:absolute;left:90.00px;top:343.94px" class="cls_011"><span class="cls_011">as a menu that can be used to switch between input methods or select advanced features of more</span></div>
<div style="position:absolute;left:90.00px;top:355.94px" class="cls_011"><span class="cls_011">complex input methods.</span></div>
<div style="position:absolute;left:90.00px;top:377.44px" class="cls_011"><span class="cls_011">Some of the methods are marked with gears, which indicate that those methods have advanced</span></div>
<div style="position:absolute;left:90.00px;top:389.44px" class="cls_011"><span class="cls_011">configuration options and capabilities. For example, the Japanese Japanese (Kana Kanji) input</span></div>
<div style="position:absolute;left:90.00px;top:401.43px" class="cls_011"><span class="cls_011">method allows the user to pre-edit text in Latin and use </span><span class="cls_021">Down Arrow</span><span class="cls_011"> and </span><span class="cls_021">Up Arrow</span><span class="cls_011"> keys to</span></div>
<div style="position:absolute;left:90.00px;top:413.43px" class="cls_011"><span class="cls_011">select the correct characters to use.</span></div>
<div style="position:absolute;left:90.00px;top:434.93px" class="cls_011"><span class="cls_011">US English speakers may also find this useful. For example, under English (United States) is the</span></div>
<div style="position:absolute;left:90.00px;top:446.93px" class="cls_011"><span class="cls_011">keyboard layout English (international AltGr dead keys), which treats </span><span class="cls_021">AltGr</span><span class="cls_011"> (or the right </span><span class="cls_021">Alt</span><span class="cls_011">)</span></div>
<div style="position:absolute;left:90.00px;top:458.93px" class="cls_011"><span class="cls_011">on a PC 104/105-key keyboard as a "secondary shift" modifier key and dead key activation key for</span></div>
<div style="position:absolute;left:90.00px;top:470.92px" class="cls_011"><span class="cls_011">typing additional characters. There are also Dvorak and other alternative layouts available.</span></div>
<div style="position:absolute;left:126.00px;top:502.12px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:516.50px" class="cls_011"><span class="cls_011">Any Unicode character can be entered in the GNOME desktop environment if you</span></div>
<div style="position:absolute;left:126.00px;top:528.50px" class="cls_011"><span class="cls_011">know the character's Unicode code point. Type </span><span class="cls_021">Ctrl</span><span class="cls_011">+</span><span class="cls_021">Shift</span><span class="cls_011">+</span><span class="cls_021">U</span><span class="cls_011">, followed by the</span></div>
<div style="position:absolute;left:126.00px;top:540.49px" class="cls_011"><span class="cls_011">code point. After </span><span class="cls_021">Ctrl</span><span class="cls_011">+</span><span class="cls_021">Shift</span><span class="cls_011">+</span><span class="cls_021">U</span><span class="cls_011"> has been typed, an underlined </span><span class="cls_021">u</span><span class="cls_011"> will be displayed</span></div>
<div style="position:absolute;left:126.00px;top:552.49px" class="cls_011"><span class="cls_011">to indicate that the system is waiting for Unicode code point entry.</span></div>
<div style="position:absolute;left:126.00px;top:573.99px" class="cls_011"><span class="cls_011">For example, the lowercase Greek letter lambda has the code point U+03BB, and</span></div>
<div style="position:absolute;left:126.00px;top:585.99px" class="cls_011"><span class="cls_011">can be entered by typing </span><span class="cls_021">Ctrl</span><span class="cls_011">+</span><span class="cls_021">Shift</span><span class="cls_011">+</span><span class="cls_021">U</span><span class="cls_011">, then </span><span class="cls_021">03BB</span><span class="cls_011">, then </span><span class="cls_021">Enter</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:622.17px" class="cls_024"><span class="cls_024">System-wide Default Language Settings</span></div>
<div style="position:absolute;left:90.00px;top:646.89px" class="cls_011"><span class="cls_011">The system's default language is set to US English, using the UTF-8 encoding of Unicode as its</span></div>
<div style="position:absolute;left:90.00px;top:658.88px" class="cls_011"><span class="cls_011">character set (</span><span class="cls_021">en_US.utf8</span><span class="cls_011">), but this can be changed during or after installation.</span></div>
<div style="position:absolute;left:90.00px;top:680.38px" class="cls_011"><span class="cls_011">From the command line, the </span><span class="cls_021">root</span><span class="cls_011"> user can change the system-wide locale settings with the</span></div>
<div style="position:absolute;left:90.00px;top:692.38px" class="cls_021"><span class="cls_021">localectl</span><span class="cls_011"> command. If </span><span class="cls_021">localectl</span><span class="cls_011"> is run with no arguments, it displays the current system-</span></div>
<div style="position:absolute;left:90.00px;top:704.38px" class="cls_011"><span class="cls_011">wide locale settings.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">xiv</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:11228px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background015.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_019"><span class="cls_019">Introduction</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">To set the system-wide default language, run the command </span><span class="cls_021">localectl set-locale</span></div>
<div style="position:absolute;left:108.00px;top:65.97px" class="cls_021"><span class="cls_021">LANG=</span><span class="cls_028">locale</span><span class="cls_011">, where locale is the appropriate value for the </span><span class="cls_021">LANG</span><span class="cls_011"> environment variable from the</span></div>
<div style="position:absolute;left:108.00px;top:77.97px" class="cls_011"><span class="cls_011">"Language Codes Reference" table in this chapter. The change will take effect for users on their</span></div>
<div style="position:absolute;left:108.00px;top:89.97px" class="cls_011"><span class="cls_011">next login, and is stored in </span><span class="cls_021">/etc/locale.conf</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:117.69px" class="cls_026"><span class="cls_026">[root@host ~]# </span><span class="cls_027">localectl set-locale LANG=fr_FR.utf8</span></div>
<div style="position:absolute;left:108.00px;top:145.47px" class="cls_011"><span class="cls_011">In GNOME, an administrative user can change this setting from Region & Language by clicking</span></div>
<div style="position:absolute;left:108.00px;top:157.46px" class="cls_011"><span class="cls_011">the Login Screen button at the upper-right corner of the window. Changing the Language of the</span></div>
<div style="position:absolute;left:108.00px;top:169.46px" class="cls_011"><span class="cls_011">graphical login screen will also adjust the system-wide default language setting stored in the </span><span class="cls_021">/</span></div>
<div style="position:absolute;left:108.00px;top:181.46px" class="cls_021"><span class="cls_021">etc/locale.conf</span><span class="cls_011"> configuration file.</span></div>
<div style="position:absolute;left:144.00px;top:214.38px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:144.00px;top:228.76px" class="cls_011"><span class="cls_011">Text-based virtual consoles such as </span><span class="cls_021">tty4</span><span class="cls_011"> are more limited in the fonts they can</span></div>
<div style="position:absolute;left:144.00px;top:240.76px" class="cls_011"><span class="cls_011">display than terminals in a virtual console running a graphical environment, or</span></div>
<div style="position:absolute;left:144.00px;top:252.75px" class="cls_011"><span class="cls_011">pseudo-terminals for </span><span class="cls_021">ssh</span><span class="cls_011"> sessions. For example, Japanese, Korean, and Chinese</span></div>
<div style="position:absolute;left:144.00px;top:264.75px" class="cls_011"><span class="cls_011">characters may not display as expected on a text-based virtual console. For</span></div>
<div style="position:absolute;left:144.00px;top:276.75px" class="cls_011"><span class="cls_011">this reason, you should consider using English or another language with a Latin</span></div>
<div style="position:absolute;left:144.00px;top:288.75px" class="cls_011"><span class="cls_011">character set for the system-wide default.</span></div>
<div style="position:absolute;left:144.00px;top:310.25px" class="cls_011"><span class="cls_011">Likewise, text-based virtual consoles are more limited in the input methods they</span></div>
<div style="position:absolute;left:144.00px;top:322.24px" class="cls_011"><span class="cls_011">support, and this is managed separately from the graphical desktop environment.</span></div>
<div style="position:absolute;left:144.00px;top:334.24px" class="cls_011"><span class="cls_011">The available global input settings can be configured through </span><span class="cls_021">localectl</span><span class="cls_011"> for both</span></div>
<div style="position:absolute;left:144.00px;top:346.24px" class="cls_011"><span class="cls_011">text-based virtual consoles and the graphical environment. See the </span><span class="cls_021">localectl</span><span class="cls_011">(1)</span></div>
<div style="position:absolute;left:144.00px;top:358.24px" class="cls_011"><span class="cls_011">and </span><span class="cls_021">vconsole.conf</span><span class="cls_011">(5) man pages for more information.</span></div>
<div style="position:absolute;left:108.00px;top:394.42px" class="cls_024"><span class="cls_024">Language Packs</span></div>
<div style="position:absolute;left:108.00px;top:419.14px" class="cls_011"><span class="cls_011">Special RPM packages called langpacks install language packages that add support for specific</span></div>
<div style="position:absolute;left:108.00px;top:431.13px" class="cls_011"><span class="cls_011">languages. These langpacks use dependencies to automatically install additional RPM packages</span></div>
<div style="position:absolute;left:108.00px;top:443.13px" class="cls_011"><span class="cls_011">containing localizations, dictionaries, and translations for other software packages on your system.</span></div>
<div style="position:absolute;left:108.00px;top:464.63px" class="cls_011"><span class="cls_011">To list the langpacks that are installed and that may be installed, use </span><span class="cls_021">yum list langpacks-*</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:119.00px;top:492.35px" class="cls_026"><span class="cls_026">[root@host ~]# </span><span class="cls_027">yum list langpacks-*</span></div>
<div style="position:absolute;left:119.00px;top:504.34px" class="cls_026"><span class="cls_026">Updating Subscription Management repositories.</span></div>
<div style="position:absolute;left:119.00px;top:516.34px" class="cls_026"><span class="cls_026">Updating Subscription Management repositories.</span></div>
<div style="position:absolute;left:119.00px;top:528.34px" class="cls_026"><span class="cls_026">Installed Packages</span></div>
<div style="position:absolute;left:119.00px;top:540.34px" class="cls_026"><span class="cls_026">langpacks-en.noarch</span></div>
<div style="position:absolute;left:239.00px;top:540.34px" class="cls_026"><span class="cls_026">1.0-12.el8</span></div>
<div style="position:absolute;left:325.40px;top:540.34px" class="cls_026"><span class="cls_026">@AppStream</span></div>
<div style="position:absolute;left:119.00px;top:552.34px" class="cls_026"><span class="cls_026">Available Packages</span></div>
<div style="position:absolute;left:119.00px;top:564.34px" class="cls_026"><span class="cls_026">langpacks-af.noarch</span></div>
<div style="position:absolute;left:239.00px;top:564.34px" class="cls_026"><span class="cls_026">1.0-12.el8</span></div>
<div style="position:absolute;left:325.40px;top:564.34px" class="cls_026"><span class="cls_026">rhel-8-for-x86_64-appstream-rpms</span></div>
<div style="position:absolute;left:119.00px;top:576.33px" class="cls_026"><span class="cls_026">langpacks-am.noarch</span></div>
<div style="position:absolute;left:239.00px;top:576.33px" class="cls_026"><span class="cls_026">1.0-12.el8</span></div>
<div style="position:absolute;left:325.40px;top:576.33px" class="cls_026"><span class="cls_026">rhel-8-for-x86_64-appstream-rpms</span></div>
<div style="position:absolute;left:119.00px;top:588.33px" class="cls_026"><span class="cls_026">langpacks-ar.noarch</span></div>
<div style="position:absolute;left:239.00px;top:588.33px" class="cls_026"><span class="cls_026">1.0-12.el8</span></div>
<div style="position:absolute;left:325.40px;top:588.33px" class="cls_026"><span class="cls_026">rhel-8-for-x86_64-appstream-rpms</span></div>
<div style="position:absolute;left:119.00px;top:600.33px" class="cls_026"><span class="cls_026">langpacks-as.noarch</span></div>
<div style="position:absolute;left:239.00px;top:600.33px" class="cls_026"><span class="cls_026">1.0-12.el8</span></div>
<div style="position:absolute;left:325.40px;top:600.33px" class="cls_026"><span class="cls_026">rhel-8-for-x86_64-appstream-rpms</span></div>
<div style="position:absolute;left:119.00px;top:612.33px" class="cls_026"><span class="cls_026">langpacks-ast.noarch</span></div>
<div style="position:absolute;left:239.00px;top:612.33px" class="cls_026"><span class="cls_026">1.0-12.el8</span></div>
<div style="position:absolute;left:325.40px;top:612.33px" class="cls_026"><span class="cls_026">rhel-8-for-x86_64-appstream-rpms</span></div>
<div style="position:absolute;left:119.00px;top:624.33px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:108.00px;top:652.10px" class="cls_011"><span class="cls_011">To add language support, install the appropriate langpacks package. For example, the following</span></div>
<div style="position:absolute;left:108.00px;top:664.10px" class="cls_011"><span class="cls_011">command adds support for French:</span></div>
<div style="position:absolute;left:119.00px;top:691.82px" class="cls_026"><span class="cls_026">[root@host ~]# </span><span class="cls_027">yum install langpacks-fr</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:508.11px;top:751.59px" class="cls_013"><span class="cls_013">xv</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:12030px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background016.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_019"><span class="cls_019">Introduction</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_011"><span class="cls_011">Use </span><span class="cls_021">yum repoquery --whatsupplements</span><span class="cls_011"> to determine what RPM packages may be installed</span></div>
<div style="position:absolute;left:90.00px;top:65.97px" class="cls_011"><span class="cls_011">by a langpack:</span></div>
<div style="position:absolute;left:101.00px;top:93.69px" class="cls_026"><span class="cls_026">[root@host ~]# </span><span class="cls_027">yum repoquery --whatsupplements langpacks-fr</span></div>
<div style="position:absolute;left:101.00px;top:105.69px" class="cls_026"><span class="cls_026">Updating Subscription Management repositories.</span></div>
<div style="position:absolute;left:101.00px;top:117.69px" class="cls_026"><span class="cls_026">Updating Subscription Management repositories.</span></div>
<div style="position:absolute;left:101.00px;top:129.68px" class="cls_026"><span class="cls_026">Last metadata expiration check: 0:01:33 ago on Wed 06 Feb 2019 10:47:24 AM CST.</span></div>
<div style="position:absolute;left:101.00px;top:141.68px" class="cls_026"><span class="cls_026">glibc-langpack-fr-0:2.28-18.el8.x86_64</span></div>
<div style="position:absolute;left:101.00px;top:153.68px" class="cls_026"><span class="cls_026">gnome-getting-started-docs-fr-0:3.28.2-1.el8.noarch</span></div>
<div style="position:absolute;left:101.00px;top:165.68px" class="cls_026"><span class="cls_026">hunspell-fr-0:6.2-1.el8.noarch</span></div>
<div style="position:absolute;left:101.00px;top:177.68px" class="cls_026"><span class="cls_026">hyphen-fr-0:3.0-1.el8.noarch</span></div>
<div style="position:absolute;left:101.00px;top:189.68px" class="cls_026"><span class="cls_026">libreoffice-langpack-fr-1:6.0.6.1-9.el8.x86_64</span></div>
<div style="position:absolute;left:101.00px;top:201.67px" class="cls_026"><span class="cls_026">man-pages-fr-0:3.70-16.el8.noarch</span></div>
<div style="position:absolute;left:101.00px;top:213.67px" class="cls_026"><span class="cls_026">mythes-fr-0:2.3-10.el8.noarch</span></div>
<div style="position:absolute;left:126.00px;top:252.87px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:126.00px;top:267.25px" class="cls_011"><span class="cls_011">Langpacks packages use RPM weak dependencies in order to install supplementary</span></div>
<div style="position:absolute;left:126.00px;top:279.25px" class="cls_011"><span class="cls_011">packages only when the core package that needs it is also installed.</span></div>
<div style="position:absolute;left:126.00px;top:300.75px" class="cls_011"><span class="cls_011">For example, when installing langpacks-fr as shown in the preceding examples, the</span></div>
<div style="position:absolute;left:126.00px;top:312.74px" class="cls_011"><span class="cls_011">mythes-fr package will only be installed if the mythes thesaurus is also installed on</span></div>
<div style="position:absolute;left:126.00px;top:324.74px" class="cls_011"><span class="cls_011">the system.</span></div>
<div style="position:absolute;left:126.00px;top:346.24px" class="cls_011"><span class="cls_011">If mythes is subsequently installed on that system, the mythes-fr package will also</span></div>
<div style="position:absolute;left:126.00px;top:358.24px" class="cls_011"><span class="cls_011">automatically be installed due to the weak dependency from the already installed</span></div>
<div style="position:absolute;left:126.00px;top:370.24px" class="cls_011"><span class="cls_011">langpacks-fr package.</span></div>
<div style="position:absolute;left:126.00px;top:417.66px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:126.00px;top:432.03px" class="cls_021"><span class="cls_021">locale</span><span class="cls_011">(7), </span><span class="cls_021">localectl</span><span class="cls_011">(1), </span><span class="cls_021">locale.conf</span><span class="cls_011">(5), </span><span class="cls_021">vconsole.conf</span><span class="cls_011">(5), </span><span class="cls_021">unicode</span><span class="cls_011">(7),</span></div>
<div style="position:absolute;left:126.00px;top:444.03px" class="cls_011"><span class="cls_011">and </span><span class="cls_021">utf-8</span><span class="cls_011">(7) man pages</span></div>
<div style="position:absolute;left:126.00px;top:465.53px" class="cls_011"><span class="cls_011">Conversions between the names of the graphical desktop environment's X11 layouts</span></div>
<div style="position:absolute;left:126.00px;top:477.53px" class="cls_011"><span class="cls_011">and their names in </span><span class="cls_021">localectl</span><span class="cls_011"> can be found in the file </span><span class="cls_021">/usr/share/X11/xkb/</span></div>
<div style="position:absolute;left:126.00px;top:489.53px" class="cls_021"><span class="cls_021">rules/base.lst</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:525.71px" class="cls_024"><span class="cls_024">Language Codes Reference</span></div>
<div style="position:absolute;left:126.00px;top:559.95px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:574.32px" class="cls_011"><span class="cls_011">This table might not reflect all langpacks available on your system. Use </span><span class="cls_021">yum info</span></div>
<div style="position:absolute;left:126.00px;top:586.32px" class="cls_021"><span class="cls_021">langpacks-</span><span class="cls_028">SUFFIX</span><span class="cls_011"> to get more information about any particular langpacks</span></div>
<div style="position:absolute;left:126.00px;top:598.32px" class="cls_011"><span class="cls_011">package.</span></div>
<div style="position:absolute;left:90.00px;top:633.16px" class="cls_022"><span class="cls_022">Language Codes</span></div>
<div style="position:absolute;left:96.25px;top:659.41px" class="cls_023"><span class="cls_023">Language</span></div>
<div style="position:absolute;left:303.25px;top:659.41px" class="cls_023"><span class="cls_023">Langpacks Suffix</span></div>
<div style="position:absolute;left:406.75px;top:659.41px" class="cls_023"><span class="cls_023">$LANG value</span></div>
<div style="position:absolute;left:96.25px;top:682.00px" class="cls_011"><span class="cls_011">English (US)</span></div>
<div style="position:absolute;left:303.25px;top:681.97px" class="cls_011"><span class="cls_011">en</span></div>
<div style="position:absolute;left:406.75px;top:681.97px" class="cls_011"><span class="cls_011">en_US.utf8</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">xvi</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:12832px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background017.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_019"><span class="cls_019">Introduction</span></div>
<div style="position:absolute;left:114.25px;top:60.17px" class="cls_023"><span class="cls_023">Language</span></div>
<div style="position:absolute;left:321.25px;top:60.17px" class="cls_023"><span class="cls_023">Langpacks Suffix</span></div>
<div style="position:absolute;left:424.75px;top:60.17px" class="cls_023"><span class="cls_023">$LANG value</span></div>
<div style="position:absolute;left:114.25px;top:82.76px" class="cls_011"><span class="cls_011">Assamese</span></div>
<div style="position:absolute;left:321.25px;top:82.72px" class="cls_011"><span class="cls_011">as</span></div>
<div style="position:absolute;left:424.75px;top:82.72px" class="cls_011"><span class="cls_011">as_IN.utf8</span></div>
<div style="position:absolute;left:114.25px;top:105.25px" class="cls_011"><span class="cls_011">Bengali</span></div>
<div style="position:absolute;left:321.25px;top:105.22px" class="cls_011"><span class="cls_011">bn</span></div>
<div style="position:absolute;left:424.75px;top:105.22px" class="cls_011"><span class="cls_011">bn_IN.utf8</span></div>
<div style="position:absolute;left:114.25px;top:127.75px" class="cls_011"><span class="cls_011">Chinese (Simplified)</span></div>
<div style="position:absolute;left:321.25px;top:127.72px" class="cls_011"><span class="cls_011">zh_CN</span></div>
<div style="position:absolute;left:424.75px;top:127.72px" class="cls_011"><span class="cls_011">zh_CN.utf8</span></div>
<div style="position:absolute;left:114.25px;top:150.25px" class="cls_011"><span class="cls_011">Chinese (Traditional)</span></div>
<div style="position:absolute;left:321.25px;top:150.22px" class="cls_011"><span class="cls_011">zh_TW</span></div>
<div style="position:absolute;left:424.75px;top:150.22px" class="cls_011"><span class="cls_011">zh_TW.utf8</span></div>
<div style="position:absolute;left:114.25px;top:172.75px" class="cls_011"><span class="cls_011">French</span></div>
<div style="position:absolute;left:321.25px;top:172.72px" class="cls_011"><span class="cls_011">fr</span></div>
<div style="position:absolute;left:424.75px;top:172.72px" class="cls_011"><span class="cls_011">fr_FR.utf8</span></div>
<div style="position:absolute;left:114.25px;top:195.25px" class="cls_011"><span class="cls_011">German</span></div>
<div style="position:absolute;left:321.25px;top:195.21px" class="cls_011"><span class="cls_011">de</span></div>
<div style="position:absolute;left:424.75px;top:195.21px" class="cls_011"><span class="cls_011">de_DE.utf8</span></div>
<div style="position:absolute;left:114.25px;top:217.74px" class="cls_011"><span class="cls_011">Gujarati</span></div>
<div style="position:absolute;left:321.25px;top:217.71px" class="cls_011"><span class="cls_011">gu</span></div>
<div style="position:absolute;left:424.75px;top:217.71px" class="cls_011"><span class="cls_011">gu_IN.utf8</span></div>
<div style="position:absolute;left:114.25px;top:240.24px" class="cls_011"><span class="cls_011">Hindi</span></div>
<div style="position:absolute;left:321.25px;top:240.21px" class="cls_011"><span class="cls_011">hi</span></div>
<div style="position:absolute;left:424.75px;top:240.21px" class="cls_011"><span class="cls_011">hi_IN.utf8</span></div>
<div style="position:absolute;left:114.25px;top:262.74px" class="cls_011"><span class="cls_011">Italian</span></div>
<div style="position:absolute;left:321.25px;top:262.71px" class="cls_011"><span class="cls_011">it</span></div>
<div style="position:absolute;left:424.75px;top:262.71px" class="cls_011"><span class="cls_011">it_IT.utf8</span></div>
<div style="position:absolute;left:114.25px;top:285.24px" class="cls_011"><span class="cls_011">Japanese</span></div>
<div style="position:absolute;left:321.25px;top:285.21px" class="cls_011"><span class="cls_011">ja</span></div>
<div style="position:absolute;left:424.75px;top:285.21px" class="cls_011"><span class="cls_011">ja_JP.utf8</span></div>
<div style="position:absolute;left:114.25px;top:307.74px" class="cls_011"><span class="cls_011">Kannada</span></div>
<div style="position:absolute;left:321.25px;top:307.70px" class="cls_011"><span class="cls_011">kn</span></div>
<div style="position:absolute;left:424.75px;top:307.70px" class="cls_011"><span class="cls_011">kn_IN.utf8</span></div>
<div style="position:absolute;left:114.25px;top:330.23px" class="cls_011"><span class="cls_011">Korean</span></div>
<div style="position:absolute;left:321.25px;top:330.20px" class="cls_011"><span class="cls_011">ko</span></div>
<div style="position:absolute;left:424.75px;top:330.20px" class="cls_011"><span class="cls_011">ko_KR.utf8</span></div>
<div style="position:absolute;left:114.25px;top:352.73px" class="cls_011"><span class="cls_011">Malayalam</span></div>
<div style="position:absolute;left:321.25px;top:352.70px" class="cls_011"><span class="cls_011">ml</span></div>
<div style="position:absolute;left:424.75px;top:352.70px" class="cls_011"><span class="cls_011">ml_IN.utf8</span></div>
<div style="position:absolute;left:114.25px;top:375.23px" class="cls_011"><span class="cls_011">Marathi</span></div>
<div style="position:absolute;left:321.25px;top:375.20px" class="cls_011"><span class="cls_011">mr</span></div>
<div style="position:absolute;left:424.75px;top:375.20px" class="cls_011"><span class="cls_011">mr_IN.utf8</span></div>
<div style="position:absolute;left:114.25px;top:397.73px" class="cls_011"><span class="cls_011">Odia</span></div>
<div style="position:absolute;left:321.25px;top:397.70px" class="cls_011"><span class="cls_011">or</span></div>
<div style="position:absolute;left:424.75px;top:397.70px" class="cls_011"><span class="cls_011">or_IN.utf8</span></div>
<div style="position:absolute;left:114.25px;top:420.23px" class="cls_011"><span class="cls_011">Portuguese (Brazilian)</span></div>
<div style="position:absolute;left:321.25px;top:420.19px" class="cls_011"><span class="cls_011">pt_BR</span></div>
<div style="position:absolute;left:424.75px;top:420.19px" class="cls_011"><span class="cls_011">pt_BR.utf8</span></div>
<div style="position:absolute;left:114.25px;top:442.73px" class="cls_011"><span class="cls_011">Punjabi</span></div>
<div style="position:absolute;left:321.25px;top:442.69px" class="cls_011"><span class="cls_011">pa</span></div>
<div style="position:absolute;left:424.75px;top:442.69px" class="cls_011"><span class="cls_011">pa_IN.utf8</span></div>
<div style="position:absolute;left:114.25px;top:465.22px" class="cls_011"><span class="cls_011">Russian</span></div>
<div style="position:absolute;left:321.25px;top:465.19px" class="cls_011"><span class="cls_011">ru</span></div>
<div style="position:absolute;left:424.75px;top:465.19px" class="cls_011"><span class="cls_011">ru_RU.utf8</span></div>
<div style="position:absolute;left:114.25px;top:487.72px" class="cls_011"><span class="cls_011">Spanish</span></div>
<div style="position:absolute;left:321.25px;top:487.69px" class="cls_011"><span class="cls_011">es</span></div>
<div style="position:absolute;left:424.75px;top:487.69px" class="cls_011"><span class="cls_011">es_ES.utf8</span></div>
<div style="position:absolute;left:114.25px;top:510.22px" class="cls_011"><span class="cls_011">Tamil</span></div>
<div style="position:absolute;left:321.25px;top:510.19px" class="cls_011"><span class="cls_011">ta</span></div>
<div style="position:absolute;left:424.75px;top:510.19px" class="cls_011"><span class="cls_011">ta_IN.utf8</span></div>
<div style="position:absolute;left:114.25px;top:532.72px" class="cls_011"><span class="cls_011">Telugu</span></div>
<div style="position:absolute;left:321.25px;top:532.68px" class="cls_011"><span class="cls_011">te</span></div>
<div style="position:absolute;left:424.75px;top:532.68px" class="cls_011"><span class="cls_011">te_IN.utf8</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.17px;top:751.59px" class="cls_013"><span class="cls_013">xvii</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:13634px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background018.jpg" width=612 height=792></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">xviii</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:14436px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background019.jpg" width=612 height=792></div>
<div style="position:absolute;left:126.00px;top:69.76px" class="cls_030"><span class="cls_030">Chapter 1</span></div>
<div style="position:absolute;left:126.00px;top:148.50px" class="cls_031"><span class="cls_031">Introducing Container</span></div>
<div style="position:absolute;left:126.00px;top:175.50px" class="cls_031"><span class="cls_031">Technology</span></div>
<div style="position:absolute;left:146.00px;top:228.67px" class="cls_018"><span class="cls_018">Goal</span></div>
<div style="position:absolute;left:252.88px;top:228.01px" class="cls_008"><span class="cls_008">Describe how applications run in containers</span></div>
<div style="position:absolute;left:252.88px;top:240.01px" class="cls_008"><span class="cls_008">orchestrated by Red Hat OpenShift Container</span></div>
<div style="position:absolute;left:252.88px;top:252.01px" class="cls_008"><span class="cls_008">Platform.</span></div>
<div style="position:absolute;left:146.00px;top:280.67px" class="cls_018"><span class="cls_018">Objectives</span></div>
<div style="position:absolute;left:252.88px;top:280.01px" class="cls_008"><span class="cls_008">•  Describe the difference between container</span></div>
<div style="position:absolute;left:267.88px;top:292.01px" class="cls_008"><span class="cls_008">applications and traditional deployments.</span></div>
<div style="position:absolute;left:252.88px;top:308.01px" class="cls_008"><span class="cls_008">•  Describe the basics of container architecture.</span></div>
<div style="position:absolute;left:252.88px;top:324.01px" class="cls_008"><span class="cls_008">•  Describe the benefits of orchestrating</span></div>
<div style="position:absolute;left:267.88px;top:336.01px" class="cls_008"><span class="cls_008">applications and OpenShift Container Platform.</span></div>
<div style="position:absolute;left:146.00px;top:364.67px" class="cls_018"><span class="cls_018">Sections</span></div>
<div style="position:absolute;left:252.88px;top:364.01px" class="cls_008"><span class="cls_008">•  Overview of Container Technology (and Quiz)</span></div>
<div style="position:absolute;left:252.88px;top:380.01px" class="cls_008"><span class="cls_008">•  Overview of Container Architecture (and Quiz)</span></div>
<div style="position:absolute;left:252.88px;top:396.01px" class="cls_008"><span class="cls_008">•  Overview of Kubernetes and OpenShift (and</span></div>
<div style="position:absolute;left:267.88px;top:408.01px" class="cls_008"><span class="cls_008">Quiz)</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:514.20px;top:751.59px" class="cls_013"><span class="cls_013">1</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:15238px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background020.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Overview of Container Technology</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to describe the difference between</span></div>
<div style="position:absolute;left:90.00px;top:170.97px" class="cls_011"><span class="cls_011">container applications and traditional deployments.</span></div>
<div style="position:absolute;left:90.00px;top:193.26px" class="cls_024"><span class="cls_024">Containerized Applications</span></div>
<div style="position:absolute;left:90.00px;top:217.97px" class="cls_011"><span class="cls_011">Software applications typically depend on other libraries, configuration files, or services that</span></div>
<div style="position:absolute;left:90.00px;top:229.97px" class="cls_011"><span class="cls_011">are provided by the runtime environment. The traditional runtime environment for a software</span></div>
<div style="position:absolute;left:90.00px;top:241.97px" class="cls_011"><span class="cls_011">application is a physical host or virtual machine, and application dependencies are installed as part</span></div>
<div style="position:absolute;left:90.00px;top:253.97px" class="cls_011"><span class="cls_011">of the host.</span></div>
<div style="position:absolute;left:90.00px;top:275.46px" class="cls_011"><span class="cls_011">For example, consider a Python application that requires access to a common shared library that</span></div>
<div style="position:absolute;left:90.00px;top:287.46px" class="cls_011"><span class="cls_011">implements the TLS protocol. Traditionally, a system administrator installs the required package</span></div>
<div style="position:absolute;left:90.00px;top:299.46px" class="cls_011"><span class="cls_011">that provides the shared library before installing the Python application.</span></div>
<div style="position:absolute;left:90.00px;top:320.96px" class="cls_011"><span class="cls_011">The major drawback to traditionally deployed software application is that the application's</span></div>
<div style="position:absolute;left:90.00px;top:332.96px" class="cls_011"><span class="cls_011">dependencies are entangled with the runtime environment. An application may break when any</span></div>
<div style="position:absolute;left:90.00px;top:344.95px" class="cls_011"><span class="cls_011">updates or patches are applied to the base operating system (OS).</span></div>
<div style="position:absolute;left:90.00px;top:366.45px" class="cls_011"><span class="cls_011">For example, an OS update to the TLS shared library removes TLS 1.0 as a supported protocol.</span></div>
<div style="position:absolute;left:90.00px;top:378.45px" class="cls_011"><span class="cls_011">This breaks the deployed Python application because it is written to use the TLS 1.0 protocol for</span></div>
<div style="position:absolute;left:90.00px;top:390.45px" class="cls_011"><span class="cls_011">network requests. This forces the system administrator to roll back the OS update to keep the</span></div>
<div style="position:absolute;left:90.00px;top:402.45px" class="cls_011"><span class="cls_011">application running, preventing other applications from using the benefits of the updated package.</span></div>
<div style="position:absolute;left:90.00px;top:414.44px" class="cls_011"><span class="cls_011">Therefore, a company developing traditional software applications may require a full set of tests to</span></div>
<div style="position:absolute;left:90.00px;top:426.44px" class="cls_011"><span class="cls_011">guarantee that an OS update does not affect applications running on the host.</span></div>
<div style="position:absolute;left:90.00px;top:447.94px" class="cls_011"><span class="cls_011">Furthermore, a traditionally deployed application must be stopped before updating the associated</span></div>
<div style="position:absolute;left:90.00px;top:459.94px" class="cls_011"><span class="cls_011">dependencies. To minimize application downtime, organizations design and implement complex</span></div>
<div style="position:absolute;left:90.00px;top:471.94px" class="cls_011"><span class="cls_011">systems to provide high availability of their applications. Maintaining multiple applications on a</span></div>
<div style="position:absolute;left:90.00px;top:483.93px" class="cls_011"><span class="cls_011">single host often becomes cumbersome, and any deployment or update has the potential to break</span></div>
<div style="position:absolute;left:90.00px;top:495.93px" class="cls_011"><span class="cls_011">one of the organization's applications.</span></div>
<div style="position:absolute;left:90.00px;top:517.43px" class="cls_011"><span class="cls_011">Figure 1.1 describes the difference between applications running as containers and applications</span></div>
<div style="position:absolute;left:90.00px;top:529.43px" class="cls_011"><span class="cls_011">running on the host operating system.</span></div>
<div style="position:absolute;left:183.23px;top:691.09px" class="cls_020"><span class="cls_020">Figure 1.1: Container versus operating system differences</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">2</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:16040px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background021.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">Alternatively, a software application can be deployed using a container. A container is a set of one</span></div>
<div style="position:absolute;left:108.00px;top:65.97px" class="cls_011"><span class="cls_011">or more processes that are isolated from the rest of the system. Containers provide many of the</span></div>
<div style="position:absolute;left:108.00px;top:77.97px" class="cls_011"><span class="cls_011">same benefits as virtual machines, such as security, storage, and network isolation. Containers</span></div>
<div style="position:absolute;left:108.00px;top:89.97px" class="cls_011"><span class="cls_011">require far fewer hardware resources and are quick to start and terminate. They also isolate the</span></div>
<div style="position:absolute;left:108.00px;top:101.97px" class="cls_011"><span class="cls_011">libraries and the runtime resources (such as CPU and storage) for an application to minimize the</span></div>
<div style="position:absolute;left:108.00px;top:113.97px" class="cls_011"><span class="cls_011">impact of any OS update to the host OS, as described in Figure 1.1.</span></div>
<div style="position:absolute;left:108.00px;top:135.46px" class="cls_011"><span class="cls_011">The use of containers not only helps with the efficiency, elasticity, and reusability of the hosted</span></div>
<div style="position:absolute;left:108.00px;top:147.46px" class="cls_011"><span class="cls_011">applications, but also with application portability. The Open Container Initiative provides a</span></div>
<div style="position:absolute;left:108.00px;top:159.46px" class="cls_011"><span class="cls_011">set of industry standards that define a container runtime specification and a container image</span></div>
<div style="position:absolute;left:108.00px;top:171.46px" class="cls_011"><span class="cls_011">specification. The image specification defines the format for the bundle of files and metadata that</span></div>
<div style="position:absolute;left:108.00px;top:183.46px" class="cls_011"><span class="cls_011">form a container image. When you build an application as a container image, which complies with</span></div>
<div style="position:absolute;left:108.00px;top:195.45px" class="cls_011"><span class="cls_011">the OCI standard, you can use any OCI-compliant container engine to execute the application.</span></div>
<div style="position:absolute;left:108.00px;top:216.95px" class="cls_011"><span class="cls_011">There are many container engines available to manage and execute individual containers,</span></div>
<div style="position:absolute;left:108.00px;top:228.95px" class="cls_011"><span class="cls_011">including Rocket, Drawbridge, LXC, Docker, and Podman. Podman is available in Red Hat</span></div>
<div style="position:absolute;left:108.00px;top:240.95px" class="cls_011"><span class="cls_011">Enterprise Linux 7.6 and later, and is used in this course to start, manage, and terminate individual</span></div>
<div style="position:absolute;left:108.00px;top:252.95px" class="cls_011"><span class="cls_011">containers.</span></div>
<div style="position:absolute;left:108.00px;top:274.44px" class="cls_011"><span class="cls_011">The following are other major advantages to using containers:</span></div>
<div style="position:absolute;left:108.00px;top:297.84px" class="cls_022"><span class="cls_022">Low hardware footprint</span></div>
<div style="position:absolute;left:126.00px;top:309.84px" class="cls_011"><span class="cls_011">Containers use OS internal features to create an isolated environment where resources are</span></div>
<div style="position:absolute;left:126.00px;top:321.84px" class="cls_011"><span class="cls_011">managed using OS facilities such as namespaces and cgroups. This approach minimizes the</span></div>
<div style="position:absolute;left:126.00px;top:333.84px" class="cls_011"><span class="cls_011">amount of CPU and memory overhead compared to a virtual machine hypervisor. Running an</span></div>
<div style="position:absolute;left:126.00px;top:345.83px" class="cls_011"><span class="cls_011">application in a VM is a way to create isolation from the running environment, but it requires</span></div>
<div style="position:absolute;left:126.00px;top:357.83px" class="cls_011"><span class="cls_011">a heavy layer of services to support the same low hardware footprint isolation provided by</span></div>
<div style="position:absolute;left:126.00px;top:369.83px" class="cls_011"><span class="cls_011">containers.</span></div>
<div style="position:absolute;left:108.00px;top:393.23px" class="cls_022"><span class="cls_022">Environment isolation</span></div>
<div style="position:absolute;left:126.00px;top:405.23px" class="cls_011"><span class="cls_011">Containers work in a closed environment where changes made to the host OS or other</span></div>
<div style="position:absolute;left:126.00px;top:417.22px" class="cls_011"><span class="cls_011">applications do not affect the container. Because the libraries needed by a container are self-</span></div>
<div style="position:absolute;left:126.00px;top:429.22px" class="cls_011"><span class="cls_011">contained, the application can run without disruption. For example, each application can exist</span></div>
<div style="position:absolute;left:126.00px;top:441.22px" class="cls_011"><span class="cls_011">in its own container with its own set of libraries. An update made to one container does not</span></div>
<div style="position:absolute;left:126.00px;top:453.22px" class="cls_011"><span class="cls_011">affect other containers.</span></div>
<div style="position:absolute;left:108.00px;top:476.62px" class="cls_022"><span class="cls_022">Quick deployment</span></div>
<div style="position:absolute;left:126.00px;top:488.61px" class="cls_011"><span class="cls_011">Containers deploy quickly because there is no need to install the entire underlying operating</span></div>
<div style="position:absolute;left:126.00px;top:500.61px" class="cls_011"><span class="cls_011">system. Normally, to support the isolation, a new OS installation is required on a physical host</span></div>
<div style="position:absolute;left:126.00px;top:512.61px" class="cls_011"><span class="cls_011">or VM, and any simple update might require a full OS restart. A container restart does not</span></div>
<div style="position:absolute;left:126.00px;top:524.61px" class="cls_011"><span class="cls_011">require stopping any services on the host OS.</span></div>
<div style="position:absolute;left:108.00px;top:548.01px" class="cls_022"><span class="cls_022">Multiple environment deployment</span></div>
<div style="position:absolute;left:126.00px;top:560.00px" class="cls_011"><span class="cls_011">In a traditional deployment scenario using a single host, any environment differences</span></div>
<div style="position:absolute;left:126.00px;top:572.00px" class="cls_011"><span class="cls_011">could break the application. Using containers, however, all application dependencies and</span></div>
<div style="position:absolute;left:126.00px;top:584.00px" class="cls_011"><span class="cls_011">environment settings are encapsulated in the container image.</span></div>
<div style="position:absolute;left:108.00px;top:607.40px" class="cls_022"><span class="cls_022">Reusability</span></div>
<div style="position:absolute;left:126.00px;top:619.40px" class="cls_011"><span class="cls_011">The same container can be reused without the need to set up a full OS. For example, the</span></div>
<div style="position:absolute;left:126.00px;top:631.39px" class="cls_011"><span class="cls_011">same database container that provides a production database service can be used by</span></div>
<div style="position:absolute;left:126.00px;top:643.39px" class="cls_011"><span class="cls_011">each developer to create a development database during application development. Using</span></div>
<div style="position:absolute;left:126.00px;top:655.39px" class="cls_011"><span class="cls_011">containers, there is no longer a need to maintain separate production and development</span></div>
<div style="position:absolute;left:126.00px;top:667.39px" class="cls_011"><span class="cls_011">database servers. A single container image is used to create instances of the database service.</span></div>
<div style="position:absolute;left:108.00px;top:688.89px" class="cls_011"><span class="cls_011">Often, a software application with all of its dependent services (databases, messaging, file</span></div>
<div style="position:absolute;left:108.00px;top:700.88px" class="cls_011"><span class="cls_011">systems) are made to run in a single container. This can lead to the same problems associated</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:512.28px;top:751.59px" class="cls_013"><span class="cls_013">3</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:16842px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background022.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_011"><span class="cls_011">with traditional software deployments to virtual machines or physical hosts. In these instances, a</span></div>
<div style="position:absolute;left:90.00px;top:65.97px" class="cls_011"><span class="cls_011">multicontainer deployment may be more suitable.</span></div>
<div style="position:absolute;left:90.00px;top:87.47px" class="cls_011"><span class="cls_011">Furthermore, containers are an ideal approach when using microservices for application</span></div>
<div style="position:absolute;left:90.00px;top:99.47px" class="cls_011"><span class="cls_011">development. Each service is encapsulated in a lightweight and reliable container environment</span></div>
<div style="position:absolute;left:90.00px;top:111.47px" class="cls_011"><span class="cls_011">that can be deployed to a production or development environment. The collection of</span></div>
<div style="position:absolute;left:90.00px;top:123.47px" class="cls_011"><span class="cls_011">containerized services required by an application can be hosted on a single machine, removing the</span></div>
<div style="position:absolute;left:90.00px;top:135.46px" class="cls_011"><span class="cls_011">need to manage a machine for each service.</span></div>
<div style="position:absolute;left:90.00px;top:156.96px" class="cls_011"><span class="cls_011">In contrast, many applications are not well suited for a containerized environment. For example,</span></div>
<div style="position:absolute;left:90.00px;top:168.96px" class="cls_011"><span class="cls_011">applications accessing low-level hardware information, such as memory, file systems, and devices</span></div>
<div style="position:absolute;left:90.00px;top:180.96px" class="cls_011"><span class="cls_011">may be unreliable due to container limitations.</span></div>
<div style="position:absolute;left:126.00px;top:211.98px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:126.00px;top:226.30px" class="cls_022"><span class="cls_022">Home - Open Containers Initiative</span></div>
<div style="position:absolute;left:126.00px;top:238.35px" class="cls_033"><span class="cls_033"> </span><A HREF="https://www.opencontainers.org/">https://www.opencontainers.org/</A> </div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">4</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:17644px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background023.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_034"><span class="cls_034">Quiz</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Overview of Container Technology</span></div>
<div style="position:absolute;left:120.00px;top:137.59px" class="cls_011"><span class="cls_011">Choose the correct answers to the following questions:</span></div>
<div style="position:absolute;left:119.41px;top:180.93px" class="cls_035"><span class="cls_035">1.</span></div>
<div style="position:absolute;left:132.00px;top:181.03px" class="cls_035"><span class="cls_035">Which two options are examples of software applications that might run in a container?</span></div>
<div style="position:absolute;left:132.00px;top:196.03px" class="cls_035"><span class="cls_035">(Choose two.)</span></div>
<div style="position:absolute;left:132.00px;top:211.09px" class="cls_011"><span class="cls_011">a. A database-driven Python application accessing services such as a MySQL database, a</span></div>
<div style="position:absolute;left:143.00px;top:226.09px" class="cls_011"><span class="cls_011">file transfer protocol (FTP) server, and a web server on a single physical host.</span></div>
<div style="position:absolute;left:132.00px;top:241.09px" class="cls_011"><span class="cls_011">b. A Java Enterprise Edition application, with an Oracle database, and a message broker</span></div>
<div style="position:absolute;left:143.00px;top:256.09px" class="cls_011"><span class="cls_011">running on a single VM.</span></div>
<div style="position:absolute;left:132.00px;top:271.09px" class="cls_011"><span class="cls_011">c. An I/O monitoring tool responsible for analyzing the traffic and block data transfer.</span></div>
<div style="position:absolute;left:132.00px;top:286.09px" class="cls_011"><span class="cls_011">d. A memory dump application tool capable of taking snapshots from all the memory CPU</span></div>
<div style="position:absolute;left:143.00px;top:301.09px" class="cls_011"><span class="cls_011">caches for debugging purposes.</span></div>
<div style="position:absolute;left:119.41px;top:327.93px" class="cls_035"><span class="cls_035">2.</span></div>
<div style="position:absolute;left:132.00px;top:328.03px" class="cls_035"><span class="cls_035">Which two of the following use cases are best suited for containers? (Choose two.)</span></div>
<div style="position:absolute;left:132.00px;top:343.09px" class="cls_011"><span class="cls_011">a. A software provider needs to distribute software that can be reused by other companies in</span></div>
<div style="position:absolute;left:143.00px;top:358.09px" class="cls_011"><span class="cls_011">a fast and error-free way.</span></div>
<div style="position:absolute;left:132.00px;top:373.09px" class="cls_011"><span class="cls_011">b. A company is deploying applications on a physical host and would like to improve its</span></div>
<div style="position:absolute;left:143.00px;top:388.09px" class="cls_011"><span class="cls_011">performance by using containers.</span></div>
<div style="position:absolute;left:132.00px;top:403.09px" class="cls_011"><span class="cls_011">c. Developers at a company need a disposable environment that mimics the production</span></div>
<div style="position:absolute;left:143.00px;top:418.09px" class="cls_011"><span class="cls_011">environment so that they can quickly test the code they develop.</span></div>
<div style="position:absolute;left:132.00px;top:433.09px" class="cls_011"><span class="cls_011">d. A financial company is implementing a CPU-intensive risk analysis tool on their own</span></div>
<div style="position:absolute;left:143.00px;top:448.09px" class="cls_011"><span class="cls_011">containers to minimize the number of processors needed.</span></div>
<div style="position:absolute;left:119.41px;top:474.93px" class="cls_035"><span class="cls_035">3.</span></div>
<div style="position:absolute;left:132.00px;top:475.03px" class="cls_035"><span class="cls_035">A company is migrating their PHP and Python applications running on the same host to</span></div>
<div style="position:absolute;left:132.00px;top:490.03px" class="cls_035"><span class="cls_035">a new architecture. Due to internal policies, both are using a set of custom made shared</span></div>
<div style="position:absolute;left:132.00px;top:505.03px" class="cls_035"><span class="cls_035">libraries from the OS, but the latest update applied to them as a result of a Python</span></div>
<div style="position:absolute;left:132.00px;top:520.03px" class="cls_035"><span class="cls_035">development team request broke the PHP application. Which two architectures would</span></div>
<div style="position:absolute;left:132.00px;top:535.03px" class="cls_035"><span class="cls_035">provide the best support for both applications? (Choose two.)</span></div>
<div style="position:absolute;left:132.00px;top:550.09px" class="cls_011"><span class="cls_011">a. Deploy each application to different VMs and apply the custom made shared libraries</span></div>
<div style="position:absolute;left:143.00px;top:565.09px" class="cls_011"><span class="cls_011">individually to each VM host.</span></div>
<div style="position:absolute;left:132.00px;top:580.09px" class="cls_011"><span class="cls_011">b. Deploy each application to different containers and apply the custom made shared</span></div>
<div style="position:absolute;left:143.00px;top:595.09px" class="cls_011"><span class="cls_011">libraries individually to each container.</span></div>
<div style="position:absolute;left:132.00px;top:610.09px" class="cls_011"><span class="cls_011">c. Deploy each application to different VMs and apply the custom made shared libraries to</span></div>
<div style="position:absolute;left:143.00px;top:625.09px" class="cls_011"><span class="cls_011">all VM hosts.</span></div>
<div style="position:absolute;left:132.00px;top:640.09px" class="cls_011"><span class="cls_011">d. Deploy each application to different containers and apply the custom made shared</span></div>
<div style="position:absolute;left:143.00px;top:655.09px" class="cls_011"><span class="cls_011">libraries to all containers.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:512.37px;top:751.59px" class="cls_013"><span class="cls_013">5</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:18446px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background024.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:101.41px;top:55.32px" class="cls_035"><span class="cls_035">4. Which three kinds of applications can be packaged as containers for immediate</span></div>
<div style="position:absolute;left:114.00px;top:70.42px" class="cls_035"><span class="cls_035">consumption? (Choose three.)</span></div>
<div style="position:absolute;left:114.00px;top:85.48px" class="cls_011"><span class="cls_011">a. A virtual machine hypervisor</span></div>
<div style="position:absolute;left:114.00px;top:100.48px" class="cls_011"><span class="cls_011">b. A blog software, such as WordPress</span></div>
<div style="position:absolute;left:114.00px;top:115.48px" class="cls_011"><span class="cls_011">c. A database</span></div>
<div style="position:absolute;left:114.00px;top:130.48px" class="cls_011"><span class="cls_011">d. A local file system recovery tool</span></div>
<div style="position:absolute;left:114.00px;top:145.48px" class="cls_011"><span class="cls_011">e. A web server</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">6</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:19248px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background025.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_034"><span class="cls_034">Solution</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Overview of Container Technology</span></div>
<div style="position:absolute;left:120.00px;top:137.59px" class="cls_011"><span class="cls_011">Choose the correct answers to the following questions:</span></div>
<div style="position:absolute;left:119.41px;top:180.93px" class="cls_035"><span class="cls_035">1.</span></div>
<div style="position:absolute;left:132.00px;top:181.03px" class="cls_035"><span class="cls_035">Which two options are examples of software applications that might run in a container?</span></div>
<div style="position:absolute;left:132.00px;top:196.03px" class="cls_035"><span class="cls_035">(Choose two.)</span></div>
<div style="position:absolute;left:132.00px;top:211.09px" class="cls_011"><span class="cls_011">a. A database-driven Python application accessing services such as a MySQL database, a</span></div>
<div style="position:absolute;left:143.00px;top:226.09px" class="cls_011"><span class="cls_011">file transfer protocol (FTP) server, and a web server on a single physical host.</span></div>
<div style="position:absolute;left:132.00px;top:241.09px" class="cls_011"><span class="cls_011">b. A Java Enterprise Edition application, with an Oracle database, and a message broker</span></div>
<div style="position:absolute;left:143.00px;top:256.09px" class="cls_011"><span class="cls_011">running on a single VM.</span></div>
<div style="position:absolute;left:132.00px;top:271.09px" class="cls_011"><span class="cls_011">c.</span><span class="cls_036"> An I/O monitoring tool responsible for analyzing the traffic and block data transfer.</span></div>
<div style="position:absolute;left:132.00px;top:286.09px" class="cls_011"><span class="cls_011">d.</span><span class="cls_036"> A memory dump application tool capable of taking snapshots from all the memory CPU</span></div>
<div style="position:absolute;left:143.00px;top:301.09px" class="cls_036"><span class="cls_036">caches for debugging purposes.</span></div>
<div style="position:absolute;left:119.41px;top:327.93px" class="cls_035"><span class="cls_035">2.</span></div>
<div style="position:absolute;left:132.00px;top:328.03px" class="cls_035"><span class="cls_035">Which two of the following use cases are best suited for containers? (Choose two.)</span></div>
<div style="position:absolute;left:132.00px;top:343.09px" class="cls_011"><span class="cls_011">a. A software provider needs to distribute software that can be reused by other companies in</span></div>
<div style="position:absolute;left:143.00px;top:358.09px" class="cls_011"><span class="cls_011">a fast and error-free way.</span></div>
<div style="position:absolute;left:132.00px;top:373.09px" class="cls_011"><span class="cls_011">b.</span><span class="cls_036"> A company is deploying applications on a physical host and would like to improve its</span></div>
<div style="position:absolute;left:143.00px;top:388.09px" class="cls_036"><span class="cls_036">performance by using containers.</span></div>
<div style="position:absolute;left:132.00px;top:403.09px" class="cls_011"><span class="cls_011">c. Developers at a company need a disposable environment that mimics the production</span></div>
<div style="position:absolute;left:143.00px;top:418.09px" class="cls_011"><span class="cls_011">environment so that they can quickly test the code they develop.</span></div>
<div style="position:absolute;left:132.00px;top:433.09px" class="cls_011"><span class="cls_011">d.</span><span class="cls_036"> A financial company is implementing a CPU-intensive risk analysis tool on their own</span></div>
<div style="position:absolute;left:143.00px;top:448.09px" class="cls_036"><span class="cls_036">containers to minimize the number of processors needed.</span></div>
<div style="position:absolute;left:119.41px;top:474.93px" class="cls_035"><span class="cls_035">3.</span></div>
<div style="position:absolute;left:132.00px;top:475.03px" class="cls_035"><span class="cls_035">A company is migrating their PHP and Python applications running on the same host to</span></div>
<div style="position:absolute;left:132.00px;top:490.03px" class="cls_035"><span class="cls_035">a new architecture. Due to internal policies, both are using a set of custom made shared</span></div>
<div style="position:absolute;left:132.00px;top:505.03px" class="cls_035"><span class="cls_035">libraries from the OS, but the latest update applied to them as a result of a Python</span></div>
<div style="position:absolute;left:132.00px;top:520.03px" class="cls_035"><span class="cls_035">development team request broke the PHP application. Which two architectures would</span></div>
<div style="position:absolute;left:132.00px;top:535.03px" class="cls_035"><span class="cls_035">provide the best support for both applications? (Choose two.)</span></div>
<div style="position:absolute;left:132.00px;top:550.09px" class="cls_011"><span class="cls_011">a. Deploy each application to different VMs and apply the custom made shared libraries</span></div>
<div style="position:absolute;left:143.00px;top:565.09px" class="cls_011"><span class="cls_011">individually to each VM host.</span></div>
<div style="position:absolute;left:132.00px;top:580.09px" class="cls_011"><span class="cls_011">b. Deploy each application to different containers and apply the custom made shared</span></div>
<div style="position:absolute;left:143.00px;top:595.09px" class="cls_011"><span class="cls_011">libraries individually to each container.</span></div>
<div style="position:absolute;left:132.00px;top:610.09px" class="cls_011"><span class="cls_011">c.</span><span class="cls_036"> Deploy each application to different VMs and apply the custom made shared libraries to</span></div>
<div style="position:absolute;left:143.00px;top:625.09px" class="cls_036"><span class="cls_036">all VM hosts.</span></div>
<div style="position:absolute;left:132.00px;top:640.09px" class="cls_011"><span class="cls_011">d.</span><span class="cls_036"> Deploy each application to different containers and apply the custom made shared</span></div>
<div style="position:absolute;left:143.00px;top:655.09px" class="cls_036"><span class="cls_036">libraries to all containers.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:512.36px;top:751.59px" class="cls_013"><span class="cls_013">7</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:20050px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background026.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:101.41px;top:55.32px" class="cls_035"><span class="cls_035">4. Which three kinds of applications can be packaged as containers for immediate</span></div>
<div style="position:absolute;left:114.00px;top:70.42px" class="cls_035"><span class="cls_035">consumption? (Choose three.)</span></div>
<div style="position:absolute;left:114.00px;top:85.48px" class="cls_011"><span class="cls_011">a.</span><span class="cls_036"> A virtual machine hypervisor</span></div>
<div style="position:absolute;left:114.00px;top:100.48px" class="cls_011"><span class="cls_011">b. A blog software, such as WordPress</span></div>
<div style="position:absolute;left:114.00px;top:115.48px" class="cls_011"><span class="cls_011">c. A database</span></div>
<div style="position:absolute;left:114.00px;top:130.48px" class="cls_011"><span class="cls_011">d.</span><span class="cls_036"> A local file system recovery tool</span></div>
<div style="position:absolute;left:114.00px;top:145.48px" class="cls_011"><span class="cls_011">e. A web server</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">8</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:20852px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background027.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:108.00px;top:83.06px" class="cls_014"><span class="cls_014">Overview of Container Architecture</span></div>
<div style="position:absolute;left:108.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:108.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to:</span></div>
<div style="position:absolute;left:108.00px;top:181.30px" class="cls_011"><span class="cls_011">• Describe the architecture of Linux containers.</span></div>
<div style="position:absolute;left:108.00px;top:203.63px" class="cls_011"><span class="cls_011">• Install the </span><span class="cls_021">podman</span><span class="cls_011"> utility to manage containers.</span></div>
<div style="position:absolute;left:108.00px;top:225.91px" class="cls_024"><span class="cls_024">Introducing Container History</span></div>
<div style="position:absolute;left:108.00px;top:250.63px" class="cls_011"><span class="cls_011">Containers have quickly gained popularity in recent years. However, the technology behind</span></div>
<div style="position:absolute;left:108.00px;top:262.62px" class="cls_011"><span class="cls_011">containers has been around for a relatively long time. In 2001, Linux introduced a project named</span></div>
<div style="position:absolute;left:108.00px;top:274.62px" class="cls_011"><span class="cls_011">VServer. VServer was the first attempt at running complete sets of processes inside a single server</span></div>
<div style="position:absolute;left:108.00px;top:286.62px" class="cls_011"><span class="cls_011">with a high degree of isolation.</span></div>
<div style="position:absolute;left:108.00px;top:308.12px" class="cls_011"><span class="cls_011">From VServer, the idea of isolated processes further evolved and became formalized around the</span></div>
<div style="position:absolute;left:108.00px;top:320.12px" class="cls_011"><span class="cls_011">following features of the Linux kernel:</span></div>
<div style="position:absolute;left:108.00px;top:342.44px" class="cls_037"><span class="cls_037">Namespaces</span></div>
<div style="position:absolute;left:126.00px;top:354.44px" class="cls_011"><span class="cls_011">The kernel can isolate specific system resources, usually visible to all processes, by placing</span></div>
<div style="position:absolute;left:126.00px;top:366.44px" class="cls_011"><span class="cls_011">the resources within a namespace. Inside a namespace, only processes that are members of</span></div>
<div style="position:absolute;left:126.00px;top:378.44px" class="cls_011"><span class="cls_011">that namespace can see those resources. Namespaces can include resources like network</span></div>
<div style="position:absolute;left:126.00px;top:390.43px" class="cls_011"><span class="cls_011">interfaces, the process ID list, mount points, IPC resources, and the system's host name</span></div>
<div style="position:absolute;left:126.00px;top:402.43px" class="cls_011"><span class="cls_011">information.</span></div>
<div style="position:absolute;left:108.00px;top:424.76px" class="cls_037"><span class="cls_037">Control groups (cgroups)</span></div>
<div style="position:absolute;left:126.00px;top:436.76px" class="cls_011"><span class="cls_011">Control groups partition sets of processes and their children into groups to manage and</span></div>
<div style="position:absolute;left:126.00px;top:448.75px" class="cls_011"><span class="cls_011">limit the resources they consume. Control groups place restrictions on the amount of system</span></div>
<div style="position:absolute;left:126.00px;top:460.75px" class="cls_011"><span class="cls_011">resources processes might use. Those restrictions keep one process from using too many</span></div>
<div style="position:absolute;left:126.00px;top:472.75px" class="cls_011"><span class="cls_011">resources on the host.</span></div>
<div style="position:absolute;left:108.00px;top:495.07px" class="cls_037"><span class="cls_037">Seccomp</span></div>
<div style="position:absolute;left:126.00px;top:507.07px" class="cls_011"><span class="cls_011">Developed in 2005 and introduced to containers circa 2014, Seccomp limits how processes</span></div>
<div style="position:absolute;left:126.00px;top:519.07px" class="cls_011"><span class="cls_011">could use system calls. Seccomp defines a security profile for processes, whitelisting the</span></div>
<div style="position:absolute;left:126.00px;top:531.07px" class="cls_011"><span class="cls_011">system calls, parameters and file descriptors they are allowed to use.</span></div>
<div style="position:absolute;left:108.00px;top:553.40px" class="cls_037"><span class="cls_037">SELinux</span></div>
<div style="position:absolute;left:126.00px;top:565.39px" class="cls_011"><span class="cls_011">SELinux (Security-Enhanced Linux) is a mandatory access control system for processes.</span></div>
<div style="position:absolute;left:126.00px;top:577.39px" class="cls_011"><span class="cls_011">Linux kernel uses SELinux to protect processes from each other and to protect the host</span></div>
<div style="position:absolute;left:126.00px;top:589.39px" class="cls_011"><span class="cls_011">system from its running processes. Processes run as a confined SELinux type that has limited</span></div>
<div style="position:absolute;left:126.00px;top:601.39px" class="cls_011"><span class="cls_011">access to host system resources.</span></div>
<div style="position:absolute;left:108.00px;top:622.89px" class="cls_011"><span class="cls_011">All of these innovations and features focus around a basic concept: enabling processes to run</span></div>
<div style="position:absolute;left:108.00px;top:634.88px" class="cls_011"><span class="cls_011">isolated while still accessing system resources. This concept is the foundation of container</span></div>
<div style="position:absolute;left:108.00px;top:646.88px" class="cls_011"><span class="cls_011">technology and the basis for all container implementations. Nowadays, containers are processes</span></div>
<div style="position:absolute;left:108.00px;top:658.88px" class="cls_011"><span class="cls_011">in Linux kernel making use of those security features to create an isolated environment. This</span></div>
<div style="position:absolute;left:108.00px;top:670.88px" class="cls_011"><span class="cls_011">environment forbids isolated processes from misusing system or other container resources.</span></div>
<div style="position:absolute;left:108.00px;top:692.37px" class="cls_011"><span class="cls_011">A common use case of containers is having several replicas of the same service (for example,</span></div>
<div style="position:absolute;left:108.00px;top:704.37px" class="cls_011"><span class="cls_011">a database server) in the same host. Each replica has isolated resources (file system, ports,</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:512.16px;top:751.59px" class="cls_013"><span class="cls_013">9</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:21654px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background028.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_011"><span class="cls_011">memory), so there is no need for the service to handle resource sharing. Isolation guarantees that</span></div>
<div style="position:absolute;left:90.00px;top:65.97px" class="cls_011"><span class="cls_011">a malfunctioning or harmful service does not impact other services or containers in the same host,</span></div>
<div style="position:absolute;left:90.00px;top:77.97px" class="cls_011"><span class="cls_011">nor in the underlying system.</span></div>
<div style="position:absolute;left:90.00px;top:100.25px" class="cls_024"><span class="cls_024">Describing Linux Container Architecture</span></div>
<div style="position:absolute;left:90.00px;top:124.97px" class="cls_011"><span class="cls_011">From the Linux kernel perspective, a container is a process with restrictions. However, instead</span></div>
<div style="position:absolute;left:90.00px;top:136.97px" class="cls_011"><span class="cls_011">of running a single binary file, a container runs an image. An image is a file-system bundle that</span></div>
<div style="position:absolute;left:90.00px;top:148.97px" class="cls_011"><span class="cls_011">contains all dependencies required to execute a process: files in the file system, installed packages,</span></div>
<div style="position:absolute;left:90.00px;top:160.96px" class="cls_011"><span class="cls_011">available resources, running processes, and kernel modules.</span></div>
<div style="position:absolute;left:90.00px;top:182.46px" class="cls_011"><span class="cls_011">Like executable files are the foundation for running processes, images are the foundation for</span></div>
<div style="position:absolute;left:90.00px;top:194.46px" class="cls_011"><span class="cls_011">running containers. Running containers use an immutable view of the image, allowing multiple</span></div>
<div style="position:absolute;left:90.00px;top:206.46px" class="cls_011"><span class="cls_011">containers to reuse the same image simultaneously. As images are files, they can be managed by</span></div>
<div style="position:absolute;left:90.00px;top:218.46px" class="cls_011"><span class="cls_011">versioning systems, improving automation on container and image provisioning.</span></div>
<div style="position:absolute;left:90.00px;top:239.95px" class="cls_011"><span class="cls_011">Container images need to be locally available for the container runtime to execute them, but the</span></div>
<div style="position:absolute;left:90.00px;top:251.95px" class="cls_011"><span class="cls_011">images are usually stored and maintained in an image repository. An image repository is just a</span></div>
<div style="position:absolute;left:90.00px;top:263.95px" class="cls_011"><span class="cls_011">service - public or private - where images can be stored, searched and retrieved. Other features</span></div>
<div style="position:absolute;left:90.00px;top:275.95px" class="cls_011"><span class="cls_011">provided by image repositories are remote access, image metadata, authorization or image version</span></div>
<div style="position:absolute;left:90.00px;top:287.95px" class="cls_011"><span class="cls_011">control.</span></div>
<div style="position:absolute;left:90.00px;top:309.44px" class="cls_011"><span class="cls_011">There are many different image repositories available, each one offering different features:</span></div>
<div style="position:absolute;left:90.00px;top:332.66px" class="cls_011"><span class="cls_011">• </span><A HREF="https://registry.redhat.io">Red Hat Container Catalog</A><span class="cls_011"> [<A HREF="https://registry.redhat.io">https://registry.redhat.io</A>]</div>
<div style="position:absolute;left:90.00px;top:355.88px" class="cls_011"><span class="cls_011">• </span><A HREF="https://hub.docker.com">Docker Hub</A><span class="cls_011"> [<A HREF="https://hub.docker.com">https://hub.docker.com</A>]</div>
<div style="position:absolute;left:90.00px;top:379.09px" class="cls_011"><span class="cls_011">• </span><A HREF="https://quay.io/">Red Hat Quay</A><span class="cls_011"> [<A HREF="https://quay.io/">https://quay.io/</A>]</div>
<div style="position:absolute;left:90.00px;top:402.31px" class="cls_011"><span class="cls_011">• </span><A HREF="https://cloud.google.com/container-registry/">Google Container Registry</A><span class="cls_011"> [<A HREF="https://cloud.google.com/container-registry/">https://cloud.google.com/container-registry/</A>]</div>
<div style="position:absolute;left:90.00px;top:425.53px" class="cls_011"><span class="cls_011">• </span><A HREF="https://aws.amazon.com/ecr/">Amazon Elastic Container Registry</A><span class="cls_011"> [<A HREF="https://aws.amazon.com/ecr/">https://aws.amazon.com/ecr/</A>]</div>
<div style="position:absolute;left:90.00px;top:447.03px" class="cls_011"><span class="cls_011">This course uses the public image registry Quay, so students can operate with images without</span></div>
<div style="position:absolute;left:90.00px;top:459.02px" class="cls_011"><span class="cls_011">worrying about interfering with each other.</span></div>
<div style="position:absolute;left:90.00px;top:481.31px" class="cls_024"><span class="cls_024">Managing Containers with Podman</span></div>
<div style="position:absolute;left:90.00px;top:506.02px" class="cls_011"><span class="cls_011">Containers, images, and image registries need to be able to interact with each other. For example,</span></div>
<div style="position:absolute;left:90.00px;top:518.02px" class="cls_011"><span class="cls_011">you need to be able to build images and put them into image registries. You also need to be able</span></div>
<div style="position:absolute;left:90.00px;top:530.02px" class="cls_011"><span class="cls_011">to retrieve an image from the image registry and build a container from that image.</span></div>
<div style="position:absolute;left:90.00px;top:551.52px" class="cls_011"><span class="cls_011">Podman is an open source tool for managing containers and container images and interacting with</span></div>
<div style="position:absolute;left:90.00px;top:563.51px" class="cls_011"><span class="cls_011">image registries. It offers the following key features:</span></div>
<div style="position:absolute;left:90.00px;top:586.73px" class="cls_011"><span class="cls_011">• It uses image format specified by the </span><A HREF="https://www.opencontainers.org">Open Container Initiative</A><span class="cls_011"> [<A HREF="https://www.opencontainers.org">https://</A> </div>
<div style="position:absolute;left:99.50px;top:598.73px" class="cls_011"><span class="cls_011"> </span><A HREF="https://www.opencontainers.org">www.opencontainers.org</A>] (OCI). Those specifications define an standard, community-driven,</div>
<div style="position:absolute;left:99.50px;top:610.73px" class="cls_011"><span class="cls_011">non-proprietary image format.</span></div>
<div style="position:absolute;left:90.00px;top:633.94px" class="cls_011"><span class="cls_011">• Podman stores local images in local file-system. Doing so avoids unnecessary client/server</span></div>
<div style="position:absolute;left:99.50px;top:645.94px" class="cls_011"><span class="cls_011">architecture or having daemons running on local machine.</span></div>
<div style="position:absolute;left:90.00px;top:669.16px" class="cls_011"><span class="cls_011">• Podman follows the same command patterns as the Docker CLI, so there is no need to learn a</span></div>
<div style="position:absolute;left:99.50px;top:681.16px" class="cls_011"><span class="cls_011">new toolset.</span></div>
<div style="position:absolute;left:90.00px;top:704.37px" class="cls_011"><span class="cls_011">• Podman is compatible with Kubernetes. Kubernetes can use Podman to manage its containers.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">10</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:22456px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background029.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">Currently, Podman is only available on Linux systems. To install Podman in Red Hat</span></div>
<div style="position:absolute;left:108.00px;top:65.97px" class="cls_011"><span class="cls_011">Enterprise Linux, Fedora or similar RPM-based systems, run </span><span class="cls_021">sudo yum install podman</span><span class="cls_011"> or</span></div>
<div style="position:absolute;left:108.00px;top:77.97px" class="cls_021"><span class="cls_021">sudo dnf install podman</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:144.00px;top:108.99px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:144.00px;top:123.31px" class="cls_022"><span class="cls_022">Red Hat Quay Container Registry</span></div>
<div style="position:absolute;left:144.00px;top:135.37px" class="cls_033"><span class="cls_033"> </span><A HREF="https://quay.io">https://quay.io</A> </div>
<div style="position:absolute;left:144.00px;top:156.81px" class="cls_022"><span class="cls_022">Podman site</span></div>
<div style="position:absolute;left:144.00px;top:168.86px" class="cls_033"><span class="cls_033"> </span><A HREF="https://podman.io/">https://podman.io/</A> </div>
<div style="position:absolute;left:144.00px;top:190.30px" class="cls_022"><span class="cls_022">Open Container Initiative</span></div>
<div style="position:absolute;left:144.00px;top:202.36px" class="cls_033"><span class="cls_033"> </span><A HREF="https://www.opencontainers.org">https://www.opencontainers.org</A> </div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:511.41px;top:751.59px" class="cls_013"><span class="cls_013">11</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:23258px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background030.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_034"><span class="cls_034">Quiz</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Overview of Container Architecture</span></div>
<div style="position:absolute;left:102.00px;top:137.59px" class="cls_011"><span class="cls_011">Choose the correct answers to the following questions:</span></div>
<div style="position:absolute;left:101.41px;top:180.93px" class="cls_035"><span class="cls_035">1.</span></div>
<div style="position:absolute;left:114.00px;top:181.03px" class="cls_035"><span class="cls_035">Which three of the following Linux features are used for running containers? (Choose</span></div>
<div style="position:absolute;left:114.00px;top:196.03px" class="cls_035"><span class="cls_035">three.)</span></div>
<div style="position:absolute;left:114.00px;top:211.09px" class="cls_011"><span class="cls_011">a. Namespaces</span></div>
<div style="position:absolute;left:114.00px;top:226.09px" class="cls_011"><span class="cls_011">b. Integrity Management</span></div>
<div style="position:absolute;left:114.00px;top:241.09px" class="cls_011"><span class="cls_011">c. Security-Enhanced Linux</span></div>
<div style="position:absolute;left:114.00px;top:256.09px" class="cls_011"><span class="cls_011">d. Control Groups</span></div>
<div style="position:absolute;left:101.41px;top:282.93px" class="cls_035"><span class="cls_035">2.</span></div>
<div style="position:absolute;left:114.00px;top:283.03px" class="cls_035"><span class="cls_035">Which of the following best describes a container image?</span></div>
<div style="position:absolute;left:114.00px;top:298.09px" class="cls_011"><span class="cls_011">a. A virtual machine image from which a container will be created.</span></div>
<div style="position:absolute;left:114.00px;top:313.09px" class="cls_011"><span class="cls_011">b. A container blueprint from which a container will be created.</span></div>
<div style="position:absolute;left:114.00px;top:328.09px" class="cls_011"><span class="cls_011">c. A runtime environment where an application will run.</span></div>
<div style="position:absolute;left:114.00px;top:343.09px" class="cls_011"><span class="cls_011">d. The container's index file used by a registry.</span></div>
<div style="position:absolute;left:101.41px;top:369.93px" class="cls_035"><span class="cls_035">3.</span></div>
<div style="position:absolute;left:114.00px;top:370.03px" class="cls_035"><span class="cls_035">Which three of the following components are common across container architecture</span></div>
<div style="position:absolute;left:114.00px;top:385.03px" class="cls_035"><span class="cls_035">implementations? (Choose three.)</span></div>
<div style="position:absolute;left:114.00px;top:400.09px" class="cls_011"><span class="cls_011">a. Container runtime</span></div>
<div style="position:absolute;left:114.00px;top:415.09px" class="cls_011"><span class="cls_011">b. Container permissions</span></div>
<div style="position:absolute;left:114.00px;top:430.09px" class="cls_011"><span class="cls_011">c. Container images</span></div>
<div style="position:absolute;left:114.00px;top:445.09px" class="cls_011"><span class="cls_011">d. Container registries</span></div>
<div style="position:absolute;left:101.41px;top:471.93px" class="cls_035"><span class="cls_035">4. What is a container in relation to the Linux kernel?</span></div>
<div style="position:absolute;left:114.00px;top:487.09px" class="cls_011"><span class="cls_011">a. A virtual machine.</span></div>
<div style="position:absolute;left:114.00px;top:502.09px" class="cls_011"><span class="cls_011">b. An isolated process with regulated resource access.</span></div>
<div style="position:absolute;left:114.00px;top:517.09px" class="cls_011"><span class="cls_011">c. A set of file-system layers exposed by UnionFS.</span></div>
<div style="position:absolute;left:114.00px;top:532.09px" class="cls_011"><span class="cls_011">d. An external service providing container images.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">12</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:24060px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background031.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_034"><span class="cls_034">Solution</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Overview of Container Architecture</span></div>
<div style="position:absolute;left:120.00px;top:137.59px" class="cls_011"><span class="cls_011">Choose the correct answers to the following questions:</span></div>
<div style="position:absolute;left:119.41px;top:180.93px" class="cls_035"><span class="cls_035">1.</span></div>
<div style="position:absolute;left:132.00px;top:181.03px" class="cls_035"><span class="cls_035">Which three of the following Linux features are used for running containers? (Choose</span></div>
<div style="position:absolute;left:132.00px;top:196.03px" class="cls_035"><span class="cls_035">three.)</span></div>
<div style="position:absolute;left:132.00px;top:211.09px" class="cls_011"><span class="cls_011">a. Namespaces</span></div>
<div style="position:absolute;left:132.00px;top:226.09px" class="cls_011"><span class="cls_011">b.</span><span class="cls_036"> Integrity Management</span></div>
<div style="position:absolute;left:132.00px;top:241.09px" class="cls_011"><span class="cls_011">c. Security-Enhanced Linux</span></div>
<div style="position:absolute;left:132.00px;top:256.09px" class="cls_011"><span class="cls_011">d. Control Groups</span></div>
<div style="position:absolute;left:119.41px;top:282.93px" class="cls_035"><span class="cls_035">2.</span></div>
<div style="position:absolute;left:132.00px;top:283.03px" class="cls_035"><span class="cls_035">Which of the following best describes a container image?</span></div>
<div style="position:absolute;left:132.00px;top:298.09px" class="cls_011"><span class="cls_011">a.</span><span class="cls_036"> A virtual machine image from which a container will be created.</span></div>
<div style="position:absolute;left:132.00px;top:313.09px" class="cls_011"><span class="cls_011">b. A container blueprint from which a container will be created.</span></div>
<div style="position:absolute;left:132.00px;top:328.09px" class="cls_011"><span class="cls_011">c.</span><span class="cls_036"> A runtime environment where an application will run.</span></div>
<div style="position:absolute;left:132.00px;top:343.09px" class="cls_011"><span class="cls_011">d.</span><span class="cls_036"> The container's index file used by a registry.</span></div>
<div style="position:absolute;left:119.41px;top:369.93px" class="cls_035"><span class="cls_035">3.</span></div>
<div style="position:absolute;left:132.00px;top:370.03px" class="cls_035"><span class="cls_035">Which three of the following components are common across container architecture</span></div>
<div style="position:absolute;left:132.00px;top:385.03px" class="cls_035"><span class="cls_035">implementations? (Choose three.)</span></div>
<div style="position:absolute;left:132.00px;top:400.09px" class="cls_011"><span class="cls_011">a. Container runtime</span></div>
<div style="position:absolute;left:132.00px;top:415.09px" class="cls_011"><span class="cls_011">b.</span><span class="cls_036"> Container permissions</span></div>
<div style="position:absolute;left:132.00px;top:430.09px" class="cls_011"><span class="cls_011">c. Container images</span></div>
<div style="position:absolute;left:132.00px;top:445.09px" class="cls_011"><span class="cls_011">d. Container registries</span></div>
<div style="position:absolute;left:119.41px;top:471.93px" class="cls_035"><span class="cls_035">4. What is a container in relation to the Linux kernel?</span></div>
<div style="position:absolute;left:132.00px;top:487.09px" class="cls_011"><span class="cls_011">a.</span><span class="cls_036"> A virtual machine.</span></div>
<div style="position:absolute;left:132.00px;top:502.09px" class="cls_011"><span class="cls_011">b. An isolated process with regulated resource access.</span></div>
<div style="position:absolute;left:132.00px;top:517.09px" class="cls_011"><span class="cls_011">c.</span><span class="cls_036"> A set of file-system layers exposed by UnionFS.</span></div>
<div style="position:absolute;left:132.00px;top:532.09px" class="cls_011"><span class="cls_011">d.</span><span class="cls_036"> An external service providing container images.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:509.49px;top:751.59px" class="cls_013"><span class="cls_013">13</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:24862px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background032.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Overview of Kubernetes and OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to:</span></div>
<div style="position:absolute;left:90.00px;top:180.75px" class="cls_011"><span class="cls_011">• Identify the limitations of Linux containers and the need for container orchestration.</span></div>
<div style="position:absolute;left:90.00px;top:202.52px" class="cls_011"><span class="cls_011">• Describe the Kubernetes container orchestration tool.</span></div>
<div style="position:absolute;left:90.00px;top:224.29px" class="cls_011"><span class="cls_011">• Describe Red Hat OpenShift Container Platform (RHOCP).</span></div>
<div style="position:absolute;left:90.00px;top:246.57px" class="cls_024"><span class="cls_024">Limitations of Containers</span></div>
<div style="position:absolute;left:90.00px;top:271.28px" class="cls_011"><span class="cls_011">Containers provide an easy way to package and run services. As the number of containers</span></div>
<div style="position:absolute;left:90.00px;top:283.28px" class="cls_011"><span class="cls_011">managed by an organization grows, the work of manually starting them rises exponentially along</span></div>
<div style="position:absolute;left:90.00px;top:295.28px" class="cls_011"><span class="cls_011">with the need to quickly respond to external demands.</span></div>
<div style="position:absolute;left:90.00px;top:316.78px" class="cls_011"><span class="cls_011">When using containers in a production environment, enterprises often require:</span></div>
<div style="position:absolute;left:90.00px;top:338.55px" class="cls_011"><span class="cls_011">• Easy communication between a large number of services.</span></div>
<div style="position:absolute;left:90.00px;top:360.32px" class="cls_011"><span class="cls_011">• Resource limits on applications regardless of the number of containers running them.</span></div>
<div style="position:absolute;left:90.00px;top:382.09px" class="cls_011"><span class="cls_011">• Respond to application usage spikes to increase or decrease running containers.</span></div>
<div style="position:absolute;left:90.00px;top:403.86px" class="cls_011"><span class="cls_011">• React to service deterioration.</span></div>
<div style="position:absolute;left:90.00px;top:425.63px" class="cls_011"><span class="cls_011">• Gradually roll out a new release to a set of users.</span></div>
<div style="position:absolute;left:90.00px;top:447.13px" class="cls_011"><span class="cls_011">Enterprises often require a container orchestration technology because container runtimes (such</span></div>
<div style="position:absolute;left:90.00px;top:459.12px" class="cls_011"><span class="cls_011">as Podman) do not adequately address the above requirements.</span></div>
<div style="position:absolute;left:90.00px;top:481.41px" class="cls_024"><span class="cls_024">Kubernetes Overview</span></div>
<div style="position:absolute;left:90.00px;top:506.12px" class="cls_011"><span class="cls_011">Kubernetes is an orchestration service that simplifies the deployment, management, and scaling of</span></div>
<div style="position:absolute;left:90.00px;top:518.12px" class="cls_011"><span class="cls_011">containerized applications.</span></div>
<div style="position:absolute;left:90.00px;top:539.62px" class="cls_011"><span class="cls_011">The smallest unit manageable in Kubernetes is a pod. A pod consists of one or more containers</span></div>
<div style="position:absolute;left:90.00px;top:551.62px" class="cls_011"><span class="cls_011">with its storage resources and IP address that represent a single application. Kubernetes also uses</span></div>
<div style="position:absolute;left:90.00px;top:563.61px" class="cls_011"><span class="cls_011">pods to orchestrate the containers inside it and to limit its resources as a single unit.</span></div>
<div style="position:absolute;left:90.00px;top:585.90px" class="cls_024"><span class="cls_024">Kubernetes Features</span></div>
<div style="position:absolute;left:90.00px;top:610.61px" class="cls_011"><span class="cls_011">Kubernetes offers the following features on top of a container infrastructure:</span></div>
<div style="position:absolute;left:90.00px;top:632.38px" class="cls_022"><span class="cls_022">Service discovery and load balancing</span></div>
<div style="position:absolute;left:108.00px;top:644.38px" class="cls_011"><span class="cls_011">Kubernetes enables inter-service communication by assigning a single DNS entry to each set</span></div>
<div style="position:absolute;left:108.00px;top:656.38px" class="cls_011"><span class="cls_011">of containers. This way, the requesting service only needs to know the target's DNS name,</span></div>
<div style="position:absolute;left:108.00px;top:668.38px" class="cls_011"><span class="cls_011">allowing the cluster to change the container's location and IP address, leaving the service</span></div>
<div style="position:absolute;left:108.00px;top:680.37px" class="cls_011"><span class="cls_011">unaffected. This permits load-balancing the request across the pool of containers providing</span></div>
<div style="position:absolute;left:108.00px;top:692.37px" class="cls_011"><span class="cls_011">the service. For example, Kubernetes can evenly split incoming requests to a MySQL service</span></div>
<div style="position:absolute;left:108.00px;top:704.37px" class="cls_011"><span class="cls_011">taking into account the availability of the pods.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">14</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:25664px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background033.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_022"><span class="cls_022">Horizontal scaling</span></div>
<div style="position:absolute;left:126.00px;top:65.97px" class="cls_011"><span class="cls_011">Applications can scale up and down manually or automatically with configuration set either</span></div>
<div style="position:absolute;left:126.00px;top:77.97px" class="cls_011"><span class="cls_011">with the Kubernetes command-line interface or the web UI.</span></div>
<div style="position:absolute;left:108.00px;top:101.37px" class="cls_022"><span class="cls_022">Self-healing</span></div>
<div style="position:absolute;left:126.00px;top:113.37px" class="cls_011"><span class="cls_011">Kubernetes can use user-defined health checks to monitor containers to restart and</span></div>
<div style="position:absolute;left:126.00px;top:125.37px" class="cls_011"><span class="cls_011">reschedule them in case of failure.</span></div>
<div style="position:absolute;left:108.00px;top:148.76px" class="cls_022"><span class="cls_022">Automated rollout</span></div>
<div style="position:absolute;left:126.00px;top:160.76px" class="cls_011"><span class="cls_011">Kubernetes can gradually roll updates out to your application's containers while checking their</span></div>
<div style="position:absolute;left:126.00px;top:172.76px" class="cls_011"><span class="cls_011">status. If something goes wrong during the rollout, Kubernetes can roll back to the previous</span></div>
<div style="position:absolute;left:126.00px;top:184.76px" class="cls_011"><span class="cls_011">iteration of the deployment.</span></div>
<div style="position:absolute;left:108.00px;top:208.16px" class="cls_022"><span class="cls_022">Secrets and configuration management</span></div>
<div style="position:absolute;left:126.00px;top:220.15px" class="cls_011"><span class="cls_011">You can manage configuration settings and secrets of your applications without rebuilding</span></div>
<div style="position:absolute;left:126.00px;top:232.15px" class="cls_011"><span class="cls_011">containers. Application secrets can be user names, passwords, and service endpoints; any</span></div>
<div style="position:absolute;left:126.00px;top:244.15px" class="cls_011"><span class="cls_011">configuration settings that need to be kept private.</span></div>
<div style="position:absolute;left:108.00px;top:267.55px" class="cls_022"><span class="cls_022">Operators</span></div>
<div style="position:absolute;left:126.00px;top:279.55px" class="cls_011"><span class="cls_011">Operators are packaged Kubernetes applications that also bring the knowledge of the</span></div>
<div style="position:absolute;left:126.00px;top:291.54px" class="cls_011"><span class="cls_011">application's life cycle into the Kubernetes cluster. Applications packaged as Operators use</span></div>
<div style="position:absolute;left:126.00px;top:303.54px" class="cls_011"><span class="cls_011">the Kubernetes API to update the cluster's state reacting to changes in the application state.</span></div>
<div style="position:absolute;left:108.00px;top:325.82px" class="cls_024"><span class="cls_024">OpenShift Overview</span></div>
<div style="position:absolute;left:108.00px;top:350.54px" class="cls_011"><span class="cls_011">Red Hat OpenShift Container Platform (RHOCP) is a set of modular components and services</span></div>
<div style="position:absolute;left:108.00px;top:362.54px" class="cls_011"><span class="cls_011">built on top of a Kubernetes container infrastructure. RHOCP adds the capabilities to provide</span></div>
<div style="position:absolute;left:108.00px;top:374.54px" class="cls_011"><span class="cls_011">a production PaaS platform such as remote management, multitenancy, increased security,</span></div>
<div style="position:absolute;left:108.00px;top:386.53px" class="cls_011"><span class="cls_011">monitoring and auditing, application life-cycle management, and self-service interfaces for</span></div>
<div style="position:absolute;left:108.00px;top:398.53px" class="cls_011"><span class="cls_011">developers.</span></div>
<div style="position:absolute;left:108.00px;top:420.03px" class="cls_011"><span class="cls_011">Beginning with Red Hat OpenShift v4, hosts in an OpenShift cluster all use Red Hat</span></div>
<div style="position:absolute;left:108.00px;top:432.03px" class="cls_011"><span class="cls_011">Enterprise Linux CoreOS as the underlying operating system.</span></div>
<div style="position:absolute;left:108.00px;top:453.53px" class="cls_011"><span class="cls_011">Throughout this course, the terms RHOCP and OpenShift are used to refer to the Red Hat</span></div>
<div style="position:absolute;left:108.00px;top:465.52px" class="cls_011"><span class="cls_011">OpenShift Container Platform.</span></div>
<div style="position:absolute;left:108.00px;top:487.81px" class="cls_024"><span class="cls_024">OpenShift Features</span></div>
<div style="position:absolute;left:108.00px;top:512.52px" class="cls_011"><span class="cls_011">OpenShift adds the following features to a Kubernetes cluster:</span></div>
<div style="position:absolute;left:108.00px;top:535.92px" class="cls_022"><span class="cls_022">Integrated developer workflow</span></div>
<div style="position:absolute;left:126.00px;top:547.92px" class="cls_011"><span class="cls_011">RHOCP integrates a built-in container registry, CI/CD pipelines, and S2I; a tool to build</span></div>
<div style="position:absolute;left:126.00px;top:559.92px" class="cls_011"><span class="cls_011">artifacts from source repositories to container images.</span></div>
<div style="position:absolute;left:108.00px;top:583.31px" class="cls_022"><span class="cls_022">Routes</span></div>
<div style="position:absolute;left:126.00px;top:595.31px" class="cls_011"><span class="cls_011">Easily expose services to the outside world.</span></div>
<div style="position:absolute;left:108.00px;top:618.71px" class="cls_022"><span class="cls_022">Metrics and logging</span></div>
<div style="position:absolute;left:126.00px;top:630.71px" class="cls_011"><span class="cls_011">Include built-in and self-analyzing metrics service and aggregated logging.</span></div>
<div style="position:absolute;left:108.00px;top:654.11px" class="cls_022"><span class="cls_022">Unified UI</span></div>
<div style="position:absolute;left:126.00px;top:666.10px" class="cls_011"><span class="cls_011">OpenShift brings unified tools and a UI to manage all the different capabilities.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:509.58px;top:751.59px" class="cls_013"><span class="cls_013">15</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:26466px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background034.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:126.00px;top:63.50px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:126.00px;top:77.82px" class="cls_022"><span class="cls_022">Production-Grade Container Orchestration - Kubernetes</span></div>
<div style="position:absolute;left:126.00px;top:89.87px" class="cls_033"><span class="cls_033"> </span><A HREF="https://kubernetes.io/">https://kubernetes.io/</A> </div>
<div style="position:absolute;left:126.00px;top:111.32px" class="cls_022"><span class="cls_022">OpenShift: Container Application Platform by Red Hat, Built on Docker and</span></div>
<div style="position:absolute;left:126.00px;top:123.31px" class="cls_022"><span class="cls_022">Kubernetes</span></div>
<div style="position:absolute;left:126.00px;top:135.37px" class="cls_033"><span class="cls_033"> </span><A HREF="https://www.openshift.com/">https://www.openshift.com/</A> </div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">16</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:27268px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background035.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_034"><span class="cls_034">Quiz</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Describing Kubernetes and OpenShift</span></div>
<div style="position:absolute;left:120.00px;top:137.59px" class="cls_011"><span class="cls_011">Choose the correct answers to the following questions:</span></div>
<div style="position:absolute;left:119.41px;top:180.93px" class="cls_035"><span class="cls_035">1.</span></div>
<div style="position:absolute;left:132.00px;top:181.03px" class="cls_035"><span class="cls_035">Which three of the following statements are correct regarding container limitations?</span></div>
<div style="position:absolute;left:132.00px;top:196.03px" class="cls_035"><span class="cls_035">(Choose three.)</span></div>
<div style="position:absolute;left:132.00px;top:211.09px" class="cls_011"><span class="cls_011">a. Containers are easily orchestrated in large numbers.</span></div>
<div style="position:absolute;left:132.00px;top:226.09px" class="cls_011"><span class="cls_011">b. Lack of automation increases response time to problems.</span></div>
<div style="position:absolute;left:132.00px;top:241.09px" class="cls_011"><span class="cls_011">c. Containers do not manage application failure inside them.</span></div>
<div style="position:absolute;left:132.00px;top:256.09px" class="cls_011"><span class="cls_011">d. Containers are not load-balanced.</span></div>
<div style="position:absolute;left:132.00px;top:271.09px" class="cls_011"><span class="cls_011">e. Containers are heavily isolated packaged applications.</span></div>
<div style="position:absolute;left:119.41px;top:297.93px" class="cls_035"><span class="cls_035">2.</span></div>
<div style="position:absolute;left:132.00px;top:298.03px" class="cls_035"><span class="cls_035">Which two of the following statements are correct regarding Kubernetes? (Choose</span></div>
<div style="position:absolute;left:132.00px;top:313.03px" class="cls_035"><span class="cls_035">two.)</span></div>
<div style="position:absolute;left:132.00px;top:328.09px" class="cls_011"><span class="cls_011">a. Kubernetes is a container.</span></div>
<div style="position:absolute;left:132.00px;top:343.09px" class="cls_011"><span class="cls_011">b. Kubernetes can only use Docker containers.</span></div>
<div style="position:absolute;left:132.00px;top:358.09px" class="cls_011"><span class="cls_011">c. Kubernetes is a container orchestration system.</span></div>
<div style="position:absolute;left:132.00px;top:373.09px" class="cls_011"><span class="cls_011">d. Kubernetes simplifies management, deployment, and scaling of containerized</span></div>
<div style="position:absolute;left:143.00px;top:388.09px" class="cls_011"><span class="cls_011">applications.</span></div>
<div style="position:absolute;left:132.00px;top:403.09px" class="cls_011"><span class="cls_011">e. Applications managed in a Kubernetes cluster are harder to maintain.</span></div>
<div style="position:absolute;left:119.41px;top:429.93px" class="cls_035"><span class="cls_035">3.</span></div>
<div style="position:absolute;left:132.00px;top:430.03px" class="cls_035"><span class="cls_035">Which three of the following statements are true regarding Red Hat OpenShift v4?</span></div>
<div style="position:absolute;left:132.00px;top:445.03px" class="cls_035"><span class="cls_035">(Choose three.)</span></div>
<div style="position:absolute;left:132.00px;top:460.09px" class="cls_011"><span class="cls_011">a. OpenShift provides additional features to a Kubernetes infrastructure.</span></div>
<div style="position:absolute;left:132.00px;top:475.09px" class="cls_011"><span class="cls_011">b. Kubernetes and OpenShift are mutually exclusive.</span></div>
<div style="position:absolute;left:132.00px;top:490.09px" class="cls_011"><span class="cls_011">c. OpenShift hosts use Red Hat Enterprise Linux as the base operating system.</span></div>
<div style="position:absolute;left:132.00px;top:505.09px" class="cls_011"><span class="cls_011">d. OpenShift simplifies development incorporating a Source-to-Image technology and CI/</span></div>
<div style="position:absolute;left:143.00px;top:520.09px" class="cls_011"><span class="cls_011">CD pipelines.</span></div>
<div style="position:absolute;left:132.00px;top:535.09px" class="cls_011"><span class="cls_011">e. OpenShift simplifies routing and load balancing.</span></div>
<div style="position:absolute;left:119.41px;top:561.93px" class="cls_035"><span class="cls_035">4. What features does OpenShift offer that extend Kubernetes capabilities? (choose</span></div>
<div style="position:absolute;left:132.00px;top:577.03px" class="cls_035"><span class="cls_035">two.)</span></div>
<div style="position:absolute;left:132.00px;top:592.09px" class="cls_011"><span class="cls_011">a. Operators and the Operator Framework.</span></div>
<div style="position:absolute;left:132.00px;top:607.09px" class="cls_011"><span class="cls_011">b. Routes to expose services to the outside world.</span></div>
<div style="position:absolute;left:132.00px;top:622.09px" class="cls_011"><span class="cls_011">c. An integrated development workflow.</span></div>
<div style="position:absolute;left:132.00px;top:637.09px" class="cls_011"><span class="cls_011">d. Self-healing and health checks.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:509.57px;top:751.59px" class="cls_013"><span class="cls_013">17</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:28070px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background036.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_034"><span class="cls_034">Solution</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Describing Kubernetes and OpenShift</span></div>
<div style="position:absolute;left:102.00px;top:137.59px" class="cls_011"><span class="cls_011">Choose the correct answers to the following questions:</span></div>
<div style="position:absolute;left:101.41px;top:180.93px" class="cls_035"><span class="cls_035">1.</span></div>
<div style="position:absolute;left:114.00px;top:181.03px" class="cls_035"><span class="cls_035">Which three of the following statements are correct regarding container limitations?</span></div>
<div style="position:absolute;left:114.00px;top:196.03px" class="cls_035"><span class="cls_035">(Choose three.)</span></div>
<div style="position:absolute;left:114.00px;top:211.09px" class="cls_011"><span class="cls_011">a.</span><span class="cls_036"> Containers are easily orchestrated in large numbers.</span></div>
<div style="position:absolute;left:114.00px;top:226.09px" class="cls_011"><span class="cls_011">b. Lack of automation increases response time to problems.</span></div>
<div style="position:absolute;left:114.00px;top:241.09px" class="cls_011"><span class="cls_011">c. Containers do not manage application failure inside them.</span></div>
<div style="position:absolute;left:114.00px;top:256.09px" class="cls_011"><span class="cls_011">d. Containers are not load-balanced.</span></div>
<div style="position:absolute;left:114.00px;top:271.09px" class="cls_011"><span class="cls_011">e.</span><span class="cls_036"> Containers are heavily isolated packaged applications.</span></div>
<div style="position:absolute;left:101.41px;top:297.93px" class="cls_035"><span class="cls_035">2.</span></div>
<div style="position:absolute;left:114.00px;top:298.03px" class="cls_035"><span class="cls_035">Which two of the following statements are correct regarding Kubernetes? (Choose</span></div>
<div style="position:absolute;left:114.00px;top:313.03px" class="cls_035"><span class="cls_035">two.)</span></div>
<div style="position:absolute;left:114.00px;top:328.09px" class="cls_011"><span class="cls_011">a.</span><span class="cls_036"> Kubernetes is a container.</span></div>
<div style="position:absolute;left:114.00px;top:343.09px" class="cls_011"><span class="cls_011">b.</span><span class="cls_036"> Kubernetes can only use Docker containers.</span></div>
<div style="position:absolute;left:114.00px;top:358.09px" class="cls_011"><span class="cls_011">c. Kubernetes is a container orchestration system.</span></div>
<div style="position:absolute;left:114.00px;top:373.09px" class="cls_011"><span class="cls_011">d. Kubernetes simplifies management, deployment, and scaling of containerized</span></div>
<div style="position:absolute;left:125.00px;top:388.09px" class="cls_011"><span class="cls_011">applications.</span></div>
<div style="position:absolute;left:114.00px;top:403.09px" class="cls_011"><span class="cls_011">e.</span><span class="cls_036"> Applications managed in a Kubernetes cluster are harder to maintain.</span></div>
<div style="position:absolute;left:101.41px;top:429.93px" class="cls_035"><span class="cls_035">3.</span></div>
<div style="position:absolute;left:114.00px;top:430.03px" class="cls_035"><span class="cls_035">Which three of the following statements are true regarding Red Hat OpenShift v4?</span></div>
<div style="position:absolute;left:114.00px;top:445.03px" class="cls_035"><span class="cls_035">(Choose three.)</span></div>
<div style="position:absolute;left:114.00px;top:460.09px" class="cls_011"><span class="cls_011">a. OpenShift provides additional features to a Kubernetes infrastructure.</span></div>
<div style="position:absolute;left:114.00px;top:475.09px" class="cls_011"><span class="cls_011">b.</span><span class="cls_036"> Kubernetes and OpenShift are mutually exclusive.</span></div>
<div style="position:absolute;left:114.00px;top:490.09px" class="cls_011"><span class="cls_011">c.</span><span class="cls_036"> OpenShift hosts use Red Hat Enterprise Linux as the base operating system.</span></div>
<div style="position:absolute;left:114.00px;top:505.09px" class="cls_011"><span class="cls_011">d. OpenShift simplifies development incorporating a Source-to-Image technology and CI/</span></div>
<div style="position:absolute;left:125.00px;top:520.09px" class="cls_011"><span class="cls_011">CD pipelines.</span></div>
<div style="position:absolute;left:114.00px;top:535.09px" class="cls_011"><span class="cls_011">e. OpenShift simplifies routing and load balancing.</span></div>
<div style="position:absolute;left:101.41px;top:561.93px" class="cls_035"><span class="cls_035">4. What features does OpenShift offer that extend Kubernetes capabilities? (choose</span></div>
<div style="position:absolute;left:114.00px;top:577.03px" class="cls_035"><span class="cls_035">two.)</span></div>
<div style="position:absolute;left:114.00px;top:592.09px" class="cls_011"><span class="cls_011">a.</span><span class="cls_036"> Operators and the Operator Framework.</span></div>
<div style="position:absolute;left:114.00px;top:607.09px" class="cls_011"><span class="cls_011">b. Routes to expose services to the outside world.</span></div>
<div style="position:absolute;left:114.00px;top:622.09px" class="cls_011"><span class="cls_011">c. An integrated development workflow.</span></div>
<div style="position:absolute;left:114.00px;top:637.09px" class="cls_011"><span class="cls_011">d.</span><span class="cls_036"> Self-healing and health checks.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">18</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:28872px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background037.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Configuring the Classroom Environment</span></div>
<div style="position:absolute;left:120.00px;top:137.59px" class="cls_011"><span class="cls_011">In this exercise, you will configure the workstation to access all infrastructure used by this</span></div>
<div style="position:absolute;left:120.00px;top:149.59px" class="cls_011"><span class="cls_011">course.</span></div>
<div style="position:absolute;left:120.00px;top:172.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:120.00px;top:190.59px" class="cls_011"><span class="cls_011">You should be able to:</span></div>
<div style="position:absolute;left:120.00px;top:213.98px" class="cls_011"><span class="cls_011">• Configure your workstation to access an OpenShift cluster, a container image registry, and</span></div>
<div style="position:absolute;left:129.50px;top:225.98px" class="cls_011"><span class="cls_011">a Git repository used throughout the course.</span></div>
<div style="position:absolute;left:120.00px;top:249.38px" class="cls_011"><span class="cls_011">• Fork this course's sample applications repository to your personal GitHub account.</span></div>
<div style="position:absolute;left:120.00px;top:272.78px" class="cls_011"><span class="cls_011">• Clone this course's sample applications repository from your personal GitHub account to</span></div>
<div style="position:absolute;left:129.50px;top:284.78px" class="cls_011"><span class="cls_011">your </span><span class="cls_021">workstation</span><span class="cls_011"> VM.</span></div>
<div style="position:absolute;left:120.00px;top:307.84px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:120.00px;top:325.77px" class="cls_011"><span class="cls_011">To perform this exercise, ensure you have:</span></div>
<div style="position:absolute;left:120.00px;top:349.17px" class="cls_011"><span class="cls_011">• Access to the DO180 course in the Red Hat Training's Online Learning Environment.</span></div>
<div style="position:absolute;left:120.00px;top:372.57px" class="cls_011"><span class="cls_011">• The connection parameters and a developer user account to access an OpenShift cluster</span></div>
<div style="position:absolute;left:129.50px;top:384.57px" class="cls_011"><span class="cls_011">managed by Red Hat Training.</span></div>
<div style="position:absolute;left:120.00px;top:407.97px" class="cls_011"><span class="cls_011">• A personal, free GitHub account. If you need to register to GitHub, see the instructions in</span></div>
<div style="position:absolute;left:129.50px;top:419.96px" class="cls_011"><span class="cls_011">Appendix B, Creating a GitHub Account.</span></div>
<div style="position:absolute;left:120.00px;top:443.36px" class="cls_011"><span class="cls_011">• A personal, free Quay.io account. If you need to register to Quay.io, see the instructions in</span></div>
<div style="position:absolute;left:129.50px;top:455.36px" class="cls_011"><span class="cls_011">Appendix C, Creating a Quay Account.</span></div>
<div style="position:absolute;left:119.41px;top:508.70px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:137.00px;top:508.76px" class="cls_011"><span class="cls_011">Before starting any exercise, you need to configure your </span><span class="cls_021">workstation</span><span class="cls_011"> VM.</span></div>
<div style="position:absolute;left:137.00px;top:524.76px" class="cls_011"><span class="cls_011">For the following steps, use the values the Red Hat Training Online Learning environment</span></div>
<div style="position:absolute;left:137.00px;top:536.76px" class="cls_011"><span class="cls_011">provides to you when you provision your online lab environment:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:509.37px;top:751.59px" class="cls_013"><span class="cls_013">19</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:29674px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background038.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:119.00px;top:325.31px" class="cls_011"><span class="cls_011">Open a terminal on your </span><span class="cls_021">workstation</span><span class="cls_011"> VM and execute the following command. Answer</span></div>
<div style="position:absolute;left:119.00px;top:337.31px" class="cls_011"><span class="cls_011">its interactive prompts to configure your workstation before starting any other exercise in</span></div>
<div style="position:absolute;left:119.00px;top:349.31px" class="cls_011"><span class="cls_011">this course.</span></div>
<div style="position:absolute;left:119.00px;top:365.31px" class="cls_011"><span class="cls_011">If you make a mistake, you can interrupt the command at any time using </span><span class="cls_021">Ctrl</span><span class="cls_011">+</span><span class="cls_021">C</span><span class="cls_011"> and start</span></div>
<div style="position:absolute;left:119.00px;top:377.31px" class="cls_011"><span class="cls_011">over.</span></div>
<div style="position:absolute;left:101.00px;top:405.03px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab-configure</span></div>
<div style="position:absolute;left:119.00px;top:435.71px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:143.70px;top:435.71px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">lab-configure</span><span class="cls_011"> command starts by displaying a series of interactive prompts,</span></div>
<div style="position:absolute;left:143.70px;top:447.71px" class="cls_011"><span class="cls_011">and will try to find some sensible defaults for some of them.</span></div>
<div style="position:absolute;left:101.00px;top:475.43px" class="cls_026"><span class="cls_026">This script configures the connection parameters to access the OpenShift cluster</span></div>
<div style="position:absolute;left:105.80px;top:487.42px" class="cls_026"><span class="cls_026">for your lab scripts</span></div>
<div style="position:absolute;left:105.80px;top:511.42px" class="cls_026"><span class="cls_026">· Enter the API Endpoint: </span><span class="cls_027">https://api.</span><span class="cls_040">cluster.domain.example.com</span><span class="cls_027">:6443</span></div>
<div style="position:absolute;left:105.80px;top:523.42px" class="cls_026"><span class="cls_026">· Enter the Username: </span><span class="cls_040">youruser</span></div>
<div style="position:absolute;left:105.80px;top:535.42px" class="cls_026"><span class="cls_026">· Enter the Password: </span><span class="cls_040">yourpassword</span></div>
<div style="position:absolute;left:105.80px;top:547.41px" class="cls_026"><span class="cls_026">· Enter the GitHub Account Name: </span><span class="cls_040">yourgituser</span></div>
<div style="position:absolute;left:105.80px;top:559.41px" class="cls_026"><span class="cls_026">· Enter the Quay.io Account Name: </span><span class="cls_040">yourquayuser</span></div>
<div style="position:absolute;left:101.00px;top:583.41px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:164.60px;top:613.09px" class="cls_011"><span class="cls_011">The URL to your OpenShift cluster's Master API. Type the URL as a single line,</span></div>
<div style="position:absolute;left:164.60px;top:625.09px" class="cls_011"><span class="cls_011">without spaces or line breaks. Red Hat Training provides this information to you</span></div>
<div style="position:absolute;left:164.60px;top:637.08px" class="cls_011"><span class="cls_011">when you provision your lab environment. You need this information to log in to</span></div>
<div style="position:absolute;left:164.60px;top:649.08px" class="cls_011"><span class="cls_011">the cluster and also to deploy containerized applications.</span></div>
<div style="position:absolute;left:164.60px;top:661.08px" class="cls_011"><span class="cls_011">Your OpenShift developer user name and password. Red Hat Training provides</span></div>
<div style="position:absolute;left:164.60px;top:673.08px" class="cls_011"><span class="cls_011">this information to you when you provision your lab environment. You need</span></div>
<div style="position:absolute;left:164.60px;top:685.08px" class="cls_011"><span class="cls_011">to use this user name and password to log in to OpenShift. You will also use</span></div>
<div style="position:absolute;left:164.60px;top:697.07px" class="cls_011"><span class="cls_011">your user name as part of the identifiers, such as route host names and project</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">20</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:30476px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background039.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:182.60px;top:53.98px" class="cls_011"><span class="cls_011">names, to avoid collision with identifiers from other students who share the same</span></div>
<div style="position:absolute;left:182.60px;top:65.97px" class="cls_011"><span class="cls_011">OpenShift cluster with you.</span></div>
<div style="position:absolute;left:182.60px;top:77.97px" class="cls_011"><span class="cls_011">Your personal GitHub and Quay.io account names. You need valid, free accounts</span></div>
<div style="position:absolute;left:182.60px;top:89.97px" class="cls_011"><span class="cls_011">on these online services to perform this course's exercises. If you have never</span></div>
<div style="position:absolute;left:182.60px;top:101.97px" class="cls_011"><span class="cls_011">used any of these online services, refer to Appendix B, Creating a GitHub</span></div>
<div style="position:absolute;left:182.60px;top:113.97px" class="cls_011"><span class="cls_011">Account and Appendix C, Creating a Quay Account for instructions about how to</span></div>
<div style="position:absolute;left:182.60px;top:125.96px" class="cls_011"><span class="cls_011">register.</span></div>
<div style="position:absolute;left:144.00px;top:158.89px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:173.26px" class="cls_011"><span class="cls_011">If you use two-factor authentication with your GitHub account you may want to</span></div>
<div style="position:absolute;left:144.00px;top:185.26px" class="cls_011"><span class="cls_011">create a personal access token for use from the </span><span class="cls_021">workstation</span><span class="cls_011"> VM during the</span></div>
<div style="position:absolute;left:144.00px;top:197.26px" class="cls_011"><span class="cls_011">course. Refer to the following documentation on how to setup a personal access</span></div>
<div style="position:absolute;left:144.00px;top:209.26px" class="cls_011"><span class="cls_011">on your account: </span><A HREF="https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line">Creating a personal access token for the command line</A><span class="cls_011"> [<A HREF="https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line">https://</A> </div>
<div style="position:absolute;left:144.00px;top:221.25px" class="cls_011"><span class="cls_011"> </span><A HREF="https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line">help.github.com/en/articles/creating-a-personal-access-token-for-the-command-</A> </div>
<div style="position:absolute;left:144.00px;top:233.25px" class="cls_011"><span class="cls_011"> </span><A HREF="https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line">line</A>]</div>
<div style="position:absolute;left:137.00px;top:266.55px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:161.70px;top:266.55px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">lab-configure</span><span class="cls_011"> command prints all the information that you entered and tries</span></div>
<div style="position:absolute;left:161.70px;top:278.55px" class="cls_011"><span class="cls_011">to connect to your OpenShift cluster:</span></div>
<div style="position:absolute;left:119.00px;top:306.27px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:330.26px" class="cls_026"><span class="cls_026">You entered:</span></div>
<div style="position:absolute;left:123.80px;top:342.26px" class="cls_026"><span class="cls_026">· API Endpoint:</span></div>
<div style="position:absolute;left:253.40px;top:342.26px" class="cls_026"><span class="cls_026"> </span><A HREF="https://api.cluster.domain.example.com:6443/">https://api.cluster.domain.example.com:6443</A> </div>
<div style="position:absolute;left:123.80px;top:354.26px" class="cls_026"><span class="cls_026">· Username:</span></div>
<div style="position:absolute;left:253.40px;top:354.26px" class="cls_026"><span class="cls_026">youruser</span></div>
<div style="position:absolute;left:123.80px;top:366.26px" class="cls_026"><span class="cls_026">· Password:</span></div>
<div style="position:absolute;left:253.40px;top:366.26px" class="cls_026"><span class="cls_026">yourpassword</span></div>
<div style="position:absolute;left:123.80px;top:378.25px" class="cls_026"><span class="cls_026">· GitHub Account Name:</span></div>
<div style="position:absolute;left:253.40px;top:378.25px" class="cls_026"><span class="cls_026">yourgituser</span></div>
<div style="position:absolute;left:123.80px;top:390.25px" class="cls_026"><span class="cls_026">· Quay.io Account Name:</span></div>
<div style="position:absolute;left:253.40px;top:390.25px" class="cls_026"><span class="cls_026">yourquayuser</span></div>
<div style="position:absolute;left:119.00px;top:414.25px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:137.00px;top:444.93px" class="cls_011"><span class="cls_011">1.3.</span></div>
<div style="position:absolute;left:161.70px;top:444.93px" class="cls_011"><span class="cls_011">If </span><span class="cls_021">lab-configure</span><span class="cls_011"> finds any issues, it displays an error message and exits. You will</span></div>
<div style="position:absolute;left:161.70px;top:456.92px" class="cls_011"><span class="cls_011">need to verify your information and run the </span><span class="cls_021">lab-configure</span><span class="cls_011"> command again. The</span></div>
<div style="position:absolute;left:161.70px;top:468.92px" class="cls_011"><span class="cls_011">following listing shows an example of a verification error:</span></div>
<div style="position:absolute;left:119.00px;top:496.64px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:520.64px" class="cls_026"><span class="cls_026">Verifying your Master API URL...</span></div>
<div style="position:absolute;left:119.00px;top:544.63px" class="cls_026"><span class="cls_026">ERROR:</span></div>
<div style="position:absolute;left:119.00px;top:556.63px" class="cls_026"><span class="cls_026">Cannot connect to an OpenShift 4.5 API using your URL.</span></div>
<div style="position:absolute;left:119.00px;top:568.63px" class="cls_026"><span class="cls_026">Please verify your network connectivity and that the URL does not point to an</span></div>
<div style="position:absolute;left:123.80px;top:580.63px" class="cls_026"><span class="cls_026">OpenShift 3.x nor to a non-OpenShift Kubernetes API.</span></div>
<div style="position:absolute;left:119.00px;top:592.62px" class="cls_026"><span class="cls_026">No changes made to your lab configuration.</span></div>
<div style="position:absolute;left:137.00px;top:623.30px" class="cls_011"><span class="cls_011">1.4.</span></div>
<div style="position:absolute;left:161.70px;top:623.30px" class="cls_011"><span class="cls_011">If everything is OK so far, the </span><span class="cls_021">lab-configure</span><span class="cls_011"> tries to access your public GitHub and</span></div>
<div style="position:absolute;left:161.70px;top:635.30px" class="cls_011"><span class="cls_011">Quay.io accounts:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:509.81px;top:751.59px" class="cls_013"><span class="cls_013">21</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:31278px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background040.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:85.69px" class="cls_026"><span class="cls_026">Verifying your GitHub account name...</span></div>
<div style="position:absolute;left:101.00px;top:109.69px" class="cls_026"><span class="cls_026">Verifying your Quay.io account name</span></div>
<div style="position:absolute;left:101.00px;top:133.68px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:164.36px" class="cls_011"><span class="cls_011">1.5.</span></div>
<div style="position:absolute;left:143.70px;top:164.36px" class="cls_011"><span class="cls_011">Again, </span><span class="cls_021">lab-configure</span><span class="cls_011"> displays an error message and exits if it finds any issues. You</span></div>
<div style="position:absolute;left:143.70px;top:176.36px" class="cls_011"><span class="cls_011">will need to verify your information and run the </span><span class="cls_021">lab-configure</span><span class="cls_011"> command again.</span></div>
<div style="position:absolute;left:143.70px;top:188.36px" class="cls_011"><span class="cls_011">The following listing shows an example of a verification error:</span></div>
<div style="position:absolute;left:101.00px;top:216.07px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:240.07px" class="cls_026"><span class="cls_026">Verifying your GitHub account name...</span></div>
<div style="position:absolute;left:101.00px;top:264.07px" class="cls_026"><span class="cls_026">ERROR:</span></div>
<div style="position:absolute;left:101.00px;top:276.07px" class="cls_026"><span class="cls_026">Cannot find a GitHub account named: invalidusername.</span></div>
<div style="position:absolute;left:101.00px;top:288.06px" class="cls_026"><span class="cls_026">No changes made to your lab configuration.</span></div>
<div style="position:absolute;left:119.00px;top:318.74px" class="cls_011"><span class="cls_011">1.6.</span></div>
<div style="position:absolute;left:143.70px;top:318.74px" class="cls_011"><span class="cls_011">Finally, the </span><span class="cls_021">lab-configure</span><span class="cls_011"> command verifies that your OpenShift cluster reports</span></div>
<div style="position:absolute;left:143.70px;top:330.74px" class="cls_011"><span class="cls_011">the expected wildcard domain.</span></div>
<div style="position:absolute;left:101.00px;top:358.46px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:382.45px" class="cls_026"><span class="cls_026">Verifying your cluster configuration</span></div>
<div style="position:absolute;left:101.00px;top:406.45px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:437.13px" class="cls_011"><span class="cls_011">1.7.</span></div>
<div style="position:absolute;left:143.70px;top:437.13px" class="cls_011"><span class="cls_011">If all checks pass, the </span><span class="cls_021">lab-configure</span><span class="cls_011"> command saves your configuration:</span></div>
<div style="position:absolute;left:101.00px;top:464.85px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:488.84px" class="cls_026"><span class="cls_026">Saving your lab configuration file...</span></div>
<div style="position:absolute;left:101.00px;top:512.84px" class="cls_026"><span class="cls_026">All fine, lab config saved. You can now proceed with your exercises.</span></div>
<div style="position:absolute;left:119.00px;top:543.52px" class="cls_011"><span class="cls_011">1.8.</span></div>
<div style="position:absolute;left:143.70px;top:543.52px" class="cls_011"><span class="cls_011">If there were no errors saving your configuration, you are almost ready to start any of</span></div>
<div style="position:absolute;left:143.70px;top:555.51px" class="cls_011"><span class="cls_011">this course's exercises. If there were any errors, do not try to start any exercise until</span></div>
<div style="position:absolute;left:143.70px;top:567.51px" class="cls_011"><span class="cls_011">you can execute the </span><span class="cls_021">lab-configure</span><span class="cls_011"> command successfully.</span></div>
<div style="position:absolute;left:101.41px;top:591.45px" class="cls_022"><span class="cls_022">2.</span><span class="cls_011">   Before starting any exercise, you need to fork this course's sample applications into your</span></div>
<div style="position:absolute;left:119.00px;top:603.51px" class="cls_011"><span class="cls_011">personal GitHub account. Perform the following steps:</span></div>
<div style="position:absolute;left:119.00px;top:627.91px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:143.70px;top:627.91px" class="cls_011"><span class="cls_011">Open a web browser and navigate to </span><A HREF="https://github.com/redhattraining/">https://github.com/RedHatTraining/</A> </span></div>
<div style="position:absolute;left:143.70px;top:639.91px" class="cls_021"><span class="cls_021">DO180-apps</span><span class="cls_011">. If you are not logged in to GitHub, click Sign in in the upper-right</span></div>
<div style="position:absolute;left:143.70px;top:651.91px" class="cls_011"><span class="cls_011">corner.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">22</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:32080px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background041.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:137.00px;top:150.64px" class="cls_011"><span class="cls_011">2.2.   Log in to GitHub using your personal user name and password.</span></div>
<div style="position:absolute;left:137.00px;top:334.72px" class="cls_011"><span class="cls_011">2.3.   Return to the </span><span class="cls_021">RedHatTraining/DO180-apps</span><span class="cls_011"> repository and click Fork in the</span></div>
<div style="position:absolute;left:161.70px;top:346.71px" class="cls_011"><span class="cls_011">upper-right corner.</span></div>
<div style="position:absolute;left:137.00px;top:424.76px" class="cls_011"><span class="cls_011">2.4.  In the Fork DO180-apps window, click yourgituser to select your personal GitHub</span></div>
<div style="position:absolute;left:161.70px;top:436.76px" class="cls_011"><span class="cls_011">project.</span></div>
<div style="position:absolute;left:144.00px;top:544.63px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:144.00px;top:559.01px" class="cls_011"><span class="cls_011">While it is possible to rename your personal fork of the </span><A HREF="https://github.com/">https://github.com/</A> </span></div>
<div style="position:absolute;left:144.00px;top:571.01px" class="cls_021"><span class="cls_021">RedHatTraining/DO180-apps</span><span class="cls_011"> repository, grading scripts, helper scripts, and the</span></div>
<div style="position:absolute;left:144.00px;top:583.01px" class="cls_011"><span class="cls_011">example output in this course assume that you retain the name </span><span class="cls_021">DO180-apps</span><span class="cls_011"> when</span></div>
<div style="position:absolute;left:144.00px;top:595.00px" class="cls_011"><span class="cls_011">your fork the repository.</span></div>
<div style="position:absolute;left:137.00px;top:626.48px" class="cls_011"><span class="cls_011">2.5.   After a few minutes, the GitHub web interface displays your new repository</span></div>
<div style="position:absolute;left:161.70px;top:638.48px" class="cls_037"><span class="cls_037">yourgituser</span><span class="cls_011">/DO180-apps.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.89px;top:751.59px" class="cls_013"><span class="cls_013">23</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:32882px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background042.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:101.41px;top:53.92px" class="cls_022"><span class="cls_022">3.</span><span class="cls_011">  Before starting any exercise, you also need to clone this course's sample applications from</span></div>
<div style="position:absolute;left:119.00px;top:65.98px" class="cls_011"><span class="cls_011">your personal GitHub account to your </span><span class="cls_021">workstation</span><span class="cls_011"> VM. Perform the following steps:</span></div>
<div style="position:absolute;left:119.00px;top:88.48px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:143.70px;top:88.48px" class="cls_011"><span class="cls_011">Run the following command to clone this course's sample applications repository.</span></div>
<div style="position:absolute;left:143.70px;top:100.47px" class="cls_011"><span class="cls_011">Replace </span><span class="cls_041">yourgituser</span><span class="cls_011"> with the name of your personal GitHub account:</span></div>
<div style="position:absolute;left:101.00px;top:128.19px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">git clone https://github.com/</span><span class="cls_040">yourgituser</span><span class="cls_027">/DO180-apps</span></div>
<div style="position:absolute;left:101.00px;top:140.19px" class="cls_026"><span class="cls_026">Cloning into 'DO180-apps'</span></div>
<div style="position:absolute;left:101.00px;top:152.19px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:180.97px" class="cls_011"><span class="cls_011">3.2.   Verify that </span><span class="cls_021">/home/student/DO180-apps</span><span class="cls_011"> is a Git repository:</span></div>
<div style="position:absolute;left:101.00px;top:208.68px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd DO180-apps</span></div>
<div style="position:absolute;left:101.00px;top:220.68px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git status</span></div>
<div style="position:absolute;left:101.00px;top:232.68px" class="cls_026"><span class="cls_026"># On branch master</span></div>
<div style="position:absolute;left:101.00px;top:244.68px" class="cls_026"><span class="cls_026">nothing to commit, working directory clean</span></div>
<div style="position:absolute;left:119.00px;top:273.46px" class="cls_011"><span class="cls_011">3.3.  Verify that </span><span class="cls_021">/home/student/DO180-apps</span><span class="cls_011"> contains this course's sample</span></div>
<div style="position:absolute;left:143.70px;top:285.45px" class="cls_011"><span class="cls_011">applications, and change back to the </span><span class="cls_021">student</span><span class="cls_011"> user's home folder.</span></div>
<div style="position:absolute;left:101.00px;top:313.17px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">head README.md</span></div>
<div style="position:absolute;left:101.00px;top:325.17px" class="cls_026"><span class="cls_026"># DO180-apps</span></div>
<div style="position:absolute;left:101.00px;top:337.17px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:349.16px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">cd ~</span></div>
<div style="position:absolute;left:101.00px;top:361.16px" class="cls_026"><span class="cls_026">[student@workstation ~]$</span></div>
<div style="position:absolute;left:101.41px;top:391.39px" class="cls_022"><span class="cls_022">4.</span><span class="cls_011">  Now that you have a local clone of the </span><span class="cls_021">DO180-apps</span><span class="cls_011"> repository on your </span><span class="cls_021">workstation</span><span class="cls_011"> VM,</span></div>
<div style="position:absolute;left:119.00px;top:403.44px" class="cls_011"><span class="cls_011">and you have executed the </span><span class="cls_021">lab-configure</span><span class="cls_011"> command successfully, you are ready to start</span></div>
<div style="position:absolute;left:119.00px;top:415.44px" class="cls_011"><span class="cls_011">this course's exercises.</span></div>
<div style="position:absolute;left:119.00px;top:431.44px" class="cls_011"><span class="cls_011">During this course, all exercises that build applications from source start from the </span><span class="cls_021">master</span></div>
<div style="position:absolute;left:119.00px;top:443.44px" class="cls_011"><span class="cls_011">branch of the </span><span class="cls_021">DO180-apps</span><span class="cls_011"> Git repository. Exercises that make changes to source code</span></div>
<div style="position:absolute;left:119.00px;top:455.44px" class="cls_011"><span class="cls_011">require you to create new branches to host your changes, so that the </span><span class="cls_021">master</span><span class="cls_011"> branch</span></div>
<div style="position:absolute;left:119.00px;top:467.44px" class="cls_011"><span class="cls_011">always contains a known good starting point. If for some reason you need to pause or</span></div>
<div style="position:absolute;left:119.00px;top:479.44px" class="cls_011"><span class="cls_011">restart an exercise, and need to either save or discard about changes you make into your</span></div>
<div style="position:absolute;left:119.00px;top:491.44px" class="cls_011"><span class="cls_011">Git branches, refer to Appendix D, Useful Git Commands.</span></div>
<div style="position:absolute;left:90.00px;top:512.94px" class="cls_011"><span class="cls_011">This concludes the guided exercise.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">24</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:33684px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background043.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 1 |</span><span class="cls_019"> Introducing Container Technology</span></div>
<div style="position:absolute;left:108.00px;top:83.06px" class="cls_014"><span class="cls_014">Summary</span></div>
<div style="position:absolute;left:108.00px;top:135.98px" class="cls_011"><span class="cls_011">In this chapter, you learned:</span></div>
<div style="position:absolute;left:108.00px;top:157.47px" class="cls_011"><span class="cls_011">• Containers are an isolated application runtime created with very little overhead.</span></div>
<div style="position:absolute;left:108.00px;top:178.97px" class="cls_011"><span class="cls_011">• A container image packages an application with all of its dependencies, making it easier to run</span></div>
<div style="position:absolute;left:117.50px;top:190.97px" class="cls_011"><span class="cls_011">the application in different environments.</span></div>
<div style="position:absolute;left:108.00px;top:212.47px" class="cls_011"><span class="cls_011">• Applications such as Podman create containers using features of the standard Linux kernel.</span></div>
<div style="position:absolute;left:108.00px;top:233.97px" class="cls_011"><span class="cls_011">• Container image registries are the preferred mechanism for distributing container images to</span></div>
<div style="position:absolute;left:117.50px;top:245.96px" class="cls_011"><span class="cls_011">multiple users and hosts.</span></div>
<div style="position:absolute;left:108.00px;top:267.46px" class="cls_011"><span class="cls_011">• OpenShift orchestrates applications composed of multiple containers using Kubernetes.</span></div>
<div style="position:absolute;left:108.00px;top:288.96px" class="cls_011"><span class="cls_011">• Kubernetes manages load balancing, high availability, and persistent storage for containerized</span></div>
<div style="position:absolute;left:117.50px;top:300.96px" class="cls_011"><span class="cls_011">applications.</span></div>
<div style="position:absolute;left:108.00px;top:322.46px" class="cls_011"><span class="cls_011">• OpenShift adds to Kubernetes multitenancy, security, ease of use, and continuous integration</span></div>
<div style="position:absolute;left:117.50px;top:334.45px" class="cls_011"><span class="cls_011">and continuous development features.</span></div>
<div style="position:absolute;left:108.00px;top:355.95px" class="cls_011"><span class="cls_011">• OpenShift routes enable external access to containerized applications in a manageable way.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.98px;top:751.59px" class="cls_013"><span class="cls_013">25</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:34486px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background044.jpg" width=612 height=792></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">26</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:35288px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background045.jpg" width=612 height=792></div>
<div style="position:absolute;left:126.00px;top:69.76px" class="cls_030"><span class="cls_030">Chapter 2</span></div>
<div style="position:absolute;left:126.00px;top:148.50px" class="cls_031"><span class="cls_031">Creating Containerized</span></div>
<div style="position:absolute;left:126.00px;top:175.50px" class="cls_031"><span class="cls_031">Services</span></div>
<div style="position:absolute;left:146.00px;top:228.67px" class="cls_018"><span class="cls_018">Goal</span></div>
<div style="position:absolute;left:252.88px;top:228.01px" class="cls_008"><span class="cls_008">Provision a service using container technology.</span></div>
<div style="position:absolute;left:146.00px;top:260.67px" class="cls_018"><span class="cls_018">Objectives</span></div>
<div style="position:absolute;left:252.88px;top:260.01px" class="cls_008"><span class="cls_008">•  Create a database server from a container</span></div>
<div style="position:absolute;left:267.88px;top:272.01px" class="cls_008"><span class="cls_008">image.</span></div>
<div style="position:absolute;left:146.00px;top:300.67px" class="cls_018"><span class="cls_018">Sections</span></div>
<div style="position:absolute;left:252.88px;top:300.01px" class="cls_008"><span class="cls_008">•  Provisioning a Containerized Database Server</span></div>
<div style="position:absolute;left:267.88px;top:312.01px" class="cls_008"><span class="cls_008">(and Guided Exercise)</span></div>
<div style="position:absolute;left:146.00px;top:340.67px" class="cls_018"><span class="cls_018">Lab</span></div>
<div style="position:absolute;left:252.88px;top:340.01px" class="cls_008"><span class="cls_008">•  Creating Containerized Services</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.97px;top:751.59px" class="cls_013"><span class="cls_013">27</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:36090px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background046.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 2 |</span><span class="cls_019"> Creating Containerized Services</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Provisioning Containerized Services</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to:</span></div>
<div style="position:absolute;left:90.00px;top:179.97px" class="cls_011"><span class="cls_011">• Search for and fetch container images with Podman.</span></div>
<div style="position:absolute;left:90.00px;top:200.96px" class="cls_011"><span class="cls_011">• Run and configure containers locally.</span></div>
<div style="position:absolute;left:90.00px;top:221.96px" class="cls_011"><span class="cls_011">• Use the Red Hat Container Catalog.</span></div>
<div style="position:absolute;left:90.00px;top:244.24px" class="cls_024"><span class="cls_024">Fetching Container Images with Podman</span></div>
<div style="position:absolute;left:90.00px;top:268.95px" class="cls_011"><span class="cls_011">Applications can run inside containers as a way to provide them with an isolated and controlled</span></div>
<div style="position:absolute;left:90.00px;top:280.95px" class="cls_011"><span class="cls_011">execution environment. Running a containerized application, that is, running an application</span></div>
<div style="position:absolute;left:90.00px;top:292.95px" class="cls_011"><span class="cls_011">inside a container, requires a container image, a file system bundle providing all application files,</span></div>
<div style="position:absolute;left:90.00px;top:304.95px" class="cls_011"><span class="cls_011">libraries, and dependencies the application needs to run. Container images can be found in image</span></div>
<div style="position:absolute;left:90.00px;top:316.95px" class="cls_011"><span class="cls_011">registries: services that allow users to search and retrieve container images. Podman users can use</span></div>
<div style="position:absolute;left:90.00px;top:328.94px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">search</span><span class="cls_011"> subcommand to find available images from remote or local registries:</span></div>
<div style="position:absolute;left:101.00px;top:356.66px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman search rhel</span></div>
<div style="position:absolute;left:101.00px;top:368.66px" class="cls_026"><span class="cls_026">INDEX</span></div>
<div style="position:absolute;left:153.80px;top:368.66px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:307.40px;top:368.66px" class="cls_026"><span class="cls_026">DESCRIPTION  STARS OFFICIAL AUTOMATED</span></div>
<div style="position:absolute;left:101.00px;top:380.66px" class="cls_026"><span class="cls_026">redhat.com registry.access.redhat.com/rhel This plat... 0</span></div>
<div style="position:absolute;left:101.00px;top:392.65px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:90.00px;top:420.43px" class="cls_011"><span class="cls_011">After you have found an image, you can use Podman to download it. When using the </span><span class="cls_021">pull</span></div>
<div style="position:absolute;left:90.00px;top:432.43px" class="cls_011"><span class="cls_011">subcommand, Podman fetches the image and saves it locally for future use:</span></div>
<div style="position:absolute;left:101.00px;top:460.15px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman pull rhel</span></div>
<div style="position:absolute;left:101.00px;top:472.15px" class="cls_026"><span class="cls_026">Trying to pull registry.access.redhat.com/rhel...Getting image source signatures</span></div>
<div style="position:absolute;left:101.00px;top:484.14px" class="cls_026"><span class="cls_026">Copying blob sha256: </span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:105.80px;top:496.14px" class="cls_026"><span class="cls_026">72.25 MB / 72.25 MB [======================================================] 8s</span></div>
<div style="position:absolute;left:101.00px;top:508.14px" class="cls_026"><span class="cls_026">Copying blob sha256: </span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:105.80px;top:520.14px" class="cls_026"><span class="cls_026">1.20 KB / 1.20 KB [========================================================] 0s</span></div>
<div style="position:absolute;left:101.00px;top:532.14px" class="cls_026"><span class="cls_026">Copying config sha256: </span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:105.80px;top:544.13px" class="cls_026"><span class="cls_026">6.30 KB / 6.30 KB [========================================================] 0s</span></div>
<div style="position:absolute;left:101.00px;top:556.13px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:101.00px;top:568.13px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:101.00px;top:580.13px" class="cls_026"><span class="cls_026">699d44bc6ea2b9fb23e7899bd4023d3c83894d3be64b12e65a3fe63e2c70f0ef</span></div>
<div style="position:absolute;left:90.00px;top:607.91px" class="cls_011"><span class="cls_011">Container images are named based on the following syntax:</span></div>
<div style="position:absolute;left:90.00px;top:629.40px" class="cls_011"><span class="cls_011">registry_name/user_name/image_name:tag</span></div>
<div style="position:absolute;left:90.00px;top:650.40px" class="cls_011"><span class="cls_011">• First </span><span class="cls_021">registry_name</span><span class="cls_011">, the name of the registry storing the image. It is usually the FQDN of the</span></div>
<div style="position:absolute;left:99.50px;top:662.40px" class="cls_011"><span class="cls_011">registry.</span></div>
<div style="position:absolute;left:90.00px;top:683.39px" class="cls_011"><span class="cls_011">•</span><span class="cls_021"> user_name</span><span class="cls_011"> stands for the user or organization the image belongs to.</span></div>
<div style="position:absolute;left:90.00px;top:704.38px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">image_name</span><span class="cls_011"> should be unique in user namespace.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">28</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:36892px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background047.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 2 |</span><span class="cls_019"> Creating Containerized Services</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">tag</span><span class="cls_011"> identifies the image version. If the image name includes no image tag, </span><span class="cls_021">latest</span><span class="cls_011"> is</span></div>
<div style="position:absolute;left:117.50px;top:65.97px" class="cls_011"><span class="cls_011">assumed.</span></div>
<div style="position:absolute;left:144.00px;top:98.90px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:113.27px" class="cls_011"><span class="cls_011">This classroom's Podman installation uses a several publicly available registries, like</span></div>
<div style="position:absolute;left:144.00px;top:125.27px" class="cls_021"><span class="cls_021">Quay.io</span><span class="cls_011"> and Red Hat Container Catalog.</span></div>
<div style="position:absolute;left:108.00px;top:163.17px" class="cls_011"><span class="cls_011">After retrieval, Podman stores images locally and you can list them with the </span><span class="cls_021">images</span><span class="cls_011"> subcommand:</span></div>
<div style="position:absolute;left:119.00px;top:190.88px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman images</span></div>
<div style="position:absolute;left:119.00px;top:202.88px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:282.20px;top:202.88px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:325.40px;top:202.88px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:397.40px;top:202.88px" class="cls_026"><span class="cls_026">CREATED</span></div>
<div style="position:absolute;left:464.60px;top:202.88px" class="cls_026"><span class="cls_026">SIZE</span></div>
<div style="position:absolute;left:119.00px;top:214.88px" class="cls_026"><span class="cls_026">registry.access.redhat.com/rhel</span></div>
<div style="position:absolute;left:282.20px;top:214.88px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:325.40px;top:214.88px" class="cls_026"><span class="cls_026">699d44bc6ea2</span></div>
<div style="position:absolute;left:397.40px;top:214.88px" class="cls_026"><span class="cls_026">4 days ago</span></div>
<div style="position:absolute;left:464.60px;top:214.88px" class="cls_026"><span class="cls_026">214MB</span></div>
<div style="position:absolute;left:119.00px;top:226.88px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:108.00px;top:255.44px" class="cls_024"><span class="cls_024">Running Containers</span></div>
<div style="position:absolute;left:108.00px;top:280.16px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">podman run</span><span class="cls_011"> command runs a container locally based on an image. At a minimum, the</span></div>
<div style="position:absolute;left:108.00px;top:292.16px" class="cls_011"><span class="cls_011">command requires the name of the image to execute in the container.</span></div>
<div style="position:absolute;left:108.00px;top:313.65px" class="cls_011"><span class="cls_011">The container image specifies a process that starts inside the container known as the entry</span></div>
<div style="position:absolute;left:108.00px;top:325.65px" class="cls_011"><span class="cls_011">point. The </span><span class="cls_021">podman run</span><span class="cls_011"> command uses all parameters after the image name as the entry</span></div>
<div style="position:absolute;left:108.00px;top:337.65px" class="cls_011"><span class="cls_011">point command for the container. The following example starts a container from a Red Hat</span></div>
<div style="position:absolute;left:108.00px;top:349.65px" class="cls_011"><span class="cls_011">Enterprise Linux image. It sets the entry point for this container to the </span><span class="cls_021">echo "Hello world"</span></div>
<div style="position:absolute;left:108.00px;top:361.65px" class="cls_011"><span class="cls_011">command.</span></div>
<div style="position:absolute;left:119.00px;top:389.36px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run ubi7/ubi:7.7 echo 'Hello!'</span></div>
<div style="position:absolute;left:119.00px;top:401.36px" class="cls_026"><span class="cls_026">Hello world</span></div>
<div style="position:absolute;left:108.00px;top:429.14px" class="cls_011"><span class="cls_011">To start a container image as a background process, pass the </span><span class="cls_021">-d</span><span class="cls_011"> option to the </span><span class="cls_021">podman run</span></div>
<div style="position:absolute;left:108.00px;top:441.14px" class="cls_011"><span class="cls_011">command:</span></div>
<div style="position:absolute;left:119.00px;top:468.86px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run -d rhscl/httpd-24-rhel7:2.4-36.8</span></div>
<div style="position:absolute;left:119.00px;top:480.85px" class="cls_026"><span class="cls_026">ff4ec6d74e9b2a7b55c49f138e56f8bc46fe2a09c23093664fea7febc3dfa1b2</span></div>
<div style="position:absolute;left:119.00px;top:492.85px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman inspect -l \</span></div>
<div style="position:absolute;left:119.00px;top:504.85px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-f "{{.NetworkSettings.IPAddress}}"</span></div>
<div style="position:absolute;left:119.00px;top:516.85px" class="cls_026"><span class="cls_026">10.88.0.68</span></div>
<div style="position:absolute;left:119.00px;top:528.84px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl http://</span><span class="cls_040">10.88.0.68</span><span class="cls_027">:8080</span></div>
<div style="position:absolute;left:128.60px;top:540.84px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:552.84px" class="cls_026"><span class="cls_026">&lt;html xmlns="</span><A HREF="http://www.w3.org/1999/xhtml"/">http://www.w3.org/1999/xhtml"</A> xml:lang="en"></div>
<div style="position:absolute;left:128.60px;top:564.84px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:576.84px" class="cls_026"><span class="cls_026">&lt;title></span></div>
<div style="position:absolute;left:128.60px;top:588.83px" class="cls_026"><span class="cls_026">Test Page for the Apache HTTP Server on Red Hat Enterprise Linux</span></div>
<div style="position:absolute;left:119.00px;top:600.83px" class="cls_026"><span class="cls_026">&lt;/title></span></div>
<div style="position:absolute;left:119.00px;top:612.83px" class="cls_026"><span class="cls_026">&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /></span></div>
<div style="position:absolute;left:119.00px;top:624.83px" class="cls_026"><span class="cls_026">&lt;style type="text/css"></span></div>
<div style="position:absolute;left:128.60px;top:636.83px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:108.00px;top:664.61px" class="cls_011"><span class="cls_011">The previous example ran a containerized Apache HTTP server in the background. Then, the</span></div>
<div style="position:absolute;left:108.00px;top:676.60px" class="cls_011"><span class="cls_011">example uses the </span><span class="cls_021">podman inspect</span><span class="cls_011"> command to retrieve the container's internal IP address</span></div>
<div style="position:absolute;left:108.00px;top:688.60px" class="cls_011"><span class="cls_011">from container metadata. Finally, it uses the IP address to fetch the root page from Apache HTTP</span></div>
<div style="position:absolute;left:108.00px;top:700.60px" class="cls_011"><span class="cls_011">server. This response proves the container is still up and running after the </span><span class="cls_021">podman run</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.77px;top:751.59px" class="cls_013"><span class="cls_013">29</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:37694px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background048.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 2 |</span><span class="cls_019"> Creating Containerized Services</span></div>
<div style="position:absolute;left:126.00px;top:63.50px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:77.88px" class="cls_011"><span class="cls_011">Most Podman subcommands accept the </span><span class="cls_021">-l</span><span class="cls_011"> flag (</span><span class="cls_021">l</span><span class="cls_011"> for latest) as a replacement for</span></div>
<div style="position:absolute;left:126.00px;top:89.87px" class="cls_011"><span class="cls_011">the container id. This flag applies the command to the latest used container in any</span></div>
<div style="position:absolute;left:126.00px;top:101.87px" class="cls_011"><span class="cls_011">Podman command.</span></div>
<div style="position:absolute;left:126.00px;top:149.29px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:163.67px" class="cls_011"><span class="cls_011">If the image to be executed is not available locally when using the </span><span class="cls_021">podman run</span></div>
<div style="position:absolute;left:126.00px;top:175.67px" class="cls_011"><span class="cls_011">command, Podman automatically uses </span><span class="cls_021">pull</span><span class="cls_011"> to download the image.</span></div>
<div style="position:absolute;left:90.00px;top:213.57px" class="cls_011"><span class="cls_011">When referencing the container, Podman recognizes a container either with the container name or</span></div>
<div style="position:absolute;left:90.00px;top:225.56px" class="cls_011"><span class="cls_011">the generated container id. Use the </span><span class="cls_021">--name</span><span class="cls_011"> option to set the container name when running the</span></div>
<div style="position:absolute;left:90.00px;top:237.56px" class="cls_011"><span class="cls_011">container with Podman. Container names must be unique. If the </span><span class="cls_021">podman run</span><span class="cls_011"> command includes</span></div>
<div style="position:absolute;left:90.00px;top:249.56px" class="cls_011"><span class="cls_011">no container name, Podman generates a unique random name.</span></div>
<div style="position:absolute;left:90.00px;top:271.06px" class="cls_011"><span class="cls_011">If the images require interacting with the user with console input, Podman can redirect container</span></div>
<div style="position:absolute;left:90.00px;top:283.06px" class="cls_011"><span class="cls_011">input and output streams to the console. The </span><span class="cls_021">run</span><span class="cls_011"> subcommand requires the </span><span class="cls_021">-t</span><span class="cls_011"> and </span><span class="cls_021">-i</span><span class="cls_011"> flags (or,</span></div>
<div style="position:absolute;left:90.00px;top:295.05px" class="cls_011"><span class="cls_011">in short, </span><span class="cls_021">-it</span><span class="cls_011"> flag) to enable interactivity.</span></div>
<div style="position:absolute;left:126.00px;top:327.98px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:342.35px" class="cls_011"><span class="cls_011">Many Podman flags also have an alternative long form; some of these are explained</span></div>
<div style="position:absolute;left:126.00px;top:354.35px" class="cls_011"><span class="cls_011">below.</span></div>
<div style="position:absolute;left:126.00px;top:377.75px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:135.50px;top:377.75px" class="cls_021"><span class="cls_021">-t</span><span class="cls_011"> is equivalent to </span><span class="cls_021">--tty</span><span class="cls_011">, meaning a </span><span class="cls_021">pseudo-tty</span><span class="cls_011"> (pseudo-terminal) is to be</span></div>
<div style="position:absolute;left:135.50px;top:389.75px" class="cls_011"><span class="cls_011">allocated for the container.</span></div>
<div style="position:absolute;left:126.00px;top:413.14px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:135.50px;top:413.14px" class="cls_021"><span class="cls_021">-i</span><span class="cls_011"> is the same as </span><span class="cls_021">--interactive</span><span class="cls_011">. When used, standard input is kept open into</span></div>
<div style="position:absolute;left:135.50px;top:425.14px" class="cls_011"><span class="cls_011">the container.</span></div>
<div style="position:absolute;left:126.00px;top:448.54px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:135.50px;top:448.54px" class="cls_021"><span class="cls_021">-d</span><span class="cls_011">, or its long form </span><span class="cls_021">--detach</span><span class="cls_011">, means the container runs in the background</span></div>
<div style="position:absolute;left:135.50px;top:460.54px" class="cls_011"><span class="cls_011">(detached). Podman then prints the container id.</span></div>
<div style="position:absolute;left:126.00px;top:482.04px" class="cls_011"><span class="cls_011">See the Podman documentation for the complete list of flags.</span></div>
<div style="position:absolute;left:90.00px;top:519.93px" class="cls_011"><span class="cls_011">The following example starts a Bash terminal inside the container, and interactively runs some</span></div>
<div style="position:absolute;left:90.00px;top:531.93px" class="cls_011"><span class="cls_011">commands in it:</span></div>
<div style="position:absolute;left:101.00px;top:559.65px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run -it ubi7/ubi:7.7 /bin/bash</span></div>
<div style="position:absolute;left:101.00px;top:571.65px" class="cls_026"><span class="cls_026">bash-4.2# </span><span class="cls_027">ls</span></div>
<div style="position:absolute;left:101.00px;top:583.65px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:595.64px" class="cls_026"><span class="cls_026">bash-4.2# </span><span class="cls_027">whoami</span></div>
<div style="position:absolute;left:101.00px;top:607.64px" class="cls_026"><span class="cls_026">root</span></div>
<div style="position:absolute;left:101.00px;top:619.64px" class="cls_026"><span class="cls_026">bash-4.2# </span><span class="cls_027">exit</span></div>
<div style="position:absolute;left:101.00px;top:631.64px" class="cls_026"><span class="cls_026">exit</span></div>
<div style="position:absolute;left:101.00px;top:643.64px" class="cls_026"><span class="cls_026">[student@workstation ~]$</span></div>
<div style="position:absolute;left:90.00px;top:671.41px" class="cls_011"><span class="cls_011">Some containers need or can use external parameters provided at startup. The most common</span></div>
<div style="position:absolute;left:90.00px;top:683.41px" class="cls_011"><span class="cls_011">approach for providing and consuming those parameters is through environment variables.</span></div>
<div style="position:absolute;left:90.00px;top:695.41px" class="cls_011"><span class="cls_011">Podman can inject environment variables into containers at startup by adding the </span><span class="cls_021">-e</span><span class="cls_011"> flag to the</span></div>
<div style="position:absolute;left:90.00px;top:707.41px" class="cls_021"><span class="cls_021">run</span><span class="cls_011"> subcommand:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">30</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:38496px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background049.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 2 |</span><span class="cls_019"> Creating Containerized Services</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run -e GREET=Hello -e NAME=RedHat \</span></div>
<div style="position:absolute;left:119.00px;top:73.69px" class="cls_027"><span class="cls_027">> rhel7:7.5 printenv GREET NAME</span></div>
<div style="position:absolute;left:119.00px;top:85.69px" class="cls_026"><span class="cls_026">Hello</span></div>
<div style="position:absolute;left:119.00px;top:97.69px" class="cls_026"><span class="cls_026">RedHat</span></div>
<div style="position:absolute;left:119.00px;top:109.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$</span></div>
<div style="position:absolute;left:108.00px;top:137.47px" class="cls_011"><span class="cls_011">The previous example starts a RHEL image container that prints the two environment variables</span></div>
<div style="position:absolute;left:108.00px;top:149.46px" class="cls_011"><span class="cls_011">provided as parameters. Another use case for environment variables is setting up credentials into a</span></div>
<div style="position:absolute;left:108.00px;top:161.46px" class="cls_011"><span class="cls_011">MySQL database server:</span></div>
<div style="position:absolute;left:119.00px;top:189.18px" class="cls_026"><span class="cls_026">[root@workstation ~]# </span><span class="cls_027">sudo podman run --name mysql-custom \</span></div>
<div style="position:absolute;left:119.00px;top:201.18px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-e MYSQL_USER=redhat -e MYSQL_PASSWORD=r3dh4t \</span></div>
<div style="position:absolute;left:119.00px;top:213.18px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-d rhmap47/mysql:5.5</span></div>
<div style="position:absolute;left:108.00px;top:241.74px" class="cls_024"><span class="cls_024">Using the Red Hat Container Catalog</span></div>
<div style="position:absolute;left:108.00px;top:266.45px" class="cls_011"><span class="cls_011">Red Hat maintains its repository of finely tuned container images. Using this repository provides</span></div>
<div style="position:absolute;left:108.00px;top:278.45px" class="cls_011"><span class="cls_011">customers with a layer of protection and reliability against known vulnerabilities, which could</span></div>
<div style="position:absolute;left:108.00px;top:290.45px" class="cls_011"><span class="cls_011">potentially be caused by untested images. The standard </span><span class="cls_021">podman</span><span class="cls_011"> command is compatible with the</span></div>
<div style="position:absolute;left:108.00px;top:302.45px" class="cls_011"><span class="cls_011">Red Hat Container Catalog. The Red Hat Container Catalog provides a user-friendly interface for</span></div>
<div style="position:absolute;left:108.00px;top:314.45px" class="cls_011"><span class="cls_011">searching and exploring container images from the Red Hat repository.</span></div>
<div style="position:absolute;left:108.00px;top:335.94px" class="cls_011"><span class="cls_011">The Container Catalog also serves as a single interface, providing access to different aspects of all</span></div>
<div style="position:absolute;left:108.00px;top:347.94px" class="cls_011"><span class="cls_011">the available container images in the repository. It is useful in determining the best image among</span></div>
<div style="position:absolute;left:108.00px;top:359.94px" class="cls_011"><span class="cls_011">multiple versions of container images given health index grades. The health index grade indicates</span></div>
<div style="position:absolute;left:108.00px;top:371.94px" class="cls_011"><span class="cls_011">how current an image is, and whether it contains the latest security updates.</span></div>
<div style="position:absolute;left:108.00px;top:393.44px" class="cls_011"><span class="cls_011">The Container Catalog also gives access to the errata documentation of an image. It describes the</span></div>
<div style="position:absolute;left:108.00px;top:405.43px" class="cls_011"><span class="cls_011">latest bug fixes and enhancements in each update. It also suggests the best technique for pulling</span></div>
<div style="position:absolute;left:108.00px;top:417.43px" class="cls_011"><span class="cls_011">an image on each operating system.</span></div>
<div style="position:absolute;left:108.00px;top:438.93px" class="cls_011"><span class="cls_011">The following images highlight some of the features of the Red Hat Container Catalog.</span></div>
<div style="position:absolute;left:215.91px;top:690.53px" class="cls_020"><span class="cls_020">Figure 2.1: Red Hat Container Catalog search page</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:509.49px;top:751.59px" class="cls_013"><span class="cls_013">31</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:39298px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background050.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 2 |</span><span class="cls_019"> Creating Containerized Services</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_011"><span class="cls_011">As displayed above, searching for </span><span class="cls_021">Apache</span><span class="cls_011"> in the search box of the Container Catalog displays</span></div>
<div style="position:absolute;left:90.00px;top:65.97px" class="cls_011"><span class="cls_011">a suggested list of products and image repositories matching the search pattern. To access the</span></div>
<div style="position:absolute;left:90.00px;top:77.97px" class="cls_021"><span class="cls_021">Apache httpd 2.4</span><span class="cls_011"> image page, select </span><span class="cls_021">rhscl/httpd-24-rhel7</span><span class="cls_011"> from the suggested list.</span></div>
<div style="position:absolute;left:149.85px;top:386.45px" class="cls_020"><span class="cls_020">Figure 2.2: Apache httpd 2.4 (rhscl/httpd-24-rhel7) overview image page</span></div>
<div style="position:absolute;left:90.00px;top:409.36px" class="cls_011"><span class="cls_011">The Apache httpd 2.4 panel displays image details and several tabs. This page states that Red Hat</span></div>
<div style="position:absolute;left:90.00px;top:421.36px" class="cls_011"><span class="cls_011">maintains the image repository. Under the Overview tab, there are other details:</span></div>
<div style="position:absolute;left:90.00px;top:444.76px" class="cls_011"><span class="cls_011">• Description: A summary of the image's capabilities.</span></div>
<div style="position:absolute;left:90.00px;top:468.16px" class="cls_011"><span class="cls_011">• Products using this container:: It indicates that Red Hat Enterprise Linux uses this image</span></div>
<div style="position:absolute;left:99.50px;top:480.16px" class="cls_011"><span class="cls_011">repository.</span></div>
<div style="position:absolute;left:90.00px;top:503.55px" class="cls_011"><span class="cls_011">• Most Recent Tag: When the image received its latest update, the latest tag applied to the image,</span></div>
<div style="position:absolute;left:99.50px;top:515.55px" class="cls_011"><span class="cls_011">the health of the image, and more.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">32</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:40100px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background051.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 2 |</span><span class="cls_019"> Creating Containerized Services</span></div>
<div style="position:absolute;left:174.68px;top:282.98px" class="cls_020"><span class="cls_020">Figure 2.3: Apache httpd 2.4 (rhscl/httpd-24-rhel7) latest image page</span></div>
<div style="position:absolute;left:108.00px;top:305.90px" class="cls_011"><span class="cls_011">The Get this image tab provides the procedure to get the most current version of the image. The</span></div>
<div style="position:absolute;left:108.00px;top:317.90px" class="cls_011"><span class="cls_011">page provides different options to retrieve the image. Choose your preferred procedure in the</span></div>
<div style="position:absolute;left:108.00px;top:329.89px" class="cls_011"><span class="cls_011">tabs, and the page provides the appropriate instructions to retrieve the image.</span></div>
<div style="position:absolute;left:144.00px;top:360.92px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:144.00px;top:375.24px" class="cls_022"><span class="cls_022">Red Hat Container Catalog</span></div>
<div style="position:absolute;left:144.00px;top:387.29px" class="cls_033"><span class="cls_033"> </span><A HREF="https://registry.redhat.io">https://registry.redhat.io</A> </div>
<div style="position:absolute;left:144.00px;top:408.73px" class="cls_022"><span class="cls_022">Quay.io website</span></div>
<div style="position:absolute;left:144.00px;top:420.79px" class="cls_033"><span class="cls_033"> </span><A HREF="https://quay.io">https://quay.io</A> </div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.57px;top:751.59px" class="cls_013"><span class="cls_013">33</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:40902px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background052.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 2 |</span><span class="cls_019"> Creating Containerized Services</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Creating a MySQL Database Instance</span></div>
<div style="position:absolute;left:102.00px;top:137.59px" class="cls_011"><span class="cls_011">In this exercise, you will start a MySQL database inside a container, and then create and</span></div>
<div style="position:absolute;left:102.00px;top:149.59px" class="cls_011"><span class="cls_011">populate a database.</span></div>
<div style="position:absolute;left:102.00px;top:172.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:190.59px" class="cls_011"><span class="cls_011">You should be able to start a database from a container image and store information inside</span></div>
<div style="position:absolute;left:102.00px;top:202.58px" class="cls_011"><span class="cls_011">the database.</span></div>
<div style="position:absolute;left:102.00px;top:225.65px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:243.58px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:101.00px;top:271.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab container-create start</span></div>
<div style="position:absolute;left:101.41px;top:325.92px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:119.00px;top:325.98px" class="cls_011"><span class="cls_011">Create a MySQL container instance.</span></div>
<div style="position:absolute;left:119.00px;top:350.38px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:143.70px;top:350.38px" class="cls_011"><span class="cls_011">Start a container from the Red Hat Software Collections Library MySQL image.</span></div>
<div style="position:absolute;left:101.00px;top:378.10px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run --name mysql-basic \</span></div>
<div style="position:absolute;left:101.00px;top:390.09px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 \</span></div>
<div style="position:absolute;left:101.00px;top:402.09px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 \</span></div>
<div style="position:absolute;left:101.00px;top:414.09px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-d rhscl/mysql-57-rhel7:5.7-3.14</span></div>
<div style="position:absolute;left:101.00px;top:426.09px" class="cls_026"><span class="cls_026">Trying to pull </span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:438.08px" class="cls_026"><span class="cls_026">Copying blob sha256:e373541</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:105.80px;top:450.08px" class="cls_026"><span class="cls_026">69.66 MB / 69.66 MB [===================================================] 8s</span></div>
<div style="position:absolute;left:101.00px;top:462.08px" class="cls_026"><span class="cls_026">Copying blob sha256:c5d2e94</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:105.80px;top:474.08px" class="cls_026"><span class="cls_026">1.20 KB / 1.20 KB [=====================================================] 0s</span></div>
<div style="position:absolute;left:101.00px;top:486.08px" class="cls_026"><span class="cls_026">Copying blob sha256:b3949ae</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:105.80px;top:498.07px" class="cls_026"><span class="cls_026">62.03 MB / 62.03 MB [===================================================] 8s</span></div>
<div style="position:absolute;left:101.00px;top:510.07px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:101.00px;top:522.07px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:101.00px;top:534.07px" class="cls_026"><span class="cls_026">92eaa6b67da0475745b2beffa7e0895391ab34ab3bf1ded99363bb09279a24a0</span></div>
<div style="position:absolute;left:143.70px;top:556.35px" class="cls_011"><span class="cls_011">This command downloads the MySQL container image with the </span><span class="cls_021">5.7-3.14</span><span class="cls_011"> tag, and</span></div>
<div style="position:absolute;left:143.70px;top:568.35px" class="cls_011"><span class="cls_011">then starts a container-based image. It creates a database named </span><span class="cls_021">items</span><span class="cls_011">, owned</span></div>
<div style="position:absolute;left:143.70px;top:580.34px" class="cls_011"><span class="cls_011">by a user named </span><span class="cls_021">user1</span><span class="cls_011"> with </span><span class="cls_021">mypa55</span><span class="cls_011"> as the password. The database administrator</span></div>
<div style="position:absolute;left:143.70px;top:592.34px" class="cls_011"><span class="cls_011">password is set to </span><span class="cls_021">r00tpa55</span><span class="cls_011"> and the container runs in the background.</span></div>
<div style="position:absolute;left:119.00px;top:616.74px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:143.70px;top:616.74px" class="cls_011"><span class="cls_011">Verify that the container started without errors.</span></div>
<div style="position:absolute;left:101.00px;top:644.46px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman ps --format "{{.ID}} {{.Image}} {{.Names}}"</span></div>
<div style="position:absolute;left:101.00px;top:656.46px" class="cls_026"><span class="cls_026">92eaa6b67da0 registry.access.redhat.com/rhscl/mysql-57-rhel7:5.7-3.14 mysql-basic</span></div>
<div style="position:absolute;left:101.41px;top:686.68px" class="cls_022"><span class="cls_022">2.</span><span class="cls_011">   Access the container sandbox by running the following command:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">34</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:41704px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background053.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 2 |</span><span class="cls_019"> Creating Containerized Services</span></div>
<div style="position:absolute;left:119.00px;top:61.70px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman exec -it mysql-basic /bin/bash</span></div>
<div style="position:absolute;left:119.00px;top:73.70px" class="cls_026"><span class="cls_026">bash-4.2$</span></div>
<div style="position:absolute;left:137.00px;top:95.98px" class="cls_011"><span class="cls_011">This command starts a Bash shell, running as the </span><span class="cls_021">mysql</span><span class="cls_011"> user inside the </span><span class="cls_021">MySQL</span><span class="cls_011"> container.</span></div>
<div style="position:absolute;left:119.41px;top:119.92px" class="cls_022"><span class="cls_022">3.</span><span class="cls_011">  Add data to the database.</span></div>
<div style="position:absolute;left:137.00px;top:144.38px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:161.70px;top:144.38px" class="cls_011"><span class="cls_011">Connect to MySQL as the database administrator user (root).</span></div>
<div style="position:absolute;left:161.70px;top:160.37px" class="cls_011"><span class="cls_011">Run the following command from the container terminal to connect to the database:</span></div>
<div style="position:absolute;left:119.00px;top:188.09px" class="cls_026"><span class="cls_026">bash-4.2$ </span><span class="cls_027">mysql -uroot</span></div>
<div style="position:absolute;left:119.00px;top:200.09px" class="cls_026"><span class="cls_026">Welcome to the MySQL monitor.  Commands end with ; or \g.</span></div>
<div style="position:absolute;left:119.00px;top:212.09px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:224.09px" class="cls_026"><span class="cls_026">mysql></span></div>
<div style="position:absolute;left:161.70px;top:246.36px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">mysql</span><span class="cls_011"> command opens the MySQL database interactive prompt. Run the</span></div>
<div style="position:absolute;left:161.70px;top:258.36px" class="cls_011"><span class="cls_011">following command to determine the database availability:</span></div>
<div style="position:absolute;left:119.00px;top:286.08px" class="cls_026"><span class="cls_026">mysql> </span><span class="cls_027">show databases;</span></div>
<div style="position:absolute;left:119.00px;top:298.08px" class="cls_026"><span class="cls_026">+--------------------+</span></div>
<div style="position:absolute;left:119.00px;top:310.08px" class="cls_026"><span class="cls_026">| Database</span></div>
<div style="position:absolute;left:219.80px;top:310.08px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:119.00px;top:322.07px" class="cls_026"><span class="cls_026">+--------------------+</span></div>
<div style="position:absolute;left:119.00px;top:334.07px" class="cls_026"><span class="cls_026">| information_schema |</span></div>
<div style="position:absolute;left:119.00px;top:346.07px" class="cls_026"><span class="cls_026">| items</span></div>
<div style="position:absolute;left:219.80px;top:346.07px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:119.00px;top:358.07px" class="cls_026"><span class="cls_026">| mysql</span></div>
<div style="position:absolute;left:219.80px;top:358.07px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:119.00px;top:370.07px" class="cls_026"><span class="cls_026">| performance_schema |</span></div>
<div style="position:absolute;left:119.00px;top:382.06px" class="cls_026"><span class="cls_026">| sys</span></div>
<div style="position:absolute;left:219.80px;top:382.06px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:119.00px;top:394.06px" class="cls_026"><span class="cls_026">+--------------------+</span></div>
<div style="position:absolute;left:119.00px;top:406.06px" class="cls_026"><span class="cls_026">5 rows in set (0.01 sec)</span></div>
<div style="position:absolute;left:137.00px;top:436.74px" class="cls_011"><span class="cls_011">3.2.   Create a new table in the </span><span class="cls_021">items</span><span class="cls_011"> database. Run the following command to access the</span></div>
<div style="position:absolute;left:161.70px;top:448.74px" class="cls_011"><span class="cls_011">database.</span></div>
<div style="position:absolute;left:119.00px;top:476.45px" class="cls_026"><span class="cls_026">mysql> </span><span class="cls_027">use items;</span></div>
<div style="position:absolute;left:119.00px;top:488.45px" class="cls_026"><span class="cls_026">Database changed</span></div>
<div style="position:absolute;left:137.00px;top:519.13px" class="cls_011"><span class="cls_011">3.3.  Create a table called </span><span class="cls_021">Projects</span><span class="cls_011"> in the </span><span class="cls_021">items</span><span class="cls_011"> database.</span></div>
<div style="position:absolute;left:119.00px;top:546.85px" class="cls_026"><span class="cls_026">mysql> </span><span class="cls_027">CREATE TABLE Projects (id int(11) NOT NULL,</span></div>
<div style="position:absolute;left:138.20px;top:558.84px" class="cls_026"><span class="cls_026">-> </span><span class="cls_027">name varchar(255) DEFAULT NULL,</span></div>
<div style="position:absolute;left:138.20px;top:570.84px" class="cls_026"><span class="cls_026">-> </span><span class="cls_027">code varchar(255) DEFAULT NULL,</span></div>
<div style="position:absolute;left:138.20px;top:582.84px" class="cls_026"><span class="cls_026">-> </span><span class="cls_027">PRIMARY KEY (id));</span></div>
<div style="position:absolute;left:119.00px;top:594.84px" class="cls_026"><span class="cls_026">Query OK, 0 rows affected (0.01 sec)</span></div>
<div style="position:absolute;left:161.70px;top:617.12px" class="cls_011"><span class="cls_011">You can optionally use the </span><span class="cls_021">~/DO180/solutions/container-create/</span></div>
<div style="position:absolute;left:161.70px;top:629.12px" class="cls_021"><span class="cls_021">create_table.txt</span><span class="cls_011"> file to copy and paste the </span><span class="cls_021">CREATE TABLE</span><span class="cls_011"> MySQL statement</span></div>
<div style="position:absolute;left:161.70px;top:641.11px" class="cls_011"><span class="cls_011">as given above.</span></div>
<div style="position:absolute;left:137.00px;top:665.51px" class="cls_011"><span class="cls_011">3.4.  Use the </span><span class="cls_021">show tables</span><span class="cls_011"> command to verify that the table was created.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.66px;top:751.59px" class="cls_013"><span class="cls_013">35</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:42506px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background054.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 2 |</span><span class="cls_019"> Creating Containerized Services</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">mysql> </span><span class="cls_027">show tables;</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">+---------------------+</span></div>
<div style="position:absolute;left:101.00px;top:85.69px" class="cls_026"><span class="cls_026">| Tables_in_items</span></div>
<div style="position:absolute;left:206.60px;top:85.69px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:101.00px;top:97.69px" class="cls_026"><span class="cls_026">+---------------------+</span></div>
<div style="position:absolute;left:101.00px;top:109.69px" class="cls_026"><span class="cls_026">| Projects</span></div>
<div style="position:absolute;left:206.60px;top:109.69px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:101.00px;top:121.68px" class="cls_026"><span class="cls_026">+---------------------+</span></div>
<div style="position:absolute;left:101.00px;top:133.68px" class="cls_026"><span class="cls_026">1 row in set (0.00 sec)</span></div>
<div style="position:absolute;left:119.00px;top:162.46px" class="cls_011"><span class="cls_011">3.5.   Use the </span><span class="cls_021">insert</span><span class="cls_011"> command to insert a row into the table.</span></div>
<div style="position:absolute;left:101.00px;top:190.18px" class="cls_026"><span class="cls_026">mysql> </span><span class="cls_027">insert into Projects (id, name, code) values (1,'DevOps','DO180');</span></div>
<div style="position:absolute;left:101.00px;top:202.18px" class="cls_026"><span class="cls_026">Query OK, 1 row affected (0.02 sec)</span></div>
<div style="position:absolute;left:119.00px;top:230.96px" class="cls_011"><span class="cls_011">3.6.  Use the </span><span class="cls_021">select</span><span class="cls_011"> command to verify that the project information was added to the</span></div>
<div style="position:absolute;left:143.70px;top:242.95px" class="cls_011"><span class="cls_011">table.</span></div>
<div style="position:absolute;left:101.00px;top:270.67px" class="cls_026"><span class="cls_026">mysql> </span><span class="cls_027">select * from Projects;</span></div>
<div style="position:absolute;left:101.00px;top:282.67px" class="cls_026"><span class="cls_026">+----+-----------+-------+</span></div>
<div style="position:absolute;left:101.00px;top:294.67px" class="cls_026"><span class="cls_026">| id | name</span></div>
<div style="position:absolute;left:182.60px;top:294.67px" class="cls_026"><span class="cls_026">| code</span></div>
<div style="position:absolute;left:221.00px;top:294.67px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:101.00px;top:306.66px" class="cls_026"><span class="cls_026">+----------------+-------+</span></div>
<div style="position:absolute;left:101.00px;top:318.66px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:115.40px;top:318.66px" class="cls_026"><span class="cls_026">1 | DevOps</span></div>
<div style="position:absolute;left:182.60px;top:318.66px" class="cls_026"><span class="cls_026">| DO180 |</span></div>
<div style="position:absolute;left:101.00px;top:330.66px" class="cls_026"><span class="cls_026">+----------------+-------+</span></div>
<div style="position:absolute;left:101.00px;top:342.66px" class="cls_026"><span class="cls_026">1 row in set (0.00 sec)</span></div>
<div style="position:absolute;left:119.00px;top:371.44px" class="cls_011"><span class="cls_011">3.7.   Exit from the MySQL prompt and the MySQL container:</span></div>
<div style="position:absolute;left:101.00px;top:399.15px" class="cls_026"><span class="cls_026">mysql> </span><span class="cls_027">exit</span></div>
<div style="position:absolute;left:101.00px;top:411.15px" class="cls_026"><span class="cls_026">Bye</span></div>
<div style="position:absolute;left:101.00px;top:423.15px" class="cls_026"><span class="cls_026">bash-4.2$ </span><span class="cls_027">exit</span></div>
<div style="position:absolute;left:101.00px;top:435.15px" class="cls_026"><span class="cls_026">exit</span></div>
<div style="position:absolute;left:90.00px;top:465.49px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:487.43px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab container-create finish</span><span class="cls_011"> script to complete this lab.</span></div>
<div style="position:absolute;left:101.00px;top:515.15px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab container-create finish</span></div>
<div style="position:absolute;left:90.00px;top:542.92px" class="cls_011"><span class="cls_011">This concludes the exercise.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">36</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:43308px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background055.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 2 |</span><span class="cls_019"> Creating Containerized Services</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_042"><span class="cls_042">Lab</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Creating Containerized Services</span></div>
<div style="position:absolute;left:120.00px;top:139.15px" class="cls_043"><span class="cls_043">Performance Checklist</span></div>
<div style="position:absolute;left:120.00px;top:157.09px" class="cls_011"><span class="cls_011">In this lab, you create an Apache HTTP Server container with a custom welcome page.</span></div>
<div style="position:absolute;left:120.00px;top:180.15px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:120.00px;top:198.09px" class="cls_011"><span class="cls_011">You should be able to start and customize a container using a container image.</span></div>
<div style="position:absolute;left:120.00px;top:221.15px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:120.00px;top:239.09px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:119.00px;top:266.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab container-review start</span></div>
<div style="position:absolute;left:108.00px;top:321.42px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:130.00px;top:321.48px" class="cls_011"><span class="cls_011">Start a container named </span><span class="cls_021">httpd-basic</span><span class="cls_011"> in the background, and forward port 8080 to port</span></div>
<div style="position:absolute;left:130.00px;top:333.48px" class="cls_011"><span class="cls_011">80 in the container. Use the </span><span class="cls_021">quay.io/redhattraining/httpd-parent</span><span class="cls_011"> container image</span></div>
<div style="position:absolute;left:130.00px;top:345.48px" class="cls_011"><span class="cls_011">with the </span><span class="cls_021">2.4</span><span class="cls_011"> tag.</span></div>
<div style="position:absolute;left:144.00px;top:378.41px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:392.78px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">-p 8080:80</span><span class="cls_011"> option with </span><span class="cls_021">sudo podman run</span><span class="cls_011"> command to forward the</span></div>
<div style="position:absolute;left:144.00px;top:404.78px" class="cls_011"><span class="cls_011">port.</span></div>
<div style="position:absolute;left:130.00px;top:442.68px" class="cls_011"><span class="cls_011">This command starts the Apache HTTP server in the background and returns to the Bash</span></div>
<div style="position:absolute;left:130.00px;top:454.68px" class="cls_011"><span class="cls_011">prompt.</span></div>
<div style="position:absolute;left:108.00px;top:472.63px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:130.00px;top:472.68px" class="cls_011"><span class="cls_011">Test the </span><span class="cls_021">httpd-basic</span><span class="cls_011"> container.</span></div>
<div style="position:absolute;left:130.00px;top:488.68px" class="cls_011"><span class="cls_011">From </span><span class="cls_021">workstation</span><span class="cls_011">, attempt to access </span><A HREF="http://localhost:8080/">http://localhost:8080</A> </span><span class="cls_011"> using any web browser.</span></div>
<div style="position:absolute;left:130.00px;top:504.68px" class="cls_011"><span class="cls_011">An </span><span class="cls_021">Hello from the httpd-parent container!</span><span class="cls_011"> message is displayed, which is the</span></div>
<div style="position:absolute;left:130.00px;top:516.68px" class="cls_021"><span class="cls_021">index.html</span><span class="cls_011"> page from the Apache HTTP server container running on </span><span class="cls_021">workstation</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:108.00px;top:534.63px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:130.00px;top:534.68px" class="cls_011"><span class="cls_011">Customize the </span><span class="cls_021">httpd-basic</span><span class="cls_011"> container to display </span><span class="cls_021">Hello World</span><span class="cls_011"> as the message. The</span></div>
<div style="position:absolute;left:130.00px;top:546.68px" class="cls_011"><span class="cls_011">container's message is stored in the file </span><span class="cls_021">/var/www/html/index.html</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:130.00px;top:571.08px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:154.70px;top:571.08px" class="cls_011"><span class="cls_011">Start a Bash session inside the container.</span></div>
<div style="position:absolute;left:130.00px;top:595.48px" class="cls_011"><span class="cls_011">3.2.   From the Bash session, verify the </span><span class="cls_021">index.html</span><span class="cls_011"> file under </span><span class="cls_021">/var/www/html</span><span class="cls_011"> directory</span></div>
<div style="position:absolute;left:154.70px;top:607.48px" class="cls_011"><span class="cls_011">using the </span><span class="cls_021">ls -la</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:130.00px;top:631.88px" class="cls_011"><span class="cls_011">3.3.  Change the </span><span class="cls_021">index.html</span><span class="cls_011"> file to contain the text </span><span class="cls_044">Hello World</span><span class="cls_011">, replacing all of the</span></div>
<div style="position:absolute;left:154.70px;top:643.87px" class="cls_011"><span class="cls_011">existing content.</span></div>
<div style="position:absolute;left:130.00px;top:668.27px" class="cls_011"><span class="cls_011">3.4.  Attempt to access </span><A HREF="http://localhost:8080/">http://localhost:8080</A> </span><span class="cls_011"> again, and verify that the web page has</span></div>
<div style="position:absolute;left:154.70px;top:680.27px" class="cls_011"><span class="cls_011">been updated.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.65px;top:751.59px" class="cls_013"><span class="cls_013">37</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:44110px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background056.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 2 |</span><span class="cls_019"> Creating Containerized Services</span></div>
<div style="position:absolute;left:90.00px;top:52.04px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:90.00px;top:73.98px" class="cls_011"><span class="cls_011">Grade your work by running the </span><span class="cls_021">lab container-review grade</span><span class="cls_011"> command on your</span></div>
<div style="position:absolute;left:90.00px;top:85.97px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011"> machine. Correct any reported failures and rerun the script until successful.</span></div>
<div style="position:absolute;left:101.00px;top:113.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab container-review grade</span></div>
<div style="position:absolute;left:90.00px;top:144.03px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:165.97px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab container-review finish</span><span class="cls_011"> script to complete this lab.</span></div>
<div style="position:absolute;left:101.00px;top:193.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab container-review finish</span></div>
<div style="position:absolute;left:90.00px;top:221.47px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">38</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:44912px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background057.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 2 |</span><span class="cls_019"> Creating Containerized Services</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_042"><span class="cls_042">Solution</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Creating Containerized Services</span></div>
<div style="position:absolute;left:120.00px;top:139.15px" class="cls_043"><span class="cls_043">Performance Checklist</span></div>
<div style="position:absolute;left:120.00px;top:157.09px" class="cls_011"><span class="cls_011">In this lab, you create an Apache HTTP Server container with a custom welcome page.</span></div>
<div style="position:absolute;left:120.00px;top:180.15px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:120.00px;top:198.09px" class="cls_011"><span class="cls_011">You should be able to start and customize a container using a container image.</span></div>
<div style="position:absolute;left:120.00px;top:221.15px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:120.00px;top:239.09px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:119.00px;top:266.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab container-review start</span></div>
<div style="position:absolute;left:108.00px;top:319.02px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:130.00px;top:319.08px" class="cls_011"><span class="cls_011">Start a container named </span><span class="cls_021">httpd-basic</span><span class="cls_011"> in the background, and forward port 8080 to port</span></div>
<div style="position:absolute;left:130.00px;top:331.08px" class="cls_011"><span class="cls_011">80 in the container. Use the </span><span class="cls_021">quay.io/redhattraining/httpd-parent</span><span class="cls_011"> container image</span></div>
<div style="position:absolute;left:130.00px;top:343.08px" class="cls_011"><span class="cls_011">with the </span><span class="cls_021">2.4</span><span class="cls_011"> tag.</span></div>
<div style="position:absolute;left:144.00px;top:374.09px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:388.47px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">-p 8080:80</span><span class="cls_011"> option with </span><span class="cls_021">sudo podman run</span><span class="cls_011"> command to forward the</span></div>
<div style="position:absolute;left:144.00px;top:400.47px" class="cls_011"><span class="cls_011">port.</span></div>
<div style="position:absolute;left:130.00px;top:438.37px" class="cls_011"><span class="cls_011">Run the following command:</span></div>
<div style="position:absolute;left:119.00px;top:466.09px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run -d -p 8080:80 \</span></div>
<div style="position:absolute;left:119.00px;top:478.09px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--name httpd-basic quay.io/redhattraining/httpd-parent:2.4</span></div>
<div style="position:absolute;left:119.00px;top:490.09px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:502.09px" class="cls_026"><span class="cls_026">Copying blob sha256:743f2d6</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:123.80px;top:514.09px" class="cls_026"><span class="cls_026">21.45 MB / 21.45 MB [===================================================] 1s</span></div>
<div style="position:absolute;left:119.00px;top:526.09px" class="cls_026"><span class="cls_026">Copying blob sha256:c92eb69</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:123.80px;top:538.09px" class="cls_026"><span class="cls_026">155 B / 155 B [=========================================================] 0s</span></div>
<div style="position:absolute;left:119.00px;top:550.09px" class="cls_026"><span class="cls_026">Copying blob sha256:2211b05</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:123.80px;top:562.09px" class="cls_026"><span class="cls_026">9.86 MB / 9.86 MB [=====================================================] 0s</span></div>
<div style="position:absolute;left:119.00px;top:574.09px" class="cls_026"><span class="cls_026">Copying blob sha256:aed1801</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:123.80px;top:586.09px" class="cls_026"><span class="cls_026">15.78 MB / 15.78 MB [===================================================] 1s</span></div>
<div style="position:absolute;left:119.00px;top:598.09px" class="cls_026"><span class="cls_026">Copying blob sha256:7c472a4</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:123.80px;top:610.09px" class="cls_026"><span class="cls_026">300 B / 300 B [=========================================================] 0s</span></div>
<div style="position:absolute;left:119.00px;top:622.09px" class="cls_026"><span class="cls_026">Copying config sha256:b7cc370</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:123.80px;top:634.09px" class="cls_026"><span class="cls_026">7.18 KB / 7.18 KB [=====================================================] 0s</span></div>
<div style="position:absolute;left:119.00px;top:646.09px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:119.00px;top:658.09px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:119.00px;top:670.09px" class="cls_026"><span class="cls_026">b51444e3b1d7aaf94b3a4a54485d76a0a094cbfac89c287d360890a3d2779a5a</span></div>
<div style="position:absolute;left:130.00px;top:692.37px" class="cls_011"><span class="cls_011">This command starts the Apache HTTP server in the background and returns to the Bash</span></div>
<div style="position:absolute;left:130.00px;top:704.37px" class="cls_011"><span class="cls_011">prompt.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.45px;top:751.59px" class="cls_013"><span class="cls_013">39</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:45714px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background058.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 2 |</span><span class="cls_019"> Creating Containerized Services</span></div>
<div style="position:absolute;left:90.00px;top:53.92px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:112.00px;top:53.98px" class="cls_011"><span class="cls_011">Test the </span><span class="cls_021">httpd-basic</span><span class="cls_011"> container.</span></div>
<div style="position:absolute;left:112.00px;top:69.98px" class="cls_011"><span class="cls_011">From </span><span class="cls_021">workstation</span><span class="cls_011">, attempt to access </span><A HREF="http://localhost:8080/">http://localhost:8080</A> </span><span class="cls_011"> using any web browser.</span></div>
<div style="position:absolute;left:112.00px;top:85.98px" class="cls_011"><span class="cls_011">An </span><span class="cls_021">Hello from the httpd-parent container!</span><span class="cls_011"> message is displayed, which is the</span></div>
<div style="position:absolute;left:112.00px;top:97.98px" class="cls_021"><span class="cls_021">index.html</span><span class="cls_011"> page from the Apache HTTP server container running on </span><span class="cls_021">workstation</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:101.00px;top:125.70px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl <A HREF="http://localhost:8080/">http://localhost:8080</A> </span></div>
<div style="position:absolute;left:101.00px;top:137.70px" class="cls_026"><span class="cls_026">Hello from the httpd-parent container!</span></div>
<div style="position:absolute;left:90.00px;top:161.92px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:112.00px;top:161.98px" class="cls_011"><span class="cls_011">Customize the </span><span class="cls_021">httpd-basic</span><span class="cls_011"> container to display </span><span class="cls_021">Hello World</span><span class="cls_011"> as the message. The</span></div>
<div style="position:absolute;left:112.00px;top:173.98px" class="cls_011"><span class="cls_011">container's message is stored in the file </span><span class="cls_021">/var/www/html/index.html</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:112.00px;top:198.38px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:136.70px;top:198.38px" class="cls_011"><span class="cls_011">Start a Bash session inside the container.</span></div>
<div style="position:absolute;left:136.70px;top:214.37px" class="cls_011"><span class="cls_011">Run the following command:</span></div>
<div style="position:absolute;left:101.00px;top:242.09px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman exec -it httpd-basic /bin/bash</span></div>
<div style="position:absolute;left:101.00px;top:254.09px" class="cls_026"><span class="cls_026">bash-4.4#</span></div>
<div style="position:absolute;left:112.00px;top:284.77px" class="cls_011"><span class="cls_011">3.2.   From the Bash session, verify the </span><span class="cls_021">index.html</span><span class="cls_011"> file under </span><span class="cls_021">/var/www/html</span><span class="cls_011"> directory</span></div>
<div style="position:absolute;left:136.70px;top:296.77px" class="cls_011"><span class="cls_011">using the </span><span class="cls_021">ls -la</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:101.00px;top:324.48px" class="cls_026"><span class="cls_026">bash-4.4# </span><span class="cls_027">ls -la /var/www/html</span></div>
<div style="position:absolute;left:101.00px;top:336.48px" class="cls_026"><span class="cls_026">total 4</span></div>
<div style="position:absolute;left:101.00px;top:348.48px" class="cls_026"><span class="cls_026">drwxr-xr-x. 2 root root 24 Jun 12 11:58 .</span></div>
<div style="position:absolute;left:101.00px;top:360.48px" class="cls_026"><span class="cls_026">drwxr-xr-x. 4 root root 33 Jun 12 11:58 ..</span></div>
<div style="position:absolute;left:101.00px;top:372.48px" class="cls_026"><span class="cls_026">-rw-r--r--. 1 root root 39 Jun 12 11:58 index.html</span></div>
<div style="position:absolute;left:112.00px;top:403.15px" class="cls_011"><span class="cls_011">3.3.  Change the </span><span class="cls_021">index.html</span><span class="cls_011"> file to contain the text </span><span class="cls_044">Hello World</span><span class="cls_011">, replacing all of the</span></div>
<div style="position:absolute;left:136.70px;top:415.15px" class="cls_011"><span class="cls_011">existing content.</span></div>
<div style="position:absolute;left:136.70px;top:431.15px" class="cls_011"><span class="cls_011">From the Bash session in the container, run the following command:</span></div>
<div style="position:absolute;left:101.00px;top:458.87px" class="cls_026"><span class="cls_026">bash-4.4# </span><span class="cls_027">echo "Hello World" > /var/www/html/index.html</span></div>
<div style="position:absolute;left:112.00px;top:489.55px" class="cls_011"><span class="cls_011">3.4.  Attempt to access </span><A HREF="http://localhost:8080/">http://localhost:8080</A> </span><span class="cls_011"> again, and verify that the web page has</span></div>
<div style="position:absolute;left:136.70px;top:501.54px" class="cls_011"><span class="cls_011">been updated.</span></div>
<div style="position:absolute;left:101.00px;top:529.26px" class="cls_026"><span class="cls_026">bash-4.4# </span><span class="cls_027">exit</span></div>
<div style="position:absolute;left:101.00px;top:541.26px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl <A HREF="http://localhost:8080/">http://localhost:8080</A> </span></div>
<div style="position:absolute;left:101.00px;top:553.26px" class="cls_026"><span class="cls_026">Hello World</span></div>
<div style="position:absolute;left:90.00px;top:583.60px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:90.00px;top:605.54px" class="cls_011"><span class="cls_011">Grade your work by running the </span><span class="cls_021">lab container-review grade</span><span class="cls_011"> command on your</span></div>
<div style="position:absolute;left:90.00px;top:617.53px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011"> machine. Correct any reported failures and rerun the script until successful.</span></div>
<div style="position:absolute;left:101.00px;top:645.25px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab container-review grade</span></div>
<div style="position:absolute;left:90.00px;top:675.59px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:697.53px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab container-review finish</span><span class="cls_011"> script to complete this lab.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">40</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:46516px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background059.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 2 |</span><span class="cls_019"> Creating Containerized Services</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab container-review finish</span></div>
<div style="position:absolute;left:108.00px;top:89.47px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:509.00px;top:751.59px" class="cls_013"><span class="cls_013">41</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:47318px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background060.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 2 |</span><span class="cls_019"> Creating Containerized Services</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Summary</span></div>
<div style="position:absolute;left:90.00px;top:135.98px" class="cls_011"><span class="cls_011">In this chapter, you learned:</span></div>
<div style="position:absolute;left:90.00px;top:157.47px" class="cls_011"><span class="cls_011">• Podman allows users to search for and download images from local or remote registries.</span></div>
<div style="position:absolute;left:90.00px;top:178.97px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">podman run</span><span class="cls_011"> command creates and starts a container from a container image.</span></div>
<div style="position:absolute;left:90.00px;top:200.47px" class="cls_011"><span class="cls_011">• Containers are executed in the background by using the </span><span class="cls_021">-d</span><span class="cls_011"> flag, or interactively by using the </span><span class="cls_021">-</span></div>
<div style="position:absolute;left:99.50px;top:212.47px" class="cls_021"><span class="cls_021">it</span><span class="cls_011"> flag.</span></div>
<div style="position:absolute;left:90.00px;top:233.97px" class="cls_011"><span class="cls_011">• Some container images require environment variables that are set using the </span><span class="cls_021">-e</span><span class="cls_011"> option from the</span></div>
<div style="position:absolute;left:99.50px;top:245.96px" class="cls_021"><span class="cls_021">podman run</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:90.00px;top:267.46px" class="cls_011"><span class="cls_011">• Red Hat Container Catalog assists in searching, exploring, and analyzing container images from</span></div>
<div style="position:absolute;left:99.50px;top:279.46px" class="cls_011"><span class="cls_011">Red Hat's official container image repository.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">42</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:48120px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background061.jpg" width=612 height=792></div>
<div style="position:absolute;left:126.00px;top:69.76px" class="cls_030"><span class="cls_030">Chapter 3</span></div>
<div style="position:absolute;left:126.00px;top:175.50px" class="cls_031"><span class="cls_031">Managing Containers</span></div>
<div style="position:absolute;left:146.00px;top:228.67px" class="cls_018"><span class="cls_018">Goal</span></div>
<div style="position:absolute;left:252.88px;top:228.01px" class="cls_008"><span class="cls_008">Modify prebuilt container images to create and</span></div>
<div style="position:absolute;left:252.88px;top:240.01px" class="cls_008"><span class="cls_008">manage containerized services.</span></div>
<div style="position:absolute;left:146.00px;top:268.67px" class="cls_018"><span class="cls_018">Objectives</span></div>
<div style="position:absolute;left:252.88px;top:268.01px" class="cls_008"><span class="cls_008">•  Manage a container's life cycle from creation to</span></div>
<div style="position:absolute;left:267.88px;top:280.01px" class="cls_008"><span class="cls_008">deletion.</span></div>
<div style="position:absolute;left:252.88px;top:296.01px" class="cls_008"><span class="cls_008">•  Save container application data with persistent</span></div>
<div style="position:absolute;left:267.88px;top:308.01px" class="cls_008"><span class="cls_008">storage.</span></div>
<div style="position:absolute;left:252.88px;top:324.01px" class="cls_008"><span class="cls_008">•  Describe how to use port forwarding to access</span></div>
<div style="position:absolute;left:267.88px;top:336.01px" class="cls_008"><span class="cls_008">a container.</span></div>
<div style="position:absolute;left:146.00px;top:364.67px" class="cls_018"><span class="cls_018">Sections</span></div>
<div style="position:absolute;left:252.88px;top:364.01px" class="cls_008"><span class="cls_008">•  Managing the Life Cycle of Containers (and</span></div>
<div style="position:absolute;left:267.88px;top:376.01px" class="cls_008"><span class="cls_008">Guided Exercise)</span></div>
<div style="position:absolute;left:252.88px;top:392.01px" class="cls_008"><span class="cls_008">•  Attaching Persistent Storage to Containers</span></div>
<div style="position:absolute;left:267.88px;top:404.01px" class="cls_008"><span class="cls_008">(and Guided Exercise)</span></div>
<div style="position:absolute;left:252.88px;top:420.01px" class="cls_008"><span class="cls_008">•  Accessing Containers (and Guided Exercise)</span></div>
<div style="position:absolute;left:146.00px;top:448.67px" class="cls_018"><span class="cls_018">Lab</span></div>
<div style="position:absolute;left:252.88px;top:448.01px" class="cls_008"><span class="cls_008">•  Managing Containers</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.08px;top:751.59px" class="cls_013"><span class="cls_013">43</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:48922px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background062.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Managing the Life Cycle of Containers</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to manage the life cycle of a container from</span></div>
<div style="position:absolute;left:90.00px;top:170.97px" class="cls_011"><span class="cls_011">creation to deletion.</span></div>
<div style="position:absolute;left:90.00px;top:193.26px" class="cls_024"><span class="cls_024">Container Life Cycle Management with Podman</span></div>
<div style="position:absolute;left:90.00px;top:217.97px" class="cls_011"><span class="cls_011">In previous chapters you learned how to use Podman to create a containerized service. Now you</span></div>
<div style="position:absolute;left:90.00px;top:229.97px" class="cls_011"><span class="cls_011">will dive deeper into commands and strategies that you can use to manage a container's life cycle.</span></div>
<div style="position:absolute;left:90.00px;top:241.97px" class="cls_011"><span class="cls_011">Podman allows you not only to run containers, but also to make them run in the background,</span></div>
<div style="position:absolute;left:90.00px;top:253.97px" class="cls_011"><span class="cls_011">execute new processes inside them, and provide them with resources such as file system volumes</span></div>
<div style="position:absolute;left:90.00px;top:265.96px" class="cls_011"><span class="cls_011">or a network.</span></div>
<div style="position:absolute;left:90.00px;top:287.46px" class="cls_011"><span class="cls_011">Podman, implemented by the </span><span class="cls_021">podman</span><span class="cls_011"> command, provides a set of subcommands to create</span></div>
<div style="position:absolute;left:90.00px;top:299.46px" class="cls_011"><span class="cls_011">and manage containers. Developers use those subcommands to manage container and</span></div>
<div style="position:absolute;left:90.00px;top:311.46px" class="cls_011"><span class="cls_011">container images life cycle. The following figure shows a summary of the most commonly used</span></div>
<div style="position:absolute;left:90.00px;top:323.46px" class="cls_011"><span class="cls_011">subcommands that change container and image state.</span></div>
<div style="position:absolute;left:208.59px;top:600.07px" class="cls_020"><span class="cls_020">Figure 3.1: Podman managing subcommands</span></div>
<div style="position:absolute;left:90.00px;top:622.98px" class="cls_011"><span class="cls_011">Podman also provides a set of useful subcommands to obtain information about running and</span></div>
<div style="position:absolute;left:90.00px;top:634.98px" class="cls_011"><span class="cls_011">stopped containers. You can use those subcommands to extract information from containers and</span></div>
<div style="position:absolute;left:90.00px;top:646.98px" class="cls_011"><span class="cls_011">images for debugging, updating, or reporting purposes. The following figure shows a summary of</span></div>
<div style="position:absolute;left:90.00px;top:658.98px" class="cls_011"><span class="cls_011">the most commonly used subcommands that query information from containers and images.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">44</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:49724px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background063.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:233.39px;top:382.77px" class="cls_020"><span class="cls_020">Figure 3.2: Podman query subcommands</span></div>
<div style="position:absolute;left:108.00px;top:405.69px" class="cls_011"><span class="cls_011">Use these two figures as a reference while you learn about Podman subcommands in this course.</span></div>
<div style="position:absolute;left:108.00px;top:427.97px" class="cls_024"><span class="cls_024">Creating Containers</span></div>
<div style="position:absolute;left:108.00px;top:452.69px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">podman run</span><span class="cls_011"> command creates a new container from an image and starts a process inside</span></div>
<div style="position:absolute;left:108.00px;top:464.69px" class="cls_011"><span class="cls_011">the new container. If the container image is not available locally, this command attempts to</span></div>
<div style="position:absolute;left:108.00px;top:476.68px" class="cls_011"><span class="cls_011">download the image using the configured image repository:</span></div>
<div style="position:absolute;left:119.00px;top:504.40px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run rhscl/httpd-24-rhel7</span></div>
<div style="position:absolute;left:119.00px;top:516.40px" class="cls_026"><span class="cls_026">Trying to pull regist...httpd-24-rhel7:latest...Getting image source signatures</span></div>
<div style="position:absolute;left:119.00px;top:528.40px" class="cls_026"><span class="cls_026">Copying blob sha256:23113...b0be82</span></div>
<div style="position:absolute;left:119.00px;top:540.39px" class="cls_026"><span class="cls_026">72.21 MB / 72.21 MB [======================================================] 7s</span></div>
<div style="position:absolute;left:119.00px;top:552.39px" class="cls_029"><span class="cls_029">...output omitted...</span><span class="cls_026">AH00094: Command line: 'httpd -D FOREGROUND'</span></div>
<div style="position:absolute;left:119.00px;top:564.39px" class="cls_027"><span class="cls_027">^C</span></div>
<div style="position:absolute;left:108.00px;top:592.17px" class="cls_011"><span class="cls_011">In the previous output sample, the container was started with a non interactive process (without</span></div>
<div style="position:absolute;left:108.00px;top:604.17px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">-it</span><span class="cls_011"> option) and is running in the foreground because it was not started with the </span><span class="cls_021">-d</span><span class="cls_011"> option.</span></div>
<div style="position:absolute;left:108.00px;top:616.17px" class="cls_011"><span class="cls_011">Stopping the resulting process with </span><span class="cls_021">Ctrl</span><span class="cls_011">+</span><span class="cls_021">C</span><span class="cls_011"> (</span><span class="cls_021">SIGINT</span><span class="cls_011">) therefore stops both the container process</span></div>
<div style="position:absolute;left:108.00px;top:628.16px" class="cls_011"><span class="cls_011">as well as the container itself.</span></div>
<div style="position:absolute;left:108.00px;top:649.66px" class="cls_011"><span class="cls_011">Podman identifies containers by a unique container ID or container name. The </span><span class="cls_021">podman ps</span></div>
<div style="position:absolute;left:108.00px;top:661.66px" class="cls_011"><span class="cls_011">command displays the container ID and names for all actively running containers:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.17px;top:751.59px" class="cls_013"><span class="cls_013">45</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:50526px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background064.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman ps</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">CONTAINER ID</span></div>
<div style="position:absolute;left:177.80px;top:73.69px" class="cls_026"><span class="cls_026">IMAGE</span></div>
<div style="position:absolute;left:283.40px;top:73.69px" class="cls_026"><span class="cls_026">COMMAND</span></div>
<div style="position:absolute;left:393.80px;top:73.69px" class="cls_026"><span class="cls_026">... NAMES</span></div>
<div style="position:absolute;left:101.00px;top:85.69px" class="cls_026"><span class="cls_026">47c9aad6049</span></div>
<div style="position:absolute;left:178.20px;top:85.69px" class="cls_026"><span class="cls_026">rhscl/httpd-24-rhel7</span></div>
<div style="position:absolute;left:283.80px;top:85.69px" class="cls_026"><span class="cls_026">"httpd -D FOREGROUND"</span></div>
<div style="position:absolute;left:394.20px;top:85.69px" class="cls_026"><span class="cls_026">... focused_fermat</span></div>
<div style="position:absolute;left:110.90px;top:113.47px" class="cls_011"><span class="cls_011">The container ID is unique and generated automatically.</span></div>
<div style="position:absolute;left:110.90px;top:125.91px" class="cls_011"><span class="cls_011">The container name can be manually specified, otherwise it is generated automatically. This</span></div>
<div style="position:absolute;left:110.90px;top:137.91px" class="cls_011"><span class="cls_011">name must be unique or the </span><span class="cls_021">run</span><span class="cls_011"> command fails.</span></div>
<div style="position:absolute;left:90.00px;top:159.41px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">podman run</span><span class="cls_011"> command automatically generates a unique, random ID. It also generates a</span></div>
<div style="position:absolute;left:90.00px;top:171.40px" class="cls_011"><span class="cls_011">random container name. To define the container name explicitly, use the </span><span class="cls_021">--name</span><span class="cls_011"> option when</span></div>
<div style="position:absolute;left:90.00px;top:183.40px" class="cls_011"><span class="cls_011">running a container:</span></div>
<div style="position:absolute;left:101.00px;top:211.12px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run --name </span><span class="cls_040">my-httpd-container</span></div>
<div style="position:absolute;left:105.80px;top:223.12px" class="cls_027"><span class="cls_027">rhscl/httpd-24-rhel7</span></div>
<div style="position:absolute;left:101.00px;top:235.12px" class="cls_029"><span class="cls_029">...output omitted...</span><span class="cls_026">AH00094: Command line: 'httpd -D FOREGROUND'</span></div>
<div style="position:absolute;left:126.00px;top:274.32px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:288.69px" class="cls_011"><span class="cls_011">The name must be unique. Podman throws an error if the name is already in use,</span></div>
<div style="position:absolute;left:126.00px;top:300.69px" class="cls_011"><span class="cls_011">including stopped containers.</span></div>
<div style="position:absolute;left:90.00px;top:338.59px" class="cls_011"><span class="cls_011">Another important feature is the ability to run the container as a daemon process in the</span></div>
<div style="position:absolute;left:90.00px;top:350.59px" class="cls_011"><span class="cls_011">background. The </span><span class="cls_021">-d</span><span class="cls_011"> option is responsible for running in detached mode. When using this option,</span></div>
<div style="position:absolute;left:90.00px;top:362.59px" class="cls_011"><span class="cls_011">Podman returns the container ID on the screen, allowing you to continue to run commands in the</span></div>
<div style="position:absolute;left:90.00px;top:374.58px" class="cls_011"><span class="cls_011">same terminal while the container runs in the background:</span></div>
<div style="position:absolute;left:101.00px;top:402.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run --name my-httpd-container -d</span></div>
<div style="position:absolute;left:105.80px;top:414.30px" class="cls_027"><span class="cls_027">rhscl/httpd-24-rhel7</span></div>
<div style="position:absolute;left:101.00px;top:426.30px" class="cls_026"><span class="cls_026">77d4b7b8ed1fd57449163bcb0b78d205e70d2314273263ab941c0c371ad56412</span></div>
<div style="position:absolute;left:90.00px;top:454.08px" class="cls_011"><span class="cls_011">The container image specifies the command to run to start the containerized process, known</span></div>
<div style="position:absolute;left:90.00px;top:466.07px" class="cls_011"><span class="cls_011">as the entry point. The </span><span class="cls_021">podman run</span><span class="cls_011"> command can override this entry point by including the</span></div>
<div style="position:absolute;left:90.00px;top:478.07px" class="cls_011"><span class="cls_011">command after the container image:</span></div>
<div style="position:absolute;left:101.00px;top:505.79px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run rhscl/httpd-24-rhel7 ls /tmp</span></div>
<div style="position:absolute;left:101.00px;top:517.79px" class="cls_026"><span class="cls_026">anaconda-post.log</span></div>
<div style="position:absolute;left:101.00px;top:529.79px" class="cls_026"><span class="cls_026">ks-script-1j4CXN</span></div>
<div style="position:absolute;left:101.00px;top:541.78px" class="cls_026"><span class="cls_026">yum.log</span></div>
<div style="position:absolute;left:90.00px;top:569.56px" class="cls_011"><span class="cls_011">The specified command must be executable inside the container image.</span></div>
<div style="position:absolute;left:126.00px;top:602.48px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:616.86px" class="cls_011"><span class="cls_011">Because a specified command appears in the previous example, the container skips</span></div>
<div style="position:absolute;left:126.00px;top:628.86px" class="cls_011"><span class="cls_011">the entry point for the </span><span class="cls_021">httpd</span><span class="cls_011"> image. Hence, the </span><span class="cls_021">httpd</span><span class="cls_011"> service does not start.</span></div>
<div style="position:absolute;left:90.00px;top:666.76px" class="cls_011"><span class="cls_011">Some containers need to run as an interactive shell or process. This includes containers running</span></div>
<div style="position:absolute;left:90.00px;top:678.75px" class="cls_011"><span class="cls_011">processes that need user input (such as entering commands), and processes that generate output</span></div>
<div style="position:absolute;left:90.00px;top:690.75px" class="cls_011"><span class="cls_011">through standard output. The following example starts an interactive </span><span class="cls_021">bash</span><span class="cls_011"> shell in a </span><span class="cls_021">rhscl/</span></div>
<div style="position:absolute;left:90.00px;top:702.75px" class="cls_021"><span class="cls_021">httpd-24-rhel7</span><span class="cls_011"> container:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">46</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:51328px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background065.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run -it rhscl/httpd-24-rhel7 /bin/bash</span></div>
<div style="position:absolute;left:123.80px;top:73.69px" class="cls_026"><span class="cls_026">bash-4.2#</span></div>
<div style="position:absolute;left:108.00px;top:101.47px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">-t</span><span class="cls_011"> and </span><span class="cls_021">-i</span><span class="cls_011"> options enable terminal redirection for interactive text-based programs. The </span><span class="cls_021">-t</span></div>
<div style="position:absolute;left:108.00px;top:113.47px" class="cls_011"><span class="cls_011">option allocates a </span><span class="cls_021">pseudo-tty</span><span class="cls_011"> (a terminal) and attaches it to the standard input of the container.</span></div>
<div style="position:absolute;left:108.00px;top:125.47px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">-i</span><span class="cls_011"> option keeps the container's standard input open, even if it was detached, so the main</span></div>
<div style="position:absolute;left:108.00px;top:137.47px" class="cls_011"><span class="cls_011">process can continue waiting for input.</span></div>
<div style="position:absolute;left:108.00px;top:159.75px" class="cls_024"><span class="cls_024">Running Commands in a Container</span></div>
<div style="position:absolute;left:108.00px;top:184.46px" class="cls_011"><span class="cls_011">When a container starts, it executes the entry point command. However, it may be necessary to</span></div>
<div style="position:absolute;left:108.00px;top:196.46px" class="cls_011"><span class="cls_011">execute other commands to manage the running container. Some typical use case are shown</span></div>
<div style="position:absolute;left:108.00px;top:208.46px" class="cls_011"><span class="cls_011">below:</span></div>
<div style="position:absolute;left:108.00px;top:229.10px" class="cls_011"><span class="cls_011">• Executing an interactive shell in an already running container.</span></div>
<div style="position:absolute;left:108.00px;top:249.75px" class="cls_011"><span class="cls_011">• Running processes that update or display the container's files.</span></div>
<div style="position:absolute;left:108.00px;top:270.39px" class="cls_011"><span class="cls_011">• Starting new background processes inside the container.</span></div>
<div style="position:absolute;left:108.00px;top:291.89px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">podman exec</span><span class="cls_011"> command starts an additional process inside an already running container:</span></div>
<div style="position:absolute;left:119.00px;top:319.61px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman exec 7ed6e671a600 cat /etc/hostname</span></div>
<div style="position:absolute;left:119.00px;top:331.61px" class="cls_026"><span class="cls_026">7ed6e671a600</span></div>
<div style="position:absolute;left:108.00px;top:359.38px" class="cls_011"><span class="cls_011">The previous example uses the container ID to execute the command.</span></div>
<div style="position:absolute;left:108.00px;top:380.88px" class="cls_011"><span class="cls_011">Podman remembers the last container used in any command. Developers can skip writing this</span></div>
<div style="position:absolute;left:108.00px;top:392.88px" class="cls_011"><span class="cls_011">container's ID or name in later Podman commands by replacing the container id by the </span><span class="cls_021">-l</span><span class="cls_011"> option:</span></div>
<div style="position:absolute;left:119.00px;top:420.60px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman exec my-httpd-container cat /etc/hostname</span></div>
<div style="position:absolute;left:119.00px;top:432.60px" class="cls_026"><span class="cls_026">7ed6e671a600</span></div>
<div style="position:absolute;left:119.00px;top:444.59px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman exec -l cat /etc/hostname</span></div>
<div style="position:absolute;left:119.00px;top:456.59px" class="cls_026"><span class="cls_026">7ed6e671a600</span></div>
<div style="position:absolute;left:108.00px;top:485.15px" class="cls_024"><span class="cls_024">Managing Containers</span></div>
<div style="position:absolute;left:108.00px;top:509.87px" class="cls_011"><span class="cls_011">Creating and starting a container is just the first step of the container's life cycle. A container's life</span></div>
<div style="position:absolute;left:108.00px;top:521.87px" class="cls_011"><span class="cls_011">cycle also includes stopping, restarting, or finally removing it. Users can also examine the container</span></div>
<div style="position:absolute;left:108.00px;top:533.87px" class="cls_011"><span class="cls_011">status and metadata for debugging, updating, or reporting purposes.</span></div>
<div style="position:absolute;left:108.00px;top:555.36px" class="cls_011"><span class="cls_011">Podman provides the following commands for managing containers:</span></div>
<div style="position:absolute;left:108.00px;top:576.01px" class="cls_011"><span class="cls_011">•</span><span class="cls_021"> podman ps</span><span class="cls_011">: This command lists running containers:</span></div>
<div style="position:absolute;left:119.00px;top:603.72px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman ps</span></div>
<div style="position:absolute;left:119.00px;top:615.72px" class="cls_026"><span class="cls_026">CONTAINER ID   IMAGE</span></div>
<div style="position:absolute;left:258.20px;top:615.72px" class="cls_026"><span class="cls_026">COMMAND</span></div>
<div style="position:absolute;left:320.60px;top:615.72px" class="cls_026"><span class="cls_026">CREATED  STATUS   PORTS</span></div>
<div style="position:absolute;left:450.20px;top:615.72px" class="cls_026"><span class="cls_026">NAMES</span></div>
<div style="position:absolute;left:119.00px;top:627.72px" class="cls_026"><span class="cls_026">77d4b7b8ed1f    rhscl/httpd-24-rhel7</span></div>
<div style="position:absolute;left:302.20px;top:627.72px" class="cls_026"><span class="cls_026">"httpd..."    ...ago    Up...</span></div>
<div style="position:absolute;left:447.40px;top:627.72px" class="cls_026"><span class="cls_026">80/tcp    my-</span></div>
<div style="position:absolute;left:119.00px;top:639.72px" class="cls_026"><span class="cls_026">htt...</span></div>
<div style="position:absolute;left:138.40px;top:667.50px" class="cls_011"><span class="cls_011">Each container, when created, gets a </span><span class="cls_021">container ID</span><span class="cls_011">, which is a hexadecimal number. This</span></div>
<div style="position:absolute;left:138.40px;top:679.50px" class="cls_011"><span class="cls_011">ID looks like an image ID but is unrelated.</span></div>
<div style="position:absolute;left:138.40px;top:691.49px" class="cls_011"><span class="cls_011">Container image that was used to start the container.</span></div>
<div style="position:absolute;left:138.40px;top:703.94px" class="cls_011"><span class="cls_011">Command executed when the container started.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.16px;top:751.59px" class="cls_013"><span class="cls_013">47</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:52130px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background066.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:120.40px;top:53.98px" class="cls_011"><span class="cls_011">Date and time the container was started.</span></div>
<div style="position:absolute;left:120.40px;top:66.42px" class="cls_011"><span class="cls_011">Total container uptime, if still running, or time since terminated.</span></div>
<div style="position:absolute;left:120.40px;top:78.86px" class="cls_011"><span class="cls_011">Ports that were exposed by the container or any port forwarding that might be configured.</span></div>
<div style="position:absolute;left:120.40px;top:91.30px" class="cls_011"><span class="cls_011">The container name.</span></div>
<div style="position:absolute;left:99.50px;top:113.24px" class="cls_011"><span class="cls_011">Podman does not discard stopped containers immediately. Podman preserves their local file</span></div>
<div style="position:absolute;left:99.50px;top:125.24px" class="cls_011"><span class="cls_011">systems and other states for facilitating postmortem analysis. Option </span><span class="cls_021">-a</span><span class="cls_011"> lists all containers,</span></div>
<div style="position:absolute;left:99.50px;top:137.24px" class="cls_011"><span class="cls_011">including stopped ones:</span></div>
<div style="position:absolute;left:101.00px;top:164.95px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman ps -a</span></div>
<div style="position:absolute;left:101.00px;top:176.95px" class="cls_026"><span class="cls_026">CONTAINER ID  IMAGE</span></div>
<div style="position:absolute;left:230.60px;top:176.95px" class="cls_026"><span class="cls_026">COMMAND</span></div>
<div style="position:absolute;left:288.20px;top:176.95px" class="cls_026"><span class="cls_026">CREATED  STATUS</span></div>
<div style="position:absolute;left:398.60px;top:176.95px" class="cls_026"><span class="cls_026">PORTS  NAMES</span></div>
<div style="position:absolute;left:101.00px;top:188.95px" class="cls_026"><span class="cls_026">4829d82fbbff  rhscl/httpd-24-rhel7  "httpd..."  ...ago   Exited (0)...</span></div>
<div style="position:absolute;left:475.40px;top:188.95px" class="cls_026"><span class="cls_026">my-</span></div>
<div style="position:absolute;left:101.00px;top:200.95px" class="cls_026"><span class="cls_026">httpd...</span></div>
<div style="position:absolute;left:126.00px;top:239.70px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:254.08px" class="cls_011"><span class="cls_011">While creating containers, Podman aborts if the container name is already in</span></div>
<div style="position:absolute;left:126.00px;top:266.08px" class="cls_011"><span class="cls_011">use, even if the container is in a “stopped” status. This option can help to avoid</span></div>
<div style="position:absolute;left:126.00px;top:278.08px" class="cls_011"><span class="cls_011">duplicated container names.</span></div>
<div style="position:absolute;left:90.00px;top:309.93px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:309.93px" class="cls_021"><span class="cls_021">podman inspect</span><span class="cls_011">: This command lists metadata about a running or stopped container. The</span></div>
<div style="position:absolute;left:99.50px;top:321.93px" class="cls_011"><span class="cls_011">command produces </span><span class="cls_021">JSON</span><span class="cls_011"> output:</span></div>
<div style="position:absolute;left:101.00px;top:349.64px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman inspect my-httpd-container</span></div>
<div style="position:absolute;left:101.00px;top:361.64px" class="cls_026"><span class="cls_026">[</span></div>
<div style="position:absolute;left:101.00px;top:373.64px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:120.20px;top:385.64px" class="cls_026"><span class="cls_026">"Id": "980e45...76c8be",</span></div>
<div style="position:absolute;left:101.00px;top:397.64px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:120.20px;top:409.63px" class="cls_026"><span class="cls_026">"NetworkSettings": {</span></div>
<div style="position:absolute;left:139.40px;top:421.63px" class="cls_026"><span class="cls_026">"Bridge": "",</span></div>
<div style="position:absolute;left:139.40px;top:433.63px" class="cls_026"><span class="cls_026">"EndpointID": "483fc9...5d801a",</span></div>
<div style="position:absolute;left:139.40px;top:445.63px" class="cls_026"><span class="cls_026">"Gateway": "172.17.42.1",</span></div>
<div style="position:absolute;left:139.40px;top:457.63px" class="cls_026"><span class="cls_026">"GlobalIPv6Address": "",</span></div>
<div style="position:absolute;left:139.40px;top:469.62px" class="cls_026"><span class="cls_026">"GlobalIPv6PrefixLen": 0,</span></div>
<div style="position:absolute;left:139.40px;top:481.62px" class="cls_026"><span class="cls_026">"HairpinMode": false,</span></div>
<div style="position:absolute;left:139.40px;top:493.62px" class="cls_026"><span class="cls_026">"IPAddress": "172.17.0.9",</span></div>
<div style="position:absolute;left:101.00px;top:505.62px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:99.50px;top:533.40px" class="cls_011"><span class="cls_011">This command allows formatting of the output string using the given Go template with the </span><span class="cls_021">-f</span></div>
<div style="position:absolute;left:99.50px;top:545.39px" class="cls_011"><span class="cls_011">option. For example, to retrieve only the IP address, use the following command:</span></div>
<div style="position:absolute;left:101.00px;top:573.11px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman inspect \</span></div>
<div style="position:absolute;left:101.00px;top:585.11px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-f '{{ .NetworkSettings.IPAddress }}' my-httpd-container</span></div>
<div style="position:absolute;left:101.00px;top:597.11px" class="cls_026"><span class="cls_026">172.17.0.9</span></div>
<div style="position:absolute;left:90.00px;top:626.34px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:626.34px" class="cls_021"><span class="cls_021">podman stop</span><span class="cls_011">: This command stops a running container gracefully:</span></div>
<div style="position:absolute;left:101.00px;top:654.06px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman stop my-httpd-container</span></div>
<div style="position:absolute;left:101.00px;top:666.05px" class="cls_026"><span class="cls_026">77d4b7b8ed1fd57449163bcb0b78d205e70d2314273263ab941c0c371ad56412</span></div>
<div style="position:absolute;left:99.50px;top:693.83px" class="cls_011"><span class="cls_011">Using </span><span class="cls_021">podman stop</span><span class="cls_011"> is easier than finding the container start process on the host OS and killing</span></div>
<div style="position:absolute;left:99.50px;top:705.83px" class="cls_011"><span class="cls_011">it.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">48</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:52932px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background067.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">•</span><span class="cls_021"> podman kill</span><span class="cls_011">: This command sends Unix signals to the main process in the container. If no</span></div>
<div style="position:absolute;left:117.50px;top:65.97px" class="cls_011"><span class="cls_011">signal is specified, it sends the </span><span class="cls_021">SIGKILL</span><span class="cls_011"> signal, terminating the main process and the container.</span></div>
<div style="position:absolute;left:119.00px;top:93.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman kill my-httpd-container</span></div>
<div style="position:absolute;left:119.00px;top:105.69px" class="cls_026"><span class="cls_026">77d4b7b8ed1fd57449163bcb0b78d205e70d2314273263ab941c0c371ad56412</span></div>
<div style="position:absolute;left:117.50px;top:133.47px" class="cls_011"><span class="cls_011">You can specify the signal with the </span><span class="cls_021">-s</span><span class="cls_011"> option:</span></div>
<div style="position:absolute;left:119.00px;top:161.18px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman kill -s SIGKILL my-httpd-container</span></div>
<div style="position:absolute;left:119.00px;top:173.18px" class="cls_026"><span class="cls_026">77d4b7b8ed1fd57449163bcb0b78d205e70d2314273263ab941c0c371ad56412</span></div>
<div style="position:absolute;left:117.50px;top:200.96px" class="cls_011"><span class="cls_011">Any Unix signal can be sent to the main process. Podman accepts either the signal name and</span></div>
<div style="position:absolute;left:117.50px;top:212.96px" class="cls_011"><span class="cls_011">number. The following table shows several useful signals:</span></div>
<div style="position:absolute;left:123.75px;top:250.15px" class="cls_023"><span class="cls_023">Signal</span></div>
<div style="position:absolute;left:177.68px;top:250.15px" class="cls_023"><span class="cls_023">Value</span></div>
<div style="position:absolute;left:231.61px;top:250.15px" class="cls_023"><span class="cls_023">Default Action</span></div>
<div style="position:absolute;left:325.98px;top:250.15px" class="cls_023"><span class="cls_023">Comment</span></div>
<div style="position:absolute;left:123.75px;top:272.74px" class="cls_021"><span class="cls_021">SIGHUP</span></div>
<div style="position:absolute;left:177.68px;top:272.71px" class="cls_011"><span class="cls_011">1</span></div>
<div style="position:absolute;left:231.61px;top:272.71px" class="cls_021"><span class="cls_021">Term</span></div>
<div style="position:absolute;left:325.98px;top:272.71px" class="cls_011"><span class="cls_011">Hangup detected on controlling terminal or</span></div>
<div style="position:absolute;left:325.98px;top:284.70px" class="cls_011"><span class="cls_011">death of controlling process</span></div>
<div style="position:absolute;left:123.75px;top:307.23px" class="cls_021"><span class="cls_021">SIGINT</span></div>
<div style="position:absolute;left:177.68px;top:307.20px" class="cls_011"><span class="cls_011">2</span></div>
<div style="position:absolute;left:231.61px;top:307.20px" class="cls_021"><span class="cls_021">Term</span></div>
<div style="position:absolute;left:325.98px;top:307.20px" class="cls_011"><span class="cls_011">Interrupt from keyboard</span></div>
<div style="position:absolute;left:123.75px;top:329.73px" class="cls_021"><span class="cls_021">SIGQUIT</span></div>
<div style="position:absolute;left:177.68px;top:329.70px" class="cls_011"><span class="cls_011">3</span></div>
<div style="position:absolute;left:231.61px;top:329.70px" class="cls_021"><span class="cls_021">Core</span></div>
<div style="position:absolute;left:325.98px;top:329.70px" class="cls_011"><span class="cls_011">Quit from keyboard</span></div>
<div style="position:absolute;left:123.75px;top:352.23px" class="cls_021"><span class="cls_021">SIGILL</span></div>
<div style="position:absolute;left:177.68px;top:352.20px" class="cls_011"><span class="cls_011">4</span></div>
<div style="position:absolute;left:231.61px;top:352.20px" class="cls_021"><span class="cls_021">Core</span></div>
<div style="position:absolute;left:325.98px;top:352.20px" class="cls_011"><span class="cls_011">Illegal Instruction</span></div>
<div style="position:absolute;left:123.75px;top:374.73px" class="cls_021"><span class="cls_021">SIGABRT</span></div>
<div style="position:absolute;left:177.68px;top:374.70px" class="cls_011"><span class="cls_011">6</span></div>
<div style="position:absolute;left:231.61px;top:374.70px" class="cls_021"><span class="cls_021">Core</span></div>
<div style="position:absolute;left:325.98px;top:374.70px" class="cls_011"><span class="cls_011">Abort signal from abort(3)</span></div>
<div style="position:absolute;left:123.75px;top:397.23px" class="cls_021"><span class="cls_021">SIGFPE</span></div>
<div style="position:absolute;left:177.68px;top:397.19px" class="cls_011"><span class="cls_011">8</span></div>
<div style="position:absolute;left:231.61px;top:397.19px" class="cls_021"><span class="cls_021">Core</span></div>
<div style="position:absolute;left:325.98px;top:397.19px" class="cls_011"><span class="cls_011">Floating point exception</span></div>
<div style="position:absolute;left:123.75px;top:419.73px" class="cls_021"><span class="cls_021">SIGKILL</span></div>
<div style="position:absolute;left:177.68px;top:419.69px" class="cls_011"><span class="cls_011">9</span></div>
<div style="position:absolute;left:231.61px;top:419.69px" class="cls_021"><span class="cls_021">Term</span></div>
<div style="position:absolute;left:325.98px;top:419.69px" class="cls_011"><span class="cls_011">Kill signal</span></div>
<div style="position:absolute;left:123.75px;top:442.22px" class="cls_021"><span class="cls_021">SIGSEGV</span></div>
<div style="position:absolute;left:177.68px;top:442.19px" class="cls_011"><span class="cls_011">11</span></div>
<div style="position:absolute;left:231.61px;top:442.19px" class="cls_021"><span class="cls_021">Core</span></div>
<div style="position:absolute;left:325.98px;top:442.19px" class="cls_011"><span class="cls_011">Invalid memory reference</span></div>
<div style="position:absolute;left:123.75px;top:464.72px" class="cls_021"><span class="cls_021">SIGPIPE</span></div>
<div style="position:absolute;left:177.68px;top:464.69px" class="cls_011"><span class="cls_011">13</span></div>
<div style="position:absolute;left:231.61px;top:464.69px" class="cls_021"><span class="cls_021">Term</span></div>
<div style="position:absolute;left:325.98px;top:464.69px" class="cls_011"><span class="cls_011">Broken pipe: write to pipe with no readers</span></div>
<div style="position:absolute;left:123.75px;top:487.22px" class="cls_021"><span class="cls_021">SIGALRM</span></div>
<div style="position:absolute;left:177.68px;top:487.19px" class="cls_011"><span class="cls_011">14</span></div>
<div style="position:absolute;left:231.61px;top:487.19px" class="cls_021"><span class="cls_021">Term</span></div>
<div style="position:absolute;left:325.98px;top:487.19px" class="cls_011"><span class="cls_011">Timer signal from alarm(2)</span></div>
<div style="position:absolute;left:123.75px;top:509.72px" class="cls_021"><span class="cls_021">SIGTERM</span></div>
<div style="position:absolute;left:177.68px;top:509.68px" class="cls_011"><span class="cls_011">15</span></div>
<div style="position:absolute;left:231.61px;top:509.68px" class="cls_021"><span class="cls_021">Term</span></div>
<div style="position:absolute;left:325.98px;top:509.68px" class="cls_011"><span class="cls_011">Termination signal</span></div>
<div style="position:absolute;left:123.75px;top:532.22px" class="cls_021"><span class="cls_021">SIGUSR1</span></div>
<div style="position:absolute;left:177.68px;top:532.18px" class="cls_011"><span class="cls_011">30,10,16</span></div>
<div style="position:absolute;left:231.61px;top:532.18px" class="cls_021"><span class="cls_021">Term</span></div>
<div style="position:absolute;left:325.98px;top:532.18px" class="cls_011"><span class="cls_011">User-defined signal 1</span></div>
<div style="position:absolute;left:123.75px;top:554.71px" class="cls_021"><span class="cls_021">SIGUSR2</span></div>
<div style="position:absolute;left:177.68px;top:554.68px" class="cls_011"><span class="cls_011">31,12,17</span></div>
<div style="position:absolute;left:231.61px;top:554.68px" class="cls_021"><span class="cls_021">Term</span></div>
<div style="position:absolute;left:325.98px;top:554.68px" class="cls_011"><span class="cls_011">User-defined signal 2</span></div>
<div style="position:absolute;left:123.75px;top:577.21px" class="cls_021"><span class="cls_021">SIGCHLD</span></div>
<div style="position:absolute;left:177.68px;top:577.18px" class="cls_011"><span class="cls_011">20,17,18</span></div>
<div style="position:absolute;left:231.61px;top:577.18px" class="cls_021"><span class="cls_021">Ign</span></div>
<div style="position:absolute;left:325.98px;top:577.18px" class="cls_011"><span class="cls_011">Child stopped or terminated</span></div>
<div style="position:absolute;left:123.75px;top:599.71px" class="cls_021"><span class="cls_021">SIGCONT</span></div>
<div style="position:absolute;left:177.68px;top:599.68px" class="cls_011"><span class="cls_011">19,18,25</span></div>
<div style="position:absolute;left:231.61px;top:599.68px" class="cls_021"><span class="cls_021">Cont</span></div>
<div style="position:absolute;left:325.98px;top:599.68px" class="cls_011"><span class="cls_011">Continue if stopped</span></div>
<div style="position:absolute;left:123.75px;top:622.21px" class="cls_021"><span class="cls_021">SIGSTOP</span></div>
<div style="position:absolute;left:177.68px;top:622.17px" class="cls_011"><span class="cls_011">17,19,23</span></div>
<div style="position:absolute;left:231.61px;top:622.17px" class="cls_021"><span class="cls_021">Stop</span></div>
<div style="position:absolute;left:325.98px;top:622.17px" class="cls_011"><span class="cls_011">Stop process</span></div>
<div style="position:absolute;left:123.75px;top:644.71px" class="cls_021"><span class="cls_021">SIGTSTP</span></div>
<div style="position:absolute;left:177.68px;top:644.67px" class="cls_011"><span class="cls_011">18,20,24</span></div>
<div style="position:absolute;left:231.61px;top:644.67px" class="cls_021"><span class="cls_021">Stop</span></div>
<div style="position:absolute;left:325.98px;top:644.67px" class="cls_011"><span class="cls_011">Stop typed at tty</span></div>
<div style="position:absolute;left:123.75px;top:667.20px" class="cls_021"><span class="cls_021">SIGTTIN</span></div>
<div style="position:absolute;left:177.68px;top:667.17px" class="cls_011"><span class="cls_011">21,21,26</span></div>
<div style="position:absolute;left:231.61px;top:667.17px" class="cls_021"><span class="cls_021">Stop</span></div>
<div style="position:absolute;left:325.98px;top:667.17px" class="cls_011"><span class="cls_011">tty input for background process</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:506.96px;top:751.59px" class="cls_013"><span class="cls_013">49</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:53734px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background068.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:105.75px;top:60.17px" class="cls_023"><span class="cls_023">Signal</span></div>
<div style="position:absolute;left:159.68px;top:60.17px" class="cls_023"><span class="cls_023">Value</span></div>
<div style="position:absolute;left:213.61px;top:60.17px" class="cls_023"><span class="cls_023">Default Action</span></div>
<div style="position:absolute;left:307.98px;top:60.17px" class="cls_023"><span class="cls_023">Comment</span></div>
<div style="position:absolute;left:105.75px;top:82.76px" class="cls_021"><span class="cls_021">SIGTTOU</span></div>
<div style="position:absolute;left:159.68px;top:82.72px" class="cls_011"><span class="cls_011">22,22,27</span></div>
<div style="position:absolute;left:213.61px;top:82.72px" class="cls_021"><span class="cls_021">Stop</span></div>
<div style="position:absolute;left:307.98px;top:82.72px" class="cls_011"><span class="cls_011">tty output for background process</span></div>
<div style="position:absolute;left:126.00px;top:119.90px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:134.27px" class="cls_022"><span class="cls_022">Term</span></div>
<div style="position:absolute;left:144.00px;top:146.27px" class="cls_011"><span class="cls_011">Terminate the process.</span></div>
<div style="position:absolute;left:126.00px;top:169.67px" class="cls_022"><span class="cls_022">Core</span></div>
<div style="position:absolute;left:144.00px;top:181.67px" class="cls_011"><span class="cls_011">Terminate the process and generate a core dump.</span></div>
<div style="position:absolute;left:126.00px;top:205.06px" class="cls_022"><span class="cls_022">Ign</span></div>
<div style="position:absolute;left:144.00px;top:217.06px" class="cls_011"><span class="cls_011">Signal is ignored.</span></div>
<div style="position:absolute;left:126.00px;top:240.46px" class="cls_022"><span class="cls_022">Stop</span></div>
<div style="position:absolute;left:144.00px;top:252.46px" class="cls_011"><span class="cls_011">Stop the process.</span></div>
<div style="position:absolute;left:90.00px;top:284.76px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:284.76px" class="cls_021"><span class="cls_021">podman restart</span><span class="cls_011">: This command restarts a stopped container:</span></div>
<div style="position:absolute;left:101.00px;top:312.47px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman restart my-httpd-container</span></div>
<div style="position:absolute;left:101.00px;top:324.47px" class="cls_026"><span class="cls_026">77d4b7b8ed1fd57449163bcb0b78d205e70d2314273263ab941c0c371ad56412</span></div>
<div style="position:absolute;left:99.50px;top:352.25px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">podman restart</span><span class="cls_011"> command creates a new container with the same container ID, reusing</span></div>
<div style="position:absolute;left:99.50px;top:364.25px" class="cls_011"><span class="cls_011">the stopped container state and file system.</span></div>
<div style="position:absolute;left:90.00px;top:387.65px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:387.65px" class="cls_021"><span class="cls_021">podman rm</span><span class="cls_011">: This command deletes a container and discards its state and file system:</span></div>
<div style="position:absolute;left:101.00px;top:415.36px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman rm my-httpd-container</span></div>
<div style="position:absolute;left:101.00px;top:427.36px" class="cls_026"><span class="cls_026">77d4b7b8ed1fd57449163bcb0b78d205e70d2314273263ab941c0c371ad56412</span></div>
<div style="position:absolute;left:99.50px;top:455.14px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">-f</span><span class="cls_011"> option of the </span><span class="cls_021">rm</span><span class="cls_011"> subcommand instructs Podman to remove the container even if not</span></div>
<div style="position:absolute;left:99.50px;top:467.14px" class="cls_011"><span class="cls_011">stopped. This option terminates the container forcefully and then removes it. Using </span><span class="cls_021">-f</span><span class="cls_011"> option is</span></div>
<div style="position:absolute;left:99.50px;top:479.14px" class="cls_011"><span class="cls_011">equivalent to </span><span class="cls_021">podman kill</span><span class="cls_011"> and </span><span class="cls_021">podman rm</span><span class="cls_011"> commands together.</span></div>
<div style="position:absolute;left:99.50px;top:500.63px" class="cls_011"><span class="cls_011">You can delete all containers at the same time. Many </span><span class="cls_021">podman</span><span class="cls_011"> subcommands accept the </span><span class="cls_021">-a</span></div>
<div style="position:absolute;left:99.50px;top:512.63px" class="cls_011"><span class="cls_011">option. This option indicates using the subcommand on all available containers or images. The</span></div>
<div style="position:absolute;left:99.50px;top:524.63px" class="cls_011"><span class="cls_011">following example removes all containers:</span></div>
<div style="position:absolute;left:101.00px;top:552.35px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman rm -a</span></div>
<div style="position:absolute;left:101.00px;top:564.34px" class="cls_026"><span class="cls_026">5fd8e98ec7eab567eabe84943fe82e99fdfc91d12c65d99ec760d5a55b8470d6</span></div>
<div style="position:absolute;left:101.00px;top:576.34px" class="cls_026"><span class="cls_026">716fd687f65b0957edac73b84b3253760e915166d3bc620c4aec8e5f4eadfe8e</span></div>
<div style="position:absolute;left:101.00px;top:588.34px" class="cls_026"><span class="cls_026">86162c906b44f4cb63ba2e3386554030dcb6abedbcee9e9fcad60aa9f8b2d5d4</span></div>
<div style="position:absolute;left:99.50px;top:616.12px" class="cls_011"><span class="cls_011">Before deleting all containers, all running containers must be in a “stopped” status. You can use</span></div>
<div style="position:absolute;left:99.50px;top:628.12px" class="cls_011"><span class="cls_011">the following command to stop all containers:</span></div>
<div style="position:absolute;left:101.00px;top:655.84px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman stop -a</span></div>
<div style="position:absolute;left:101.00px;top:667.83px" class="cls_026"><span class="cls_026">5fd8e98ec7eab567eabe84943fe82e99fdfc91d12c65d99ec760d5a55b8470d6</span></div>
<div style="position:absolute;left:101.00px;top:679.83px" class="cls_026"><span class="cls_026">716fd687f65b0957edac73b84b3253760e915166d3bc620c4aec8e5f4eadfe8e</span></div>
<div style="position:absolute;left:101.00px;top:691.83px" class="cls_026"><span class="cls_026">86162c906b44f4cb63ba2e3386554030dcb6abedbcee9e9fcad60aa9f8b2d5d4</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">50</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:54536px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background069.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:144.00px;top:63.50px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:77.88px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">inspect</span><span class="cls_011">, </span><span class="cls_021">stop</span><span class="cls_011">, </span><span class="cls_021">kill</span><span class="cls_011">, </span><span class="cls_021">restart</span><span class="cls_011">, and </span><span class="cls_021">rm</span><span class="cls_011"> subcommands can use the container</span></div>
<div style="position:absolute;left:144.00px;top:89.87px" class="cls_011"><span class="cls_011">ID instead of the container name.</span></div>
<div style="position:absolute;left:144.00px;top:137.30px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:144.00px;top:151.61px" class="cls_022"><span class="cls_022">Unix Posix Signals man page</span></div>
<div style="position:absolute;left:144.00px;top:163.67px" class="cls_033"><span class="cls_033"> </span><A HREF="http://man7.org/linux/man-pages/man7/signal.7.html">http://man7.org/linux/man-pages/man7/signal.7.html</A> </div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:509.58px;top:751.59px" class="cls_013"><span class="cls_013">51</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:55338px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background070.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Managing a MySQL Container</span></div>
<div style="position:absolute;left:102.00px;top:135.69px" class="cls_011"><span class="cls_011">In this exercise, you will create and manage a MySQL</span><span class="cls_045"><sup>®</sup></span><span class="cls_011">  database container.</span></div>
<div style="position:absolute;left:102.00px;top:160.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:178.59px" class="cls_011"><span class="cls_011">You should be able to create and manage a MySQL database container.</span></div>
<div style="position:absolute;left:102.00px;top:201.65px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:219.59px" class="cls_011"><span class="cls_011">Make sure that </span><span class="cls_021">workstation</span><span class="cls_011"> has the </span><span class="cls_021">podman</span><span class="cls_011"> command available and is correctly set up by</span></div>
<div style="position:absolute;left:102.00px;top:231.58px" class="cls_011"><span class="cls_011">running the following command from a terminal window:</span></div>
<div style="position:absolute;left:101.00px;top:259.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab manage-lifecycle start</span></div>
<div style="position:absolute;left:101.41px;top:313.92px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:119.00px;top:313.98px" class="cls_011"><span class="cls_011">Download the MySQL database container image, and attempt to start it. The container</span></div>
<div style="position:absolute;left:119.00px;top:325.98px" class="cls_011"><span class="cls_011">does not start because several environment variables must be provided to the image.</span></div>
<div style="position:absolute;left:101.00px;top:353.70px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run --name mysql-db rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:101.00px;top:365.70px" class="cls_026"><span class="cls_026">Trying to pull </span><span class="cls_029">...output omitted</span></div>
<div style="position:absolute;left:101.00px;top:377.70px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:389.70px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:101.00px;top:401.70px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:101.00px;top:413.70px" class="cls_026"><span class="cls_026">You must either specify the following environment variables:</span></div>
<div style="position:absolute;left:110.60px;top:425.70px" class="cls_026"><span class="cls_026">MYSQL_USER (regex: '^[a-zA-Z0-9_]+$')</span></div>
<div style="position:absolute;left:110.60px;top:437.70px" class="cls_026"><span class="cls_026">MYSQL_PASSWORD (regex: '^[a-zA-Z0-9_~!@#$%^&*()-=&lt;>,.?;:|]+$')</span></div>
<div style="position:absolute;left:110.60px;top:449.70px" class="cls_026"><span class="cls_026">MYSQL_DATABASE (regex: '^[a-zA-Z0-9_]+$')</span></div>
<div style="position:absolute;left:101.00px;top:461.70px" class="cls_026"><span class="cls_026">Or the following environment variable:</span></div>
<div style="position:absolute;left:110.60px;top:473.70px" class="cls_026"><span class="cls_026">MYSQL_ROOT_PASSWORD (regex: '^[a-zA-Z0-9_~!@#$%^&*()-=&lt;>,.?;:|]+$')</span></div>
<div style="position:absolute;left:101.00px;top:485.70px" class="cls_026"><span class="cls_026">Or both.</span></div>
<div style="position:absolute;left:101.00px;top:497.70px" class="cls_026"><span class="cls_026">Optional Settings:</span></div>
<div style="position:absolute;left:101.00px;top:509.70px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:533.70px" class="cls_026"><span class="cls_026">For more information, see </span><A HREF="https://github.com/sclorg/mysql-container/">https://github.com/sclorg/mysql-container</A> </div>
<div style="position:absolute;left:126.00px;top:572.90px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:587.28px" class="cls_011"><span class="cls_011">If you try to run the container as a daemon (</span><span class="cls_021">-d</span><span class="cls_011">), the error message about the</span></div>
<div style="position:absolute;left:126.00px;top:599.28px" class="cls_011"><span class="cls_011">required variables is not displayed. However, this message is included as part of the</span></div>
<div style="position:absolute;left:126.00px;top:611.28px" class="cls_011"><span class="cls_011">container logs, which can be viewed using the following command:</span></div>
<div style="position:absolute;left:110.72px;top:639.00px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman logs mysql-db</span></div>
<div style="position:absolute;left:101.41px;top:678.12px" class="cls_022"><span class="cls_022">2.</span><span class="cls_011">   Create a new container named </span><span class="cls_021">mysql</span><span class="cls_011">, and specify each required variable using the </span><span class="cls_021">-e</span></div>
<div style="position:absolute;left:119.00px;top:690.18px" class="cls_011"><span class="cls_011">parameter.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">52</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:56140px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background071.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:144.00px;top:63.50px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:77.88px" class="cls_011"><span class="cls_011">Make sure you start the new container with the correct name.</span></div>
<div style="position:absolute;left:119.00px;top:128.94px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run --name mysql \</span></div>
<div style="position:absolute;left:119.00px;top:140.94px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-d -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 \</span></div>
<div style="position:absolute;left:119.00px;top:152.94px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 \</span></div>
<div style="position:absolute;left:119.00px;top:164.94px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:137.00px;top:187.22px" class="cls_011"><span class="cls_011">The command displays the container ID for the </span><span class="cls_021">mysql</span><span class="cls_011"> container. Below is an example of</span></div>
<div style="position:absolute;left:137.00px;top:199.22px" class="cls_011"><span class="cls_011">the output.</span></div>
<div style="position:absolute;left:119.00px;top:226.94px" class="cls_026"><span class="cls_026">a49dba9ff17f2b5876001725b581fdd331c9ab8b9eda21cc2a2899c23f078509</span></div>
<div style="position:absolute;left:119.41px;top:257.16px" class="cls_022"><span class="cls_022">3.</span><span class="cls_011">  Verify that the </span><span class="cls_021">mysql</span><span class="cls_011"> container started correctly. Run the following command:</span></div>
<div style="position:absolute;left:119.00px;top:284.94px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman ps --format="{{.ID}} {{.Names}} {{.Status}}"</span></div>
<div style="position:absolute;left:119.00px;top:296.94px" class="cls_026"><span class="cls_026">a49dba9ff17f   mysql   Up About a minute ago</span></div>
<div style="position:absolute;left:137.00px;top:319.22px" class="cls_011"><span class="cls_011">The command only shows the first 12 characters of the container ID displayed in the</span></div>
<div style="position:absolute;left:137.00px;top:331.22px" class="cls_011"><span class="cls_011">previous command.</span></div>
<div style="position:absolute;left:119.41px;top:355.16px" class="cls_022"><span class="cls_022">4.</span><span class="cls_011">  Inspect the container metadata to obtain the IP address for the MySQL database:</span></div>
<div style="position:absolute;left:119.00px;top:382.94px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman inspect \</span></div>
<div style="position:absolute;left:119.00px;top:394.94px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-f '{{ .NetworkSettings.IPAddress }}' mysql</span></div>
<div style="position:absolute;left:119.00px;top:406.94px" class="cls_026"><span class="cls_026">10.88.0.6</span></div>
<div style="position:absolute;left:137.00px;top:429.22px" class="cls_011"><span class="cls_011">The IP address of your container may differ from the one shown above (</span><span class="cls_021">10.88.0.6</span><span class="cls_011">).</span></div>
<div style="position:absolute;left:144.00px;top:462.14px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:476.52px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">podman inspect</span><span class="cls_011"> command provides additional important information.</span></div>
<div style="position:absolute;left:144.00px;top:488.52px" class="cls_011"><span class="cls_011">For example, the </span><span class="cls_021">Env</span><span class="cls_011"> section displays environment variables, such as the</span></div>
<div style="position:absolute;left:144.00px;top:500.52px" class="cls_021"><span class="cls_021">MYSQL_ROOT_PASSWORD</span><span class="cls_011"> variable.</span></div>
<div style="position:absolute;left:119.41px;top:533.36px" class="cls_022"><span class="cls_022">5.</span><span class="cls_011">  Populate the </span><span class="cls_021">items</span><span class="cls_011"> database with the </span><span class="cls_021">Projects</span><span class="cls_011"> table:</span></div>
<div style="position:absolute;left:119.00px;top:561.14px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">mysql -uuser1 -h </span><span class="cls_040">10.88.0.6</span><span class="cls_027"> \</span></div>
<div style="position:absolute;left:119.00px;top:573.14px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-pmypa55 items &lt; /home/student/DO180/labs/manage-lifecycle/db.sql</span></div>
<div style="position:absolute;left:119.41px;top:603.36px" class="cls_022"><span class="cls_022">6.</span><span class="cls_011">  Create another container using the same container image as the previous container.</span></div>
<div style="position:absolute;left:137.00px;top:615.42px" class="cls_011"><span class="cls_011">Interactively enter the </span><span class="cls_021">/bin/bash</span><span class="cls_011"> shell instead of using the default command for the</span></div>
<div style="position:absolute;left:137.00px;top:627.42px" class="cls_011"><span class="cls_011">container image.</span></div>
<div style="position:absolute;left:119.00px;top:655.14px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run --name mysql-2 \</span></div>
<div style="position:absolute;left:119.00px;top:667.14px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-it rhscl/mysql-57-rhel7 /bin/bash</span></div>
<div style="position:absolute;left:119.00px;top:679.14px" class="cls_026"><span class="cls_026">bash-4.2$</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.66px;top:751.59px" class="cls_013"><span class="cls_013">53</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:56942px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background072.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:101.41px;top:53.92px" class="cls_022"><span class="cls_022">7.</span><span class="cls_011">   Try to connect to the MySQL database in the new container:</span></div>
<div style="position:absolute;left:101.00px;top:81.70px" class="cls_026"><span class="cls_026">bash-4.2$ </span><span class="cls_027">mysql -uroot</span></div>
<div style="position:absolute;left:119.00px;top:103.98px" class="cls_011"><span class="cls_011">The following error displays:</span></div>
<div style="position:absolute;left:101.00px;top:131.70px" class="cls_026"><span class="cls_026">ERROR 2002 (HY000): Can't connect to local MySQL </span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:153.98px" class="cls_011"><span class="cls_011">The MySQL database server is not running, because the container executed the </span><span class="cls_021">/bin/</span></div>
<div style="position:absolute;left:119.00px;top:165.98px" class="cls_021"><span class="cls_021">bash</span><span class="cls_011"> command rather than starting the MySQL server.</span></div>
<div style="position:absolute;left:101.41px;top:189.92px" class="cls_022"><span class="cls_022">8.</span><span class="cls_011">  Exit the container:</span></div>
<div style="position:absolute;left:101.00px;top:217.70px" class="cls_026"><span class="cls_026">bash-4.2$ </span><span class="cls_027">exit</span></div>
<div style="position:absolute;left:101.41px;top:247.92px" class="cls_022"><span class="cls_022">9.</span><span class="cls_011">  Verify that the </span><span class="cls_021">mysql-2</span><span class="cls_011"> container is not running:</span></div>
<div style="position:absolute;left:101.00px;top:275.70px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman ps -a \</span></div>
<div style="position:absolute;left:101.00px;top:287.70px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--format="{{.ID}} {{.Names}} {{.Status}}"</span></div>
<div style="position:absolute;left:101.00px;top:299.70px" class="cls_026"><span class="cls_026">2871e392af02 mysql-2  Exited (1) 19 seconds ago</span></div>
<div style="position:absolute;left:101.00px;top:311.70px" class="cls_026"><span class="cls_026">a49dba9ff17f mysql</span></div>
<div style="position:absolute;left:206.60px;top:311.70px" class="cls_026"><span class="cls_026">Up 10 minutes ago</span></div>
<div style="position:absolute;left:101.00px;top:323.70px" class="cls_026"><span class="cls_026">c053c7e09c21 mysql-db Exited (1) 44 minutes ago</span></div>
<div style="position:absolute;left:101.41px;top:353.92px" class="cls_022"><span class="cls_022">10.</span><span class="cls_011">  Query the </span><span class="cls_021">mysql</span><span class="cls_011"> container to list all rows in the </span><span class="cls_021">Projects</span><span class="cls_011"> table. The command instructs</span></div>
<div style="position:absolute;left:119.00px;top:365.98px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">bash</span><span class="cls_011"> shell to to query the </span><span class="cls_021">items</span><span class="cls_011"> database using a </span><span class="cls_021">mysql</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:101.00px;top:393.70px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman exec mysql /bin/bash \</span></div>
<div style="position:absolute;left:101.00px;top:405.70px" class="cls_027"><span class="cls_027">> -c 'mysql -uuser1 -pmypa55 -e "select * from items.Projects;"'</span></div>
<div style="position:absolute;left:101.00px;top:417.70px" class="cls_026"><span class="cls_026">mysql: [Warning] Using a password on the command line interface can be insecure.</span></div>
<div style="position:absolute;left:101.00px;top:429.70px" class="cls_026"><span class="cls_026">id</span></div>
<div style="position:absolute;left:139.40px;top:429.70px" class="cls_026"><span class="cls_026">name</span></div>
<div style="position:absolute;left:177.80px;top:429.70px" class="cls_026"><span class="cls_026">code</span></div>
<div style="position:absolute;left:101.00px;top:441.70px" class="cls_026"><span class="cls_026">1</span></div>
<div style="position:absolute;left:139.40px;top:441.70px" class="cls_026"><span class="cls_026">DevOps  DO180</span></div>
<div style="position:absolute;left:90.00px;top:472.04px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:493.98px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab manage-lifecycle finish</span><span class="cls_011"> script to complete this exercise.</span></div>
<div style="position:absolute;left:101.00px;top:521.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab manage-lifecycle finish</span></div>
<div style="position:absolute;left:90.00px;top:549.47px" class="cls_011"><span class="cls_011">This concludes the exercise.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">54</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:57744px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background073.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:108.00px;top:62.06px" class="cls_014"><span class="cls_014">Attaching Persistent Storage to</span></div>
<div style="position:absolute;left:108.00px;top:83.06px" class="cls_014"><span class="cls_014">Containers</span></div>
<div style="position:absolute;left:108.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:108.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to:</span></div>
<div style="position:absolute;left:108.00px;top:182.37px" class="cls_011"><span class="cls_011">• Save application data across container restarts through the use of persistent storage.</span></div>
<div style="position:absolute;left:108.00px;top:205.77px" class="cls_011"><span class="cls_011">• Configure host directories for use as container volumes.</span></div>
<div style="position:absolute;left:108.00px;top:229.17px" class="cls_011"><span class="cls_011">• Mount a volume inside the container.</span></div>
<div style="position:absolute;left:108.00px;top:251.45px" class="cls_024"><span class="cls_024">Preparing Permanent Storage Locations</span></div>
<div style="position:absolute;left:108.00px;top:276.17px" class="cls_011"><span class="cls_011">Container storage is said to be ephemeral, meaning its contents are not preserved after the</span></div>
<div style="position:absolute;left:108.00px;top:288.17px" class="cls_011"><span class="cls_011">container is removed. Containerized applications work on the assumption that they always start</span></div>
<div style="position:absolute;left:108.00px;top:300.16px" class="cls_011"><span class="cls_011">with empty storage, and this makes creating and destroying containers relatively inexpensive</span></div>
<div style="position:absolute;left:108.00px;top:312.16px" class="cls_011"><span class="cls_011">operations.</span></div>
<div style="position:absolute;left:108.00px;top:333.66px" class="cls_011"><span class="cls_011">Previously in this course, container images were characterized as immutable and layered, meaning</span></div>
<div style="position:absolute;left:108.00px;top:345.66px" class="cls_011"><span class="cls_011">that they are never changed, but rather composed of layers that add or override the contents of</span></div>
<div style="position:absolute;left:108.00px;top:357.66px" class="cls_011"><span class="cls_011">layers below.</span></div>
<div style="position:absolute;left:108.00px;top:379.15px" class="cls_011"><span class="cls_011">A running container gets a new layer over its base container image, and this layer is the container</span></div>
<div style="position:absolute;left:108.00px;top:391.15px" class="cls_011"><span class="cls_011">storage. At first, this layer is the only read/write storage available for the container, and it is</span></div>
<div style="position:absolute;left:108.00px;top:403.15px" class="cls_011"><span class="cls_011">used to create working files, temporary files, and log files. Those files are considered volatile. An</span></div>
<div style="position:absolute;left:108.00px;top:415.15px" class="cls_011"><span class="cls_011">application does not stop working if they are lost. The container storage layer is exclusive to the</span></div>
<div style="position:absolute;left:108.00px;top:427.15px" class="cls_011"><span class="cls_011">running container, so if another container is created from the same base image, it gets another</span></div>
<div style="position:absolute;left:108.00px;top:439.14px" class="cls_011"><span class="cls_011">read/write layer. This ensures the each container's resources are isolated from other similar</span></div>
<div style="position:absolute;left:108.00px;top:451.14px" class="cls_011"><span class="cls_011">containers.</span></div>
<div style="position:absolute;left:108.00px;top:472.64px" class="cls_011"><span class="cls_011">Ephemeral container storage is not sufficient for applications that need to keep data over restarts,</span></div>
<div style="position:absolute;left:108.00px;top:484.64px" class="cls_011"><span class="cls_011">such as databases. To support such applications, the administrator must provide a container with</span></div>
<div style="position:absolute;left:108.00px;top:496.64px" class="cls_011"><span class="cls_011">persistent storage.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.75px;top:751.59px" class="cls_013"><span class="cls_013">55</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:58546px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background074.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:242.25px;top:260.09px" class="cls_020"><span class="cls_020">Figure 3.3: Container layers</span></div>
<div style="position:absolute;left:90.00px;top:283.00px" class="cls_011"><span class="cls_011">Containerized applications should not try to use the container storage to store persistent data,</span></div>
<div style="position:absolute;left:90.00px;top:295.00px" class="cls_011"><span class="cls_011">because they cannot control how long its contents will be preserved. Even if it were possible to</span></div>
<div style="position:absolute;left:90.00px;top:307.00px" class="cls_011"><span class="cls_011">keep container storage indefinitely, the layered file system does not perform well for intensive I/O</span></div>
<div style="position:absolute;left:90.00px;top:319.00px" class="cls_011"><span class="cls_011">workloads and would not be adequate for most applications requiring persistent storage.</span></div>
<div style="position:absolute;left:90.00px;top:343.06px" class="cls_002"><span class="cls_002">Reclaiming Storage</span></div>
<div style="position:absolute;left:90.00px;top:364.99px" class="cls_011"><span class="cls_011">Podman keeps old stopped container storage available to be used by troubleshooting operations,</span></div>
<div style="position:absolute;left:90.00px;top:376.99px" class="cls_011"><span class="cls_011">such as reviewing failed container logs for error messages.</span></div>
<div style="position:absolute;left:90.00px;top:398.49px" class="cls_011"><span class="cls_011">If the administrator needs to reclaim old container storage, the container can then be deleted</span></div>
<div style="position:absolute;left:90.00px;top:410.49px" class="cls_011"><span class="cls_011">using </span><span class="cls_021">podman rm </span><span class="cls_028">container_id</span><span class="cls_011">. This command also deletes the container storage. The</span></div>
<div style="position:absolute;left:90.00px;top:422.49px" class="cls_011"><span class="cls_011">stopped container IDs can be found using </span><span class="cls_021">podman ps -a</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:90.00px;top:446.55px" class="cls_002"><span class="cls_002">Preparing the Host Directory</span></div>
<div style="position:absolute;left:90.00px;top:468.48px" class="cls_011"><span class="cls_011">Podman can mount host directories inside a running container. The containerized application sees</span></div>
<div style="position:absolute;left:90.00px;top:480.48px" class="cls_011"><span class="cls_011">these host directories as part of the container storage, much like regular applications see a remote</span></div>
<div style="position:absolute;left:90.00px;top:492.48px" class="cls_011"><span class="cls_011">network volume as if it were part of the host file system. But these host directories' contents</span></div>
<div style="position:absolute;left:90.00px;top:504.48px" class="cls_011"><span class="cls_011">are not reclaimed after the container is stopped, and they can be mounted to new containers</span></div>
<div style="position:absolute;left:90.00px;top:516.48px" class="cls_011"><span class="cls_011">whenever needed.</span></div>
<div style="position:absolute;left:90.00px;top:537.97px" class="cls_011"><span class="cls_011">For example, a database container can use a host directory to store database files. If this database</span></div>
<div style="position:absolute;left:90.00px;top:549.97px" class="cls_011"><span class="cls_011">container fails, Podman can create a new container using the same host directory, keeping the</span></div>
<div style="position:absolute;left:90.00px;top:561.97px" class="cls_011"><span class="cls_011">database data available to client applications. To the database container, it does not matter where</span></div>
<div style="position:absolute;left:90.00px;top:573.97px" class="cls_011"><span class="cls_011">this host directory is stored from the host point of view; it could be anything from a local hard disk</span></div>
<div style="position:absolute;left:90.00px;top:585.97px" class="cls_011"><span class="cls_011">partition to a remote networked file system.</span></div>
<div style="position:absolute;left:90.00px;top:607.46px" class="cls_011"><span class="cls_011">A container runs as a host operating system process, under a host operating system user</span></div>
<div style="position:absolute;left:90.00px;top:619.46px" class="cls_011"><span class="cls_011">and group ID, so the host directory needs to be configured with ownership and permissions</span></div>
<div style="position:absolute;left:90.00px;top:631.46px" class="cls_011"><span class="cls_011">allowing access to the container. In RHEL, the host directory also needs to be configured</span></div>
<div style="position:absolute;left:90.00px;top:643.46px" class="cls_011"><span class="cls_011">with the appropriate SELinux context, which is </span><span class="cls_021">container_file_t</span><span class="cls_011">. Podman uses the</span></div>
<div style="position:absolute;left:90.00px;top:655.46px" class="cls_021"><span class="cls_021">container_file_t</span><span class="cls_011"> SELinux context to restrict which files of the host system the container is</span></div>
<div style="position:absolute;left:90.00px;top:667.45px" class="cls_011"><span class="cls_011">allowed to access. This avoids information leakage between the host system and the applications</span></div>
<div style="position:absolute;left:90.00px;top:679.45px" class="cls_011"><span class="cls_011">running inside containers.</span></div>
<div style="position:absolute;left:90.00px;top:700.95px" class="cls_011"><span class="cls_011">One way to set up the host directory is described below:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">56</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:59348px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background075.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">1.</span></div>
<div style="position:absolute;left:127.00px;top:53.98px" class="cls_011"><span class="cls_011">Create a directory with owner and group </span><span class="cls_021">root</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:119.00px;top:81.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo mkdir /var/dbfiles</span></div>
<div style="position:absolute;left:108.00px;top:109.47px" class="cls_011"><span class="cls_011">2.</span></div>
<div style="position:absolute;left:127.00px;top:109.47px" class="cls_011"><span class="cls_011">The user running processes in the container must be capable of writing files to the directory.</span></div>
<div style="position:absolute;left:127.00px;top:121.47px" class="cls_011"><span class="cls_011">If the host machine does not have exactly the same user defined, the permission should</span></div>
<div style="position:absolute;left:127.00px;top:133.47px" class="cls_011"><span class="cls_011">be defined with the numeric user ID (UID) from the container. In the case of the Red Hat-</span></div>
<div style="position:absolute;left:127.00px;top:145.47px" class="cls_011"><span class="cls_011">provided MySQL service, the UID is 27:</span></div>
<div style="position:absolute;left:119.00px;top:173.18px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo chown -R 27:27 /var/dbfiles</span></div>
<div style="position:absolute;left:108.00px;top:200.96px" class="cls_011"><span class="cls_011">3.</span></div>
<div style="position:absolute;left:127.00px;top:200.96px" class="cls_011"><span class="cls_011">Apply the </span><span class="cls_021">container_file_t</span><span class="cls_011"> context to the directory (and all subdirectories) to allow</span></div>
<div style="position:absolute;left:127.00px;top:212.96px" class="cls_011"><span class="cls_011">containers access to all of its contents.</span></div>
<div style="position:absolute;left:119.00px;top:240.68px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo semanage fcontext -a -t container_file_t</span></div>
<div style="position:absolute;left:123.80px;top:252.67px" class="cls_027"><span class="cls_027">'/var/dbfiles(/.*)?'</span></div>
<div style="position:absolute;left:108.00px;top:280.45px" class="cls_011"><span class="cls_011">4.</span></div>
<div style="position:absolute;left:127.00px;top:280.45px" class="cls_011"><span class="cls_011">Apply the SELinux container policy that you set up in the first step to the newly created</span></div>
<div style="position:absolute;left:127.00px;top:292.45px" class="cls_011"><span class="cls_011">directory:</span></div>
<div style="position:absolute;left:119.00px;top:320.17px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo restorecon -Rv /var/dbfiles</span></div>
<div style="position:absolute;left:108.00px;top:347.95px" class="cls_011"><span class="cls_011">The host directory must be configured before starting the container that uses the directory.</span></div>
<div style="position:absolute;left:108.00px;top:372.01px" class="cls_002"><span class="cls_002">Mounting a Volume</span></div>
<div style="position:absolute;left:108.00px;top:393.95px" class="cls_011"><span class="cls_011">After creating and configuring the host directory, the next step is to mount this directory to a</span></div>
<div style="position:absolute;left:108.00px;top:405.94px" class="cls_011"><span class="cls_011">container. To bind mount a host directory to a container, add the </span><span class="cls_021">-v</span><span class="cls_011"> option to the </span><span class="cls_021">podman run</span></div>
<div style="position:absolute;left:108.00px;top:417.94px" class="cls_011"><span class="cls_011">command, specifying the host directory path and the container storage path, separated by a colon</span></div>
<div style="position:absolute;left:108.00px;top:429.94px" class="cls_011"><span class="cls_011">(:).</span></div>
<div style="position:absolute;left:108.00px;top:451.44px" class="cls_011"><span class="cls_011">For example, to use the </span><span class="cls_021">/var/dbfiles</span><span class="cls_011"> host directory for MySQL server database files, which are</span></div>
<div style="position:absolute;left:108.00px;top:463.44px" class="cls_011"><span class="cls_011">expected to be under </span><span class="cls_021">/var/lib/mysql</span><span class="cls_011"> inside a MySQL container image named </span><span class="cls_021">mysql</span><span class="cls_011">, use the</span></div>
<div style="position:absolute;left:108.00px;top:475.43px" class="cls_011"><span class="cls_011">following command:</span></div>
<div style="position:absolute;left:119.00px;top:503.15px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run -v /var/dbfiles:/var/lib/mysql</span></div>
<div style="position:absolute;left:123.80px;top:515.15px" class="cls_027"><span class="cls_027">rhmap47/mysql</span></div>
<div style="position:absolute;left:108.00px;top:542.93px" class="cls_011"><span class="cls_011">In the previous command, if the </span><span class="cls_021">/var/lib/mysql</span><span class="cls_011"> already exists inside the </span><span class="cls_021">mysql</span><span class="cls_011"> container</span></div>
<div style="position:absolute;left:108.00px;top:554.93px" class="cls_011"><span class="cls_011">image, the </span><span class="cls_021">/var/dbfiles</span><span class="cls_011"> mount overlays but does not remove the content from the container</span></div>
<div style="position:absolute;left:108.00px;top:566.92px" class="cls_011"><span class="cls_011">image. If the mount is removed, the original content is accessible again.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.74px;top:751.59px" class="cls_013"><span class="cls_013">57</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:60150px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background076.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Persisting a MySQL Database</span></div>
<div style="position:absolute;left:102.00px;top:137.59px" class="cls_011"><span class="cls_011">In this exercise, you will create a container that stores the MySQL database data into a host</span></div>
<div style="position:absolute;left:102.00px;top:149.59px" class="cls_011"><span class="cls_011">directory.</span></div>
<div style="position:absolute;left:102.00px;top:172.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:190.59px" class="cls_011"><span class="cls_011">You should be able to deploy container with a persistent database.</span></div>
<div style="position:absolute;left:102.00px;top:213.65px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:231.58px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">workstation</span><span class="cls_011"> should not have any container images running. Run the following</span></div>
<div style="position:absolute;left:102.00px;top:243.58px" class="cls_011"><span class="cls_011">command on </span><span class="cls_021">workstation</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:101.00px;top:271.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab manage-storage start</span></div>
<div style="position:absolute;left:101.41px;top:323.99px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:119.00px;top:324.05px" class="cls_011"><span class="cls_011">Create the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory with the correct SELinux context and</span></div>
<div style="position:absolute;left:119.00px;top:336.05px" class="cls_011"><span class="cls_011">permissions.</span></div>
<div style="position:absolute;left:119.00px;top:358.92px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:143.70px;top:358.92px" class="cls_011"><span class="cls_011">Create the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory.</span></div>
<div style="position:absolute;left:101.00px;top:386.64px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo mkdir -pv /var/local/mysql</span></div>
<div style="position:absolute;left:101.00px;top:398.64px" class="cls_026"><span class="cls_026">mkdir: created directory ‘/var/local/mysql’</span></div>
<div style="position:absolute;left:119.00px;top:427.79px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:143.70px;top:427.79px" class="cls_011"><span class="cls_011">Add the appropriate SELinux context for the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory and its</span></div>
<div style="position:absolute;left:143.70px;top:439.78px" class="cls_011"><span class="cls_011">contents.</span></div>
<div style="position:absolute;left:101.00px;top:467.50px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo semanage fcontext -a \</span></div>
<div style="position:absolute;left:101.00px;top:479.50px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-t container_file_t '/var/local/mysql(/.*)?'</span></div>
<div style="position:absolute;left:119.00px;top:508.65px" class="cls_011"><span class="cls_011">1.3.</span></div>
<div style="position:absolute;left:143.70px;top:508.65px" class="cls_011"><span class="cls_011">Apply the SELinux policy to the newly created directory.</span></div>
<div style="position:absolute;left:101.00px;top:536.37px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo restorecon -R /var/local/mysql</span></div>
<div style="position:absolute;left:119.00px;top:565.52px" class="cls_011"><span class="cls_011">1.4.</span></div>
<div style="position:absolute;left:143.70px;top:565.52px" class="cls_011"><span class="cls_011">Verify that the SELinux context type for the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory is</span></div>
<div style="position:absolute;left:143.70px;top:577.52px" class="cls_021"><span class="cls_021">container_file_t</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:101.00px;top:605.23px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">ls -ldZ /var/local/mysql</span></div>
<div style="position:absolute;left:101.00px;top:617.23px" class="cls_026"><span class="cls_026">drwxr-xr-x. root root unconfined_u:object_r:container_file_t:s0 /var/local/mysql</span></div>
<div style="position:absolute;left:119.00px;top:646.38px" class="cls_011"><span class="cls_011">1.5.</span></div>
<div style="position:absolute;left:143.70px;top:646.38px" class="cls_011"><span class="cls_011">Change the owner of the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory to the </span><span class="cls_021">mysql</span><span class="cls_011"> user and</span></div>
<div style="position:absolute;left:143.70px;top:658.38px" class="cls_021"><span class="cls_021">mysql</span><span class="cls_011"> group:</span></div>
<div style="position:absolute;left:101.00px;top:686.10px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo chown -Rv 27:27 /var/local/mysql</span></div>
<div style="position:absolute;left:101.00px;top:698.09px" class="cls_026"><span class="cls_026">changed ownership of ‘/var/local/mysql’ from root:root to 27:27</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">58</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:60952px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background077.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:144.00px;top:63.50px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:77.88px" class="cls_011"><span class="cls_011">The user running processes in the container must be capable of writing files to the</span></div>
<div style="position:absolute;left:144.00px;top:89.87px" class="cls_011"><span class="cls_011">directory. If the host machine does not have exactly the same user defined, the</span></div>
<div style="position:absolute;left:144.00px;top:101.87px" class="cls_011"><span class="cls_011">permission should be defined with the numeric user ID (UID) from the container. For</span></div>
<div style="position:absolute;left:144.00px;top:113.87px" class="cls_011"><span class="cls_011">the MySQL service provided by Red Hat, the UID is 27.</span></div>
<div style="position:absolute;left:119.41px;top:146.71px" class="cls_022"><span class="cls_022">2.</span><span class="cls_011">   Create a MySQL container instance with persistent storage.</span></div>
<div style="position:absolute;left:137.00px;top:170.82px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:161.70px;top:170.82px" class="cls_011"><span class="cls_011">Pull the MySQL container image:</span></div>
<div style="position:absolute;left:119.00px;top:198.54px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman pull rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:119.00px;top:210.53px" class="cls_026"><span class="cls_026">Trying to pull </span><span class="cls_029">...output omitted...</span><span class="cls_026">rhscl/mysql-57-rhel7</span><span class="cls_029">...output omitted</span></div>
<div style="position:absolute;left:119.00px;top:222.53px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:234.53px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:119.00px;top:246.53px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:119.00px;top:258.53px" class="cls_026"><span class="cls_026">4ae3a3f4f409a8912cab9fbf71d3564d011ed2e68f926d50f88f2a3a72c809c5</span></div>
<div style="position:absolute;left:137.00px;top:288.86px" class="cls_011"><span class="cls_011">2.2.   Create a new container specifying the mount point to store the MySQL database</span></div>
<div style="position:absolute;left:161.70px;top:300.85px" class="cls_011"><span class="cls_011">data:</span></div>
<div style="position:absolute;left:119.00px;top:328.57px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run --name persist-db \</span></div>
<div style="position:absolute;left:119.00px;top:340.57px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-d -v /var/local/mysql:/var/lib/mysql/data \</span></div>
<div style="position:absolute;left:119.00px;top:352.57px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 \</span></div>
<div style="position:absolute;left:119.00px;top:364.56px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 \</span></div>
<div style="position:absolute;left:119.00px;top:376.56px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:119.00px;top:388.56px" class="cls_026"><span class="cls_026">6e0ef134315b510042ca757faf869f2ba19df27790c601f95ec2fd9d3c44b95d</span></div>
<div style="position:absolute;left:161.70px;top:410.84px" class="cls_011"><span class="cls_011">This command mounts the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory from the host to the </span><span class="cls_021">/</span></div>
<div style="position:absolute;left:161.70px;top:422.84px" class="cls_021"><span class="cls_021">var/lib/mysql/data</span><span class="cls_011"> directory in the container. By default, the MySQL database</span></div>
<div style="position:absolute;left:161.70px;top:434.84px" class="cls_011"><span class="cls_011">stores data in the </span><span class="cls_021">/var/lib/mysql/data</span><span class="cls_011"> directory.</span></div>
<div style="position:absolute;left:137.00px;top:458.88px" class="cls_011"><span class="cls_011">2.3.   Verify that the container started correctly.</span></div>
<div style="position:absolute;left:119.00px;top:486.60px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman ps --format="{{.ID}} {{.Names}} {{.Status}}"</span></div>
<div style="position:absolute;left:119.00px;top:498.60px" class="cls_026"><span class="cls_026">6e0ef134315b   persist-db  Up 3 minutes ago</span></div>
<div style="position:absolute;left:119.41px;top:528.82px" class="cls_022"><span class="cls_022">3.</span><span class="cls_011">  Verify that the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory contains the </span><span class="cls_021">items</span><span class="cls_011"> directory:</span></div>
<div style="position:absolute;left:119.00px;top:556.60px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">ls -ld /var/local/mysql/items</span></div>
<div style="position:absolute;left:119.00px;top:568.60px" class="cls_026"><span class="cls_026">drwxr-x---. 2 27 27 20 Nov 13 12:55 /var/local/mysql/items</span></div>
<div style="position:absolute;left:137.00px;top:590.88px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">items</span><span class="cls_011"> directory stores data related to the </span><span class="cls_021">items</span><span class="cls_011"> database that was created by this</span></div>
<div style="position:absolute;left:137.00px;top:602.88px" class="cls_011"><span class="cls_011">container. If the </span><span class="cls_021">items</span><span class="cls_011"> directory does not exist, then the mount point was not defined</span></div>
<div style="position:absolute;left:137.00px;top:614.88px" class="cls_011"><span class="cls_011">correctly during container creation.</span></div>
<div style="position:absolute;left:108.00px;top:638.94px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:108.00px;top:660.88px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab manage-storage finish</span><span class="cls_011"> script to complete this lab.</span></div>
<div style="position:absolute;left:119.00px;top:688.60px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab manage-storage finish</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.54px;top:751.59px" class="cls_013"><span class="cls_013">59</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:61754px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background078.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_011"><span class="cls_011">This concludes the exercise.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">60</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:62556px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background079.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:108.00px;top:83.06px" class="cls_014"><span class="cls_014">Accessing Containers</span></div>
<div style="position:absolute;left:108.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:108.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to:</span></div>
<div style="position:absolute;left:108.00px;top:182.37px" class="cls_011"><span class="cls_011">• Describe the basics of networking with containers.</span></div>
<div style="position:absolute;left:108.00px;top:205.77px" class="cls_011"><span class="cls_011">• Remotely connect to services within a container.</span></div>
<div style="position:absolute;left:108.00px;top:228.05px" class="cls_024"><span class="cls_024">Introducing Networking with Containers</span></div>
<div style="position:absolute;left:108.00px;top:252.77px" class="cls_011"><span class="cls_011">The Cloud Native Computing Foundation (CNCF) sponsors the Container Networking Interface</span></div>
<div style="position:absolute;left:108.00px;top:264.77px" class="cls_011"><span class="cls_011">(CNI) open source project. The CNI project aims to standardize the network interface for</span></div>
<div style="position:absolute;left:108.00px;top:276.77px" class="cls_011"><span class="cls_011">containers in cloud native environments, such as Kubernetes and Red Hat OpenShift Container</span></div>
<div style="position:absolute;left:108.00px;top:288.76px" class="cls_011"><span class="cls_011">Platform.</span></div>
<div style="position:absolute;left:108.00px;top:310.26px" class="cls_011"><span class="cls_011">Podman uses the CNI project to implement a software-defined network (SDN) for containers</span></div>
<div style="position:absolute;left:108.00px;top:322.26px" class="cls_011"><span class="cls_011">on each host. Podman attaches each container to a virtual bridge and assigns each container a</span></div>
<div style="position:absolute;left:108.00px;top:334.26px" class="cls_011"><span class="cls_011">private IP address. The configuration file that specifies CNI settings for Podman is </span><span class="cls_021">/etc/cni/</span></div>
<div style="position:absolute;left:108.00px;top:346.26px" class="cls_021"><span class="cls_021">net.d/87-podman-bridge.conflist</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:509.37px;top:751.59px" class="cls_013"><span class="cls_013">61</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:63358px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background080.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:208.43px;top:501.03px" class="cls_020"><span class="cls_020">Figure 3.4: Basic Linux container networking</span></div>
<div style="position:absolute;left:90.00px;top:523.95px" class="cls_011"><span class="cls_011">When Podman creates containers on the same host, it assigns each container a unique IP address</span></div>
<div style="position:absolute;left:90.00px;top:535.94px" class="cls_011"><span class="cls_011">and connects them all to the same software-defined network. These containers can communicate</span></div>
<div style="position:absolute;left:90.00px;top:547.94px" class="cls_011"><span class="cls_011">freely with each other by IP address.</span></div>
<div style="position:absolute;left:90.00px;top:569.44px" class="cls_011"><span class="cls_011">Containers created with Podman running on different hosts belong to different software-defined</span></div>
<div style="position:absolute;left:90.00px;top:581.44px" class="cls_011"><span class="cls_011">networks. Each SDN is isolated, which prevents a container in one network from communicating</span></div>
<div style="position:absolute;left:90.00px;top:593.44px" class="cls_011"><span class="cls_011">with a container in a different network. Because of network isolation, a container in one SDN can</span></div>
<div style="position:absolute;left:90.00px;top:605.43px" class="cls_011"><span class="cls_011">have the same IP address as a container in a different SDN.</span></div>
<div style="position:absolute;left:90.00px;top:626.93px" class="cls_011"><span class="cls_011">It is also important to note that, by default, all container networks are hidden from the host</span></div>
<div style="position:absolute;left:90.00px;top:638.93px" class="cls_011"><span class="cls_011">network. That is, containers typically can access the host network, but without explicit</span></div>
<div style="position:absolute;left:90.00px;top:650.93px" class="cls_011"><span class="cls_011">configuration, there is no access back into the container network.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">62</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:64160px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background081.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:108.00px;top:52.26px" class="cls_024"><span class="cls_024">Mapping Network Ports</span></div>
<div style="position:absolute;left:108.00px;top:76.98px" class="cls_011"><span class="cls_011">Accessing a container from the host network can be a challenge. A container is assigned an</span></div>
<div style="position:absolute;left:108.00px;top:88.97px" class="cls_011"><span class="cls_011">IP address from a pool of available addresses. When a container is destroyed, the container's</span></div>
<div style="position:absolute;left:108.00px;top:100.97px" class="cls_011"><span class="cls_011">address is released back to the pool of available addresses. Another problem is that the container</span></div>
<div style="position:absolute;left:108.00px;top:112.97px" class="cls_011"><span class="cls_011">software-defined network is only accessible from the container host.</span></div>
<div style="position:absolute;left:108.00px;top:134.47px" class="cls_011"><span class="cls_011">To solve these problems, define port forwarding rules to allow external access to a container</span></div>
<div style="position:absolute;left:108.00px;top:146.47px" class="cls_011"><span class="cls_011">service. Use the </span><span class="cls_021">-p </span><span class="cls_028">[&lt;IP address>:][&lt;host port>:]</span><span class="cls_021">&lt;container port></span><span class="cls_011"> option with</span></div>
<div style="position:absolute;left:108.00px;top:158.46px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">podman run</span><span class="cls_011"> command to create an externally accessible container. Consider the following</span></div>
<div style="position:absolute;left:108.00px;top:170.46px" class="cls_011"><span class="cls_011">example:</span></div>
<div style="position:absolute;left:119.00px;top:198.18px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run -d --name apache1 -p 8080:80</span></div>
<div style="position:absolute;left:123.80px;top:210.18px" class="cls_027"><span class="cls_027">rhscl/httpd-24-rhel7:2.4</span></div>
<div style="position:absolute;left:108.00px;top:237.96px" class="cls_011"><span class="cls_011">The value </span><span class="cls_021">8080:80</span><span class="cls_011"> specifies that any requests to port 8080 on the host are forwarded to port 80</span></div>
<div style="position:absolute;left:108.00px;top:249.95px" class="cls_011"><span class="cls_011">within the container.</span></div>
<div style="position:absolute;left:200.29px;top:649.70px" class="cls_020"><span class="cls_020">Figure 3.5: Allowing external accesses to Linux containers</span></div>
<div style="position:absolute;left:108.00px;top:672.62px" class="cls_011"><span class="cls_011">You can also use the </span><span class="cls_021">-p</span><span class="cls_011"> option to only forward requests to a container if those requests originate</span></div>
<div style="position:absolute;left:108.00px;top:684.61px" class="cls_011"><span class="cls_011">from a specified IP address:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.45px;top:751.59px" class="cls_013"><span class="cls_013">63</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:64962px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background082.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run -d --name apache2 \</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p 127.0.0.1:8081:80 rhscl/httpd-24-rhel7:2.4</span></div>
<div style="position:absolute;left:90.00px;top:101.47px" class="cls_011"><span class="cls_011">The example above limits external access to the </span><span class="cls_021">apache2</span><span class="cls_011"> container to requests from </span><span class="cls_021">localhost</span></div>
<div style="position:absolute;left:90.00px;top:113.47px" class="cls_011"><span class="cls_011">to host port 8081. These requests are forwarded to port 80 in the </span><span class="cls_021">apache2</span><span class="cls_011"> container.</span></div>
<div style="position:absolute;left:90.00px;top:134.97px" class="cls_011"><span class="cls_011">If a port is not specified for the host port, Podman assigns a random available host port for the</span></div>
<div style="position:absolute;left:90.00px;top:146.97px" class="cls_011"><span class="cls_011">container:</span></div>
<div style="position:absolute;left:101.00px;top:174.68px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run -d --name apache3 -p 127.0.0.1::80</span></div>
<div style="position:absolute;left:105.80px;top:186.68px" class="cls_027"><span class="cls_027">rhscl/httpd-24-rhel7:2.4</span></div>
<div style="position:absolute;left:90.00px;top:214.46px" class="cls_011"><span class="cls_011">To see the port assigned by Podman, use the </span><span class="cls_021">podman port </span><span class="cls_028">&lt;container name></span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:101.00px;top:242.18px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman port apache3</span></div>
<div style="position:absolute;left:101.00px;top:254.17px" class="cls_026"><span class="cls_026">80/tcp -> 127.0.0.1:35134</span></div>
<div style="position:absolute;left:101.00px;top:266.17px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl 127.0.0.1:35134</span></div>
<div style="position:absolute;left:101.00px;top:278.17px" class="cls_026"><span class="cls_026">&lt;html>&lt;body>&lt;h1>It works!&lt;/h1>&lt;/body>&lt;/html></span></div>
<div style="position:absolute;left:90.00px;top:305.95px" class="cls_011"><span class="cls_011">If only a container port is specified with the </span><span class="cls_021">-p</span><span class="cls_011"> option, a random available host port is assigned to</span></div>
<div style="position:absolute;left:90.00px;top:317.95px" class="cls_011"><span class="cls_011">container. Requests to this assigned host port from any IP address are forwarded to the container</span></div>
<div style="position:absolute;left:90.00px;top:329.95px" class="cls_011"><span class="cls_011">port.</span></div>
<div style="position:absolute;left:101.00px;top:357.66px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run -d --name apache4 -p 80</span></div>
<div style="position:absolute;left:105.80px;top:369.66px" class="cls_027"><span class="cls_027">rhscl/httpd-24-rhel7:2.4</span></div>
<div style="position:absolute;left:101.00px;top:381.66px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman port apache4</span></div>
<div style="position:absolute;left:101.00px;top:393.66px" class="cls_026"><span class="cls_026">80/tcp -> 0.0.0.0:37068</span></div>
<div style="position:absolute;left:90.00px;top:421.44px" class="cls_011"><span class="cls_011">In the above example, any routable request to host port </span><span class="cls_021">37068</span><span class="cls_011"> is forwarded to the port 80 in the</span></div>
<div style="position:absolute;left:90.00px;top:433.43px" class="cls_011"><span class="cls_011">container.</span></div>
<div style="position:absolute;left:126.00px;top:464.46px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:126.00px;top:478.78px" class="cls_022"><span class="cls_022">Container Network Interface - networking for Linux containers</span></div>
<div style="position:absolute;left:126.00px;top:490.83px" class="cls_033"><span class="cls_033"> </span><A HREF="https://github.com/containernetworking/cni">https://github.com/containernetworking/cni</A> </div>
<div style="position:absolute;left:126.00px;top:512.27px" class="cls_022"><span class="cls_022">Cloud Native Computing Foundation</span></div>
<div style="position:absolute;left:126.00px;top:524.33px" class="cls_033"><span class="cls_033"> </span><A HREF="https://www.cncf.io/">https://www.cncf.io/</A> </div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">64</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:65764px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background083.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Loading the Database</span></div>
<div style="position:absolute;left:120.00px;top:137.59px" class="cls_011"><span class="cls_011">In this exercise, you will create a MySQL database container with port forwarding enabled.</span></div>
<div style="position:absolute;left:120.00px;top:149.59px" class="cls_011"><span class="cls_011">After populating a database with a SQL script, you verify the database content using three</span></div>
<div style="position:absolute;left:120.00px;top:161.59px" class="cls_011"><span class="cls_011">different methods.</span></div>
<div style="position:absolute;left:120.00px;top:184.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:120.00px;top:202.58px" class="cls_011"><span class="cls_011">You should be able to deploy a database container and load a SQL script.</span></div>
<div style="position:absolute;left:120.00px;top:225.65px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:120.00px;top:243.58px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:119.00px;top:271.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab manage-networking start</span></div>
<div style="position:absolute;left:120.00px;top:299.08px" class="cls_011"><span class="cls_011">This ensures the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory exists and is configured with the correct</span></div>
<div style="position:absolute;left:120.00px;top:311.08px" class="cls_011"><span class="cls_011">permissions to enable persistent storage for the MySQL container.</span></div>
<div style="position:absolute;left:119.41px;top:353.02px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:137.00px;top:353.08px" class="cls_011"><span class="cls_011">Create a MySQL container instance with persistent storage and port forwarding:</span></div>
<div style="position:absolute;left:119.00px;top:380.79px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run --name mysqldb-port \</span></div>
<div style="position:absolute;left:119.00px;top:392.79px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-d -v /var/local/mysql:/var/lib/mysql/data -p 13306:3306 \</span></div>
<div style="position:absolute;left:119.00px;top:404.79px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 \</span></div>
<div style="position:absolute;left:119.00px;top:416.79px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 \</span></div>
<div style="position:absolute;left:119.00px;top:428.79px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:119.00px;top:440.79px" class="cls_026"><span class="cls_026">Trying to pull </span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:452.79px" class="cls_026"><span class="cls_026">Copying blob sha256:1c9f515</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:123.80px;top:464.79px" class="cls_026"><span class="cls_026">72.70 MB / ? [=-----------------------------------------------------------] 5s</span></div>
<div style="position:absolute;left:119.00px;top:476.79px" class="cls_026"><span class="cls_026">Copying blob sha256:1d2c4ce</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:123.80px;top:488.79px" class="cls_026"><span class="cls_026">1.54 KB / ? [--------------------------------------=----------------------] 0s</span></div>
<div style="position:absolute;left:119.00px;top:500.79px" class="cls_026"><span class="cls_026">Copying blob sha256:f1e961f</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:123.80px;top:512.79px" class="cls_026"><span class="cls_026">6.85 MB / ? [-----------------------=-------------------------------------] 0s</span></div>
<div style="position:absolute;left:119.00px;top:524.79px" class="cls_026"><span class="cls_026">Copying blob sha256:9f1840c</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:123.80px;top:536.79px" class="cls_026"><span class="cls_026">62.31 MB / ? [-------------------=----------------------------------------] 7s</span></div>
<div style="position:absolute;left:119.00px;top:548.79px" class="cls_026"><span class="cls_026">Copying config sha256:60726</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.54px;top:751.59px" class="cls_013"><span class="cls_013">65</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:66566px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background084.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:105.80px;top:53.70px" class="cls_026"><span class="cls_026">6.85 KB / 6.85 KB [========================================================] 0s</span></div>
<div style="position:absolute;left:101.00px;top:65.70px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:101.00px;top:77.70px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:101.00px;top:89.70px" class="cls_026"><span class="cls_026">066630d45cb902ab533d503c83b834aa6a9f9cf88755cb68eedb8a3e8edbc5aa</span></div>
<div style="position:absolute;left:119.00px;top:111.98px" class="cls_011"><span class="cls_011">The last line of your output will differ from that shown above, as well as the time needed to</span></div>
<div style="position:absolute;left:119.00px;top:123.98px" class="cls_011"><span class="cls_011">download each image layer.</span></div>
<div style="position:absolute;left:119.00px;top:139.98px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">-p</span><span class="cls_011"> option configures port forwarding so that port 13306 on the local host forwards to</span></div>
<div style="position:absolute;left:119.00px;top:151.98px" class="cls_011"><span class="cls_011">container port 3306.</span></div>
<div style="position:absolute;left:126.00px;top:184.90px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:199.28px" class="cls_011"><span class="cls_011">The start script creates the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory with the appropriate</span></div>
<div style="position:absolute;left:126.00px;top:211.28px" class="cls_011"><span class="cls_011">ownership and SELinux context required by the containerized database.</span></div>
<div style="position:absolute;left:101.41px;top:244.12px" class="cls_022"><span class="cls_022">2.</span><span class="cls_011">   Verify that the </span><span class="cls_021">mysqldb-port</span><span class="cls_011"> container started successfully and enables port forwarding.</span></div>
<div style="position:absolute;left:101.00px;top:271.90px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman ps --format="{{.ID}} {{.Names}} {{.Ports}}"</span></div>
<div style="position:absolute;left:101.00px;top:283.90px" class="cls_026"><span class="cls_026">9941da2936a5   mysqldb-port</span></div>
<div style="position:absolute;left:245.00px;top:283.90px" class="cls_026"><span class="cls_026">0.0.0.0:13306->3306/tcp</span></div>
<div style="position:absolute;left:101.41px;top:314.12px" class="cls_022"><span class="cls_022">3.</span><span class="cls_011">  Populate the database using the provided file. If there are no errors, then the command</span></div>
<div style="position:absolute;left:119.00px;top:326.18px" class="cls_011"><span class="cls_011">does not return any output.</span></div>
<div style="position:absolute;left:101.00px;top:353.90px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">mysql -uuser1 -h 127.0.0.1 -pmypa55 \</span></div>
<div style="position:absolute;left:101.00px;top:365.90px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-P13306 items &lt; /home/student/DO180/labs/manage-networking/db.sql</span></div>
<div style="position:absolute;left:119.00px;top:388.18px" class="cls_011"><span class="cls_011">There are multiple ways to verify that the database loaded successfully. The next steps</span></div>
<div style="position:absolute;left:119.00px;top:400.18px" class="cls_011"><span class="cls_011">show three different methods. You only need to complete one of the methods.</span></div>
<div style="position:absolute;left:101.41px;top:424.12px" class="cls_022"><span class="cls_022">4.</span><span class="cls_011">  Verify that the database loaded successfully by executing a non-interactive command</span></div>
<div style="position:absolute;left:119.00px;top:436.18px" class="cls_011"><span class="cls_011">inside the container.</span></div>
<div style="position:absolute;left:101.00px;top:463.90px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman exec -it mysqldb-port \</span></div>
<div style="position:absolute;left:101.00px;top:475.90px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">/opt/rh/rh-mysql57/root/usr/bin/mysql -uroot items -e "SELECT * FROM Item"</span></div>
<div style="position:absolute;left:101.00px;top:487.90px" class="cls_026"><span class="cls_026">+----+-------------------+------+</span></div>
<div style="position:absolute;left:101.00px;top:499.90px" class="cls_026"><span class="cls_026">| id | description</span></div>
<div style="position:absolute;left:221.00px;top:499.90px" class="cls_026"><span class="cls_026">| done |</span></div>
<div style="position:absolute;left:101.00px;top:511.90px" class="cls_026"><span class="cls_026">+----+-------------------+------+</span></div>
<div style="position:absolute;left:101.00px;top:523.90px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:115.40px;top:523.90px" class="cls_026"><span class="cls_026">1 | Pick up newspaper |</span></div>
<div style="position:absolute;left:245.00px;top:523.90px" class="cls_026"><span class="cls_026">0 |</span></div>
<div style="position:absolute;left:101.00px;top:535.90px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:115.40px;top:535.90px" class="cls_026"><span class="cls_026">2 | Buy groceries</span></div>
<div style="position:absolute;left:221.00px;top:535.90px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:245.00px;top:535.90px" class="cls_026"><span class="cls_026">1 |</span></div>
<div style="position:absolute;left:101.00px;top:547.90px" class="cls_026"><span class="cls_026">+----+-------------------+------+</span></div>
<div style="position:absolute;left:126.00px;top:587.10px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:601.48px" class="cls_011"><span class="cls_011">Because the </span><span class="cls_021">mysql</span><span class="cls_011"> command is not found in a directory defined in the container</span></div>
<div style="position:absolute;left:126.00px;top:613.48px" class="cls_021"><span class="cls_021">PATH</span><span class="cls_011"> variable, you must use an absolute path.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">66</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:67368px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background085.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:119.41px;top:53.92px" class="cls_022"><span class="cls_022">5.</span><span class="cls_011">  Verify that the database loaded successfully by using port forwarding from the local host.</span></div>
<div style="position:absolute;left:137.00px;top:65.98px" class="cls_011"><span class="cls_011">This alternate method is optional.</span></div>
<div style="position:absolute;left:119.00px;top:93.70px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">mysql -uuser1 -h 127.0.0.1 -pmypa55 \</span></div>
<div style="position:absolute;left:119.00px;top:105.70px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-P13306 items -e "SELECT * FROM Item"</span></div>
<div style="position:absolute;left:119.00px;top:117.70px" class="cls_026"><span class="cls_026">+----+-------------------+------+</span></div>
<div style="position:absolute;left:119.00px;top:129.70px" class="cls_026"><span class="cls_026">| id | description</span></div>
<div style="position:absolute;left:239.00px;top:129.70px" class="cls_026"><span class="cls_026">| done |</span></div>
<div style="position:absolute;left:119.00px;top:141.70px" class="cls_026"><span class="cls_026">+----+-------------------+------+</span></div>
<div style="position:absolute;left:119.00px;top:153.70px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:133.40px;top:153.70px" class="cls_026"><span class="cls_026">1 | Pick up newspaper |</span></div>
<div style="position:absolute;left:263.00px;top:153.70px" class="cls_026"><span class="cls_026">0 |</span></div>
<div style="position:absolute;left:119.00px;top:165.70px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:133.40px;top:165.70px" class="cls_026"><span class="cls_026">2 | Buy groceries</span></div>
<div style="position:absolute;left:239.00px;top:165.70px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:263.00px;top:165.70px" class="cls_026"><span class="cls_026">1 |</span></div>
<div style="position:absolute;left:119.00px;top:177.70px" class="cls_026"><span class="cls_026">+----+-------------------+------+</span></div>
<div style="position:absolute;left:119.41px;top:207.92px" class="cls_022"><span class="cls_022">6.</span><span class="cls_011">  Verify that the database loaded successfully by opening an interactive terminal session</span></div>
<div style="position:absolute;left:137.00px;top:219.98px" class="cls_011"><span class="cls_011">inside the container. This alternate method is optional.</span></div>
<div style="position:absolute;left:137.00px;top:242.48px" class="cls_011"><span class="cls_011">6.1.</span></div>
<div style="position:absolute;left:161.70px;top:242.48px" class="cls_011"><span class="cls_011">Open a Bash shell inside the container.</span></div>
<div style="position:absolute;left:119.00px;top:270.19px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman exec -it mysqldb-port /bin/bash</span></div>
<div style="position:absolute;left:119.00px;top:282.19px" class="cls_026"><span class="cls_026">bash-4.2$</span></div>
<div style="position:absolute;left:137.00px;top:310.97px" class="cls_011"><span class="cls_011">6.2.  Verify that the database contains data:</span></div>
<div style="position:absolute;left:119.00px;top:338.69px" class="cls_026"><span class="cls_026">bash-4.2$ </span><span class="cls_027">mysql -uroot items -e "SELECT * FROM Item"</span></div>
<div style="position:absolute;left:119.00px;top:350.68px" class="cls_026"><span class="cls_026">+----+-------------------+------+</span></div>
<div style="position:absolute;left:119.00px;top:362.68px" class="cls_026"><span class="cls_026">| id | description</span></div>
<div style="position:absolute;left:239.00px;top:362.68px" class="cls_026"><span class="cls_026">| done |</span></div>
<div style="position:absolute;left:119.00px;top:374.68px" class="cls_026"><span class="cls_026">+----+-------------------+------+</span></div>
<div style="position:absolute;left:119.00px;top:386.68px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:133.40px;top:386.68px" class="cls_026"><span class="cls_026">1 | Pick up newspaper |</span></div>
<div style="position:absolute;left:263.00px;top:386.68px" class="cls_026"><span class="cls_026">0 |</span></div>
<div style="position:absolute;left:119.00px;top:398.68px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:133.40px;top:398.68px" class="cls_026"><span class="cls_026">2 | Buy groceries</span></div>
<div style="position:absolute;left:239.00px;top:398.68px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:263.00px;top:398.68px" class="cls_026"><span class="cls_026">1 |</span></div>
<div style="position:absolute;left:119.00px;top:410.67px" class="cls_026"><span class="cls_026">+----+-------------------+------+</span></div>
<div style="position:absolute;left:137.00px;top:439.45px" class="cls_011"><span class="cls_011">6.3.  Exit from the container:</span></div>
<div style="position:absolute;left:119.00px;top:467.17px" class="cls_026"><span class="cls_026">bash-4.2$ </span><span class="cls_027">exit</span></div>
<div style="position:absolute;left:108.00px;top:497.51px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:108.00px;top:519.45px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab manage-networking finish</span><span class="cls_011"> script to complete this lab.</span></div>
<div style="position:absolute;left:119.00px;top:547.17px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab manage-networking finish</span></div>
<div style="position:absolute;left:108.00px;top:574.95px" class="cls_011"><span class="cls_011">This concludes the exercise.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.53px;top:751.59px" class="cls_013"><span class="cls_013">67</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:68170px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background086.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_042"><span class="cls_042">Lab</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Managing Containers</span></div>
<div style="position:absolute;left:102.00px;top:139.15px" class="cls_043"><span class="cls_043">Performance Checklist</span></div>
<div style="position:absolute;left:102.00px;top:157.09px" class="cls_011"><span class="cls_011">In this lab, you will deploy a container that saves the MySQL database data into a folder on</span></div>
<div style="position:absolute;left:102.00px;top:169.09px" class="cls_011"><span class="cls_011">the host and then you will load the database in another container.</span></div>
<div style="position:absolute;left:102.00px;top:192.15px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:210.09px" class="cls_011"><span class="cls_011">You should be able to deploy and manage a persistent database using a shared volume. You</span></div>
<div style="position:absolute;left:102.00px;top:222.08px" class="cls_011"><span class="cls_011">should also be able to start a second database using the same shared volume and observe</span></div>
<div style="position:absolute;left:102.00px;top:234.08px" class="cls_011"><span class="cls_011">that the data is consistent between the two containers because they are using the same</span></div>
<div style="position:absolute;left:102.00px;top:246.08px" class="cls_011"><span class="cls_011">directory on the host to store the MySQL data.</span></div>
<div style="position:absolute;left:102.00px;top:269.14px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:287.08px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:101.00px;top:314.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab manage-review start</span></div>
<div style="position:absolute;left:90.00px;top:366.49px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:112.00px;top:366.54px" class="cls_011"><span class="cls_011">Create the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory with the correct SELinux context and permissions.</span></div>
<div style="position:absolute;left:112.00px;top:388.41px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:136.70px;top:388.41px" class="cls_011"><span class="cls_011">Create the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory.</span></div>
<div style="position:absolute;left:112.00px;top:410.28px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:136.70px;top:410.28px" class="cls_011"><span class="cls_011">Add the appropriate SELinux context for the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory and its</span></div>
<div style="position:absolute;left:136.70px;top:422.28px" class="cls_011"><span class="cls_011">contents. With the correct context, you can mount this directory in a running container.</span></div>
<div style="position:absolute;left:112.00px;top:444.15px" class="cls_011"><span class="cls_011">1.3.</span></div>
<div style="position:absolute;left:136.70px;top:444.15px" class="cls_011"><span class="cls_011">Apply the SELinux policy to the newly created directory.</span></div>
<div style="position:absolute;left:112.00px;top:466.01px" class="cls_011"><span class="cls_011">1.4.</span></div>
<div style="position:absolute;left:136.70px;top:466.01px" class="cls_011"><span class="cls_011">Change the owner of the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory to match the </span><span class="cls_021">mysql</span><span class="cls_011"> user and</span></div>
<div style="position:absolute;left:136.70px;top:478.01px" class="cls_021"><span class="cls_021">mysql</span><span class="cls_011"> group for the </span><span class="cls_021">rhscl/mysql-57-rhel7</span><span class="cls_011"> container image:</span></div>
<div style="position:absolute;left:90.00px;top:498.82px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:112.00px;top:498.88px" class="cls_011"><span class="cls_011">Deploy a MySQL container instance using the following characteristics:</span></div>
<div style="position:absolute;left:112.00px;top:519.75px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Name</span><span class="cls_011">: </span><span class="cls_021">mysql-1</span></div>
<div style="position:absolute;left:112.00px;top:540.62px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Run as daemon</span><span class="cls_011">: yes</span></div>
<div style="position:absolute;left:112.00px;top:561.49px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Volume</span><span class="cls_011">: from </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> host folder to </span><span class="cls_021">/var/lib/mysql/data</span><span class="cls_011"> container</span></div>
<div style="position:absolute;left:121.50px;top:573.49px" class="cls_011"><span class="cls_011">folder</span></div>
<div style="position:absolute;left:112.00px;top:594.36px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Container image</span><span class="cls_011">: </span><span class="cls_021">rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:112.00px;top:615.23px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Port forward</span><span class="cls_011">: no</span></div>
<div style="position:absolute;left:112.00px;top:636.10px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Environment variables</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:121.50px;top:656.97px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_USER</span><span class="cls_011">: </span><span class="cls_021">user1</span></div>
<div style="position:absolute;left:121.50px;top:677.84px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_PASSWORD</span><span class="cls_011">: </span><span class="cls_021">mypa55</span></div>
<div style="position:absolute;left:121.50px;top:698.71px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_DATABASE</span><span class="cls_011">: </span><span class="cls_021">items</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">68</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:68972px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background087.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:139.50px;top:53.98px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_ROOT_PASSWORD</span><span class="cls_011">: </span><span class="cls_021">r00tpa55</span></div>
<div style="position:absolute;left:108.00px;top:71.92px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:130.00px;top:71.98px" class="cls_011"><span class="cls_011">Load the </span><span class="cls_021">items</span><span class="cls_011"> database using the </span><span class="cls_021">/home/student/DO180/labs/manage-review/</span></div>
<div style="position:absolute;left:130.00px;top:83.98px" class="cls_021"><span class="cls_021">db.sql</span><span class="cls_011"> script.</span></div>
<div style="position:absolute;left:130.00px;top:107.98px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:154.70px;top:107.98px" class="cls_011"><span class="cls_011">Get the container IP address.</span></div>
<div style="position:absolute;left:130.00px;top:131.99px" class="cls_011"><span class="cls_011">3.2.   Load the database using the SQL commands in </span><span class="cls_021">/home/student/DO180/labs/</span></div>
<div style="position:absolute;left:154.70px;top:143.98px" class="cls_021"><span class="cls_021">manage-review/db.sql</span><span class="cls_011">. Use the IP address you find in the previous step as the</span></div>
<div style="position:absolute;left:154.70px;top:155.98px" class="cls_011"><span class="cls_011">database server's host IP.</span></div>
<div style="position:absolute;left:144.00px;top:188.51px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:202.89px" class="cls_011"><span class="cls_011">You can import all the commands in the above file using the less-than operator</span></div>
<div style="position:absolute;left:144.00px;top:214.88px" class="cls_011"><span class="cls_011">(&lt;) after the </span><span class="cls_021">mysql</span><span class="cls_011"> command, instead of typing them. Also, you need to add the</span></div>
<div style="position:absolute;left:144.00px;top:226.88px" class="cls_021"><span class="cls_021">-h </span><span class="cls_028">CONTAINER_IP</span><span class="cls_011"> parameter to the </span><span class="cls_021">mysql</span><span class="cls_011"> command to connect to the correct</span></div>
<div style="position:absolute;left:144.00px;top:238.88px" class="cls_011"><span class="cls_011">container.</span></div>
<div style="position:absolute;left:130.00px;top:271.78px" class="cls_011"><span class="cls_011">3.3.  Use an SQL </span><span class="cls_021">SELECT</span><span class="cls_011"> statement to output all rows of the Item table to verify that the</span></div>
<div style="position:absolute;left:154.70px;top:283.78px" class="cls_011"><span class="cls_011">Items database is loaded.</span></div>
<div style="position:absolute;left:144.00px;top:316.31px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:330.69px" class="cls_011"><span class="cls_011">You can add the </span><span class="cls_021">-e </span><span class="cls_028">SQL</span><span class="cls_011"> parameter to the </span><span class="cls_021">mysql</span><span class="cls_011"> command to execute an SQL</span></div>
<div style="position:absolute;left:144.00px;top:342.68px" class="cls_011"><span class="cls_011">instruction.</span></div>
<div style="position:absolute;left:108.00px;top:374.53px" class="cls_022"><span class="cls_022">4.</span></div>
<div style="position:absolute;left:130.00px;top:374.59px" class="cls_011"><span class="cls_011">Stop the container gracefully.</span></div>
<div style="position:absolute;left:144.00px;top:407.12px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:144.00px;top:421.49px" class="cls_011"><span class="cls_011">This step is very important because a new container will be created sharing the</span></div>
<div style="position:absolute;left:144.00px;top:433.49px" class="cls_011"><span class="cls_011">same volume for database data. Having two containers using the same volume can</span></div>
<div style="position:absolute;left:144.00px;top:445.49px" class="cls_011"><span class="cls_011">corrupt the database. Do not restart the </span><span class="cls_021">mysql-1</span><span class="cls_011"> container.</span></div>
<div style="position:absolute;left:108.00px;top:472.34px" class="cls_022"><span class="cls_022">5.</span></div>
<div style="position:absolute;left:130.00px;top:472.40px" class="cls_011"><span class="cls_011">Create a new container with the following characteristics:</span></div>
<div style="position:absolute;left:130.00px;top:495.40px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Name</span><span class="cls_011">: </span><span class="cls_021">mysql-2</span></div>
<div style="position:absolute;left:130.00px;top:518.41px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Run as a daemon</span><span class="cls_011">: yes</span></div>
<div style="position:absolute;left:130.00px;top:541.41px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Volume</span><span class="cls_011">: from </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> host folder to </span><span class="cls_021">/var/lib/mysql/data</span><span class="cls_011"> container</span></div>
<div style="position:absolute;left:139.50px;top:553.41px" class="cls_011"><span class="cls_011">folder</span></div>
<div style="position:absolute;left:130.00px;top:576.42px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Container image</span><span class="cls_011">: </span><span class="cls_021">rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:130.00px;top:599.43px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Port forward</span><span class="cls_011">: yes, from host port 13306 to container port 3306</span></div>
<div style="position:absolute;left:130.00px;top:622.43px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Environment variables</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:139.50px;top:645.44px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_USER</span><span class="cls_011">: </span><span class="cls_021">user1</span></div>
<div style="position:absolute;left:139.50px;top:668.44px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_PASSWORD</span><span class="cls_011">: </span><span class="cls_021">mypa55</span></div>
<div style="position:absolute;left:139.50px;top:691.45px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_DATABASE</span><span class="cls_011">: </span><span class="cls_021">items</span></div>
<div style="position:absolute;left:139.50px;top:714.46px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_ROOT_PASSWORD</span><span class="cls_011">: </span><span class="cls_021">r00tpa55</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.33px;top:751.59px" class="cls_013"><span class="cls_013">69</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:69774px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background088.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:90.00px;top:53.92px" class="cls_022"><span class="cls_022">6.</span></div>
<div style="position:absolute;left:112.00px;top:53.98px" class="cls_011"><span class="cls_011">Save the list of all containers (including stopped ones) to the </span><span class="cls_021">/tmp/my-containers</span><span class="cls_011"> file.</span></div>
<div style="position:absolute;left:90.00px;top:71.92px" class="cls_022"><span class="cls_022">7.</span></div>
<div style="position:absolute;left:112.00px;top:71.98px" class="cls_011"><span class="cls_011">Access the Bash shell inside the container and verify that the </span><span class="cls_021">items</span><span class="cls_011"> database and the </span><span class="cls_021">Item</span></div>
<div style="position:absolute;left:112.00px;top:83.98px" class="cls_011"><span class="cls_011">table are still available. Confirm also that the table contains data.</span></div>
<div style="position:absolute;left:112.00px;top:106.48px" class="cls_011"><span class="cls_011">7.1.</span></div>
<div style="position:absolute;left:136.70px;top:106.48px" class="cls_011"><span class="cls_011">Access the Bash shell inside the container.</span></div>
<div style="position:absolute;left:112.00px;top:128.97px" class="cls_011"><span class="cls_011">7.2.   Connect to the MySQL server.</span></div>
<div style="position:absolute;left:112.00px;top:151.47px" class="cls_011"><span class="cls_011">7.3.   List all databases and confirm that the </span><span class="cls_021">items</span><span class="cls_011"> database is available.</span></div>
<div style="position:absolute;left:112.00px;top:173.97px" class="cls_011"><span class="cls_011">7.4.   List all tables from the </span><span class="cls_021">items</span><span class="cls_011"> database and verify that the </span><span class="cls_021">Item</span><span class="cls_011"> table is available.</span></div>
<div style="position:absolute;left:112.00px;top:196.47px" class="cls_011"><span class="cls_011">7.5.   View the data from the table.</span></div>
<div style="position:absolute;left:112.00px;top:218.97px" class="cls_011"><span class="cls_011">7.6.   Exit from the MySQL client and from the container shell.</span></div>
<div style="position:absolute;left:90.00px;top:240.41px" class="cls_022"><span class="cls_022">8.</span></div>
<div style="position:absolute;left:112.00px;top:240.46px" class="cls_011"><span class="cls_011">Using port forwarding, insert a new row into the </span><span class="cls_021">Item</span><span class="cls_011"> table. The row should have a</span></div>
<div style="position:absolute;left:112.00px;top:252.46px" class="cls_021"><span class="cls_021">description</span><span class="cls_011"> value of </span><span class="cls_021">Finished lab</span><span class="cls_011">, and a </span><span class="cls_021">done</span><span class="cls_011"> value of </span><span class="cls_021">1</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:112.00px;top:274.96px" class="cls_011"><span class="cls_011">8.1.</span></div>
<div style="position:absolute;left:136.70px;top:274.96px" class="cls_011"><span class="cls_011">Connect to the MySQL database.</span></div>
<div style="position:absolute;left:112.00px;top:297.46px" class="cls_011"><span class="cls_011">8.2.  Insert the new row.</span></div>
<div style="position:absolute;left:112.00px;top:319.96px" class="cls_011"><span class="cls_011">8.3.  Exit from the MySQL client.</span></div>
<div style="position:absolute;left:90.00px;top:341.40px" class="cls_022"><span class="cls_022">9.</span></div>
<div style="position:absolute;left:112.00px;top:341.46px" class="cls_011"><span class="cls_011">Because the first container is not required any more, remove it to release resources.</span></div>
<div style="position:absolute;left:90.00px;top:365.52px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:90.00px;top:387.46px" class="cls_011"><span class="cls_011">Grade your work by running the </span><span class="cls_021">lab manage-review grade</span><span class="cls_011"> command from your</span></div>
<div style="position:absolute;left:90.00px;top:399.45px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011"> machine. Correct any reported failures and rerun the script until successful.</span></div>
<div style="position:absolute;left:101.00px;top:427.17px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab manage-review grade</span></div>
<div style="position:absolute;left:90.00px;top:457.52px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:479.45px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab manage-review finish</span><span class="cls_011"> command to complete this lab.</span></div>
<div style="position:absolute;left:101.00px;top:507.17px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab manage-review finish</span></div>
<div style="position:absolute;left:90.00px;top:534.95px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">70</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:70576px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background089.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_042"><span class="cls_042">Solution</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Managing Containers</span></div>
<div style="position:absolute;left:120.00px;top:139.15px" class="cls_043"><span class="cls_043">Performance Checklist</span></div>
<div style="position:absolute;left:120.00px;top:157.09px" class="cls_011"><span class="cls_011">In this lab, you will deploy a container that saves the MySQL database data into a folder on</span></div>
<div style="position:absolute;left:120.00px;top:169.09px" class="cls_011"><span class="cls_011">the host and then you will load the database in another container.</span></div>
<div style="position:absolute;left:120.00px;top:192.15px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:120.00px;top:210.09px" class="cls_011"><span class="cls_011">You should be able to deploy and manage a persistent database using a shared volume. You</span></div>
<div style="position:absolute;left:120.00px;top:222.08px" class="cls_011"><span class="cls_011">should also be able to start a second database using the same shared volume and observe</span></div>
<div style="position:absolute;left:120.00px;top:234.08px" class="cls_011"><span class="cls_011">that the data is consistent between the two containers because they are using the same</span></div>
<div style="position:absolute;left:120.00px;top:246.08px" class="cls_011"><span class="cls_011">directory on the host to store the MySQL data.</span></div>
<div style="position:absolute;left:120.00px;top:269.14px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:120.00px;top:287.08px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:119.00px;top:314.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab manage-review start</span></div>
<div style="position:absolute;left:108.00px;top:368.70px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:130.00px;top:368.75px" class="cls_011"><span class="cls_011">Create the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory with the correct SELinux context and permissions.</span></div>
<div style="position:absolute;left:130.00px;top:392.58px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:154.70px;top:392.58px" class="cls_011"><span class="cls_011">Create the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory.</span></div>
<div style="position:absolute;left:119.00px;top:420.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo mkdir -pv /var/local/mysql</span></div>
<div style="position:absolute;left:119.00px;top:432.30px" class="cls_026"><span class="cls_026">mkdir: created directory ‘/var/local/mysql’</span></div>
<div style="position:absolute;left:130.00px;top:462.41px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:154.70px;top:462.41px" class="cls_011"><span class="cls_011">Add the appropriate SELinux context for the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory and its</span></div>
<div style="position:absolute;left:154.70px;top:474.40px" class="cls_011"><span class="cls_011">contents. With the correct context, you can mount this directory in a running container.</span></div>
<div style="position:absolute;left:119.00px;top:502.12px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo semanage fcontext -a \</span></div>
<div style="position:absolute;left:119.00px;top:514.12px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-t container_file_t '/var/local/mysql(/.*)?'</span></div>
<div style="position:absolute;left:130.00px;top:544.23px" class="cls_011"><span class="cls_011">1.3.</span></div>
<div style="position:absolute;left:154.70px;top:544.23px" class="cls_011"><span class="cls_011">Apply the SELinux policy to the newly created directory.</span></div>
<div style="position:absolute;left:119.00px;top:571.94px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo restorecon -R /var/local/mysql</span></div>
<div style="position:absolute;left:130.00px;top:602.05px" class="cls_011"><span class="cls_011">1.4.</span></div>
<div style="position:absolute;left:154.70px;top:602.05px" class="cls_011"><span class="cls_011">Change the owner of the </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> directory to match the </span><span class="cls_021">mysql</span><span class="cls_011"> user and</span></div>
<div style="position:absolute;left:154.70px;top:614.05px" class="cls_021"><span class="cls_021">mysql</span><span class="cls_011"> group for the </span><span class="cls_021">rhscl/mysql-57-rhel7</span><span class="cls_011"> container image:</span></div>
<div style="position:absolute;left:119.00px;top:641.77px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo chown -Rv 27:27 /var/local/mysql</span></div>
<div style="position:absolute;left:119.00px;top:653.76px" class="cls_026"><span class="cls_026">changed ownership of ‘/var/local/mysql’ from root:root to 27:27</span></div>
<div style="position:absolute;left:108.00px;top:682.81px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:130.00px;top:682.87px" class="cls_011"><span class="cls_011">Deploy a MySQL container instance using the following characteristics:</span></div>
<div style="position:absolute;left:130.00px;top:705.70px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Name</span><span class="cls_011">: </span><span class="cls_021">mysql-1</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:509.57px;top:751.59px" class="cls_013"><span class="cls_013">71</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:71378px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background090.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:112.00px;top:53.98px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Run as daemon</span><span class="cls_011">: yes</span></div>
<div style="position:absolute;left:112.00px;top:77.38px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Volume</span><span class="cls_011">: from </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> host folder to </span><span class="cls_021">/var/lib/mysql/data</span><span class="cls_011"> container</span></div>
<div style="position:absolute;left:121.50px;top:89.38px" class="cls_011"><span class="cls_011">folder</span></div>
<div style="position:absolute;left:112.00px;top:112.78px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Container image</span><span class="cls_011">: </span><span class="cls_021">rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:112.00px;top:136.18px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Port forward</span><span class="cls_011">: no</span></div>
<div style="position:absolute;left:112.00px;top:159.58px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Environment variables</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:121.50px;top:182.98px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_USER</span><span class="cls_011">: </span><span class="cls_021">user1</span></div>
<div style="position:absolute;left:121.50px;top:206.38px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_PASSWORD</span><span class="cls_011">: </span><span class="cls_021">mypa55</span></div>
<div style="position:absolute;left:121.50px;top:229.78px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_DATABASE</span><span class="cls_011">: </span><span class="cls_021">items</span></div>
<div style="position:absolute;left:121.50px;top:253.18px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_ROOT_PASSWORD</span><span class="cls_011">: </span><span class="cls_021">r00tpa55</span></div>
<div style="position:absolute;left:112.00px;top:277.58px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:136.70px;top:277.58px" class="cls_011"><span class="cls_011">Create and start the container.</span></div>
<div style="position:absolute;left:101.00px;top:305.29px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run --name mysql-1 \</span></div>
<div style="position:absolute;left:101.00px;top:317.29px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-d -v /var/local/mysql:/var/lib/mysql/data \</span></div>
<div style="position:absolute;left:101.00px;top:329.29px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 \</span></div>
<div style="position:absolute;left:101.00px;top:341.29px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 \</span></div>
<div style="position:absolute;left:101.00px;top:353.29px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:101.00px;top:365.28px" class="cls_026"><span class="cls_026">Trying to pull </span><span class="cls_029">...output omitted</span></div>
<div style="position:absolute;left:101.00px;top:377.28px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:389.28px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:101.00px;top:401.28px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:101.00px;top:413.27px" class="cls_026"><span class="cls_026">6l6azfaa55x866e7eb18b1fd0423a5461d8f24c147b1ad8668b76e6167587cdd</span></div>
<div style="position:absolute;left:112.00px;top:443.95px" class="cls_011"><span class="cls_011">2.2.   Verify that the container was started correctly.</span></div>
<div style="position:absolute;left:101.00px;top:471.67px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman ps --format="{{.ID}} {{.Names}}"</span></div>
<div style="position:absolute;left:101.00px;top:483.67px" class="cls_026"><span class="cls_026">6l6azfaa55x8   mysql-1</span></div>
<div style="position:absolute;left:90.00px;top:513.29px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:112.00px;top:513.35px" class="cls_011"><span class="cls_011">Load the </span><span class="cls_021">items</span><span class="cls_011"> database using the </span><span class="cls_021">/home/student/DO180/labs/manage-review/</span></div>
<div style="position:absolute;left:112.00px;top:525.35px" class="cls_021"><span class="cls_021">db.sql</span><span class="cls_011"> script.</span></div>
<div style="position:absolute;left:112.00px;top:549.75px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:136.70px;top:549.75px" class="cls_011"><span class="cls_011">Get the container IP address.</span></div>
<div style="position:absolute;left:101.00px;top:577.47px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman inspect \</span></div>
<div style="position:absolute;left:101.00px;top:589.46px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-f '{{ .NetworkSettings.IPAddress }}' mysql-1</span></div>
<div style="position:absolute;left:101.00px;top:601.46px" class="cls_026"><span class="cls_026">10.88.0.6</span></div>
<div style="position:absolute;left:112.00px;top:632.14px" class="cls_011"><span class="cls_011">3.2.   Load the database using the SQL commands in </span><span class="cls_021">/home/student/DO180/labs/</span></div>
<div style="position:absolute;left:136.70px;top:644.14px" class="cls_021"><span class="cls_021">manage-review/db.sql</span><span class="cls_011">. Use the IP address you find in the previous step as the</span></div>
<div style="position:absolute;left:136.70px;top:656.14px" class="cls_011"><span class="cls_011">database server's host IP.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">72</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:72180px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background091.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:144.00px;top:63.50px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:77.88px" class="cls_011"><span class="cls_011">You can import all the commands in the above file using the less-than operator</span></div>
<div style="position:absolute;left:144.00px;top:89.87px" class="cls_011"><span class="cls_011">(&lt;) after the </span><span class="cls_021">mysql</span><span class="cls_011"> command, instead of typing them. Also, you need to add the</span></div>
<div style="position:absolute;left:144.00px;top:101.87px" class="cls_021"><span class="cls_021">-h </span><span class="cls_028">CONTAINER_IP</span><span class="cls_011"> parameter to the </span><span class="cls_021">mysql</span><span class="cls_011"> command to connect to the correct</span></div>
<div style="position:absolute;left:144.00px;top:113.87px" class="cls_011"><span class="cls_011">container.</span></div>
<div style="position:absolute;left:119.00px;top:159.49px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">mysql -uuser1 -h </span><span class="cls_040">CONTAINER_IP</span><span class="cls_027"> \</span></div>
<div style="position:absolute;left:119.00px;top:171.49px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-pmypa55 items &lt; /home/student/DO180/labs/manage-review/db.sql</span></div>
<div style="position:absolute;left:130.00px;top:199.53px" class="cls_011"><span class="cls_011">3.3.  Use an SQL </span><span class="cls_021">SELECT</span><span class="cls_011"> statement to output all rows of the Item table to verify that the</span></div>
<div style="position:absolute;left:154.70px;top:211.53px" class="cls_011"><span class="cls_011">Items database is loaded.</span></div>
<div style="position:absolute;left:144.00px;top:241.82px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:256.20px" class="cls_011"><span class="cls_011">You can add the </span><span class="cls_021">-e </span><span class="cls_028">SQL</span><span class="cls_011"> parameter to the </span><span class="cls_021">mysql</span><span class="cls_011"> command to execute an SQL</span></div>
<div style="position:absolute;left:144.00px;top:268.19px" class="cls_011"><span class="cls_011">instruction.</span></div>
<div style="position:absolute;left:119.00px;top:313.81px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">mysql -uuser1 -h </span><span class="cls_040">CONTAINER_IP</span><span class="cls_027"> -pmypa55 items \</span></div>
<div style="position:absolute;left:119.00px;top:325.81px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-e "SELECT * FROM Item"</span></div>
<div style="position:absolute;left:119.00px;top:337.81px" class="cls_026"><span class="cls_026">+----+-------------------+------+</span></div>
<div style="position:absolute;left:119.00px;top:349.80px" class="cls_026"><span class="cls_026">| id | description</span></div>
<div style="position:absolute;left:239.00px;top:349.80px" class="cls_026"><span class="cls_026">| done |</span></div>
<div style="position:absolute;left:119.00px;top:361.80px" class="cls_026"><span class="cls_026">+----+-------------------+------+</span></div>
<div style="position:absolute;left:119.00px;top:373.80px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:133.40px;top:373.80px" class="cls_026"><span class="cls_026">1 | Pick up newspaper |</span></div>
<div style="position:absolute;left:263.00px;top:373.80px" class="cls_026"><span class="cls_026">0 |</span></div>
<div style="position:absolute;left:119.00px;top:385.80px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:133.40px;top:385.80px" class="cls_026"><span class="cls_026">2 | Buy groceries</span></div>
<div style="position:absolute;left:239.00px;top:385.80px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:263.00px;top:385.80px" class="cls_026"><span class="cls_026">1 |</span></div>
<div style="position:absolute;left:119.00px;top:397.80px" class="cls_026"><span class="cls_026">+----+-------------------+------+</span></div>
<div style="position:absolute;left:108.00px;top:424.79px" class="cls_022"><span class="cls_022">4.</span></div>
<div style="position:absolute;left:130.00px;top:424.85px" class="cls_011"><span class="cls_011">Stop the container gracefully.</span></div>
<div style="position:absolute;left:144.00px;top:455.14px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:144.00px;top:469.51px" class="cls_011"><span class="cls_011">This step is very important because a new container will be created sharing the</span></div>
<div style="position:absolute;left:144.00px;top:481.51px" class="cls_011"><span class="cls_011">same volume for database data. Having two containers using the same volume can</span></div>
<div style="position:absolute;left:144.00px;top:493.51px" class="cls_011"><span class="cls_011">corrupt the database. Do not restart the </span><span class="cls_021">mysql-1</span><span class="cls_011"> container.</span></div>
<div style="position:absolute;left:130.00px;top:531.41px" class="cls_011"><span class="cls_011">Use the following command to stop the container:</span></div>
<div style="position:absolute;left:119.00px;top:559.13px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman stop mysql-1</span></div>
<div style="position:absolute;left:119.00px;top:571.13px" class="cls_026"><span class="cls_026">6l6azfaa55x866e7eb18b1fd0423a5461d8f24c147b1ad8668b76e6167587cdd</span></div>
<div style="position:absolute;left:108.00px;top:595.35px" class="cls_022"><span class="cls_022">5.</span></div>
<div style="position:absolute;left:130.00px;top:595.41px" class="cls_011"><span class="cls_011">Create a new container with the following characteristics:</span></div>
<div style="position:absolute;left:130.00px;top:616.18px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Name</span><span class="cls_011">: </span><span class="cls_021">mysql-2</span></div>
<div style="position:absolute;left:130.00px;top:636.95px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Run as a daemon</span><span class="cls_011">: yes</span></div>
<div style="position:absolute;left:130.00px;top:657.72px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Volume</span><span class="cls_011">: from </span><span class="cls_021">/var/local/mysql</span><span class="cls_011"> host folder to </span><span class="cls_021">/var/lib/mysql/data</span><span class="cls_011"> container</span></div>
<div style="position:absolute;left:139.50px;top:669.72px" class="cls_011"><span class="cls_011">folder</span></div>
<div style="position:absolute;left:130.00px;top:690.49px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Container image</span><span class="cls_011">: </span><span class="cls_021">rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.65px;top:751.59px" class="cls_013"><span class="cls_013">73</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:72982px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background092.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:112.00px;top:53.98px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Port forward</span><span class="cls_011">: yes, from host port 13306 to container port 3306</span></div>
<div style="position:absolute;left:112.00px;top:75.39px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Environment variables</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:121.50px;top:96.79px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_USER</span><span class="cls_011">: </span><span class="cls_021">user1</span></div>
<div style="position:absolute;left:121.50px;top:118.20px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_PASSWORD</span><span class="cls_011">: </span><span class="cls_021">mypa55</span></div>
<div style="position:absolute;left:121.50px;top:139.61px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_DATABASE</span><span class="cls_011">: </span><span class="cls_021">items</span></div>
<div style="position:absolute;left:121.50px;top:161.02px" class="cls_011"><span class="cls_011">-</span><span class="cls_021"> MYSQL_ROOT_PASSWORD</span><span class="cls_011">: </span><span class="cls_021">r00tpa55</span></div>
<div style="position:absolute;left:112.00px;top:183.42px" class="cls_011"><span class="cls_011">5.1.</span></div>
<div style="position:absolute;left:136.70px;top:183.42px" class="cls_011"><span class="cls_011">Create and start the container.</span></div>
<div style="position:absolute;left:101.00px;top:211.14px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run --name mysql-2 \</span></div>
<div style="position:absolute;left:101.00px;top:223.14px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-d -v /var/local/mysql:/var/lib/mysql/data \</span></div>
<div style="position:absolute;left:101.00px;top:235.14px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p 13306:3306 \</span></div>
<div style="position:absolute;left:101.00px;top:247.13px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 \</span></div>
<div style="position:absolute;left:101.00px;top:259.13px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 \</span></div>
<div style="position:absolute;left:101.00px;top:271.13px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:101.00px;top:283.13px" class="cls_026"><span class="cls_026">281c0e2790e54cd5a0b8e2a8cb6e3969981b85cde8ac611bf7ea98ff78bdffbb</span></div>
<div style="position:absolute;left:112.00px;top:311.82px" class="cls_011"><span class="cls_011">5.2.   Verify that the container was started correctly.</span></div>
<div style="position:absolute;left:101.00px;top:339.53px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman ps --format="{{.ID}} {{.Names}}"</span></div>
<div style="position:absolute;left:101.00px;top:351.53px" class="cls_026"><span class="cls_026">281c0e2790e5   mysql-2</span></div>
<div style="position:absolute;left:90.00px;top:379.16px" class="cls_022"><span class="cls_022">6.</span></div>
<div style="position:absolute;left:112.00px;top:379.22px" class="cls_011"><span class="cls_011">Save the list of all containers (including stopped ones) to the </span><span class="cls_021">/tmp/my-containers</span><span class="cls_011"> file.</span></div>
<div style="position:absolute;left:112.00px;top:395.22px" class="cls_011"><span class="cls_011">Save the information with the following command:</span></div>
<div style="position:absolute;left:101.00px;top:422.94px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman ps -a > /tmp/my-containers</span></div>
<div style="position:absolute;left:90.00px;top:447.16px" class="cls_022"><span class="cls_022">7.</span></div>
<div style="position:absolute;left:112.00px;top:447.22px" class="cls_011"><span class="cls_011">Access the Bash shell inside the container and verify that the </span><span class="cls_021">items</span><span class="cls_011"> database and the </span><span class="cls_021">Item</span></div>
<div style="position:absolute;left:112.00px;top:459.22px" class="cls_011"><span class="cls_011">table are still available. Confirm also that the table contains data.</span></div>
<div style="position:absolute;left:112.00px;top:481.63px" class="cls_011"><span class="cls_011">7.1.</span></div>
<div style="position:absolute;left:136.70px;top:481.63px" class="cls_011"><span class="cls_011">Access the Bash shell inside the container.</span></div>
<div style="position:absolute;left:101.00px;top:509.34px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman exec -it mysql-2 /bin/bash</span></div>
<div style="position:absolute;left:112.00px;top:538.03px" class="cls_011"><span class="cls_011">7.2.   Connect to the MySQL server.</span></div>
<div style="position:absolute;left:101.00px;top:565.75px" class="cls_026"><span class="cls_026">bash-4.2$ </span><span class="cls_027">mysql -uroot</span></div>
<div style="position:absolute;left:112.00px;top:594.43px" class="cls_011"><span class="cls_011">7.3.   List all databases and confirm that the </span><span class="cls_021">items</span><span class="cls_011"> database is available.</span></div>
<div style="position:absolute;left:101.00px;top:622.15px" class="cls_026"><span class="cls_026">mysql> </span><span class="cls_027">show databases;</span></div>
<div style="position:absolute;left:101.00px;top:634.15px" class="cls_026"><span class="cls_026">+--------------------+</span></div>
<div style="position:absolute;left:101.00px;top:646.15px" class="cls_026"><span class="cls_026">| Database</span></div>
<div style="position:absolute;left:201.80px;top:646.15px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:101.00px;top:658.14px" class="cls_026"><span class="cls_026">+--------------------+</span></div>
<div style="position:absolute;left:101.00px;top:670.14px" class="cls_026"><span class="cls_026">| information_schema |</span></div>
<div style="position:absolute;left:101.00px;top:682.14px" class="cls_026"><span class="cls_026">| items</span></div>
<div style="position:absolute;left:201.80px;top:682.14px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:101.00px;top:694.14px" class="cls_026"><span class="cls_026">| mysql</span></div>
<div style="position:absolute;left:201.80px;top:694.14px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">74</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:73784px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background093.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:119.00px;top:53.69px" class="cls_026"><span class="cls_026">| performance_schema |</span></div>
<div style="position:absolute;left:119.00px;top:65.69px" class="cls_026"><span class="cls_026">| sys</span></div>
<div style="position:absolute;left:219.80px;top:65.69px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:119.00px;top:77.69px" class="cls_026"><span class="cls_026">+--------------------+</span></div>
<div style="position:absolute;left:119.00px;top:89.69px" class="cls_026"><span class="cls_026">5 rows in set (0.03 sec)</span></div>
<div style="position:absolute;left:130.00px;top:119.21px" class="cls_011"><span class="cls_011">7.4.   List all tables from the </span><span class="cls_021">items</span><span class="cls_011"> database and verify that the </span><span class="cls_021">Item</span><span class="cls_011"> table is available.</span></div>
<div style="position:absolute;left:119.00px;top:146.93px" class="cls_026"><span class="cls_026">mysql> </span><span class="cls_027">use items;</span></div>
<div style="position:absolute;left:119.00px;top:158.93px" class="cls_026"><span class="cls_026">Database changed</span></div>
<div style="position:absolute;left:119.00px;top:170.93px" class="cls_026"><span class="cls_026">mysql> </span><span class="cls_027">show tables;</span></div>
<div style="position:absolute;left:119.00px;top:182.93px" class="cls_026"><span class="cls_026">+-----------------+</span></div>
<div style="position:absolute;left:119.00px;top:194.92px" class="cls_026"><span class="cls_026">| Tables_in_items |</span></div>
<div style="position:absolute;left:119.00px;top:206.92px" class="cls_026"><span class="cls_026">+-----------------+</span></div>
<div style="position:absolute;left:119.00px;top:218.92px" class="cls_026"><span class="cls_026">| Item</span></div>
<div style="position:absolute;left:205.40px;top:218.92px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:119.00px;top:230.92px" class="cls_026"><span class="cls_026">+-----------------+</span></div>
<div style="position:absolute;left:119.00px;top:242.91px" class="cls_026"><span class="cls_026">1 row in set (0.01 sec)</span></div>
<div style="position:absolute;left:130.00px;top:272.44px" class="cls_011"><span class="cls_011">7.5.   View the data from the table.</span></div>
<div style="position:absolute;left:119.00px;top:300.16px" class="cls_026"><span class="cls_026">mysql> </span><span class="cls_027">SELECT * FROM Item;</span></div>
<div style="position:absolute;left:119.00px;top:312.15px" class="cls_026"><span class="cls_026">+----+-------------------+------+</span></div>
<div style="position:absolute;left:119.00px;top:324.15px" class="cls_026"><span class="cls_026">| id | description</span></div>
<div style="position:absolute;left:239.00px;top:324.15px" class="cls_026"><span class="cls_026">| done |</span></div>
<div style="position:absolute;left:119.00px;top:336.15px" class="cls_026"><span class="cls_026">+----+-------------------+------+</span></div>
<div style="position:absolute;left:119.00px;top:348.15px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:133.40px;top:348.15px" class="cls_026"><span class="cls_026">1 | Pick up newspaper |</span></div>
<div style="position:absolute;left:263.00px;top:348.15px" class="cls_026"><span class="cls_026">0 |</span></div>
<div style="position:absolute;left:119.00px;top:360.15px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:133.40px;top:360.15px" class="cls_026"><span class="cls_026">2 | Buy groceries</span></div>
<div style="position:absolute;left:239.00px;top:360.15px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:263.00px;top:360.15px" class="cls_026"><span class="cls_026">1 |</span></div>
<div style="position:absolute;left:119.00px;top:372.14px" class="cls_026"><span class="cls_026">+----+-------------------+------+</span></div>
<div style="position:absolute;left:130.00px;top:401.67px" class="cls_011"><span class="cls_011">7.6.   Exit from the MySQL client and from the container shell.</span></div>
<div style="position:absolute;left:119.00px;top:429.39px" class="cls_026"><span class="cls_026">mysql> </span><span class="cls_027">exit</span></div>
<div style="position:absolute;left:119.00px;top:441.39px" class="cls_026"><span class="cls_026">Bye</span></div>
<div style="position:absolute;left:119.00px;top:453.38px" class="cls_026"><span class="cls_026">bash-4.2$ </span><span class="cls_027">exit</span></div>
<div style="position:absolute;left:108.00px;top:481.85px" class="cls_022"><span class="cls_022">8.</span></div>
<div style="position:absolute;left:130.00px;top:481.91px" class="cls_011"><span class="cls_011">Using port forwarding, insert a new row into the </span><span class="cls_021">Item</span><span class="cls_011"> table. The row should have a</span></div>
<div style="position:absolute;left:130.00px;top:493.91px" class="cls_021"><span class="cls_021">description</span><span class="cls_011"> value of </span><span class="cls_021">Finished lab</span><span class="cls_011">, and a </span><span class="cls_021">done</span><span class="cls_011"> value of </span><span class="cls_021">1</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:130.00px;top:517.15px" class="cls_011"><span class="cls_011">8.1.</span></div>
<div style="position:absolute;left:154.70px;top:517.15px" class="cls_011"><span class="cls_011">Connect to the MySQL database.</span></div>
<div style="position:absolute;left:119.00px;top:544.87px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">mysql -uuser1 -h workstation.lab.example.com \</span></div>
<div style="position:absolute;left:119.00px;top:556.87px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-pmypa55 -P13306 items</span></div>
<div style="position:absolute;left:119.00px;top:568.87px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:592.86px" class="cls_026"><span class="cls_026">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span></div>
<div style="position:absolute;left:119.00px;top:604.86px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:628.86px" class="cls_026"><span class="cls_026">MySQL [items]></span></div>
<div style="position:absolute;left:130.00px;top:658.38px" class="cls_011"><span class="cls_011">8.2.  Insert the new row.</span></div>
<div style="position:absolute;left:119.00px;top:686.10px" class="cls_026"><span class="cls_026">MySQL[items]> </span><span class="cls_027">insert into Item (description, done) values ('Finished lab', 1);</span></div>
<div style="position:absolute;left:119.00px;top:698.10px" class="cls_026"><span class="cls_026">Query OK, 1 row affected (0.00 sec)</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.74px;top:751.59px" class="cls_013"><span class="cls_013">75</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:74586px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background094.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:112.00px;top:54.98px" class="cls_011"><span class="cls_011">8.3.  Exit from the MySQL client.</span></div>
<div style="position:absolute;left:101.00px;top:82.69px" class="cls_026"><span class="cls_026">MySQL[items]> </span><span class="cls_027">exit</span></div>
<div style="position:absolute;left:101.00px;top:94.69px" class="cls_026"><span class="cls_026">Bye</span></div>
<div style="position:absolute;left:90.00px;top:122.41px" class="cls_022"><span class="cls_022">9.</span></div>
<div style="position:absolute;left:112.00px;top:122.47px" class="cls_011"><span class="cls_011">Because the first container is not required any more, remove it to release resources.</span></div>
<div style="position:absolute;left:112.00px;top:138.47px" class="cls_011"><span class="cls_011">Use the following command to remove the container:</span></div>
<div style="position:absolute;left:101.00px;top:166.19px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman rm mysql-1</span></div>
<div style="position:absolute;left:101.00px;top:178.19px" class="cls_026"><span class="cls_026">6l6azfaa55x866e7eb18b1fd0423a5461d8f24c147b1ad8668b76e6167587cdd</span></div>
<div style="position:absolute;left:90.00px;top:208.53px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:90.00px;top:230.47px" class="cls_011"><span class="cls_011">Grade your work by running the </span><span class="cls_021">lab manage-review grade</span><span class="cls_011"> command from your</span></div>
<div style="position:absolute;left:90.00px;top:242.47px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011"> machine. Correct any reported failures and rerun the script until successful.</span></div>
<div style="position:absolute;left:101.00px;top:270.18px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab manage-review grade</span></div>
<div style="position:absolute;left:90.00px;top:300.53px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:322.46px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab manage-review finish</span><span class="cls_011"> command to complete this lab.</span></div>
<div style="position:absolute;left:101.00px;top:350.18px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab manage-review finish</span></div>
<div style="position:absolute;left:90.00px;top:377.96px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">76</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:75388px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background095.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 3 |</span><span class="cls_019"> Managing Containers</span></div>
<div style="position:absolute;left:108.00px;top:83.06px" class="cls_014"><span class="cls_014">Summary</span></div>
<div style="position:absolute;left:108.00px;top:135.98px" class="cls_011"><span class="cls_011">In this chapter, you learned:</span></div>
<div style="position:absolute;left:108.00px;top:157.47px" class="cls_011"><span class="cls_011">• Podman has subcommands to: create a new container (</span><span class="cls_021">run</span><span class="cls_011">), delete a container (</span><span class="cls_021">rm</span><span class="cls_011">), list</span></div>
<div style="position:absolute;left:117.50px;top:169.47px" class="cls_011"><span class="cls_011">containers (</span><span class="cls_021">ps</span><span class="cls_011">), stop a container (</span><span class="cls_021">stop</span><span class="cls_011">), and start a process in a container (</span><span class="cls_021">exec</span><span class="cls_011">).</span></div>
<div style="position:absolute;left:108.00px;top:190.97px" class="cls_011"><span class="cls_011">• Default container storage is ephemeral, meaning its contents are not present after the container</span></div>
<div style="position:absolute;left:117.50px;top:202.97px" class="cls_011"><span class="cls_011">restarts or is removed.</span></div>
<div style="position:absolute;left:117.50px;top:224.47px" class="cls_011"><span class="cls_011">- Containers can use a folder from the host file system to work with persistent data.</span></div>
<div style="position:absolute;left:117.50px;top:245.96px" class="cls_011"><span class="cls_011">- Podman mounts volumes in a container with the </span><span class="cls_021">-v</span><span class="cls_011"> option in the </span><span class="cls_021">podman run</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:108.00px;top:267.46px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">podman exec</span><span class="cls_011"> command starts an additional process inside a running container.</span></div>
<div style="position:absolute;left:108.00px;top:288.96px" class="cls_011"><span class="cls_011">• Podman maps local ports to container ports by using the </span><span class="cls_021">-p</span><span class="cls_011"> option in the </span><span class="cls_021">run</span><span class="cls_011"> subcommand.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.73px;top:751.59px" class="cls_013"><span class="cls_013">77</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:76190px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background096.jpg" width=612 height=792></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">78</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:76992px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background097.jpg" width=612 height=792></div>
<div style="position:absolute;left:126.00px;top:69.76px" class="cls_030"><span class="cls_030">Chapter 4</span></div>
<div style="position:absolute;left:126.00px;top:175.50px" class="cls_031"><span class="cls_031">Managing Container Images</span></div>
<div style="position:absolute;left:146.00px;top:228.67px" class="cls_018"><span class="cls_018">Goal</span></div>
<div style="position:absolute;left:252.88px;top:228.01px" class="cls_008"><span class="cls_008">Manage the life cycle of a container image from</span></div>
<div style="position:absolute;left:252.88px;top:240.01px" class="cls_008"><span class="cls_008">creation to deletion.</span></div>
<div style="position:absolute;left:146.00px;top:268.67px" class="cls_018"><span class="cls_018">Objectives</span></div>
<div style="position:absolute;left:252.88px;top:268.01px" class="cls_008"><span class="cls_008">•  Search for and pull images from remote</span></div>
<div style="position:absolute;left:267.88px;top:280.01px" class="cls_008"><span class="cls_008">registries.</span></div>
<div style="position:absolute;left:252.88px;top:296.01px" class="cls_008"><span class="cls_008">•  Export, import, and manage container images</span></div>
<div style="position:absolute;left:267.88px;top:308.01px" class="cls_008"><span class="cls_008">locally and in a registry.</span></div>
<div style="position:absolute;left:146.00px;top:336.67px" class="cls_018"><span class="cls_018">Sections</span></div>
<div style="position:absolute;left:252.88px;top:336.01px" class="cls_008"><span class="cls_008">•  Accessing Registries (and Quiz)</span></div>
<div style="position:absolute;left:252.88px;top:352.01px" class="cls_008"><span class="cls_008">•  Manipulating Container Images (and Guided</span></div>
<div style="position:absolute;left:267.88px;top:364.01px" class="cls_008"><span class="cls_008">Exercise)</span></div>
<div style="position:absolute;left:146.00px;top:392.67px" class="cls_018"><span class="cls_018">Lab</span></div>
<div style="position:absolute;left:252.88px;top:392.01px" class="cls_008"><span class="cls_008">•  Managing Container Images</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.53px;top:751.59px" class="cls_013"><span class="cls_013">79</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:77794px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background098.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Accessing Registries</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to:</span></div>
<div style="position:absolute;left:90.00px;top:180.11px" class="cls_011"><span class="cls_011">• Search for and pull images from remote registries using Podman commands and the registry</span></div>
<div style="position:absolute;left:99.50px;top:192.11px" class="cls_011"><span class="cls_011">REST API.</span></div>
<div style="position:absolute;left:90.00px;top:213.24px" class="cls_011"><span class="cls_011">• List the advantages of using a certified public registry to download secure images.</span></div>
<div style="position:absolute;left:90.00px;top:234.37px" class="cls_011"><span class="cls_011">• Customize the configuration of Podman to access alternative container image registries.</span></div>
<div style="position:absolute;left:90.00px;top:255.50px" class="cls_011"><span class="cls_011">• List images downloaded from a registry to the local file system.</span></div>
<div style="position:absolute;left:90.00px;top:276.63px" class="cls_011"><span class="cls_011">• Manage tags to pull tagged images.</span></div>
<div style="position:absolute;left:90.00px;top:298.92px" class="cls_024"><span class="cls_024">Public Registries</span></div>
<div style="position:absolute;left:90.00px;top:323.63px" class="cls_011"><span class="cls_011">Image registries are services offering container images to download. They allow image creators</span></div>
<div style="position:absolute;left:90.00px;top:335.63px" class="cls_011"><span class="cls_011">and maintainers to store and distribute container images to public or private audiences.</span></div>
<div style="position:absolute;left:90.00px;top:357.13px" class="cls_011"><span class="cls_011">Podman searches for and downloads container images from public and private registries. Red Hat</span></div>
<div style="position:absolute;left:90.00px;top:369.13px" class="cls_011"><span class="cls_011">Container Catalog is the public image registry managed by Red Hat. It hosts a large set of</span></div>
<div style="position:absolute;left:90.00px;top:381.12px" class="cls_011"><span class="cls_011">container images, including those provided by major open source projects, such as Apache,</span></div>
<div style="position:absolute;left:90.00px;top:393.12px" class="cls_011"><span class="cls_011">MySQL, and Jenkins. All images in the Container Catalog are vetted by the Red Hat internal</span></div>
<div style="position:absolute;left:90.00px;top:405.12px" class="cls_011"><span class="cls_011">security team, meaning they are trustworthy and secured against security flaws.</span></div>
<div style="position:absolute;left:90.00px;top:426.62px" class="cls_011"><span class="cls_011">Red Hat container images provide the following benefits:</span></div>
<div style="position:absolute;left:90.00px;top:447.75px" class="cls_011"><span class="cls_011">• Trusted source: All container images comprise sources known and trusted by Red Hat.</span></div>
<div style="position:absolute;left:90.00px;top:468.88px" class="cls_011"><span class="cls_011">• Original dependencies: None of the container packages have been tampered with, and only</span></div>
<div style="position:absolute;left:99.50px;top:480.88px" class="cls_011"><span class="cls_011">include known libraries.</span></div>
<div style="position:absolute;left:90.00px;top:502.01px" class="cls_011"><span class="cls_011">• Vulnerability-free: Container images are free of known vulnerabilities in the platform</span></div>
<div style="position:absolute;left:99.50px;top:514.01px" class="cls_011"><span class="cls_011">components or layers.</span></div>
<div style="position:absolute;left:90.00px;top:535.14px" class="cls_011"><span class="cls_011">• Runtime protection: All applications in container images run as non-root users, minimizing the</span></div>
<div style="position:absolute;left:99.50px;top:547.14px" class="cls_011"><span class="cls_011">exposure surface to malicious or faulty applications.</span></div>
<div style="position:absolute;left:90.00px;top:568.27px" class="cls_011"><span class="cls_011">• Red Hat Enterprise Linux (RHEL) compatible: Container images are compatible with all RHEL</span></div>
<div style="position:absolute;left:99.50px;top:580.27px" class="cls_011"><span class="cls_011">platforms, from bare metal to cloud.</span></div>
<div style="position:absolute;left:90.00px;top:601.40px" class="cls_011"><span class="cls_011">• Red Hat support: Red Hat commercially supports the complete stack.</span></div>
<div style="position:absolute;left:90.00px;top:622.90px" class="cls_011"><span class="cls_011">Quay.io is another public image repository sponsored by Red Hat. Quay.io introduces several</span></div>
<div style="position:absolute;left:90.00px;top:634.90px" class="cls_011"><span class="cls_011">exciting features, such as server-side image building, fine-grained access controls, and automatic</span></div>
<div style="position:absolute;left:90.00px;top:646.90px" class="cls_011"><span class="cls_011">scanning of images for known vulnerabilities.</span></div>
<div style="position:absolute;left:90.00px;top:668.39px" class="cls_011"><span class="cls_011">While Red Hat Container Catalog images are trusted and verified, Quay.io offers live images</span></div>
<div style="position:absolute;left:90.00px;top:680.39px" class="cls_011"><span class="cls_011">regularly updated by creators. Quay.io users can create their namespaces, with fine-grained access</span></div>
<div style="position:absolute;left:90.00px;top:692.39px" class="cls_011"><span class="cls_011">control, and publish the images they create to that namespace. Container Catalog users rarely or</span></div>
<div style="position:absolute;left:90.00px;top:704.39px" class="cls_011"><span class="cls_011">never push new images, but consume trusted images generated by the Red Hat team.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">80</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:78596px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background099.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:108.00px;top:52.26px" class="cls_024"><span class="cls_024">Private Registries</span></div>
<div style="position:absolute;left:108.00px;top:76.98px" class="cls_011"><span class="cls_011">Some image creators or maintainers want to make their images public available. Other image</span></div>
<div style="position:absolute;left:108.00px;top:88.97px" class="cls_011"><span class="cls_011">creators, however, prefer to keep their images private due to:</span></div>
<div style="position:absolute;left:108.00px;top:110.19px" class="cls_011"><span class="cls_011">• Company privacy and secret protection.</span></div>
<div style="position:absolute;left:108.00px;top:131.40px" class="cls_011"><span class="cls_011">• Legal restrictions and laws.</span></div>
<div style="position:absolute;left:108.00px;top:152.62px" class="cls_011"><span class="cls_011">• Avoidance of publishing images in development.</span></div>
<div style="position:absolute;left:108.00px;top:174.12px" class="cls_011"><span class="cls_011">Private registries give image creators the control about their images placement, distribution and</span></div>
<div style="position:absolute;left:108.00px;top:186.12px" class="cls_011"><span class="cls_011">usage.</span></div>
<div style="position:absolute;left:108.00px;top:208.40px" class="cls_024"><span class="cls_024">Configuring Registries in Podman</span></div>
<div style="position:absolute;left:108.00px;top:233.11px" class="cls_011"><span class="cls_011">To configure registries for the </span><span class="cls_021">podman</span><span class="cls_011"> command, you need to update the </span><span class="cls_021">/etc/containers/</span></div>
<div style="position:absolute;left:108.00px;top:245.11px" class="cls_021"><span class="cls_021">registries.conf</span><span class="cls_011"> file. Edit the </span><span class="cls_021">registries</span><span class="cls_011"> entry in the </span><span class="cls_021">[registries.search]</span><span class="cls_011"> section,</span></div>
<div style="position:absolute;left:108.00px;top:257.11px" class="cls_011"><span class="cls_011">adding an entry to the values list.</span></div>
<div style="position:absolute;left:119.00px;top:284.83px" class="cls_026"><span class="cls_026">[registries.search]</span></div>
<div style="position:absolute;left:119.00px;top:296.82px" class="cls_026"><span class="cls_026">registries = ["registry.access.redhat.com", "quay.io"]</span></div>
<div style="position:absolute;left:144.00px;top:333.84px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:348.22px" class="cls_011"><span class="cls_011">Use an FQDN and port number to identify a registry. A registry that does not include</span></div>
<div style="position:absolute;left:144.00px;top:360.22px" class="cls_011"><span class="cls_011">a port number has a default port number of 5000. If the registry uses a different</span></div>
<div style="position:absolute;left:144.00px;top:372.22px" class="cls_011"><span class="cls_011">port, it must be specified. Indicate port numbers by appending a colon (:) and the</span></div>
<div style="position:absolute;left:144.00px;top:384.21px" class="cls_011"><span class="cls_011">port number after the FQDN.</span></div>
<div style="position:absolute;left:108.00px;top:422.11px" class="cls_011"><span class="cls_011">Secure connections to a registry require a trusted certificate. To support insecure connections,</span></div>
<div style="position:absolute;left:108.00px;top:434.11px" class="cls_011"><span class="cls_011">add the registry name to the </span><span class="cls_021">registries</span><span class="cls_011"> entry in </span><span class="cls_021">[registries.insecure]</span><span class="cls_011"> section of </span><span class="cls_021">/etc/</span></div>
<div style="position:absolute;left:108.00px;top:446.11px" class="cls_021"><span class="cls_021">containers/registries.conf</span><span class="cls_011"> file:</span></div>
<div style="position:absolute;left:119.00px;top:473.83px" class="cls_026"><span class="cls_026">[registries.insecure]</span></div>
<div style="position:absolute;left:119.00px;top:485.82px" class="cls_026"><span class="cls_026">registries = ['localhost:5000']</span></div>
<div style="position:absolute;left:108.00px;top:514.39px" class="cls_024"><span class="cls_024">Accessing Registries</span></div>
<div style="position:absolute;left:108.00px;top:537.17px" class="cls_002"><span class="cls_002">Searching for Images in Registries</span></div>
<div style="position:absolute;left:108.00px;top:559.10px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">podman search</span><span class="cls_011"> command finds images by image name, user name, or description from all</span></div>
<div style="position:absolute;left:108.00px;top:571.10px" class="cls_011"><span class="cls_011">the registries listed in the </span><span class="cls_021">/etc/containers/registries.conf</span><span class="cls_011"> configuration file. The syntax</span></div>
<div style="position:absolute;left:108.00px;top:583.10px" class="cls_011"><span class="cls_011">for the </span><span class="cls_021">podman search</span><span class="cls_011"> command is shown below:</span></div>
<div style="position:absolute;left:119.00px;top:610.82px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman search [OPTIONS] &lt;term></span></div>
<div style="position:absolute;left:108.00px;top:638.59px" class="cls_011"><span class="cls_011">The following table shows some useful options available for the </span><span class="cls_021">search</span><span class="cls_011"> subcommand:</span></div>
<div style="position:absolute;left:114.25px;top:665.58px" class="cls_023"><span class="cls_023">Option</span></div>
<div style="position:absolute;left:321.25px;top:665.58px" class="cls_023"><span class="cls_023">Description</span></div>
<div style="position:absolute;left:114.25px;top:688.16px" class="cls_021"><span class="cls_021">--limit &lt;number></span></div>
<div style="position:absolute;left:321.25px;top:688.13px" class="cls_011"><span class="cls_011">Limits the number of listed images per</span></div>
<div style="position:absolute;left:321.25px;top:700.13px" class="cls_011"><span class="cls_011">registry.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:509.40px;top:751.59px" class="cls_013"><span class="cls_013">81</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:79398px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background100.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:96.25px;top:60.17px" class="cls_023"><span class="cls_023">Option</span></div>
<div style="position:absolute;left:303.25px;top:60.17px" class="cls_023"><span class="cls_023">Description</span></div>
<div style="position:absolute;left:96.25px;top:82.76px" class="cls_021"><span class="cls_021">--filter &lt;filter=value></span></div>
<div style="position:absolute;left:303.25px;top:82.72px" class="cls_011"><span class="cls_011">Filter output based on conditions provided.</span></div>
<div style="position:absolute;left:303.25px;top:94.72px" class="cls_011"><span class="cls_011">Supported filters are:</span></div>
<div style="position:absolute;left:303.25px;top:116.22px" class="cls_011"><span class="cls_011">•</span><span class="cls_021"> stars=&lt;number></span><span class="cls_011">: Show only images with</span></div>
<div style="position:absolute;left:312.75px;top:128.22px" class="cls_011"><span class="cls_011">at least this number of stars.</span></div>
<div style="position:absolute;left:303.25px;top:149.72px" class="cls_011"><span class="cls_011">•</span><span class="cls_021"> is-automated=&lt;true|false></span><span class="cls_011">: Show</span></div>
<div style="position:absolute;left:312.75px;top:161.71px" class="cls_011"><span class="cls_011">only images automatically built.</span></div>
<div style="position:absolute;left:303.25px;top:183.21px" class="cls_011"><span class="cls_011">•</span><span class="cls_021"> is-official=&lt;true|false></span><span class="cls_011">: Show only</span></div>
<div style="position:absolute;left:312.75px;top:195.21px" class="cls_011"><span class="cls_011">images flagged as official.</span></div>
<div style="position:absolute;left:96.25px;top:217.74px" class="cls_021"><span class="cls_021">--tls-verify &lt;true|false></span></div>
<div style="position:absolute;left:303.25px;top:217.71px" class="cls_011"><span class="cls_011">Enables or disables HTTPS certificate</span></div>
<div style="position:absolute;left:303.25px;top:229.71px" class="cls_011"><span class="cls_011">validation for all used registries. </span><span class="cls_021">true</span></div>
<div style="position:absolute;left:90.00px;top:258.02px" class="cls_002"><span class="cls_002">Registry HTTP API</span></div>
<div style="position:absolute;left:90.00px;top:279.95px" class="cls_011"><span class="cls_011">A remote registry exposes web services that provide an application programming interface (API)</span></div>
<div style="position:absolute;left:90.00px;top:291.95px" class="cls_011"><span class="cls_011">to the registry. Podman uses these interfaces to access and interact with remote repositories.</span></div>
<div style="position:absolute;left:90.00px;top:303.95px" class="cls_011"><span class="cls_011">Many registries conform to the </span><span class="cls_021">Docker Registry HTTP API v2</span><span class="cls_011"> specification, which exposes</span></div>
<div style="position:absolute;left:90.00px;top:315.95px" class="cls_011"><span class="cls_011">a standardized REST interface for registry interaction. You can use this REST interface to directly</span></div>
<div style="position:absolute;left:90.00px;top:327.95px" class="cls_011"><span class="cls_011">interact with a registry, instead of using Podman.</span></div>
<div style="position:absolute;left:90.00px;top:349.44px" class="cls_011"><span class="cls_011">Some samples using this API with </span><span class="cls_021">curl</span><span class="cls_011"> commands are shown below:</span></div>
<div style="position:absolute;left:90.00px;top:370.94px" class="cls_011"><span class="cls_011">To list all repositories available in a registry, use the </span><span class="cls_021">/v2/_catalog</span><span class="cls_011"> endpoint. The </span><span class="cls_021">n</span><span class="cls_011"> parameter is</span></div>
<div style="position:absolute;left:90.00px;top:382.94px" class="cls_011"><span class="cls_011">used to limit the number of repositories to return.</span></div>
<div style="position:absolute;left:101.00px;top:410.66px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl -Ls https://</span><span class="cls_040">myserver</span><span class="cls_027">/v2/_catalog?n=3</span></div>
<div style="position:absolute;left:101.00px;top:422.65px" class="cls_026"><span class="cls_026">{"repositories":["centos/httpd","do180/custom-httpd","hello-openshift"]}</span></div>
<div style="position:absolute;left:126.00px;top:458.13px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:472.51px" class="cls_011"><span class="cls_011">If Python is available, use it to format the JSON response:</span></div>
<div style="position:absolute;left:110.72px;top:500.22px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl -Ls https://</span><span class="cls_040">myserver</span><span class="cls_027">/v2/_catalog?n=3 \</span></div>
<div style="position:absolute;left:110.72px;top:512.22px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">| python -m json.tool</span></div>
<div style="position:absolute;left:120.32px;top:524.22px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:129.92px;top:536.22px" class="cls_026"><span class="cls_026">"repositories": [</span></div>
<div style="position:absolute;left:139.52px;top:548.22px" class="cls_026"><span class="cls_026">"centos/httpd",</span></div>
<div style="position:absolute;left:139.52px;top:560.21px" class="cls_026"><span class="cls_026">"do180/custom-httpd",</span></div>
<div style="position:absolute;left:139.52px;top:572.21px" class="cls_026"><span class="cls_026">"hello-openshift"</span></div>
<div style="position:absolute;left:129.92px;top:584.21px" class="cls_026"><span class="cls_026">]</span></div>
<div style="position:absolute;left:120.32px;top:596.21px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:90.00px;top:640.39px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">/v2/&lt;name>/tags/list</span><span class="cls_011"> endpoint provides the list of tags available for a single image:</span></div>
<div style="position:absolute;left:101.00px;top:668.10px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl -Ls \</span></div>
<div style="position:absolute;left:101.00px;top:680.10px" class="cls_026"><span class="cls_026">> </span><A HREF="https://quay.io/v2/redhattraining/httpd-parent/tags/list/">https://quay.io/v2/redhattraining/httpd-parent/tags/list</A> \</span></div>
<div style="position:absolute;left:101.00px;top:692.10px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">| python -m json.tool</span></div>
<div style="position:absolute;left:101.00px;top:704.10px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">82</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:80200px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background101.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:138.20px;top:53.69px" class="cls_026"><span class="cls_026">"name": "redhattraining/httpd-parent",</span></div>
<div style="position:absolute;left:138.20px;top:65.69px" class="cls_026"><span class="cls_026">"tags": [</span></div>
<div style="position:absolute;left:157.40px;top:77.69px" class="cls_026"><span class="cls_026">"latest",</span></div>
<div style="position:absolute;left:157.40px;top:89.69px" class="cls_026"><span class="cls_026">"2.4"</span></div>
<div style="position:absolute;left:138.20px;top:101.69px" class="cls_026"><span class="cls_026">]</span></div>
<div style="position:absolute;left:119.00px;top:113.68px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:144.00px;top:152.89px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:167.26px" class="cls_011"><span class="cls_011">Quay.io offers a dedicated API to interact with repositories beyond what is specified</span></div>
<div style="position:absolute;left:144.00px;top:179.26px" class="cls_011"><span class="cls_011">in Docker Repository API. See </span><A HREF="https://docs.quay.io/api/">https://docs.quay.io/api/</A> </span><span class="cls_011"> for details.</span></div>
<div style="position:absolute;left:108.00px;top:215.22px" class="cls_002"><span class="cls_002">Registry Authentication</span></div>
<div style="position:absolute;left:108.00px;top:237.16px" class="cls_011"><span class="cls_011">Some container image registries require access authorization. The </span><span class="cls_021">podman login</span><span class="cls_011"> command</span></div>
<div style="position:absolute;left:108.00px;top:249.16px" class="cls_011"><span class="cls_011">allows username and password authentication to a registry:</span></div>
<div style="position:absolute;left:119.00px;top:276.88px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman login -u </span><span class="cls_040">username</span><span class="cls_027"> \</span></div>
<div style="position:absolute;left:119.00px;top:288.87px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p </span><span class="cls_040">password</span><span class="cls_027"> registry.access.redhat.com</span></div>
<div style="position:absolute;left:119.00px;top:300.87px" class="cls_026"><span class="cls_026">Login Succeeded!</span></div>
<div style="position:absolute;left:108.00px;top:328.65px" class="cls_011"><span class="cls_011">The registry HTTP API requires authentication credentials. First, use the Red Hat Single Sign On</span></div>
<div style="position:absolute;left:108.00px;top:340.65px" class="cls_011"><span class="cls_011">(SSO) service to obtain an access token:</span></div>
<div style="position:absolute;left:119.00px;top:368.36px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl -u </span><span class="cls_040">username:password</span><span class="cls_027"> -Ls \</span></div>
<div style="position:absolute;left:119.00px;top:380.36px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">"<A HREF="https://sso.redhat.com/auth/realms/rhcc/protocol/redhat-docker-v2/auth?/">https://sso.redhat.com/auth/realms/rhcc/protocol/redhat-docker-v2/auth?</A> </span></div>
<div style="position:absolute;left:119.00px;top:392.36px" class="cls_027"><span class="cls_027">service=docker-registry"</span></div>
<div style="position:absolute;left:119.00px;top:404.36px" class="cls_026"><span class="cls_026">{"token":"eyJh...o5G8",</span></div>
<div style="position:absolute;left:119.00px;top:416.36px" class="cls_026"><span class="cls_026">"access_token":"eyJh...mgL4",</span></div>
<div style="position:absolute;left:119.00px;top:428.36px" class="cls_026"><span class="cls_026">"expires_in":</span><span class="cls_029">...output omitted...</span><span class="cls_026">}[student@workstation ~]$</span></div>
<div style="position:absolute;left:108.00px;top:456.13px" class="cls_011"><span class="cls_011">Then, include this token in a </span><span class="cls_021">Bearer</span><span class="cls_011"> authorization header in subsequent requests:</span></div>
<div style="position:absolute;left:119.00px;top:483.85px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl -H "Authorization: Bearer eyJh...mgL4" \</span></div>
<div style="position:absolute;left:119.00px;top:495.85px" class="cls_026"><span class="cls_026">></span></div>
<div style="position:absolute;left:133.40px;top:495.85px" class="cls_027"><span class="cls_027">-Ls </span><A HREF="https://registry.redhat.io/v2/rhscl/mysql-57-rhel7/tags/list/">https://registry.redhat.io/v2/rhscl/mysql-57-rhel7/tags/list</A> \</div>
<div style="position:absolute;left:119.00px;top:507.85px" class="cls_026"><span class="cls_026">></span></div>
<div style="position:absolute;left:133.40px;top:507.85px" class="cls_027"><span class="cls_027">| python -mjson.tool</span></div>
<div style="position:absolute;left:119.00px;top:519.84px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:128.60px;top:531.84px" class="cls_026"><span class="cls_026">"name": "rhscl/mysql-57-rhel7",</span></div>
<div style="position:absolute;left:138.20px;top:543.84px" class="cls_026"><span class="cls_026">"tags": [</span></div>
<div style="position:absolute;left:147.80px;top:555.84px" class="cls_026"><span class="cls_026">"5.7-3.9",</span></div>
<div style="position:absolute;left:147.80px;top:567.84px" class="cls_026"><span class="cls_026">"5.7-3.8",</span></div>
<div style="position:absolute;left:147.80px;top:579.83px" class="cls_026"><span class="cls_026">"5.7-3.4",</span></div>
<div style="position:absolute;left:147.80px;top:591.83px" class="cls_026"><span class="cls_026">"5.7-3.7",</span></div>
<div style="position:absolute;left:119.00px;top:603.83px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:144.00px;top:643.03px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:657.41px" class="cls_011"><span class="cls_011">Other registries may require different steps to provide credentials. If a registry</span></div>
<div style="position:absolute;left:144.00px;top:669.41px" class="cls_011"><span class="cls_011">adheres to the </span><span class="cls_021">Docker Registry HTTP v2 API</span><span class="cls_011">, authentication conforms to the</span></div>
<div style="position:absolute;left:144.00px;top:681.41px" class="cls_011"><span class="cls_011">RFC7235 scheme.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.48px;top:751.59px" class="cls_013"><span class="cls_013">83</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:81002px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background102.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:90.00px;top:52.04px" class="cls_002"><span class="cls_002">Pulling Images</span></div>
<div style="position:absolute;left:90.00px;top:73.98px" class="cls_011"><span class="cls_011">To pull container images from a registry, use the </span><span class="cls_021">podman pull</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:101.00px;top:101.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman pull [OPTIONS] [REGISTRY[:PORT]/]NAME[:TAG]</span></div>
<div style="position:absolute;left:90.00px;top:129.47px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">podman pull</span><span class="cls_011"> command uses the image name obtained from the </span><span class="cls_021">search</span><span class="cls_011"> subcommand</span></div>
<div style="position:absolute;left:90.00px;top:141.47px" class="cls_011"><span class="cls_011">to pull an image from a registry. The </span><span class="cls_021">pull</span><span class="cls_011"> subcommand allows adding the registry name to the</span></div>
<div style="position:absolute;left:90.00px;top:153.47px" class="cls_011"><span class="cls_011">image. This variant supports having the same image in multiple registries.</span></div>
<div style="position:absolute;left:90.00px;top:174.97px" class="cls_011"><span class="cls_011">For example, to pull an NGINX container from the </span><span class="cls_021">quay.io</span><span class="cls_011"> registry, use the following command:</span></div>
<div style="position:absolute;left:101.00px;top:202.68px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman pull quay.io/bitnami/nginx</span></div>
<div style="position:absolute;left:126.00px;top:241.89px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:256.26px" class="cls_011"><span class="cls_011">If the image name does not include a registry name, Podman searches for a</span></div>
<div style="position:absolute;left:126.00px;top:268.26px" class="cls_011"><span class="cls_011">matching container image using the registries listed in the </span><span class="cls_021">/etc/containers/</span></div>
<div style="position:absolute;left:126.00px;top:280.26px" class="cls_021"><span class="cls_021">registries.conf</span><span class="cls_011"> configuration file. Podman search for images in registries in the</span></div>
<div style="position:absolute;left:126.00px;top:292.26px" class="cls_011"><span class="cls_011">same order they appear in the configuration file.</span></div>
<div style="position:absolute;left:90.00px;top:328.22px" class="cls_002"><span class="cls_002">Listing Local Copies of Images</span></div>
<div style="position:absolute;left:90.00px;top:350.15px" class="cls_011"><span class="cls_011">Any container image downloaded from a registry is stored locally on the same host where the</span></div>
<div style="position:absolute;left:90.00px;top:362.15px" class="cls_021"><span class="cls_021">podman</span><span class="cls_011"> command is executed. This behavior avoids repeating image downloads and minimizes</span></div>
<div style="position:absolute;left:90.00px;top:374.15px" class="cls_011"><span class="cls_011">the deployment time for a container. Podman also stores any custom container images you build in</span></div>
<div style="position:absolute;left:90.00px;top:386.15px" class="cls_011"><span class="cls_011">the same local storage.</span></div>
<div style="position:absolute;left:126.00px;top:419.07px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:433.45px" class="cls_011"><span class="cls_011">By default, Podman stores container images in the </span><span class="cls_021">/var/lib/containers/</span></div>
<div style="position:absolute;left:126.00px;top:445.44px" class="cls_021"><span class="cls_021">storage/overlay-images</span><span class="cls_011"> directory.</span></div>
<div style="position:absolute;left:90.00px;top:483.34px" class="cls_011"><span class="cls_011">Podman provides an </span><span class="cls_021">images</span><span class="cls_011"> subcommand to list all the container images stored locally.</span></div>
<div style="position:absolute;left:101.00px;top:511.06px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman images</span></div>
<div style="position:absolute;left:101.00px;top:523.06px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:293.00px;top:523.06px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:326.60px;top:523.06px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:389.00px;top:523.06px" class="cls_026"><span class="cls_026">CREATED</span></div>
<div style="position:absolute;left:446.60px;top:523.06px" class="cls_026"><span class="cls_026">SIZE</span></div>
<div style="position:absolute;left:101.00px;top:535.05px" class="cls_026"><span class="cls_026">registry.redhat.io/rhscl/mysql-57-rhel7 latest c07bf25398f4 13 days ago 444MB</span></div>
<div style="position:absolute;left:90.00px;top:565.40px" class="cls_002"><span class="cls_002">Image Tags</span></div>
<div style="position:absolute;left:90.00px;top:587.33px" class="cls_011"><span class="cls_011">An image tag is a mechanism to support multiple releases of the same image. This feature is useful</span></div>
<div style="position:absolute;left:90.00px;top:599.33px" class="cls_011"><span class="cls_011">when multiple versions of the same software are provided, such as a production-ready container</span></div>
<div style="position:absolute;left:90.00px;top:611.33px" class="cls_011"><span class="cls_011">or the latest updates of the same software developed for community evaluation. Any Podman</span></div>
<div style="position:absolute;left:90.00px;top:623.33px" class="cls_011"><span class="cls_011">subcommand that requires a container image name accepts a tag parameter to differentiate</span></div>
<div style="position:absolute;left:90.00px;top:635.33px" class="cls_011"><span class="cls_011">between multiple tags. If an image name does not contain a tag, then the tag value defaults to</span></div>
<div style="position:absolute;left:90.00px;top:647.32px" class="cls_021"><span class="cls_021">latest</span><span class="cls_011">. For example, to pull an image with the tag </span><span class="cls_021">5.7</span><span class="cls_011"> from </span><span class="cls_021">rhscl/mysql-57-rhel7</span><span class="cls_011">, use the</span></div>
<div style="position:absolute;left:90.00px;top:659.32px" class="cls_011"><span class="cls_011">following command:</span></div>
<div style="position:absolute;left:101.00px;top:687.04px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman pull rhscl/mysql-57-rhel7:5.7</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">84</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:81804px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background103.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">To start a new container based on the </span><span class="cls_021">rhscl/mysql-57-rhel7:5.7</span><span class="cls_011"> image, use the following</span></div>
<div style="position:absolute;left:108.00px;top:65.97px" class="cls_011"><span class="cls_011">command:</span></div>
<div style="position:absolute;left:119.00px;top:93.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run rhscl/mysql-57-rhel7:5.7</span></div>
<div style="position:absolute;left:144.00px;top:130.99px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:144.00px;top:145.31px" class="cls_022"><span class="cls_022">Red Hat Container Catalog</span></div>
<div style="position:absolute;left:144.00px;top:157.37px" class="cls_033"><span class="cls_033"> </span><A HREF="https://registry.redhat.io">https://registry.redhat.io</A> </div>
<div style="position:absolute;left:144.00px;top:178.81px" class="cls_022"><span class="cls_022">Quay.io</span></div>
<div style="position:absolute;left:144.00px;top:190.86px" class="cls_033"><span class="cls_033"> </span><A HREF="https://quay.io">https://quay.io</A> </div>
<div style="position:absolute;left:144.00px;top:212.30px" class="cls_022"><span class="cls_022">Docker Registry HTTP API V2</span></div>
<div style="position:absolute;left:144.00px;top:224.36px" class="cls_033"><span class="cls_033"> </span><A HREF="https://github.com/docker/distribution/blob/master/docs/spec/api.md">https://github.com/docker/distribution/blob/master/docs/spec/api.md</A> </div>
<div style="position:absolute;left:144.00px;top:245.80px" class="cls_022"><span class="cls_022">RFC7235 - HTTP/1.1: Authentication</span></div>
<div style="position:absolute;left:144.00px;top:257.86px" class="cls_033"><span class="cls_033"> </span><A HREF="https://tools.ietf.org/html/rfc7235">https://tools.ietf.org/html/rfc7235</A> </div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.57px;top:751.59px" class="cls_013"><span class="cls_013">85</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:82606px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background104.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_034"><span class="cls_034">Quiz</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Working With Registries</span></div>
<div style="position:absolute;left:102.00px;top:137.59px" class="cls_011"><span class="cls_011">Choose the correct answers to the following questions, based on the following information:</span></div>
<div style="position:absolute;left:102.00px;top:159.09px" class="cls_011"><span class="cls_011">Podman is available on a RHEL host with the following entry in </span><span class="cls_021">/etc/containers/</span></div>
<div style="position:absolute;left:102.00px;top:171.09px" class="cls_021"><span class="cls_021">registries.conf</span><span class="cls_011"> file:</span></div>
<div style="position:absolute;left:101.00px;top:198.80px" class="cls_026"><span class="cls_026">[registries.search]</span></div>
<div style="position:absolute;left:101.00px;top:210.80px" class="cls_026"><span class="cls_026">registries = ["registry.redhat.io","quay.io"]</span></div>
<div style="position:absolute;left:102.00px;top:238.58px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">registry.redhat.io</span><span class="cls_011"> and </span><span class="cls_021">quay.io</span><span class="cls_011"> hosts have a registry running, both have valid</span></div>
<div style="position:absolute;left:102.00px;top:250.58px" class="cls_011"><span class="cls_011">certificates, and use the version 1 registry. The following images are available for each host:</span></div>
<div style="position:absolute;left:102.00px;top:276.52px" class="cls_022"><span class="cls_022">Image names/tags per registry</span></div>
<div style="position:absolute;left:108.25px;top:302.77px" class="cls_023"><span class="cls_023">Regisitry</span></div>
<div style="position:absolute;left:342.25px;top:302.77px" class="cls_023"><span class="cls_023">Image</span></div>
<div style="position:absolute;left:108.25px;top:325.36px" class="cls_011"><span class="cls_011">registry.redhat.io</span></div>
<div style="position:absolute;left:342.25px;top:325.32px" class="cls_011"><span class="cls_011">• nginx/1.0</span></div>
<div style="position:absolute;left:342.25px;top:346.82px" class="cls_011"><span class="cls_011">• mysql/5.6</span></div>
<div style="position:absolute;left:342.25px;top:368.32px" class="cls_011"><span class="cls_011">• httpd/2.2</span></div>
<div style="position:absolute;left:108.25px;top:390.85px" class="cls_011"><span class="cls_011">quay.io</span></div>
<div style="position:absolute;left:342.25px;top:390.82px" class="cls_011"><span class="cls_011">• mysql/5.5</span></div>
<div style="position:absolute;left:342.25px;top:412.32px" class="cls_011"><span class="cls_011">• httpd/2.4</span></div>
<div style="position:absolute;left:102.00px;top:438.06px" class="cls_011"><span class="cls_011">No images are locally available.</span></div>
<div style="position:absolute;left:101.41px;top:481.41px" class="cls_035"><span class="cls_035">1.  Which two commands display </span><span class="cls_046">mysql</span><span class="cls_035"> images available for download from</span></div>
<div style="position:absolute;left:114.00px;top:496.51px" class="cls_046"><span class="cls_046">registry.redhat.io</span><span class="cls_035">? (Choose two.)</span></div>
<div style="position:absolute;left:114.00px;top:511.56px" class="cls_011"><span class="cls_011">a.</span><span class="cls_021"> podman search registry.redhat.io/mysql</span></div>
<div style="position:absolute;left:114.00px;top:526.56px" class="cls_011"><span class="cls_011">b.</span><span class="cls_021"> podman images</span></div>
<div style="position:absolute;left:114.00px;top:541.56px" class="cls_011"><span class="cls_011">c.</span><span class="cls_021"> podman pull mysql</span></div>
<div style="position:absolute;left:114.00px;top:556.56px" class="cls_011"><span class="cls_011">d.</span><span class="cls_021"> podman search mysql</span></div>
<div style="position:absolute;left:101.41px;top:583.41px" class="cls_035"><span class="cls_035">2. Which command is used to list all available image tags for the </span><span class="cls_046">httpd</span><span class="cls_035"> container image?</span></div>
<div style="position:absolute;left:114.00px;top:598.56px" class="cls_011"><span class="cls_011">a.</span><span class="cls_021"> podman search httpd</span></div>
<div style="position:absolute;left:114.00px;top:613.56px" class="cls_011"><span class="cls_011">b.</span><span class="cls_021"> podman images httpd</span></div>
<div style="position:absolute;left:114.00px;top:628.56px" class="cls_011"><span class="cls_011">c.</span><span class="cls_021"> podman pull --all-tags=true httpd</span></div>
<div style="position:absolute;left:114.00px;top:643.56px" class="cls_011"><span class="cls_011">d. There is no podman command available to search for tags.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">86</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:83408px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background105.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:119.41px;top:55.32px" class="cls_035"><span class="cls_035">3. Which two commands pull the </span><span class="cls_046">httpd</span><span class="cls_035"> image with the </span><span class="cls_046">2.2</span><span class="cls_035"> tag? (Choose two.)</span></div>
<div style="position:absolute;left:132.00px;top:70.48px" class="cls_011"><span class="cls_011">a.</span><span class="cls_021"> podman pull httpd:2.2</span></div>
<div style="position:absolute;left:132.00px;top:85.48px" class="cls_011"><span class="cls_011">b.</span><span class="cls_021"> podman pull httpd:latest</span></div>
<div style="position:absolute;left:132.00px;top:100.48px" class="cls_011"><span class="cls_011">c.</span><span class="cls_021"> podman pull quay.io/httpd</span></div>
<div style="position:absolute;left:132.00px;top:115.48px" class="cls_011"><span class="cls_011">d.</span><span class="cls_021"> podman pull registry.redhat.io/httpd:2.2</span></div>
<div style="position:absolute;left:119.41px;top:142.32px" class="cls_035"><span class="cls_035">4. When running the following commands, what container images will be downloaded?</span></div>
<div style="position:absolute;left:119.00px;top:173.20px" class="cls_047"><span class="cls_047">podman pull registry.redhat.io/httpd:2.2</span></div>
<div style="position:absolute;left:119.00px;top:188.20px" class="cls_047"><span class="cls_047">podman pull quay.io/mysql:5.6</span></div>
<div style="position:absolute;left:132.00px;top:213.48px" class="cls_011"><span class="cls_011">a. quay.io/httpd:2.2</span></div>
<div style="position:absolute;left:143.00px;top:228.48px" class="cls_011"><span class="cls_011">registry.redhat.io/mysql:5.6</span></div>
<div style="position:absolute;left:132.00px;top:243.48px" class="cls_011"><span class="cls_011">b. registry.redhat.io/httpd:2.2</span></div>
<div style="position:absolute;left:143.00px;top:258.48px" class="cls_011"><span class="cls_011">registry.redhat.io/mysql:5.6</span></div>
<div style="position:absolute;left:132.00px;top:273.48px" class="cls_011"><span class="cls_011">c. registry.redhat.io/httpd:2.2</span></div>
<div style="position:absolute;left:143.00px;top:288.48px" class="cls_011"><span class="cls_011">No image will be downloaded for mysql.</span></div>
<div style="position:absolute;left:132.00px;top:303.48px" class="cls_011"><span class="cls_011">d. quay.io/httpd:2.2</span></div>
<div style="position:absolute;left:143.00px;top:318.48px" class="cls_011"><span class="cls_011">No image will be downloaded for mysql.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.57px;top:751.59px" class="cls_013"><span class="cls_013">87</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:84210px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background106.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_034"><span class="cls_034">Solution</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Working With Registries</span></div>
<div style="position:absolute;left:102.00px;top:137.59px" class="cls_011"><span class="cls_011">Choose the correct answers to the following questions, based on the following information:</span></div>
<div style="position:absolute;left:102.00px;top:159.09px" class="cls_011"><span class="cls_011">Podman is available on a RHEL host with the following entry in </span><span class="cls_021">/etc/containers/</span></div>
<div style="position:absolute;left:102.00px;top:171.09px" class="cls_021"><span class="cls_021">registries.conf</span><span class="cls_011"> file:</span></div>
<div style="position:absolute;left:101.00px;top:198.80px" class="cls_026"><span class="cls_026">[registries.search]</span></div>
<div style="position:absolute;left:101.00px;top:210.80px" class="cls_026"><span class="cls_026">registries = ["registry.redhat.io","quay.io"]</span></div>
<div style="position:absolute;left:102.00px;top:238.58px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">registry.redhat.io</span><span class="cls_011"> and </span><span class="cls_021">quay.io</span><span class="cls_011"> hosts have a registry running, both have valid</span></div>
<div style="position:absolute;left:102.00px;top:250.58px" class="cls_011"><span class="cls_011">certificates, and use the version 1 registry. The following images are available for each host:</span></div>
<div style="position:absolute;left:102.00px;top:276.52px" class="cls_022"><span class="cls_022">Image names/tags per registry</span></div>
<div style="position:absolute;left:108.25px;top:302.77px" class="cls_023"><span class="cls_023">Regisitry</span></div>
<div style="position:absolute;left:342.25px;top:302.77px" class="cls_023"><span class="cls_023">Image</span></div>
<div style="position:absolute;left:108.25px;top:325.36px" class="cls_011"><span class="cls_011">registry.redhat.io</span></div>
<div style="position:absolute;left:342.25px;top:325.32px" class="cls_011"><span class="cls_011">• nginx/1.0</span></div>
<div style="position:absolute;left:342.25px;top:346.82px" class="cls_011"><span class="cls_011">• mysql/5.6</span></div>
<div style="position:absolute;left:342.25px;top:368.32px" class="cls_011"><span class="cls_011">• httpd/2.2</span></div>
<div style="position:absolute;left:108.25px;top:390.85px" class="cls_011"><span class="cls_011">quay.io</span></div>
<div style="position:absolute;left:342.25px;top:390.82px" class="cls_011"><span class="cls_011">• mysql/5.5</span></div>
<div style="position:absolute;left:342.25px;top:412.32px" class="cls_011"><span class="cls_011">• httpd/2.4</span></div>
<div style="position:absolute;left:102.00px;top:438.06px" class="cls_011"><span class="cls_011">No images are locally available.</span></div>
<div style="position:absolute;left:101.41px;top:481.41px" class="cls_035"><span class="cls_035">1.  Which two commands display </span><span class="cls_046">mysql</span><span class="cls_035"> images available for download from</span></div>
<div style="position:absolute;left:114.00px;top:496.51px" class="cls_046"><span class="cls_046">registry.redhat.io</span><span class="cls_035">? (Choose two.)</span></div>
<div style="position:absolute;left:114.00px;top:511.56px" class="cls_011"><span class="cls_011">a.</span><span class="cls_021"> podman search registry.redhat.io/mysql</span></div>
<div style="position:absolute;left:114.00px;top:526.56px" class="cls_011"><span class="cls_011">b.</span><span class="cls_048"> podman images</span></div>
<div style="position:absolute;left:114.00px;top:541.56px" class="cls_011"><span class="cls_011">c.</span><span class="cls_048"> podman pull mysql</span></div>
<div style="position:absolute;left:114.00px;top:556.56px" class="cls_011"><span class="cls_011">d.</span><span class="cls_021"> podman search mysql</span></div>
<div style="position:absolute;left:101.41px;top:583.41px" class="cls_035"><span class="cls_035">2. Which command is used to list all available image tags for the </span><span class="cls_046">httpd</span><span class="cls_035"> container image?</span></div>
<div style="position:absolute;left:114.00px;top:598.56px" class="cls_011"><span class="cls_011">a.</span><span class="cls_048"> podman search httpd</span></div>
<div style="position:absolute;left:114.00px;top:613.56px" class="cls_011"><span class="cls_011">b.</span><span class="cls_048"> podman images httpd</span></div>
<div style="position:absolute;left:114.00px;top:628.56px" class="cls_011"><span class="cls_011">c.</span><span class="cls_048"> podman pull --all-tags=true httpd</span></div>
<div style="position:absolute;left:114.00px;top:643.56px" class="cls_011"><span class="cls_011">d. There is no podman command available to search for tags.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">88</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:85012px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background107.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:119.41px;top:55.32px" class="cls_035"><span class="cls_035">3. Which two commands pull the </span><span class="cls_046">httpd</span><span class="cls_035"> image with the </span><span class="cls_046">2.2</span><span class="cls_035"> tag? (Choose two.)</span></div>
<div style="position:absolute;left:132.00px;top:70.48px" class="cls_011"><span class="cls_011">a.</span><span class="cls_021"> podman pull httpd:2.2</span></div>
<div style="position:absolute;left:132.00px;top:85.48px" class="cls_011"><span class="cls_011">b.</span><span class="cls_048"> podman pull httpd:latest</span></div>
<div style="position:absolute;left:132.00px;top:100.48px" class="cls_011"><span class="cls_011">c.</span><span class="cls_048"> podman pull quay.io/httpd</span></div>
<div style="position:absolute;left:132.00px;top:115.48px" class="cls_011"><span class="cls_011">d.</span><span class="cls_021"> podman pull registry.redhat.io/httpd:2.2</span></div>
<div style="position:absolute;left:119.41px;top:142.32px" class="cls_035"><span class="cls_035">4. When running the following commands, what container images will be downloaded?</span></div>
<div style="position:absolute;left:119.00px;top:173.20px" class="cls_047"><span class="cls_047">podman pull registry.redhat.io/httpd:2.2</span></div>
<div style="position:absolute;left:119.00px;top:188.20px" class="cls_047"><span class="cls_047">podman pull quay.io/mysql:5.6</span></div>
<div style="position:absolute;left:132.00px;top:213.48px" class="cls_011"><span class="cls_011">a.</span><span class="cls_036"> quay.io/httpd:2.2</span></div>
<div style="position:absolute;left:143.00px;top:228.48px" class="cls_036"><span class="cls_036">registry.redhat.io/mysql:5.6</span></div>
<div style="position:absolute;left:132.00px;top:243.48px" class="cls_011"><span class="cls_011">b.</span><span class="cls_036"> registry.redhat.io/httpd:2.2</span></div>
<div style="position:absolute;left:143.00px;top:258.48px" class="cls_036"><span class="cls_036">registry.redhat.io/mysql:5.6</span></div>
<div style="position:absolute;left:132.00px;top:273.48px" class="cls_011"><span class="cls_011">c. registry.redhat.io/httpd:2.2</span></div>
<div style="position:absolute;left:143.00px;top:288.48px" class="cls_011"><span class="cls_011">No image will be downloaded for mysql.</span></div>
<div style="position:absolute;left:132.00px;top:303.48px" class="cls_011"><span class="cls_011">d.</span><span class="cls_036"> quay.io/httpd:2.2</span></div>
<div style="position:absolute;left:143.00px;top:318.48px" class="cls_036"><span class="cls_036">No image will be downloaded for mysql.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.36px;top:751.59px" class="cls_013"><span class="cls_013">89</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:85814px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background108.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Manipulating Container Images</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to:</span></div>
<div style="position:absolute;left:90.00px;top:180.28px" class="cls_011"><span class="cls_011">• Save and load container images to local files.</span></div>
<div style="position:absolute;left:90.00px;top:201.59px" class="cls_011"><span class="cls_011">• Delete images from the local storage.</span></div>
<div style="position:absolute;left:90.00px;top:222.89px" class="cls_011"><span class="cls_011">• Create new container images from containers and update image metadata.</span></div>
<div style="position:absolute;left:90.00px;top:244.20px" class="cls_011"><span class="cls_011">• Manage image tags for distribution purposes.</span></div>
<div style="position:absolute;left:90.00px;top:266.48px" class="cls_024"><span class="cls_024">Introduction</span></div>
<div style="position:absolute;left:90.00px;top:291.20px" class="cls_011"><span class="cls_011">There are various ways to manage image containers while adhering to DevOps principles. For</span></div>
<div style="position:absolute;left:90.00px;top:303.20px" class="cls_011"><span class="cls_011">example, a developer finishes testing a custom container in a machine and needs to transfer this</span></div>
<div style="position:absolute;left:90.00px;top:315.19px" class="cls_011"><span class="cls_011">container image to another host for another developer, or to a production server. There are two</span></div>
<div style="position:absolute;left:90.00px;top:327.19px" class="cls_011"><span class="cls_011">ways to do this:</span></div>
<div style="position:absolute;left:90.00px;top:348.50px" class="cls_011"><span class="cls_011">1.</span></div>
<div style="position:absolute;left:109.00px;top:348.50px" class="cls_011"><span class="cls_011">Save the container image to a </span><span class="cls_021">.tar</span><span class="cls_011"> file.</span></div>
<div style="position:absolute;left:90.00px;top:369.80px" class="cls_011"><span class="cls_011">2.</span></div>
<div style="position:absolute;left:109.00px;top:369.80px" class="cls_011"><span class="cls_011">Publish (push) the container image to an image registry.</span></div>
<div style="position:absolute;left:126.00px;top:400.63px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:415.01px" class="cls_011"><span class="cls_011">One of the ways a developer could have created this custom container is discussed</span></div>
<div style="position:absolute;left:126.00px;top:427.01px" class="cls_011"><span class="cls_011">later in this chapter (</span><span class="cls_021">podman commit</span><span class="cls_011">). However, in the following chapters we</span></div>
<div style="position:absolute;left:126.00px;top:439.01px" class="cls_011"><span class="cls_011">discuss the recommended way to do so using </span><span class="cls_021">Dockerfiles</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:475.19px" class="cls_024"><span class="cls_024">Saving and Loading Images</span></div>
<div style="position:absolute;left:90.00px;top:499.90px" class="cls_011"><span class="cls_011">Existing images from the Podman local storage can be saved to a </span><span class="cls_021">.tar</span><span class="cls_011"> file using the </span><span class="cls_021">podman</span></div>
<div style="position:absolute;left:90.00px;top:511.90px" class="cls_021"><span class="cls_021">save</span><span class="cls_011"> command. The generated file is not a regular TAR archive; it contains image metadata and</span></div>
<div style="position:absolute;left:90.00px;top:523.90px" class="cls_011"><span class="cls_011">preserves the original image layers. Using this file, Podman can recreate the original image exactly</span></div>
<div style="position:absolute;left:90.00px;top:535.90px" class="cls_011"><span class="cls_011">as it was.</span></div>
<div style="position:absolute;left:90.00px;top:557.40px" class="cls_011"><span class="cls_011">The general syntax of the </span><span class="cls_021">save</span><span class="cls_011"> subcommand is as follows:</span></div>
<div style="position:absolute;left:101.00px;top:585.11px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman save [-o FILE_NAME] IMAGE_NAME[:TAG]</span></div>
<div style="position:absolute;left:90.00px;top:612.89px" class="cls_011"><span class="cls_011">Podman sends the generated image to the standard output as binary data. To avoid that, use the </span><span class="cls_021">-</span></div>
<div style="position:absolute;left:90.00px;top:624.89px" class="cls_021"><span class="cls_021">o</span><span class="cls_011"> option.</span></div>
<div style="position:absolute;left:90.00px;top:646.39px" class="cls_011"><span class="cls_011">The following example saves the previously downloaded MySQL container image from the</span></div>
<div style="position:absolute;left:90.00px;top:658.39px" class="cls_011"><span class="cls_011">Red Hat Container Catalog to the </span><span class="cls_021">mysql.tar</span><span class="cls_011"> file:</span></div>
<div style="position:absolute;left:101.00px;top:686.10px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman save \</span></div>
<div style="position:absolute;left:101.00px;top:698.10px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-o mysql.tar registry.access.redhat.com/rhscl/mysql-57-rhel7:5.7</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">90</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:86616px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background109.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">.tar</span><span class="cls_011"> files generated by the </span><span class="cls_021">save</span><span class="cls_011"> subcommand for backup purposes. To restore the</span></div>
<div style="position:absolute;left:108.00px;top:65.97px" class="cls_011"><span class="cls_011">container image, use the </span><span class="cls_021">podman load</span><span class="cls_011"> command. The general syntax of the command is as</span></div>
<div style="position:absolute;left:108.00px;top:77.97px" class="cls_011"><span class="cls_011">follows:</span></div>
<div style="position:absolute;left:119.00px;top:105.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman load [-i FILE_NAME]</span></div>
<div style="position:absolute;left:108.00px;top:133.47px" class="cls_011"><span class="cls_011">For example, this command would load an image saved in a file named </span><span class="cls_021">mysql.tar</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:161.18px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman load -i mysql.tar</span></div>
<div style="position:absolute;left:108.00px;top:188.96px" class="cls_011"><span class="cls_011">If the </span><span class="cls_021">.tar</span><span class="cls_011"> file given as an argument is not a container image with metadata, the </span><span class="cls_021">podman load</span></div>
<div style="position:absolute;left:108.00px;top:200.96px" class="cls_011"><span class="cls_011">command fails.</span></div>
<div style="position:absolute;left:144.00px;top:233.88px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:248.26px" class="cls_011"><span class="cls_011">To save disk space, compress the file generated by the </span><span class="cls_021">save</span><span class="cls_011"> subcommand with</span></div>
<div style="position:absolute;left:144.00px;top:260.26px" class="cls_011"><span class="cls_011">Gzip using the </span><span class="cls_021">--compress</span><span class="cls_011"> parameter. The </span><span class="cls_021">load</span><span class="cls_011"> subcommand uses the </span><span class="cls_021">gunzip</span></div>
<div style="position:absolute;left:144.00px;top:272.26px" class="cls_011"><span class="cls_011">command before importing the file to the local storage.</span></div>
<div style="position:absolute;left:108.00px;top:308.44px" class="cls_024"><span class="cls_024">Deleting Images</span></div>
<div style="position:absolute;left:108.00px;top:333.15px" class="cls_011"><span class="cls_011">Podman keeps any image downloaded in its local storage, even the ones currently unused by any</span></div>
<div style="position:absolute;left:108.00px;top:345.15px" class="cls_011"><span class="cls_011">container. However, images can become outdated, and should be subsequently replaced.</span></div>
<div style="position:absolute;left:144.00px;top:378.07px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:392.45px" class="cls_011"><span class="cls_011">Any updates to images in a registry are not automatically updated. The image must</span></div>
<div style="position:absolute;left:144.00px;top:404.45px" class="cls_011"><span class="cls_011">be removed and then pulled again to guarantee that the local storage has the latest</span></div>
<div style="position:absolute;left:144.00px;top:416.45px" class="cls_011"><span class="cls_011">version of an image.</span></div>
<div style="position:absolute;left:108.00px;top:454.34px" class="cls_011"><span class="cls_011">To delete an image from the local storage, run the </span><span class="cls_021">podman rmi</span><span class="cls_011"> command. The syntax for this</span></div>
<div style="position:absolute;left:108.00px;top:466.34px" class="cls_011"><span class="cls_011">command is as follows:</span></div>
<div style="position:absolute;left:119.00px;top:494.06px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman rmi [OPTIONS] IMAGE [IMAGE...]</span></div>
<div style="position:absolute;left:108.00px;top:521.84px" class="cls_011"><span class="cls_011">An image can be referenced using its name or its ID for removal purposes. Podman cannot delete</span></div>
<div style="position:absolute;left:108.00px;top:533.84px" class="cls_011"><span class="cls_011">images while containers are using that image. You must stop and remove all containers using that</span></div>
<div style="position:absolute;left:108.00px;top:545.83px" class="cls_011"><span class="cls_011">image before deleting it.</span></div>
<div style="position:absolute;left:108.00px;top:567.33px" class="cls_011"><span class="cls_011">To avoid this, the </span><span class="cls_021">rmi</span><span class="cls_011"> subcommand has the </span><span class="cls_021">--force</span><span class="cls_011"> option. This option forces the removal of</span></div>
<div style="position:absolute;left:108.00px;top:579.33px" class="cls_011"><span class="cls_011">an image even if that the image is used by several containers or these containers are running.</span></div>
<div style="position:absolute;left:108.00px;top:591.33px" class="cls_011"><span class="cls_011">Podman stops and removes all containers using the forcefully removed image before removing it.</span></div>
<div style="position:absolute;left:108.00px;top:613.61px" class="cls_024"><span class="cls_024">Deleting all Images</span></div>
<div style="position:absolute;left:108.00px;top:638.33px" class="cls_011"><span class="cls_011">To delete all images that are not used by any container, use the following command:</span></div>
<div style="position:absolute;left:119.00px;top:666.04px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman rmi -a</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:509.37px;top:751.59px" class="cls_013"><span class="cls_013">91</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:87418px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background110.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_011"><span class="cls_011">The command returns all the image IDs available in the local storage and passes them as</span></div>
<div style="position:absolute;left:90.00px;top:65.97px" class="cls_011"><span class="cls_011">parameters to the </span><span class="cls_021">podman rmi</span><span class="cls_011"> command for removal. Images that are in use are not deleted.</span></div>
<div style="position:absolute;left:90.00px;top:77.97px" class="cls_011"><span class="cls_011">However, this does not prevent any unused images from being removed.</span></div>
<div style="position:absolute;left:90.00px;top:100.25px" class="cls_024"><span class="cls_024">Modifying Images</span></div>
<div style="position:absolute;left:90.00px;top:124.97px" class="cls_011"><span class="cls_011">Ideally, all container images should be built using a </span><span class="cls_021">Dockerfile</span><span class="cls_011">, in order to create a clean,</span></div>
<div style="position:absolute;left:90.00px;top:136.97px" class="cls_011"><span class="cls_011">lightweight set of image layers without log files, temporary files, or other artifacts created by the</span></div>
<div style="position:absolute;left:90.00px;top:148.97px" class="cls_011"><span class="cls_011">container customization. However, some users may provide container images as they are, without</span></div>
<div style="position:absolute;left:90.00px;top:160.96px" class="cls_011"><span class="cls_011">a </span><span class="cls_021">Dockerfile</span><span class="cls_011">. As an alternative approach to creating new images, change a running container</span></div>
<div style="position:absolute;left:90.00px;top:172.96px" class="cls_011"><span class="cls_011">in place and save its layers to create a new container image. The </span><span class="cls_021">podman commit</span><span class="cls_011"> command</span></div>
<div style="position:absolute;left:90.00px;top:184.96px" class="cls_011"><span class="cls_011">provides this feature.</span></div>
<div style="position:absolute;left:126.00px;top:214.41px" class="cls_015"><span class="cls_015">Warning</span></div>
<div style="position:absolute;left:126.00px;top:228.79px" class="cls_011"><span class="cls_011">Even though the </span><span class="cls_021">podman commit</span><span class="cls_011"> command is the most straightforward approach</span></div>
<div style="position:absolute;left:126.00px;top:240.78px" class="cls_011"><span class="cls_011">to creating new images, it is not recommended because of the image size (</span><span class="cls_021">commit</span></div>
<div style="position:absolute;left:126.00px;top:252.78px" class="cls_011"><span class="cls_011">keeps logs and process ID files in the captured layers), and the lack of change</span></div>
<div style="position:absolute;left:126.00px;top:264.78px" class="cls_011"><span class="cls_011">traceability. A </span><span class="cls_021">Dockerfile</span><span class="cls_011"> provides a robust mechanism to customize and</span></div>
<div style="position:absolute;left:126.00px;top:276.78px" class="cls_011"><span class="cls_011">implement changes to a container using a human-readable set of commands,</span></div>
<div style="position:absolute;left:126.00px;top:288.78px" class="cls_011"><span class="cls_011">without the set of files that are generated by the operating system.</span></div>
<div style="position:absolute;left:90.00px;top:326.67px" class="cls_011"><span class="cls_011">The syntax for the </span><span class="cls_021">podman commit</span><span class="cls_011"> command is as follows:</span></div>
<div style="position:absolute;left:101.00px;top:354.39px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman commit [OPTIONS] CONTAINER \</span></div>
<div style="position:absolute;left:101.00px;top:366.39px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">[REPOSITORY[:PORT]/]IMAGE_NAME[:TAG]</span></div>
<div style="position:absolute;left:90.00px;top:394.17px" class="cls_011"><span class="cls_011">The following table shows the most important options available for the </span><span class="cls_021">podman commit</span></div>
<div style="position:absolute;left:90.00px;top:406.17px" class="cls_011"><span class="cls_011">command:</span></div>
<div style="position:absolute;left:96.25px;top:429.93px" class="cls_023"><span class="cls_023">Option</span></div>
<div style="position:absolute;left:303.25px;top:429.93px" class="cls_023"><span class="cls_023">Description</span></div>
<div style="position:absolute;left:96.25px;top:452.51px" class="cls_021"><span class="cls_021">--author ""</span></div>
<div style="position:absolute;left:303.25px;top:452.48px" class="cls_011"><span class="cls_011">Identifies who created the container image.</span></div>
<div style="position:absolute;left:96.25px;top:475.01px" class="cls_021"><span class="cls_021">--message ""</span></div>
<div style="position:absolute;left:303.25px;top:474.98px" class="cls_011"><span class="cls_011">Includes a commit message to the registry.</span></div>
<div style="position:absolute;left:96.25px;top:497.51px" class="cls_021"><span class="cls_021">--format</span></div>
<div style="position:absolute;left:303.25px;top:497.48px" class="cls_011"><span class="cls_011">Selects the format of the image. Valid options</span></div>
<div style="position:absolute;left:303.25px;top:509.47px" class="cls_011"><span class="cls_011">are </span><span class="cls_021">oci</span><span class="cls_011"> and </span><span class="cls_021">docker</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:126.00px;top:543.17px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:557.55px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">--message</span><span class="cls_011"> option is not available in the default OCI container format.</span></div>
<div style="position:absolute;left:90.00px;top:600.89px" class="cls_011"><span class="cls_011">To find the ID of a running container in Podman, run the </span><span class="cls_021">podman ps</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:101.00px;top:628.61px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman ps</span></div>
<div style="position:absolute;left:101.00px;top:640.61px" class="cls_026"><span class="cls_026">CONTAINER ID IMAGE ...</span></div>
<div style="position:absolute;left:293.00px;top:640.61px" class="cls_026"><span class="cls_026">NAMES</span></div>
<div style="position:absolute;left:101.00px;top:652.60px" class="cls_026"><span class="cls_026">87bdfcc7c656 mysql </span><span class="cls_029">...output omitted...</span><span class="cls_026"> mysql-basic</span></div>
<div style="position:absolute;left:90.00px;top:680.38px" class="cls_011"><span class="cls_011">Eventually, administrators might customize the image and set the container to the desired state.</span></div>
<div style="position:absolute;left:90.00px;top:692.38px" class="cls_011"><span class="cls_011">To identify which files were changed, created, or deleted since the container was started, use the</span></div>
<div style="position:absolute;left:90.00px;top:704.38px" class="cls_021"><span class="cls_021">diff</span><span class="cls_011"> subcommand. This subcommand only requires the container name or container ID:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">92</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:88220px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background111.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman diff mysql-basic</span></div>
<div style="position:absolute;left:119.00px;top:73.69px" class="cls_026"><span class="cls_026">C /run</span></div>
<div style="position:absolute;left:119.00px;top:85.69px" class="cls_026"><span class="cls_026">C /run/mysqld</span></div>
<div style="position:absolute;left:119.00px;top:97.69px" class="cls_026"><span class="cls_026">A /run/mysqld/mysqld.pid</span></div>
<div style="position:absolute;left:119.00px;top:109.69px" class="cls_026"><span class="cls_026">A /run/mysqld/mysqld.sock</span></div>
<div style="position:absolute;left:119.00px;top:121.68px" class="cls_026"><span class="cls_026">A /run/mysqld/mysqld.sock.lock</span></div>
<div style="position:absolute;left:119.00px;top:133.68px" class="cls_026"><span class="cls_026">A /run/secrets</span></div>
<div style="position:absolute;left:108.00px;top:161.46px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">diff</span><span class="cls_011"> subcommand tags any added file with an </span><span class="cls_021">A</span><span class="cls_011">, any changed ones with a </span><span class="cls_021">C</span><span class="cls_011">, and any deleted</span></div>
<div style="position:absolute;left:108.00px;top:173.46px" class="cls_011"><span class="cls_011">file with a </span><span class="cls_021">D</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:144.00px;top:206.38px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:220.76px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">diff</span><span class="cls_011"> command only reports added, changed, or deleted files to the container</span></div>
<div style="position:absolute;left:144.00px;top:232.76px" class="cls_011"><span class="cls_011">file system. Files that are mounted to a running container are not considered part of</span></div>
<div style="position:absolute;left:144.00px;top:244.75px" class="cls_011"><span class="cls_011">the container file system.</span></div>
<div style="position:absolute;left:144.00px;top:266.25px" class="cls_011"><span class="cls_011">To retrieve the list of mounted files and directories for a running container, use the</span></div>
<div style="position:absolute;left:144.00px;top:278.25px" class="cls_021"><span class="cls_021">podman inspect</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:128.72px;top:305.97px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman inspect \</span></div>
<div style="position:absolute;left:128.72px;top:317.96px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-f "{{range .Mounts}}{{println .Destination}}{{end}}"</span><span class="cls_026"> </span><span class="cls_029">CONTAINER_NAME/ID</span></div>
<div style="position:absolute;left:144.00px;top:345.74px" class="cls_011"><span class="cls_011">Any file in this list, or file under a directory in this list, is not shown in the output of</span></div>
<div style="position:absolute;left:144.00px;top:357.74px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">podman diff</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:108.00px;top:395.64px" class="cls_011"><span class="cls_011">To commit the changes to another image, run the following command:</span></div>
<div style="position:absolute;left:119.00px;top:423.36px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman commit </span><span class="cls_040">mysql-basic</span><span class="cls_027"> </span><span class="cls_040">mysql-custom</span></div>
<div style="position:absolute;left:108.00px;top:451.92px" class="cls_024"><span class="cls_024">Tagging Images</span></div>
<div style="position:absolute;left:108.00px;top:476.64px" class="cls_011"><span class="cls_011">A project with multiple images based on the same software could be distributed, creating</span></div>
<div style="position:absolute;left:108.00px;top:488.63px" class="cls_011"><span class="cls_011">individual projects for each image, but this approach requires more maintenance for managing and</span></div>
<div style="position:absolute;left:108.00px;top:500.63px" class="cls_011"><span class="cls_011">deploying the images to the correct locations.</span></div>
<div style="position:absolute;left:108.00px;top:522.13px" class="cls_011"><span class="cls_011">Container image registries support tags to distinguish multiple releases of the same project. For</span></div>
<div style="position:absolute;left:108.00px;top:534.13px" class="cls_011"><span class="cls_011">example, a customer might use a container image to run with a MySQL or PostgreSQL database,</span></div>
<div style="position:absolute;left:108.00px;top:546.13px" class="cls_011"><span class="cls_011">using a tag as a way to differentiate which database is to be used by a container image.</span></div>
<div style="position:absolute;left:144.00px;top:579.05px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:593.42px" class="cls_011"><span class="cls_011">Usually, the tags are used by container developers to distinguish between multiple</span></div>
<div style="position:absolute;left:144.00px;top:605.42px" class="cls_011"><span class="cls_011">versions of the same software. Multiple tags are provided to identify a release easily.</span></div>
<div style="position:absolute;left:144.00px;top:617.42px" class="cls_011"><span class="cls_011">The official MySQL container image website uses the version as the tag's name</span></div>
<div style="position:absolute;left:144.00px;top:629.42px" class="cls_011"><span class="cls_011">(</span><span class="cls_021">5.5.16</span><span class="cls_011">). Also, the same image has a second tag with the minor version, such as</span></div>
<div style="position:absolute;left:144.00px;top:641.42px" class="cls_011"><span class="cls_011">5.5, to minimize the need to get the latest release for a specific version.</span></div>
<div style="position:absolute;left:108.00px;top:679.31px" class="cls_011"><span class="cls_011">To tag an image, use the </span><span class="cls_021">podman tag</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.45px;top:751.59px" class="cls_013"><span class="cls_013">93</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:89022px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background112.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman tag [OPTIONS] IMAGE[:TAG] \</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">[REGISTRYHOST/][USERNAME/]NAME[:TAG]</span></div>
<div style="position:absolute;left:90.00px;top:101.47px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">IMAGE</span><span class="cls_011"> argument is the image name with an optional tag, which is managed by Podman. The</span></div>
<div style="position:absolute;left:90.00px;top:113.47px" class="cls_011"><span class="cls_011">following argument refers to the new alternative name for the image. Podman assumes the latest</span></div>
<div style="position:absolute;left:90.00px;top:125.47px" class="cls_011"><span class="cls_011">version, as indicated by the </span><span class="cls_021">latest</span><span class="cls_011"> tag, if the tag value is absent. For example, to tag an image,</span></div>
<div style="position:absolute;left:90.00px;top:137.47px" class="cls_011"><span class="cls_011">use the following command:</span></div>
<div style="position:absolute;left:101.00px;top:165.18px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman tag </span><span class="cls_040">mysql-custom</span><span class="cls_027"> </span><span class="cls_040">devops/mysql</span></div>
<div style="position:absolute;left:90.00px;top:192.96px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">mysql-custom</span><span class="cls_011"> option corresponds to the image name in the container registry.</span></div>
<div style="position:absolute;left:90.00px;top:214.46px" class="cls_011"><span class="cls_011">To use a different tag name, use the following command instead:</span></div>
<div style="position:absolute;left:101.00px;top:242.18px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman tag </span><span class="cls_040">mysql-custom</span><span class="cls_027"> </span><span class="cls_040">devops/mysql:snapshot</span></div>
<div style="position:absolute;left:90.00px;top:272.52px" class="cls_002"><span class="cls_002">Removing Tags from Images</span></div>
<div style="position:absolute;left:90.00px;top:294.46px" class="cls_011"><span class="cls_011">A single image can have multiple tags assigned using the </span><span class="cls_021">podman tag</span><span class="cls_011"> command. To remove</span></div>
<div style="position:absolute;left:90.00px;top:306.45px" class="cls_011"><span class="cls_011">them, use the </span><span class="cls_021">podman rmi</span><span class="cls_011"> command, as mentioned earlier:</span></div>
<div style="position:absolute;left:101.00px;top:334.17px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman rmi devops/mysql:snapshot</span></div>
<div style="position:absolute;left:126.00px;top:373.37px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:387.75px" class="cls_011"><span class="cls_011">Because multiple tags can point to the same image, to remove an image referred to</span></div>
<div style="position:absolute;left:126.00px;top:399.75px" class="cls_011"><span class="cls_011">by multiple tags, first remove each tag individually.</span></div>
<div style="position:absolute;left:90.00px;top:435.93px" class="cls_024"><span class="cls_024">Best Practices for Tagging Images</span></div>
<div style="position:absolute;left:90.00px;top:460.65px" class="cls_011"><span class="cls_011">Podman automatically adds the </span><span class="cls_021">latest</span><span class="cls_011"> tag if you do not specify any tag, because Podman</span></div>
<div style="position:absolute;left:90.00px;top:472.64px" class="cls_011"><span class="cls_011">considers the image to be the latest build. However, this may not be true depending on how each</span></div>
<div style="position:absolute;left:90.00px;top:484.64px" class="cls_011"><span class="cls_011">project uses tags. For example, many open source projects consider the </span><span class="cls_021">latest</span><span class="cls_011"> tag to match the</span></div>
<div style="position:absolute;left:90.00px;top:496.64px" class="cls_011"><span class="cls_011">most recent release, but not the latest build.</span></div>
<div style="position:absolute;left:90.00px;top:518.14px" class="cls_011"><span class="cls_011">Moreover, multiple tags are provided to minimize the need to remember the latest release of a</span></div>
<div style="position:absolute;left:90.00px;top:530.14px" class="cls_011"><span class="cls_011">particular version of a project. Thus, if there is a project version release, for example, </span><span class="cls_021">2.1.10</span><span class="cls_011">,</span></div>
<div style="position:absolute;left:90.00px;top:542.13px" class="cls_011"><span class="cls_011">another tag called </span><span class="cls_021">2.1</span><span class="cls_011"> can be created pointing to the same image from the </span><span class="cls_021">2.1.10</span><span class="cls_011"> release. This</span></div>
<div style="position:absolute;left:90.00px;top:554.13px" class="cls_011"><span class="cls_011">simplifies pulling images from the registry.</span></div>
<div style="position:absolute;left:90.00px;top:576.41px" class="cls_024"><span class="cls_024">Publishing Images to a Registry</span></div>
<div style="position:absolute;left:90.00px;top:601.13px" class="cls_011"><span class="cls_011">To publish an image to a registry, it must reside in the Podman's local storage and be tagged for</span></div>
<div style="position:absolute;left:90.00px;top:613.13px" class="cls_011"><span class="cls_011">identification purposes. To push the image to the registry the syntax of the </span><span class="cls_021">push</span><span class="cls_011"> subcommand is:</span></div>
<div style="position:absolute;left:101.00px;top:640.84px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman push [OPTIONS] IMAGE [DESTINATION]</span></div>
<div style="position:absolute;left:90.00px;top:668.62px" class="cls_011"><span class="cls_011">For example, to push the </span><span class="cls_021">bitnami/nginx</span><span class="cls_011"> image to its repository, use the following command:</span></div>
<div style="position:absolute;left:101.00px;top:696.34px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman push quay.io/bitnami/nginx</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">94</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:89824px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background113.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:144.00px;top:63.50px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:144.00px;top:77.82px" class="cls_022"><span class="cls_022">Podman site</span></div>
<div style="position:absolute;left:144.00px;top:89.87px" class="cls_033"><span class="cls_033"> </span><A HREF="https://podman.io/">https://podman.io/</A> </div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.54px;top:751.59px" class="cls_013"><span class="cls_013">95</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:90626px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background114.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Creating a Custom Apache Container</span></div>
<div style="position:absolute;left:90.00px;top:112.56px" class="cls_014"><span class="cls_014">Image</span></div>
<div style="position:absolute;left:102.00px;top:158.59px" class="cls_011"><span class="cls_011">In this guided exercise, you will create a custom Apache container image using the </span><span class="cls_021">podman</span></div>
<div style="position:absolute;left:102.00px;top:170.59px" class="cls_021"><span class="cls_021">commit</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:102.00px;top:193.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:211.59px" class="cls_011"><span class="cls_011">You should be able to create a custom container image.</span></div>
<div style="position:absolute;left:102.00px;top:234.65px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:252.58px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:101.00px;top:280.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab image-operations start</span></div>
<div style="position:absolute;left:101.41px;top:334.39px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:119.00px;top:334.44px" class="cls_011"><span class="cls_011">Log into your Quay.io account and start a container by using the image available at</span></div>
<div style="position:absolute;left:119.00px;top:346.44px" class="cls_021"><span class="cls_021">quay.io/redhattraining/httpd-parent</span><span class="cls_011">. The </span><span class="cls_021">-p</span><span class="cls_011"> option allows you to specify a</span></div>
<div style="position:absolute;left:119.00px;top:358.44px" class="cls_011"><span class="cls_011">redirect port. In this case, Podman forwards incoming requests on TCP port 8180 of the</span></div>
<div style="position:absolute;left:119.00px;top:370.44px" class="cls_011"><span class="cls_011">host to TCP port 80 of the container.</span></div>
<div style="position:absolute;left:101.00px;top:398.16px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman login quay.io</span></div>
<div style="position:absolute;left:101.00px;top:410.16px" class="cls_026"><span class="cls_026">Username: </span><span class="cls_040">your_quay_username</span></div>
<div style="position:absolute;left:101.00px;top:422.16px" class="cls_026"><span class="cls_026">Password: </span><span class="cls_040">your_quay_password</span></div>
<div style="position:absolute;left:101.00px;top:434.16px" class="cls_026"><span class="cls_026">Login Succeeded!</span></div>
<div style="position:absolute;left:101.00px;top:446.16px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run -d --name official-httpd \</span></div>
<div style="position:absolute;left:101.00px;top:458.16px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p 8180:80 quay.io/redhattraining/httpd-parent</span></div>
<div style="position:absolute;left:101.00px;top:470.16px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:482.16px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:101.00px;top:494.16px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:101.00px;top:506.16px" class="cls_026"><span class="cls_026">3a6baecaff2b4e8c53b026e04847dda5976b773ade1a3a712b1431d60ac5915d</span></div>
<div style="position:absolute;left:119.00px;top:528.44px" class="cls_011"><span class="cls_011">Your last line of output is different from the last line shown above. Note the first twelve</span></div>
<div style="position:absolute;left:119.00px;top:540.44px" class="cls_011"><span class="cls_011">characters.</span></div>
<div style="position:absolute;left:101.41px;top:564.39px" class="cls_022"><span class="cls_022">2.</span><span class="cls_011">   Create an HTML page on the </span><span class="cls_021">official-httpd</span><span class="cls_011"> container.</span></div>
<div style="position:absolute;left:119.00px;top:588.41px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:143.70px;top:588.41px" class="cls_011"><span class="cls_011">Access the shell of the container by using the </span><span class="cls_021">podman exec</span><span class="cls_011"> command and create an</span></div>
<div style="position:absolute;left:143.70px;top:600.41px" class="cls_011"><span class="cls_011">HTML page.</span></div>
<div style="position:absolute;left:101.00px;top:628.13px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman exec -it official-httpd /bin/bash</span></div>
<div style="position:absolute;left:101.00px;top:640.13px" class="cls_026"><span class="cls_026">bash-4.4# </span><span class="cls_027">echo "DO180 Page" > /var/www/html/do180.html</span></div>
<div style="position:absolute;left:119.00px;top:670.38px" class="cls_011"><span class="cls_011">2.2.   Exit from the container.</span></div>
<div style="position:absolute;left:101.00px;top:698.10px" class="cls_026"><span class="cls_026">bash-4.4# </span><span class="cls_027">exit</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">96</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:91428px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background115.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:137.00px;top:54.98px" class="cls_011"><span class="cls_011">2.3.   Ensure that the HTML file is reachable from the </span><span class="cls_021">workstation</span><span class="cls_011"> VM by using the </span><span class="cls_021">curl</span></div>
<div style="position:absolute;left:161.70px;top:66.97px" class="cls_011"><span class="cls_011">command.</span></div>
<div style="position:absolute;left:119.00px;top:94.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl 127.0.0.1:8180/do180.html</span></div>
<div style="position:absolute;left:161.70px;top:116.97px" class="cls_011"><span class="cls_011">You should see the following output:</span></div>
<div style="position:absolute;left:119.00px;top:144.69px" class="cls_026"><span class="cls_026">DO180 Page</span></div>
<div style="position:absolute;left:119.41px;top:174.91px" class="cls_022"><span class="cls_022">3.</span><span class="cls_011">  Use the </span><span class="cls_021">podman diff</span><span class="cls_011"> command to examine the differences in the container between the</span></div>
<div style="position:absolute;left:137.00px;top:186.97px" class="cls_011"><span class="cls_011">image and the new layer created by the container.</span></div>
<div style="position:absolute;left:119.00px;top:214.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman diff official-httpd</span></div>
<div style="position:absolute;left:119.00px;top:226.69px" class="cls_026"><span class="cls_026">C /etc</span></div>
<div style="position:absolute;left:119.00px;top:238.69px" class="cls_026"><span class="cls_026">C /root</span></div>
<div style="position:absolute;left:119.00px;top:250.69px" class="cls_026"><span class="cls_026">A /root/.bash_history</span></div>
<div style="position:absolute;left:119.00px;top:262.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:274.69px" class="cls_026"><span class="cls_026">C /tmp</span></div>
<div style="position:absolute;left:119.00px;top:286.69px" class="cls_026"><span class="cls_026">C /var</span></div>
<div style="position:absolute;left:119.00px;top:298.69px" class="cls_026"><span class="cls_026">C /var/log</span></div>
<div style="position:absolute;left:119.00px;top:310.69px" class="cls_026"><span class="cls_026">C /var/log/httpd</span></div>
<div style="position:absolute;left:119.00px;top:322.69px" class="cls_026"><span class="cls_026">A /var/log/httpd/access_log</span></div>
<div style="position:absolute;left:119.00px;top:334.69px" class="cls_026"><span class="cls_026">A /var/log/httpd/error_log</span></div>
<div style="position:absolute;left:119.00px;top:346.69px" class="cls_026"><span class="cls_026">C /var/www</span></div>
<div style="position:absolute;left:119.00px;top:358.69px" class="cls_026"><span class="cls_026">C /var/www/html</span></div>
<div style="position:absolute;left:119.00px;top:370.69px" class="cls_026"><span class="cls_026">A /var/www/html/do180.html</span></div>
<div style="position:absolute;left:144.00px;top:408.30px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:422.68px" class="cls_011"><span class="cls_011">Often, web server container images label the </span><span class="cls_021">/var/www/html</span><span class="cls_011"> directory as a</span></div>
<div style="position:absolute;left:144.00px;top:434.68px" class="cls_011"><span class="cls_011">volume. In these cases, any files added to this directory are not considered part</span></div>
<div style="position:absolute;left:144.00px;top:446.68px" class="cls_011"><span class="cls_011">of the container file system, and would not show in the output of the </span><span class="cls_021">git diff</span></div>
<div style="position:absolute;left:144.00px;top:458.68px" class="cls_011"><span class="cls_011">command.</span></div>
<div style="position:absolute;left:144.00px;top:480.18px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">quay.io/redhattraining/httpd-parent</span><span class="cls_011"> container image does not label</span></div>
<div style="position:absolute;left:144.00px;top:492.18px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">/var/www/html</span><span class="cls_011"> directory as a volume. As a result, the change to the </span><span class="cls_021">/var/</span></div>
<div style="position:absolute;left:144.00px;top:504.18px" class="cls_021"><span class="cls_021">www/html/do180.html</span><span class="cls_011"> file is considered a change to the underlying container file</span></div>
<div style="position:absolute;left:144.00px;top:516.18px" class="cls_011"><span class="cls_011">system.</span></div>
<div style="position:absolute;left:119.41px;top:549.02px" class="cls_022"><span class="cls_022">4.</span><span class="cls_011">  Create a new image with the changes created by the running container.</span></div>
<div style="position:absolute;left:137.00px;top:571.89px" class="cls_011"><span class="cls_011">4.1.</span></div>
<div style="position:absolute;left:161.70px;top:571.89px" class="cls_011"><span class="cls_011">Stop the </span><span class="cls_021">official-httpd</span><span class="cls_011"> container.</span></div>
<div style="position:absolute;left:119.00px;top:599.61px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman stop official-httpd</span></div>
<div style="position:absolute;left:119.00px;top:611.61px" class="cls_026"><span class="cls_026">3a6baecaff2b4e8c53b026e04847dda5976b773ade1a3a712b1431d60ac5915d</span></div>
<div style="position:absolute;left:137.00px;top:640.70px" class="cls_011"><span class="cls_011">4.2.  Commit the changes to a new container image with a new name. Use your name as</span></div>
<div style="position:absolute;left:161.70px;top:652.70px" class="cls_011"><span class="cls_011">the author of the changes.</span></div>
<div style="position:absolute;left:119.00px;top:680.41px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman commit \</span></div>
<div style="position:absolute;left:119.00px;top:692.41px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-a '</span><span class="cls_040">Your Name</span><span class="cls_027">' official-httpd do180-custom-httpd</span></div>
<div style="position:absolute;left:119.00px;top:704.41px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.53px;top:751.59px" class="cls_013"><span class="cls_013">97</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:92230px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background116.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:101.00px;top:53.69px" class="cls_026"><span class="cls_026">Skipping fetch of repeat blob sha256:071d8bd765171080d01682844524be57ac9883e</span></div>
<div style="position:absolute;left:101.00px;top:65.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:77.69px" class="cls_026"><span class="cls_026">Copying blob sha256:1e19be875ce6f5b9dece378755eb9df96ee205abfb4f165c797f59a9...</span></div>
<div style="position:absolute;left:105.80px;top:89.69px" class="cls_026"><span class="cls_026">15.00 KB / 15.00 KB [=====================================================] 0s</span></div>
<div style="position:absolute;left:101.00px;top:101.69px" class="cls_026"><span class="cls_026">Copying config sha256:8049dc2e7d0a0b1a70fc0268ad236399d9f5fb686ad4e31c7482cc...</span></div>
<div style="position:absolute;left:105.80px;top:113.68px" class="cls_026"><span class="cls_026">2.99 KB / 2.99 KB [=======================================================] 0s</span></div>
<div style="position:absolute;left:101.00px;top:125.68px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:101.00px;top:137.68px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:101.00px;top:149.68px" class="cls_026"><span class="cls_026">31c3ac78e9d4137c928da23762e7d32b00c428eb1036cab1caeeb399befe2a23</span></div>
<div style="position:absolute;left:119.00px;top:178.45px" class="cls_011"><span class="cls_011">4.3.  List the available container images.</span></div>
<div style="position:absolute;left:101.00px;top:206.17px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman images</span></div>
<div style="position:absolute;left:143.70px;top:228.45px" class="cls_011"><span class="cls_011">The expected output is similar to the following:</span></div>
<div style="position:absolute;left:101.00px;top:256.17px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:283.40px;top:256.17px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:326.60px;top:256.17px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:398.60px;top:256.17px" class="cls_026"><span class="cls_026">CREATED   SIZE</span></div>
<div style="position:absolute;left:101.00px;top:268.16px" class="cls_026"><span class="cls_026">localhost/do180-custom-httpd</span></div>
<div style="position:absolute;left:283.40px;top:268.16px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:326.60px;top:268.16px" class="cls_026"><span class="cls_026">31c3ac78e9d4</span></div>
<div style="position:absolute;left:101.00px;top:280.16px" class="cls_026"><span class="cls_026">quay.io/redhattraining/httpd-parent</span></div>
<div style="position:absolute;left:283.40px;top:280.16px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:326.60px;top:280.16px" class="cls_026"><span class="cls_026">2cc07fbb5000   ...</span></div>
<div style="position:absolute;left:143.70px;top:302.44px" class="cls_011"><span class="cls_011">The image ID matches the first 12 characters of the hash. The most recent images are</span></div>
<div style="position:absolute;left:143.70px;top:314.44px" class="cls_011"><span class="cls_011">listed at the top.</span></div>
<div style="position:absolute;left:101.41px;top:338.38px" class="cls_022"><span class="cls_022">5.</span><span class="cls_011">  Publish the saved container image to the container registry.</span></div>
<div style="position:absolute;left:119.00px;top:360.93px" class="cls_011"><span class="cls_011">5.1.</span></div>
<div style="position:absolute;left:143.70px;top:360.93px" class="cls_011"><span class="cls_011">Load your classroom environment configuration.</span></div>
<div style="position:absolute;left:143.70px;top:376.93px" class="cls_011"><span class="cls_011">Run the following command to load the environment variables created in the first</span></div>
<div style="position:absolute;left:143.70px;top:388.93px" class="cls_011"><span class="cls_011">guided exercise:</span></div>
<div style="position:absolute;left:101.00px;top:416.64px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">source /usr/local/etc/ocp4.config</span></div>
<div style="position:absolute;left:119.00px;top:445.42px" class="cls_011"><span class="cls_011">5.2.   To tag the image with the registry host name and tag, run the following command.</span></div>
<div style="position:absolute;left:101.00px;top:473.13px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman tag do180-custom-httpd \</span></div>
<div style="position:absolute;left:101.00px;top:485.13px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">quay.io/${RHT_OCP4_QUAY_USER}/do180-custom-httpd:v1.0</span></div>
<div style="position:absolute;left:119.00px;top:513.90px" class="cls_011"><span class="cls_011">5.3.   Run the </span><span class="cls_021">podman images</span><span class="cls_011"> command to ensure that the new name has been added to</span></div>
<div style="position:absolute;left:143.70px;top:525.90px" class="cls_011"><span class="cls_011">the cache.</span></div>
<div style="position:absolute;left:101.00px;top:553.62px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman images</span></div>
<div style="position:absolute;left:101.00px;top:587.62px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:345.80px;top:587.62px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:389.00px;top:587.62px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:101.00px;top:599.61px" class="cls_026"><span class="cls_026">localhost/do180-custom-httpd</span></div>
<div style="position:absolute;left:345.80px;top:599.61px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:389.00px;top:599.61px" class="cls_026"><span class="cls_026">31c3ac78e9d4   ...</span></div>
<div style="position:absolute;left:101.00px;top:611.61px" class="cls_026"><span class="cls_026">quay.io/${RHT_OCP4_QUAY_USER}/do180-custom-httpd</span></div>
<div style="position:absolute;left:345.80px;top:611.61px" class="cls_026"><span class="cls_026">v1.0</span></div>
<div style="position:absolute;left:389.00px;top:611.61px" class="cls_026"><span class="cls_026">31c3ac78e9d4   ...</span></div>
<div style="position:absolute;left:101.00px;top:623.61px" class="cls_026"><span class="cls_026">quay.io/redhattraining/httpd-parent</span></div>
<div style="position:absolute;left:345.80px;top:623.61px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:389.00px;top:623.61px" class="cls_026"><span class="cls_026">2cc07fbb5000   ...</span></div>
<div style="position:absolute;left:119.00px;top:652.38px" class="cls_011"><span class="cls_011">5.4.  Publish the image to your Quay.io registry.</span></div>
<div style="position:absolute;left:101.00px;top:680.10px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman push \</span></div>
<div style="position:absolute;left:101.00px;top:692.10px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">quay.io/${RHT_OCP4_QUAY_USER}/do180-custom-httpd:v1.0</span></div>
<div style="position:absolute;left:101.00px;top:704.10px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">98</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:93032px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background117.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:119.00px;top:53.69px" class="cls_026"><span class="cls_026">Copying blob sha256:071d8bd765171080d01682844524be57ac9883e53079b6ac66707e19...</span></div>
<div style="position:absolute;left:123.80px;top:65.69px" class="cls_026"><span class="cls_026">200.44 MB / 200.44 MB [================================================] 1m38s</span></div>
<div style="position:absolute;left:119.00px;top:77.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:89.69px" class="cls_026"><span class="cls_026">Copying config sha256:31c3ac78e9d4137c928da23762e7d32b00c428eb1036cab1caeeb3...</span></div>
<div style="position:absolute;left:123.80px;top:101.69px" class="cls_026"><span class="cls_026">2.99 KB / 2.99 KB [========================================================] 0s</span></div>
<div style="position:absolute;left:119.00px;top:113.68px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:119.00px;top:125.68px" class="cls_026"><span class="cls_026">Copying config sha256:31c3ac78e9d4137c928da23762e7d32b00c428eb1036cab1caeeb3...</span></div>
<div style="position:absolute;left:123.80px;top:137.68px" class="cls_026"><span class="cls_026">0 B / 2.99 KB [------------------------------------------------------------] 0s</span></div>
<div style="position:absolute;left:119.00px;top:149.68px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:119.00px;top:161.68px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:144.00px;top:198.98px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:213.36px" class="cls_011"><span class="cls_011">Pushing the </span><span class="cls_021">do180-custom-httpd</span><span class="cls_011"> image creates a private repository in your</span></div>
<div style="position:absolute;left:144.00px;top:225.35px" class="cls_011"><span class="cls_011">Quay.io account. Currently, private repositories are disallowed by Quay.io free plans.</span></div>
<div style="position:absolute;left:144.00px;top:237.35px" class="cls_011"><span class="cls_011">You can either create the public repository prior to pushing the image, or change</span></div>
<div style="position:absolute;left:144.00px;top:249.35px" class="cls_011"><span class="cls_011">the repository to public afterwards.</span></div>
<div style="position:absolute;left:137.00px;top:280.75px" class="cls_011"><span class="cls_011">5.5.   Verify that the image is available from Quay.io. The </span><span class="cls_021">podman search</span><span class="cls_011"> command</span></div>
<div style="position:absolute;left:161.70px;top:292.75px" class="cls_011"><span class="cls_011">requires the image to be indexed by Quay.io. That may take some hours to occur, so</span></div>
<div style="position:absolute;left:161.70px;top:304.74px" class="cls_011"><span class="cls_011">use the </span><span class="cls_021">podman pull</span><span class="cls_011"> command to fetch the image. This proves the availability for</span></div>
<div style="position:absolute;left:161.70px;top:316.74px" class="cls_011"><span class="cls_011">the image.</span></div>
<div style="position:absolute;left:119.00px;top:344.46px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman pull \</span></div>
<div style="position:absolute;left:119.00px;top:356.46px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-q quay.io/${RHT_OCP4_QUAY_USER}/do180-custom-httpd:v1.0</span></div>
<div style="position:absolute;left:119.00px;top:368.45px" class="cls_026"><span class="cls_026">31c3ac78e9d4137c928da23762e7d32b00c428eb1036cab1caeeb3</span></div>
<div style="position:absolute;left:119.41px;top:398.68px" class="cls_022"><span class="cls_022">6.</span><span class="cls_011">  Create a container from the newly published image.</span></div>
<div style="position:absolute;left:137.00px;top:414.74px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">podman run</span><span class="cls_011"> command to start a new container. Use </span><span class="cls_028">your_quay_username</span><span class="cls_021">/</span></div>
<div style="position:absolute;left:137.00px;top:426.74px" class="cls_021"><span class="cls_021">do180-custom-httpd:v1.0</span><span class="cls_011"> as the base image.</span></div>
<div style="position:absolute;left:119.00px;top:454.45px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run -d --name test-httpd -p 8280:80 \</span></div>
<div style="position:absolute;left:119.00px;top:466.45px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">${RHT_OCP4_QUAY_USER}/do180-custom-httpd:v1.0</span></div>
<div style="position:absolute;left:119.00px;top:478.45px" class="cls_026"><span class="cls_026">c0f04e906bb12bd0e514cbd0e581d2746e04e44a468dfbc85bc29ffcc5acd16c</span></div>
<div style="position:absolute;left:119.41px;top:508.68px" class="cls_022"><span class="cls_022">7.</span><span class="cls_011">   Use the </span><span class="cls_021">curl</span><span class="cls_011"> command to access the HTML page. Make sure you use port 8280.</span></div>
<div style="position:absolute;left:137.00px;top:524.74px" class="cls_011"><span class="cls_011">This should display the HTML page created in the previous step.</span></div>
<div style="position:absolute;left:119.00px;top:552.45px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl <A HREF="http://localhost:8280/do180.html">http://localhost:8280/do180.html</A> </span></div>
<div style="position:absolute;left:119.00px;top:564.45px" class="cls_026"><span class="cls_026">DO180 Page</span></div>
<div style="position:absolute;left:108.00px;top:594.80px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:108.00px;top:616.73px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab image-operations finish</span><span class="cls_011"> script to complete this lab.</span></div>
<div style="position:absolute;left:119.00px;top:644.45px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab image-operations finish</span></div>
<div style="position:absolute;left:108.00px;top:672.23px" class="cls_011"><span class="cls_011">This concludes the guided exercise.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.33px;top:751.59px" class="cls_013"><span class="cls_013">99</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:93834px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background118.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_042"><span class="cls_042">Lab</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Managing Images</span></div>
<div style="position:absolute;left:102.00px;top:139.15px" class="cls_043"><span class="cls_043">Performance Checklist</span></div>
<div style="position:absolute;left:102.00px;top:157.09px" class="cls_011"><span class="cls_011">In this lab, you will create and manage container images.</span></div>
<div style="position:absolute;left:102.00px;top:180.15px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:198.09px" class="cls_011"><span class="cls_011">You should be able to create a custom container image and manage container images.</span></div>
<div style="position:absolute;left:102.00px;top:221.15px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:239.09px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:101.00px;top:266.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab image-review start</span></div>
<div style="position:absolute;left:90.00px;top:320.32px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:112.00px;top:320.38px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">podman pull</span><span class="cls_011"> command to download the </span><span class="cls_021">quay.io/redhattraining/</span></div>
<div style="position:absolute;left:112.00px;top:332.38px" class="cls_021"><span class="cls_021">nginx:1.17</span><span class="cls_011"> container image. This image is a copy of the official container image availabe at</span></div>
<div style="position:absolute;left:112.00px;top:344.38px" class="cls_021"><span class="cls_021">docker.io/library/nginx:1.17</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:112.00px;top:360.38px" class="cls_011"><span class="cls_011">Ensure that you successfully downloaded the image.</span></div>
<div style="position:absolute;left:90.00px;top:378.32px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:112.00px;top:378.38px" class="cls_011"><span class="cls_011">Start a new container using the Nginx image, according to the specifications listed in the</span></div>
<div style="position:absolute;left:112.00px;top:390.38px" class="cls_011"><span class="cls_011">following list.</span></div>
<div style="position:absolute;left:112.00px;top:412.90px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Name</span><span class="cls_011">: </span><span class="cls_021">official-nginx</span></div>
<div style="position:absolute;left:112.00px;top:435.42px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Run as daemon</span><span class="cls_011">: yes</span></div>
<div style="position:absolute;left:112.00px;top:457.95px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Container image</span><span class="cls_011">: </span><span class="cls_021">nginx</span></div>
<div style="position:absolute;left:112.00px;top:480.47px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Port forward</span><span class="cls_011">: from host port 8080 to container port 80.</span></div>
<div style="position:absolute;left:90.00px;top:498.41px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:112.00px;top:498.47px" class="cls_011"><span class="cls_011">Log in to the container using the </span><span class="cls_021">podman exec</span><span class="cls_011"> command. Replace the contents of the</span></div>
<div style="position:absolute;left:112.00px;top:510.47px" class="cls_021"><span class="cls_021">index.html</span><span class="cls_011"> file with </span><span class="cls_021">DO180</span><span class="cls_011">. The web server directory is located at </span><span class="cls_021">/usr/share/nginx/</span></div>
<div style="position:absolute;left:112.00px;top:522.47px" class="cls_021"><span class="cls_021">html</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:112.00px;top:538.47px" class="cls_011"><span class="cls_011">After the file has been updated, exit the container and use the </span><span class="cls_021">curl</span><span class="cls_011"> command to access the</span></div>
<div style="position:absolute;left:112.00px;top:550.47px" class="cls_011"><span class="cls_011">web page.</span></div>
<div style="position:absolute;left:90.00px;top:568.41px" class="cls_022"><span class="cls_022">4.</span></div>
<div style="position:absolute;left:112.00px;top:568.47px" class="cls_011"><span class="cls_011">Stop the running container and commit your changes to create a new container image. Give</span></div>
<div style="position:absolute;left:112.00px;top:580.47px" class="cls_011"><span class="cls_011">the new image a name of </span><span class="cls_021">do180/mynginx</span><span class="cls_011"> and a tag of </span><span class="cls_021">v1.0-SNAPSHOT</span><span class="cls_011">. Use the following</span></div>
<div style="position:absolute;left:112.00px;top:592.47px" class="cls_011"><span class="cls_011">specifications:</span></div>
<div style="position:absolute;left:112.00px;top:615.00px" class="cls_011"><span class="cls_011">• Image name: </span><span class="cls_021">do180/mynginx</span></div>
<div style="position:absolute;left:112.00px;top:637.52px" class="cls_011"><span class="cls_011">• Image tag: </span><span class="cls_021">v1.0-SNAPSHOT</span></div>
<div style="position:absolute;left:112.00px;top:660.04px" class="cls_011"><span class="cls_011">• Author name: your name</span></div>
<div style="position:absolute;left:90.00px;top:677.99px" class="cls_022"><span class="cls_022">5.</span></div>
<div style="position:absolute;left:112.00px;top:678.04px" class="cls_011"><span class="cls_011">Start a new container using the updated Nginx image, according to the specifications listed in</span></div>
<div style="position:absolute;left:112.00px;top:690.04px" class="cls_011"><span class="cls_011">the following list.</span></div>
<div style="position:absolute;left:112.00px;top:712.57px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Name</span><span class="cls_011">: </span><span class="cls_021">official-nginx-dev</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">100</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:94636px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background119.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:130.00px;top:53.98px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Run as daemon</span><span class="cls_011">: yes</span></div>
<div style="position:absolute;left:130.00px;top:75.48px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Container image</span><span class="cls_011">: </span><span class="cls_021">do180/mynginx:v1.0-SNAPSHOT</span></div>
<div style="position:absolute;left:130.00px;top:96.98px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Port forward</span><span class="cls_011">: from host port 8080 to container port 80.</span></div>
<div style="position:absolute;left:108.00px;top:114.92px" class="cls_022"><span class="cls_022">6.</span></div>
<div style="position:absolute;left:130.00px;top:114.98px" class="cls_011"><span class="cls_011">Log in to the container using the </span><span class="cls_021">podman exec</span><span class="cls_011"> command, and introduce a final change.</span></div>
<div style="position:absolute;left:130.00px;top:126.98px" class="cls_011"><span class="cls_011">Replace the contents of the file </span><span class="cls_021">/usr/share/nginx/html/index.html</span><span class="cls_011"> file with </span><span class="cls_021">DO180</span></div>
<div style="position:absolute;left:130.00px;top:138.98px" class="cls_021"><span class="cls_021">Page</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:130.00px;top:154.98px" class="cls_011"><span class="cls_011">After the file has been updated, exit the container and use the </span><span class="cls_021">curl</span><span class="cls_011"> command to verify the</span></div>
<div style="position:absolute;left:130.00px;top:166.98px" class="cls_011"><span class="cls_011">changes.</span></div>
<div style="position:absolute;left:108.00px;top:184.92px" class="cls_022"><span class="cls_022">7.</span></div>
<div style="position:absolute;left:130.00px;top:184.98px" class="cls_011"><span class="cls_011">Stop the running container and commit your changes to create the final container image.</span></div>
<div style="position:absolute;left:130.00px;top:196.98px" class="cls_011"><span class="cls_011">Give the new image a name of </span><span class="cls_021">do180/mynginx</span><span class="cls_011"> and a tag of </span><span class="cls_021">v1.0</span><span class="cls_011">. Use the following</span></div>
<div style="position:absolute;left:130.00px;top:208.98px" class="cls_011"><span class="cls_011">specifications:</span></div>
<div style="position:absolute;left:130.00px;top:230.48px" class="cls_011"><span class="cls_011">• Image name: </span><span class="cls_021">do180/mynginx</span></div>
<div style="position:absolute;left:130.00px;top:251.98px" class="cls_011"><span class="cls_011">• Image tag: </span><span class="cls_021">v1.0</span></div>
<div style="position:absolute;left:130.00px;top:273.48px" class="cls_011"><span class="cls_011">• Author name: your name</span></div>
<div style="position:absolute;left:108.00px;top:291.42px" class="cls_022"><span class="cls_022">8.</span></div>
<div style="position:absolute;left:130.00px;top:291.48px" class="cls_011"><span class="cls_011">Remove the development image </span><span class="cls_021">do180/mynginx:v1.0-SNAPSHOT</span><span class="cls_011"> from local image</span></div>
<div style="position:absolute;left:130.00px;top:303.48px" class="cls_011"><span class="cls_011">storage.</span></div>
<div style="position:absolute;left:108.00px;top:321.42px" class="cls_022"><span class="cls_022">9.</span></div>
<div style="position:absolute;left:130.00px;top:321.48px" class="cls_011"><span class="cls_011">Use the image tagged </span><span class="cls_021">do180/mynginx:v1.0</span><span class="cls_011"> to create a new container with the following</span></div>
<div style="position:absolute;left:130.00px;top:333.48px" class="cls_011"><span class="cls_011">specifications:</span></div>
<div style="position:absolute;left:130.00px;top:354.98px" class="cls_011"><span class="cls_011">• Container name: </span><span class="cls_021">my-nginx</span></div>
<div style="position:absolute;left:130.00px;top:376.48px" class="cls_011"><span class="cls_011">• Run as daemon: yes</span></div>
<div style="position:absolute;left:130.00px;top:397.98px" class="cls_011"><span class="cls_011">• Container image: </span><span class="cls_021">do180/mynginx:v1.0</span></div>
<div style="position:absolute;left:130.00px;top:419.48px" class="cls_011"><span class="cls_011">• Port forward: from host port 8280 to container port 80</span></div>
<div style="position:absolute;left:130.00px;top:440.98px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, use the </span><span class="cls_021">curl</span><span class="cls_011"> command to access the web server, accessible from the</span></div>
<div style="position:absolute;left:130.00px;top:452.98px" class="cls_011"><span class="cls_011">port 8280.</span></div>
<div style="position:absolute;left:108.00px;top:477.04px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:108.00px;top:498.98px" class="cls_011"><span class="cls_011">Grade your work by running the </span><span class="cls_021">lab image-review grade</span><span class="cls_011"> command on your </span><span class="cls_021">workstation</span></div>
<div style="position:absolute;left:108.00px;top:510.97px" class="cls_011"><span class="cls_011">machine. Correct any reported failures and rerun the script until successful.</span></div>
<div style="position:absolute;left:119.00px;top:538.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab image-review grade</span></div>
<div style="position:absolute;left:108.00px;top:569.03px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:108.00px;top:590.97px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab image-review finish</span><span class="cls_011"> command to complete this lab.</span></div>
<div style="position:absolute;left:119.00px;top:618.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab image-review finish</span></div>
<div style="position:absolute;left:108.00px;top:646.47px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:506.20px;top:751.59px" class="cls_013"><span class="cls_013">101</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:95438px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background120.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_042"><span class="cls_042">Solution</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Managing Images</span></div>
<div style="position:absolute;left:102.00px;top:139.15px" class="cls_043"><span class="cls_043">Performance Checklist</span></div>
<div style="position:absolute;left:102.00px;top:157.09px" class="cls_011"><span class="cls_011">In this lab, you will create and manage container images.</span></div>
<div style="position:absolute;left:102.00px;top:180.15px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:198.09px" class="cls_011"><span class="cls_011">You should be able to create a custom container image and manage container images.</span></div>
<div style="position:absolute;left:102.00px;top:221.15px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:239.09px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:101.00px;top:266.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab image-review start</span></div>
<div style="position:absolute;left:90.00px;top:321.42px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:112.00px;top:321.48px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">podman pull</span><span class="cls_011"> command to download the </span><span class="cls_021">quay.io/redhattraining/</span></div>
<div style="position:absolute;left:112.00px;top:333.48px" class="cls_021"><span class="cls_021">nginx:1.17</span><span class="cls_011"> container image. This image is a copy of the official container image availabe at</span></div>
<div style="position:absolute;left:112.00px;top:345.48px" class="cls_021"><span class="cls_021">docker.io/library/nginx:1.17</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:112.00px;top:361.48px" class="cls_011"><span class="cls_011">Ensure that you successfully downloaded the image.</span></div>
<div style="position:absolute;left:112.00px;top:385.88px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:136.70px;top:385.88px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">podman pull</span><span class="cls_011"> command to pull the Nginx container image.</span></div>
<div style="position:absolute;left:101.00px;top:413.60px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman pull quay.io/redhattraining/nginx:1.17</span></div>
<div style="position:absolute;left:101.00px;top:425.60px" class="cls_026"><span class="cls_026">Trying to pull Trying to pull quay.io/redhattraining/nginx:1.17</span></div>
<div style="position:absolute;left:101.00px;top:437.60px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:449.59px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:101.00px;top:461.59px" class="cls_026"><span class="cls_026">9beeba249f3ee158d3e495a6ac25c5667ae2de8a43ac2a8bfd2bf687a58c06c9</span></div>
<div style="position:absolute;left:112.00px;top:492.27px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:136.70px;top:492.27px" class="cls_011"><span class="cls_011">Ensure that the container image exists on the local system by running the </span><span class="cls_021">podman</span></div>
<div style="position:absolute;left:136.70px;top:504.27px" class="cls_021"><span class="cls_021">images</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:101.00px;top:531.98px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman images</span></div>
<div style="position:absolute;left:136.70px;top:554.26px" class="cls_011"><span class="cls_011">This command produces output similar to the following:</span></div>
<div style="position:absolute;left:101.00px;top:581.98px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:249.80px;top:581.98px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:283.40px;top:581.98px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:355.40px;top:581.98px" class="cls_026"><span class="cls_026">CREATED</span></div>
<div style="position:absolute;left:427.40px;top:581.98px" class="cls_026"><span class="cls_026">SIZE</span></div>
<div style="position:absolute;left:101.00px;top:593.98px" class="cls_026"><span class="cls_026">quay.io/redhattraining/nginx</span></div>
<div style="position:absolute;left:249.80px;top:593.98px" class="cls_026"><span class="cls_026">1.17</span></div>
<div style="position:absolute;left:283.40px;top:593.98px" class="cls_026"><span class="cls_026">9beeba249f3e</span></div>
<div style="position:absolute;left:355.40px;top:593.98px" class="cls_026"><span class="cls_026">6 months ago</span></div>
<div style="position:absolute;left:427.40px;top:593.98px" class="cls_026"><span class="cls_026">131MB</span></div>
<div style="position:absolute;left:90.00px;top:623.60px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:112.00px;top:623.66px" class="cls_011"><span class="cls_011">Start a new container using the Nginx image, according to the specifications listed in the</span></div>
<div style="position:absolute;left:112.00px;top:635.66px" class="cls_011"><span class="cls_011">following list.</span></div>
<div style="position:absolute;left:112.00px;top:659.06px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Name</span><span class="cls_011">: </span><span class="cls_021">official-nginx</span></div>
<div style="position:absolute;left:112.00px;top:682.46px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Run as daemon</span><span class="cls_011">: yes</span></div>
<div style="position:absolute;left:112.00px;top:705.86px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Container image</span><span class="cls_011">: </span><span class="cls_021">nginx</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">102</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:96240px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background121.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:130.00px;top:53.98px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Port forward</span><span class="cls_011">: from host port 8080 to container port 80.</span></div>
<div style="position:absolute;left:130.00px;top:76.47px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:154.70px;top:76.47px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, use the </span><span class="cls_021">podman run</span><span class="cls_011"> command to create a container named</span></div>
<div style="position:absolute;left:154.70px;top:88.47px" class="cls_021"><span class="cls_021">official-nginx</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:116.18px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run --name official-nginx \</span></div>
<div style="position:absolute;left:119.00px;top:128.18px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-d -p 8080:80 quay.io/redhattraining/nginx:1.17</span></div>
<div style="position:absolute;left:119.00px;top:140.18px" class="cls_026"><span class="cls_026">b9d5739af239914b371025c38340352ac1657358561e7ebbd5472dfd5ff97788</span></div>
<div style="position:absolute;left:108.00px;top:167.90px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:130.00px;top:167.95px" class="cls_011"><span class="cls_011">Log in to the container using the </span><span class="cls_021">podman exec</span><span class="cls_011"> command. Replace the contents of the</span></div>
<div style="position:absolute;left:130.00px;top:179.95px" class="cls_021"><span class="cls_021">index.html</span><span class="cls_011"> file with </span><span class="cls_021">DO180</span><span class="cls_011">. The web server directory is located at </span><span class="cls_021">/usr/share/nginx/</span></div>
<div style="position:absolute;left:130.00px;top:191.95px" class="cls_021"><span class="cls_021">html</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:130.00px;top:207.95px" class="cls_011"><span class="cls_011">After the file has been updated, exit the container and use the </span><span class="cls_021">curl</span><span class="cls_011"> command to access the</span></div>
<div style="position:absolute;left:130.00px;top:219.95px" class="cls_011"><span class="cls_011">web page.</span></div>
<div style="position:absolute;left:130.00px;top:242.45px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:154.70px;top:242.45px" class="cls_011"><span class="cls_011">Log in to the container by using the </span><span class="cls_021">podman exec</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:119.00px;top:270.17px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman exec -it official-nginx /bin/bash</span></div>
<div style="position:absolute;left:119.00px;top:282.16px" class="cls_026"><span class="cls_026">root@b9d5739af239:/#</span></div>
<div style="position:absolute;left:130.00px;top:310.94px" class="cls_011"><span class="cls_011">3.2.   Update the </span><span class="cls_021">index.html</span><span class="cls_011"> file located at </span><span class="cls_021">/usr/share/nginx/html</span><span class="cls_011">. The file should</span></div>
<div style="position:absolute;left:154.70px;top:322.93px" class="cls_011"><span class="cls_011">read </span><span class="cls_021">DO180</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:350.65px" class="cls_026"><span class="cls_026">root@b9d5739af239:/# </span><span class="cls_027">echo 'DO180' > /usr/share/nginx/html/index.html</span></div>
<div style="position:absolute;left:130.00px;top:379.42px" class="cls_011"><span class="cls_011">3.3.  Exit the container.</span></div>
<div style="position:absolute;left:119.00px;top:407.14px" class="cls_026"><span class="cls_026">root@b9d5739af239:/# </span><span class="cls_027">exit</span></div>
<div style="position:absolute;left:130.00px;top:435.91px" class="cls_011"><span class="cls_011">3.4.  Use the </span><span class="cls_021">curl</span><span class="cls_011"> command to ensure that the </span><span class="cls_021">index.html</span><span class="cls_011"> file is updated.</span></div>
<div style="position:absolute;left:119.00px;top:463.63px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl 127.0.0.1:8080</span></div>
<div style="position:absolute;left:119.00px;top:475.63px" class="cls_026"><span class="cls_026">DO180</span></div>
<div style="position:absolute;left:108.00px;top:503.34px" class="cls_022"><span class="cls_022">4.</span></div>
<div style="position:absolute;left:130.00px;top:503.40px" class="cls_011"><span class="cls_011">Stop the running container and commit your changes to create a new container image. Give</span></div>
<div style="position:absolute;left:130.00px;top:515.40px" class="cls_011"><span class="cls_011">the new image a name of </span><span class="cls_021">do180/mynginx</span><span class="cls_011"> and a tag of </span><span class="cls_021">v1.0-SNAPSHOT</span><span class="cls_011">. Use the following</span></div>
<div style="position:absolute;left:130.00px;top:527.40px" class="cls_011"><span class="cls_011">specifications:</span></div>
<div style="position:absolute;left:130.00px;top:548.90px" class="cls_011"><span class="cls_011">• Image name: </span><span class="cls_021">do180/mynginx</span></div>
<div style="position:absolute;left:130.00px;top:570.39px" class="cls_011"><span class="cls_011">• Image tag: </span><span class="cls_021">v1.0-SNAPSHOT</span></div>
<div style="position:absolute;left:130.00px;top:591.89px" class="cls_011"><span class="cls_011">• Author name: your name</span></div>
<div style="position:absolute;left:130.00px;top:614.38px" class="cls_011"><span class="cls_011">4.1.</span></div>
<div style="position:absolute;left:154.70px;top:614.38px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">sudo podman stop</span><span class="cls_011"> command to stop the </span><span class="cls_021">official-nginx</span><span class="cls_011"> container.</span></div>
<div style="position:absolute;left:119.00px;top:642.09px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman stop official-nginx</span></div>
<div style="position:absolute;left:119.00px;top:654.09px" class="cls_026"><span class="cls_026">b9d5739af239914b371025c38340352ac1657358561e7ebbd5472dfd5ff97788</span></div>
<div style="position:absolute;left:130.00px;top:682.87px" class="cls_011"><span class="cls_011">4.2.  Commit your changes to a new container image. Use your name as the author of the</span></div>
<div style="position:absolute;left:154.70px;top:694.86px" class="cls_011"><span class="cls_011">changes.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.28px;top:751.59px" class="cls_013"><span class="cls_013">103</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:97042px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background122.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman commit -a '</span><span class="cls_040">Your Name</span><span class="cls_027">' \</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">official-nginx do180/mynginx:v1.0-SNAPSHOT</span></div>
<div style="position:absolute;left:101.00px;top:85.69px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:101.00px;top:97.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:109.69px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:101.00px;top:121.68px" class="cls_026"><span class="cls_026">d6d10f52e258e4e88c181a56c51637789424e9261b208338404e82a26c960751</span></div>
<div style="position:absolute;left:112.00px;top:150.03px" class="cls_011"><span class="cls_011">4.3.  List the available container images to locate your newly created image.</span></div>
<div style="position:absolute;left:101.00px;top:177.74px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman images</span></div>
<div style="position:absolute;left:101.00px;top:189.74px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:245.00px;top:189.74px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:317.00px;top:189.74px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:384.20px;top:189.74px" class="cls_026"><span class="cls_026">CREATED</span></div>
<div style="position:absolute;left:101.00px;top:201.74px" class="cls_026"><span class="cls_026">localhost/do180/mynginx</span></div>
<div style="position:absolute;left:245.00px;top:201.74px" class="cls_026"><span class="cls_026">v1.0-SNAPSHOT</span></div>
<div style="position:absolute;left:317.00px;top:201.74px" class="cls_026"><span class="cls_026">d6d10f52e258</span></div>
<div style="position:absolute;left:384.20px;top:201.74px" class="cls_026"><span class="cls_026">30 seconds ago  ...</span></div>
<div style="position:absolute;left:101.00px;top:213.74px" class="cls_026"><span class="cls_026">quay.io/redhattraining/nginx</span></div>
<div style="position:absolute;left:245.00px;top:213.74px" class="cls_026"><span class="cls_026">1.17</span></div>
<div style="position:absolute;left:317.00px;top:213.74px" class="cls_026"><span class="cls_026">9beeba249f3e</span></div>
<div style="position:absolute;left:384.20px;top:213.74px" class="cls_026"><span class="cls_026">6 months ago    ...</span></div>
<div style="position:absolute;left:90.00px;top:241.02px" class="cls_022"><span class="cls_022">5.</span></div>
<div style="position:absolute;left:112.00px;top:241.08px" class="cls_011"><span class="cls_011">Start a new container using the updated Nginx image, according to the specifications listed in</span></div>
<div style="position:absolute;left:112.00px;top:253.08px" class="cls_011"><span class="cls_011">the following list.</span></div>
<div style="position:absolute;left:112.00px;top:274.15px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Name</span><span class="cls_011">: </span><span class="cls_021">official-nginx-dev</span></div>
<div style="position:absolute;left:112.00px;top:295.21px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Run as daemon</span><span class="cls_011">: yes</span></div>
<div style="position:absolute;left:112.00px;top:316.28px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Container image</span><span class="cls_011">: </span><span class="cls_021">do180/mynginx:v1.0-SNAPSHOT</span></div>
<div style="position:absolute;left:112.00px;top:337.34px" class="cls_011"><span class="cls_011">•</span><span class="cls_022"> Port forward</span><span class="cls_011">: from host port 8080 to container port 80.</span></div>
<div style="position:absolute;left:112.00px;top:359.40px" class="cls_011"><span class="cls_011">5.1.</span></div>
<div style="position:absolute;left:136.70px;top:359.40px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, use the </span><span class="cls_021">podman run</span><span class="cls_011"> command to create a container named</span></div>
<div style="position:absolute;left:136.70px;top:371.40px" class="cls_021"><span class="cls_021">official-nginx-dev</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:101.00px;top:399.12px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run --name official-nginx-dev \</span></div>
<div style="position:absolute;left:101.00px;top:411.11px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-d -p 8080:80 do180/mynginx:v1.0-SNAPSHOT</span></div>
<div style="position:absolute;left:101.00px;top:423.11px" class="cls_026"><span class="cls_026">cfa21f02a77d0e46e438c255f83dea2dfb89bb5aa72413a28866156671f0bbbb</span></div>
<div style="position:absolute;left:90.00px;top:450.40px" class="cls_022"><span class="cls_022">6.</span></div>
<div style="position:absolute;left:112.00px;top:450.46px" class="cls_011"><span class="cls_011">Log in to the container using the </span><span class="cls_021">podman exec</span><span class="cls_011"> command, and introduce a final change.</span></div>
<div style="position:absolute;left:112.00px;top:462.46px" class="cls_011"><span class="cls_011">Replace the contents of the file </span><span class="cls_021">/usr/share/nginx/html/index.html</span><span class="cls_011"> file with </span><span class="cls_021">DO180</span></div>
<div style="position:absolute;left:112.00px;top:474.46px" class="cls_021"><span class="cls_021">Page</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:112.00px;top:490.46px" class="cls_011"><span class="cls_011">After the file has been updated, exit the container and use the </span><span class="cls_021">curl</span><span class="cls_011"> command to verify the</span></div>
<div style="position:absolute;left:112.00px;top:502.46px" class="cls_011"><span class="cls_011">changes.</span></div>
<div style="position:absolute;left:112.00px;top:524.52px" class="cls_011"><span class="cls_011">6.1.</span></div>
<div style="position:absolute;left:136.70px;top:524.52px" class="cls_011"><span class="cls_011">Log in to the container by using the </span><span class="cls_021">podman exec</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:101.00px;top:552.24px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman exec -it official-nginx-dev /bin/bash</span></div>
<div style="position:absolute;left:101.00px;top:564.23px" class="cls_026"><span class="cls_026">root@cfa21f02a77d:/#</span></div>
<div style="position:absolute;left:112.00px;top:592.58px" class="cls_011"><span class="cls_011">6.2.  Update the </span><span class="cls_021">index.html</span><span class="cls_011"> file located at </span><span class="cls_021">/usr/share/nginx/html</span><span class="cls_011">. The file should</span></div>
<div style="position:absolute;left:136.70px;top:604.58px" class="cls_011"><span class="cls_011">read </span><span class="cls_021">DO180 Page</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:101.00px;top:632.29px" class="cls_026"><span class="cls_026">root@cfa21f02a77d:/# </span><span class="cls_027">echo 'DO180 Page' > /usr/share/nginx/html/index.html</span></div>
<div style="position:absolute;left:112.00px;top:660.64px" class="cls_011"><span class="cls_011">6.3.  Exit the container.</span></div>
<div style="position:absolute;left:101.00px;top:688.35px" class="cls_026"><span class="cls_026">root@cfa21f02a77d:/# </span><span class="cls_027">exit</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">104</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:97844px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background123.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:130.00px;top:54.98px" class="cls_011"><span class="cls_011">6.4.  Use the </span><span class="cls_021">curl</span><span class="cls_011"> command to ensure that the </span><span class="cls_021">index.html</span><span class="cls_011"> file is updated.</span></div>
<div style="position:absolute;left:119.00px;top:82.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl 127.0.0.1:8080</span></div>
<div style="position:absolute;left:119.00px;top:94.69px" class="cls_026"><span class="cls_026">DO180 Page</span></div>
<div style="position:absolute;left:108.00px;top:124.31px" class="cls_022"><span class="cls_022">7.</span></div>
<div style="position:absolute;left:130.00px;top:124.37px" class="cls_011"><span class="cls_011">Stop the running container and commit your changes to create the final container image.</span></div>
<div style="position:absolute;left:130.00px;top:136.37px" class="cls_011"><span class="cls_011">Give the new image a name of </span><span class="cls_021">do180/mynginx</span><span class="cls_011"> and a tag of </span><span class="cls_021">v1.0</span><span class="cls_011">. Use the following</span></div>
<div style="position:absolute;left:130.00px;top:148.37px" class="cls_011"><span class="cls_011">specifications:</span></div>
<div style="position:absolute;left:130.00px;top:171.77px" class="cls_011"><span class="cls_011">• Image name: </span><span class="cls_021">do180/mynginx</span></div>
<div style="position:absolute;left:130.00px;top:195.17px" class="cls_011"><span class="cls_011">• Image tag: </span><span class="cls_021">v1.0</span></div>
<div style="position:absolute;left:130.00px;top:218.57px" class="cls_011"><span class="cls_011">• Author name: your name</span></div>
<div style="position:absolute;left:130.00px;top:242.97px" class="cls_011"><span class="cls_011">7.1.</span></div>
<div style="position:absolute;left:154.70px;top:242.97px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">sudo podman stop</span><span class="cls_011"> command to stop the </span><span class="cls_021">official-nginx-dev</span><span class="cls_011"> container.</span></div>
<div style="position:absolute;left:119.00px;top:270.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman stop official-nginx-dev</span></div>
<div style="position:absolute;left:119.00px;top:282.68px" class="cls_026"><span class="cls_026">cfa21f02a77d0e46e438c255f83dea2dfb89bb5aa72413a28866156671f0bbbb</span></div>
<div style="position:absolute;left:130.00px;top:313.36px" class="cls_011"><span class="cls_011">7.2.   Commit your changes to a new container image. Use your name as the author of the</span></div>
<div style="position:absolute;left:154.70px;top:325.36px" class="cls_011"><span class="cls_011">changes.</span></div>
<div style="position:absolute;left:119.00px;top:353.08px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman commit -a '</span><span class="cls_040">Your Name</span><span class="cls_027">' \</span></div>
<div style="position:absolute;left:119.00px;top:365.08px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">official-nginx-dev do180/mynginx:v1.0</span></div>
<div style="position:absolute;left:119.00px;top:377.08px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:119.00px;top:389.07px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:401.07px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:119.00px;top:413.07px" class="cls_026"><span class="cls_026">90915976c33de534e06778a74d2a8969c25ef5f8f58c0c1ab7aeaac19abd18af</span></div>
<div style="position:absolute;left:130.00px;top:443.75px" class="cls_011"><span class="cls_011">7.3.   List the available container images in order to locate your newly created image.</span></div>
<div style="position:absolute;left:119.00px;top:471.46px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman images</span></div>
<div style="position:absolute;left:119.00px;top:483.46px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:267.80px;top:483.46px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:344.60px;top:483.46px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:416.60px;top:483.46px" class="cls_026"><span class="cls_026">CREATED</span></div>
<div style="position:absolute;left:119.00px;top:495.46px" class="cls_026"><span class="cls_026">localhost/do180/mynginx</span></div>
<div style="position:absolute;left:267.80px;top:495.46px" class="cls_026"><span class="cls_026">v1.0</span></div>
<div style="position:absolute;left:344.60px;top:495.46px" class="cls_026"><span class="cls_026">90915976c33d</span></div>
<div style="position:absolute;left:416.60px;top:495.46px" class="cls_026"><span class="cls_026">6 seconds ago  ...</span></div>
<div style="position:absolute;left:119.00px;top:507.46px" class="cls_026"><span class="cls_026">localhost/do180/mynginx</span></div>
<div style="position:absolute;left:267.80px;top:507.46px" class="cls_026"><span class="cls_026">v1.0-SNAPSHOT</span></div>
<div style="position:absolute;left:344.60px;top:507.46px" class="cls_026"><span class="cls_026">d6d10f52e258</span></div>
<div style="position:absolute;left:416.60px;top:507.46px" class="cls_026"><span class="cls_026">8 minutes ago  ...</span></div>
<div style="position:absolute;left:119.00px;top:519.46px" class="cls_026"><span class="cls_026">quay.io/redhattraining/nginx</span></div>
<div style="position:absolute;left:267.80px;top:519.46px" class="cls_026"><span class="cls_026">1.17</span></div>
<div style="position:absolute;left:344.60px;top:519.46px" class="cls_026"><span class="cls_026">9beeba249f3e</span></div>
<div style="position:absolute;left:416.60px;top:519.46px" class="cls_026"><span class="cls_026">6 months ago   ...</span></div>
<div style="position:absolute;left:108.00px;top:549.08px" class="cls_022"><span class="cls_022">8.</span></div>
<div style="position:absolute;left:130.00px;top:549.14px" class="cls_011"><span class="cls_011">Remove the development image </span><span class="cls_021">do180/mynginx:v1.0-SNAPSHOT</span><span class="cls_011"> from local image</span></div>
<div style="position:absolute;left:130.00px;top:561.14px" class="cls_011"><span class="cls_011">storage.</span></div>
<div style="position:absolute;left:130.00px;top:585.54px" class="cls_011"><span class="cls_011">8.1.</span></div>
<div style="position:absolute;left:154.70px;top:585.54px" class="cls_011"><span class="cls_011">Despite being stopped, the </span><span class="cls_021">official-nginx-dev</span><span class="cls_011"> is still present. Display the</span></div>
<div style="position:absolute;left:154.70px;top:597.53px" class="cls_011"><span class="cls_011">container with the </span><span class="cls_021">podman ps</span><span class="cls_011"> command with the </span><span class="cls_021">-a</span><span class="cls_011"> flag.</span></div>
<div style="position:absolute;left:119.00px;top:625.25px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman ps -a \</span></div>
<div style="position:absolute;left:119.00px;top:637.25px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--format="{{.ID}} {{.Names}} {{.Status}}"</span></div>
<div style="position:absolute;left:119.00px;top:649.25px" class="cls_026"><span class="cls_026">cfa21f02a77d   official-nginx-dev   Exited (0) 9 minutes ago</span></div>
<div style="position:absolute;left:119.00px;top:661.24px" class="cls_026"><span class="cls_026">b9d5739af239   official-nginx</span></div>
<div style="position:absolute;left:291.80px;top:661.24px" class="cls_026"><span class="cls_026">Exited (0) 12 minutes ago</span></div>
<div style="position:absolute;left:130.00px;top:691.92px" class="cls_011"><span class="cls_011">8.2.  Remove the container with the </span><span class="cls_021">podman rm</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.37px;top:751.59px" class="cls_013"><span class="cls_013">105</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:98646px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background124.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman rm official-nginx-dev</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">cfa21f02a77d0e46e438c255f83dea2dfb89bb5aa72413a28866156671f0bbbb</span></div>
<div style="position:absolute;left:112.00px;top:104.37px" class="cls_011"><span class="cls_011">8.3.  Verify that the container is deleted by resubmitting the same </span><span class="cls_021">podman ps</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:101.00px;top:132.09px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman ps -a \</span></div>
<div style="position:absolute;left:101.00px;top:144.09px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--format="{{.ID}} {{.Names}} {{.Status}}"</span></div>
<div style="position:absolute;left:101.00px;top:156.09px" class="cls_026"><span class="cls_026">b9d5739af239   official-nginx</span></div>
<div style="position:absolute;left:273.80px;top:156.09px" class="cls_026"><span class="cls_026">Exited (0) 12 minutes ago</span></div>
<div style="position:absolute;left:112.00px;top:186.76px" class="cls_011"><span class="cls_011">8.4.  Use the </span><span class="cls_021">sudo podman rmi</span><span class="cls_011"> command to remove the </span><span class="cls_021">do180/mynginx:v1.0-</span></div>
<div style="position:absolute;left:136.70px;top:198.76px" class="cls_021"><span class="cls_021">SNAPSHOT</span><span class="cls_011"> image.</span></div>
<div style="position:absolute;left:101.00px;top:226.48px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman rmi do180/mynginx:v1.0-SNAPSHOT</span></div>
<div style="position:absolute;left:101.00px;top:238.48px" class="cls_026"><span class="cls_026">Untagged: localhost/do180/mynginx:v1.0-SNAPSHOT</span></div>
<div style="position:absolute;left:112.00px;top:269.16px" class="cls_011"><span class="cls_011">8.5.  Verify that the image is no longer present by listing all images using the </span><span class="cls_021">podman</span></div>
<div style="position:absolute;left:136.70px;top:281.15px" class="cls_021"><span class="cls_021">images</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:101.00px;top:308.87px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman images</span></div>
<div style="position:absolute;left:101.00px;top:320.87px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:249.80px;top:320.87px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:283.40px;top:320.87px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:355.40px;top:320.87px" class="cls_026"><span class="cls_026">CREATED</span></div>
<div style="position:absolute;left:432.20px;top:320.87px" class="cls_026"><span class="cls_026">SIZE</span></div>
<div style="position:absolute;left:101.00px;top:332.87px" class="cls_026"><span class="cls_026">localhost/do180/mynginx</span></div>
<div style="position:absolute;left:249.80px;top:332.87px" class="cls_026"><span class="cls_026">v1.0</span></div>
<div style="position:absolute;left:283.40px;top:332.87px" class="cls_026"><span class="cls_026">90915976c33d</span></div>
<div style="position:absolute;left:355.40px;top:332.87px" class="cls_026"><span class="cls_026">5 minutes ago</span></div>
<div style="position:absolute;left:432.20px;top:332.87px" class="cls_026"><span class="cls_026">131MB</span></div>
<div style="position:absolute;left:101.00px;top:344.86px" class="cls_026"><span class="cls_026">quay.io/redhattraining/nginx</span></div>
<div style="position:absolute;left:249.80px;top:344.86px" class="cls_026"><span class="cls_026">1.17</span></div>
<div style="position:absolute;left:283.40px;top:344.86px" class="cls_026"><span class="cls_026">9beeba249f3e</span></div>
<div style="position:absolute;left:355.40px;top:344.86px" class="cls_026"><span class="cls_026">6 months ago</span></div>
<div style="position:absolute;left:432.20px;top:344.86px" class="cls_026"><span class="cls_026">131MB</span></div>
<div style="position:absolute;left:90.00px;top:374.49px" class="cls_022"><span class="cls_022">9.</span></div>
<div style="position:absolute;left:112.00px;top:374.54px" class="cls_011"><span class="cls_011">Use the image tagged </span><span class="cls_021">do180/mynginx:v1.0</span><span class="cls_011"> to create a new container with the following</span></div>
<div style="position:absolute;left:112.00px;top:386.54px" class="cls_011"><span class="cls_011">specifications:</span></div>
<div style="position:absolute;left:112.00px;top:409.94px" class="cls_011"><span class="cls_011">• Container name: </span><span class="cls_021">my-nginx</span></div>
<div style="position:absolute;left:112.00px;top:433.34px" class="cls_011"><span class="cls_011">• Run as daemon: yes</span></div>
<div style="position:absolute;left:112.00px;top:456.74px" class="cls_011"><span class="cls_011">• Container image: </span><span class="cls_021">do180/mynginx:v1.0</span></div>
<div style="position:absolute;left:112.00px;top:480.14px" class="cls_011"><span class="cls_011">• Port forward: from host port 8280 to container port 80</span></div>
<div style="position:absolute;left:112.00px;top:503.54px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, use the </span><span class="cls_021">curl</span><span class="cls_011"> command to access the web server, accessible from the</span></div>
<div style="position:absolute;left:112.00px;top:515.54px" class="cls_011"><span class="cls_011">port 8280.</span></div>
<div style="position:absolute;left:112.00px;top:539.94px" class="cls_011"><span class="cls_011">9.1.</span></div>
<div style="position:absolute;left:136.70px;top:539.94px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">sudo podman run</span><span class="cls_011"> command to create the </span><span class="cls_021">my-nginx</span><span class="cls_011"> container, according</span></div>
<div style="position:absolute;left:136.70px;top:551.94px" class="cls_011"><span class="cls_011">to the specifications.</span></div>
<div style="position:absolute;left:101.00px;top:579.66px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run -d --name my-nginx \</span></div>
<div style="position:absolute;left:101.00px;top:591.66px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p 8280:80 do180/mynginx:v1.0</span></div>
<div style="position:absolute;left:101.00px;top:603.66px" class="cls_026"><span class="cls_026">51958c8ec8d2613bd26f85194c66ca96c95d23b82c43b23b0f0fb9fded74da20</span></div>
<div style="position:absolute;left:112.00px;top:634.33px" class="cls_011"><span class="cls_011">9.2.  Use the </span><span class="cls_021">curl</span><span class="cls_011"> command to ensure that the </span><span class="cls_021">index.html</span><span class="cls_011"> page is available and returns</span></div>
<div style="position:absolute;left:136.70px;top:646.33px" class="cls_011"><span class="cls_011">the custom content.</span></div>
<div style="position:absolute;left:101.00px;top:674.05px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl 127.0.0.1:8280</span></div>
<div style="position:absolute;left:101.00px;top:686.05px" class="cls_026"><span class="cls_026">DO180 Page</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">106</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:99448px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background125.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:108.00px;top:52.04px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:108.00px;top:73.98px" class="cls_011"><span class="cls_011">Grade your work by running the </span><span class="cls_021">lab image-review grade</span><span class="cls_011"> command on your </span><span class="cls_021">workstation</span></div>
<div style="position:absolute;left:108.00px;top:85.97px" class="cls_011"><span class="cls_011">machine. Correct any reported failures and rerun the script until successful.</span></div>
<div style="position:absolute;left:119.00px;top:113.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab image-review grade</span></div>
<div style="position:absolute;left:108.00px;top:144.03px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:108.00px;top:165.97px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab image-review finish</span><span class="cls_011"> command to complete this lab.</span></div>
<div style="position:absolute;left:119.00px;top:193.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab image-review finish</span></div>
<div style="position:absolute;left:108.00px;top:221.47px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.36px;top:751.59px" class="cls_013"><span class="cls_013">107</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:100250px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background126.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 4 |</span><span class="cls_019"> Managing Container Images</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Summary</span></div>
<div style="position:absolute;left:90.00px;top:135.98px" class="cls_011"><span class="cls_011">In this chapter, you learned:</span></div>
<div style="position:absolute;left:90.00px;top:157.47px" class="cls_011"><span class="cls_011">• The Red Hat Container Catalog provides tested and certified images at</span></div>
<div style="position:absolute;left:99.50px;top:169.47px" class="cls_021"><span class="cls_021">registry.redhat.io</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:190.97px" class="cls_011"><span class="cls_011">• Podman can interact with remote container registries to search, pull, and push container images.</span></div>
<div style="position:absolute;left:90.00px;top:212.47px" class="cls_011"><span class="cls_011">• Image tags are a mechanism to support multiple releases of a container image.</span></div>
<div style="position:absolute;left:90.00px;top:233.97px" class="cls_011"><span class="cls_011">• Podman provides commands to manage container images both in local storage and as</span></div>
<div style="position:absolute;left:99.50px;top:245.96px" class="cls_011"><span class="cls_011">compressed files.</span></div>
<div style="position:absolute;left:90.00px;top:267.46px" class="cls_011"><span class="cls_011">• Use the </span><span class="cls_021">podman commit</span><span class="cls_011"> to create an image from a container.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">108</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:101052px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background127.jpg" width=612 height=792></div>
<div style="position:absolute;left:126.00px;top:69.76px" class="cls_030"><span class="cls_030">Chapter 5</span></div>
<div style="position:absolute;left:126.00px;top:148.50px" class="cls_031"><span class="cls_031">Creating Custom Container</span></div>
<div style="position:absolute;left:126.00px;top:175.50px" class="cls_031"><span class="cls_031">Images</span></div>
<div style="position:absolute;left:146.00px;top:228.67px" class="cls_018"><span class="cls_018">Goal</span></div>
<div style="position:absolute;left:252.88px;top:228.01px" class="cls_008"><span class="cls_008">Design and code a Dockerfile to build a custom</span></div>
<div style="position:absolute;left:252.88px;top:240.01px" class="cls_008"><span class="cls_008">container image.</span></div>
<div style="position:absolute;left:146.00px;top:268.67px" class="cls_018"><span class="cls_018">Objectives</span></div>
<div style="position:absolute;left:252.88px;top:268.01px" class="cls_008"><span class="cls_008">•  Describe the approaches for creating custom</span></div>
<div style="position:absolute;left:267.88px;top:280.01px" class="cls_008"><span class="cls_008">container images.</span></div>
<div style="position:absolute;left:252.88px;top:296.01px" class="cls_008"><span class="cls_008">•  Create a container image using common</span></div>
<div style="position:absolute;left:267.88px;top:308.01px" class="cls_008"><span class="cls_008">Dockerfile commands.</span></div>
<div style="position:absolute;left:146.00px;top:336.67px" class="cls_018"><span class="cls_018">Sections</span></div>
<div style="position:absolute;left:252.88px;top:336.01px" class="cls_008"><span class="cls_008">•  Designing Custom Container Images (and</span></div>
<div style="position:absolute;left:267.88px;top:348.01px" class="cls_008"><span class="cls_008">Quiz)</span></div>
<div style="position:absolute;left:252.88px;top:364.01px" class="cls_008"><span class="cls_008">•  Building Custom Container Images with</span></div>
<div style="position:absolute;left:267.88px;top:376.01px" class="cls_008"><span class="cls_008">Dockerfiles (and Guided Exercise)</span></div>
<div style="position:absolute;left:146.00px;top:404.67px" class="cls_018"><span class="cls_018">Lab</span></div>
<div style="position:absolute;left:252.88px;top:404.01px" class="cls_008"><span class="cls_008">•  Creating Custom Container Images</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.16px;top:751.59px" class="cls_013"><span class="cls_013">109</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:101854px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background128.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Designing Custom Container Images</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to:</span></div>
<div style="position:absolute;left:90.00px;top:181.16px" class="cls_011"><span class="cls_011">• Describe the approaches for creating custom container images.</span></div>
<div style="position:absolute;left:90.00px;top:203.34px" class="cls_011"><span class="cls_011">• Find existing Dockerfiles to use as a starting point for creating a custom container image.</span></div>
<div style="position:absolute;left:90.00px;top:225.52px" class="cls_011"><span class="cls_011">• Define the role played by the Red Hat Software Collections Library (RHSCL) in designing</span></div>
<div style="position:absolute;left:99.50px;top:237.52px" class="cls_011"><span class="cls_011">container images from the Red Hat registry.</span></div>
<div style="position:absolute;left:90.00px;top:259.70px" class="cls_011"><span class="cls_011">• Describe the Source-to-Image (S2I) alternative to Dockerfiles.</span></div>
<div style="position:absolute;left:90.00px;top:281.98px" class="cls_024"><span class="cls_024">Reusing Existing Dockerfiles</span></div>
<div style="position:absolute;left:90.00px;top:306.70px" class="cls_011"><span class="cls_011">One method of creating container images has been covered so far: create a container, modify</span></div>
<div style="position:absolute;left:90.00px;top:318.69px" class="cls_011"><span class="cls_011">it to meet the requirements of the application to run in it, and then commit the changes to an</span></div>
<div style="position:absolute;left:90.00px;top:330.69px" class="cls_011"><span class="cls_011">image. This option, although straightforward, is only suitable for using or testing very specific</span></div>
<div style="position:absolute;left:90.00px;top:342.69px" class="cls_011"><span class="cls_011">changes. It does not follow best software practices, like maintainability, automation of building, and</span></div>
<div style="position:absolute;left:90.00px;top:354.69px" class="cls_011"><span class="cls_011">repeatability.</span></div>
<div style="position:absolute;left:90.00px;top:376.19px" class="cls_011"><span class="cls_011">Dockerfiles are another option for creating container images, addressing these limitations.</span></div>
<div style="position:absolute;left:90.00px;top:388.18px" class="cls_011"><span class="cls_011">Dockerfiles are easy to share, version control, reuse, and extend.</span></div>
<div style="position:absolute;left:90.00px;top:409.68px" class="cls_011"><span class="cls_011">Dockerfiles also make it easy to extend one image, called a child image, from another image, called</span></div>
<div style="position:absolute;left:90.00px;top:421.68px" class="cls_011"><span class="cls_011">a parent image. A child image incorporates everything in the parent image and all changes and</span></div>
<div style="position:absolute;left:90.00px;top:433.68px" class="cls_011"><span class="cls_011">additions made to create it.</span></div>
<div style="position:absolute;left:90.00px;top:455.18px" class="cls_011"><span class="cls_011">To share and reuse images, many popular applications, languages, and frameworks are already</span></div>
<div style="position:absolute;left:90.00px;top:467.17px" class="cls_011"><span class="cls_011">available in public image registries such as </span><span class="cls_021">Quay.io</span><span class="cls_011">. It is not trivial to customize an application</span></div>
<div style="position:absolute;left:90.00px;top:479.17px" class="cls_011"><span class="cls_011">configuration to follow recommended practices for containers, and so starting from a proven</span></div>
<div style="position:absolute;left:90.00px;top:491.17px" class="cls_011"><span class="cls_011">parent image usually saves a lot of work.</span></div>
<div style="position:absolute;left:90.00px;top:512.67px" class="cls_011"><span class="cls_011">Using a high-quality parent image enhances maintainability, especially if the parent image is kept</span></div>
<div style="position:absolute;left:90.00px;top:524.67px" class="cls_011"><span class="cls_011">updated by its author to account for bug fixes and security issues.</span></div>
<div style="position:absolute;left:90.00px;top:546.16px" class="cls_011"><span class="cls_011">Typical scenarios in creating a Dockerfile for building a child image from an existing container</span></div>
<div style="position:absolute;left:90.00px;top:558.16px" class="cls_011"><span class="cls_011">image include:</span></div>
<div style="position:absolute;left:90.00px;top:580.34px" class="cls_011"><span class="cls_011">• Add new runtime libraries, such as database connectors.</span></div>
<div style="position:absolute;left:90.00px;top:602.52px" class="cls_011"><span class="cls_011">• Include organization-wide customization such as SSL certificates and authentication providers.</span></div>
<div style="position:absolute;left:90.00px;top:624.70px" class="cls_011"><span class="cls_011">• Add internal libraries to be shared as a single image layer by multiple container images for</span></div>
<div style="position:absolute;left:99.50px;top:636.70px" class="cls_011"><span class="cls_011">different applications.</span></div>
<div style="position:absolute;left:90.00px;top:658.20px" class="cls_011"><span class="cls_011">Changing an existing Dockerfile to create a new image can also be a sensible approach in other</span></div>
<div style="position:absolute;left:90.00px;top:670.20px" class="cls_011"><span class="cls_011">scenarios. For example:</span></div>
<div style="position:absolute;left:90.00px;top:692.38px" class="cls_011"><span class="cls_011">• Trim the container image by removing unused material (such as man pages, or documentation</span></div>
<div style="position:absolute;left:99.50px;top:704.38px" class="cls_011"><span class="cls_011">found in </span><span class="cls_021">/usr/share/doc</span><span class="cls_011">).</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">110</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:102656px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background129.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">• Lock either the parent image or some included software package to a specific release to lower</span></div>
<div style="position:absolute;left:117.50px;top:65.97px" class="cls_011"><span class="cls_011">risk related to future software updates.</span></div>
<div style="position:absolute;left:108.00px;top:87.47px" class="cls_011"><span class="cls_011">Two sources of container images to use either as parent images or for changing their Dockerfiles</span></div>
<div style="position:absolute;left:108.00px;top:99.47px" class="cls_011"><span class="cls_011">are Docker Hub and the Red Hat Software Collections Library (RHSCL).</span></div>
<div style="position:absolute;left:108.00px;top:121.75px" class="cls_024"><span class="cls_024">Working with the Red Hat Software Collections Library</span></div>
<div style="position:absolute;left:108.00px;top:146.47px" class="cls_011"><span class="cls_011">Red Hat Software Collections Library (RHSCL), or simply Software Collections, is Red Hat's</span></div>
<div style="position:absolute;left:108.00px;top:158.47px" class="cls_011"><span class="cls_011">solution for developers who need to use the latest development tools that usually do not fit the</span></div>
<div style="position:absolute;left:108.00px;top:170.46px" class="cls_011"><span class="cls_011">standard RHEL release schedule.</span></div>
<div style="position:absolute;left:108.00px;top:191.96px" class="cls_011"><span class="cls_011">Red Hat Enterprise Linux (RHEL) provides a stable environment for enterprise applications. This</span></div>
<div style="position:absolute;left:108.00px;top:203.96px" class="cls_011"><span class="cls_011">requires RHEL to keep the major releases of upstream packages at the same level to prevent API</span></div>
<div style="position:absolute;left:108.00px;top:215.96px" class="cls_011"><span class="cls_011">and configuration file format changes. Security and performance fixes are backported from later</span></div>
<div style="position:absolute;left:108.00px;top:227.96px" class="cls_011"><span class="cls_011">upstream releases, but new features that would break backward-compatibility are not backported.</span></div>
<div style="position:absolute;left:108.00px;top:249.45px" class="cls_011"><span class="cls_011">RHSCL allows software developers to use the latest version without impacting RHEL, because</span></div>
<div style="position:absolute;left:108.00px;top:261.45px" class="cls_011"><span class="cls_011">RHSCL packages do not replace or conflict with default RHEL packages. Default RHEL packages</span></div>
<div style="position:absolute;left:108.00px;top:273.45px" class="cls_011"><span class="cls_011">and RHSCL packages are installed side-by-side.</span></div>
<div style="position:absolute;left:144.00px;top:306.37px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:320.75px" class="cls_011"><span class="cls_011">All RHEL subscribers have access to the RHSCL. To enable a particular software</span></div>
<div style="position:absolute;left:144.00px;top:332.75px" class="cls_011"><span class="cls_011">collection for a specific user or application environment (for example, MySQL 5.7,</span></div>
<div style="position:absolute;left:144.00px;top:344.74px" class="cls_011"><span class="cls_011">which is named </span><span class="cls_021">rh-mysql57</span><span class="cls_011">), enable the RHSCL software Yum repositories and</span></div>
<div style="position:absolute;left:144.00px;top:356.74px" class="cls_011"><span class="cls_011">follow a few simple steps.</span></div>
<div style="position:absolute;left:108.00px;top:392.92px" class="cls_024"><span class="cls_024">Finding Dockerfiles from the Red Hat Software</span></div>
<div style="position:absolute;left:108.00px;top:409.92px" class="cls_024"><span class="cls_024">Collections Library</span></div>
<div style="position:absolute;left:108.00px;top:434.64px" class="cls_011"><span class="cls_011">RHSCL is the source of most container images provided by the Red Hat image registry for use by</span></div>
<div style="position:absolute;left:108.00px;top:446.64px" class="cls_011"><span class="cls_011">RHEL Atomic Host and OpenShift Container Platform customers.</span></div>
<div style="position:absolute;left:108.00px;top:468.14px" class="cls_011"><span class="cls_011">Red Hat provides RHSCL Dockerfiles and related sources in the rhscl-dockerfiles package</span></div>
<div style="position:absolute;left:108.00px;top:480.13px" class="cls_011"><span class="cls_011">available from the RHSCL repository. Community users can get Dockerfiles for CentOS-based</span></div>
<div style="position:absolute;left:108.00px;top:492.13px" class="cls_011"><span class="cls_011">equivalent container images from </span><span class="cls_021">https://github.com/sclorg?q=-container</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:144.00px;top:525.05px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:539.43px" class="cls_011"><span class="cls_011">Many RHSCL container images include support for Source-to-Image (S2I), best</span></div>
<div style="position:absolute;left:144.00px;top:551.43px" class="cls_011"><span class="cls_011">known as an OpenShift Container Platform feature. Having support for S2I does not</span></div>
<div style="position:absolute;left:144.00px;top:563.43px" class="cls_011"><span class="cls_011">affect the use of these container images with Docker.</span></div>
<div style="position:absolute;left:108.00px;top:599.61px" class="cls_024"><span class="cls_024">Container Images in Red Hat Container Catalog</span></div>
<div style="position:absolute;left:108.00px;top:616.61px" class="cls_024"><span class="cls_024">(RHCC)</span></div>
<div style="position:absolute;left:108.00px;top:641.32px" class="cls_011"><span class="cls_011">Mission-critical applications require trusted containers. The Red Hat Container Catalog is a</span></div>
<div style="position:absolute;left:108.00px;top:653.32px" class="cls_011"><span class="cls_011">repository of reliable, tested, certified, and curated collection of container images built on versions</span></div>
<div style="position:absolute;left:108.00px;top:665.32px" class="cls_011"><span class="cls_011">of Red Hat Enterprise Linux (RHEL) and related systems. Container images available through</span></div>
<div style="position:absolute;left:108.00px;top:677.32px" class="cls_011"><span class="cls_011">RHCC have undergone a quality-assurance process. All components have been rebuilt by Red Hat</span></div>
<div style="position:absolute;left:108.00px;top:689.32px" class="cls_011"><span class="cls_011">to avoid known security vulnerabilities. They are upgraded on a regular basis so that they contain</span></div>
<div style="position:absolute;left:108.00px;top:701.31px" class="cls_011"><span class="cls_011">the required version of software even when a new image is not yet available. Using RHCC, you</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:508.61px;top:751.59px" class="cls_013"><span class="cls_013">111</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:103458px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background130.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_011"><span class="cls_011">can browse and search for images, and you can access information about each image, such as its</span></div>
<div style="position:absolute;left:90.00px;top:65.97px" class="cls_011"><span class="cls_011">version, contents, and usage.</span></div>
<div style="position:absolute;left:90.00px;top:88.26px" class="cls_024"><span class="cls_024">Searching for Images Using Quay.io</span></div>
<div style="position:absolute;left:90.00px;top:112.97px" class="cls_011"><span class="cls_011">Quay.io is an advanced container repository from CoreOS optimized for team collaboration. You</span></div>
<div style="position:absolute;left:90.00px;top:124.97px" class="cls_011"><span class="cls_011">can search for container images using </span><A HREF="https://quay.io/search">https://quay.io/search</A>.</div>
<div style="position:absolute;left:90.00px;top:146.47px" class="cls_011"><span class="cls_011">Clicking on an image's name provides access to the image information page, including access to all</span></div>
<div style="position:absolute;left:90.00px;top:158.47px" class="cls_011"><span class="cls_011">existing tags for the image, and the command to pull the image.</span></div>
<div style="position:absolute;left:90.00px;top:180.75px" class="cls_024"><span class="cls_024">Finding Dockerfiles on Docker Hub</span></div>
<div style="position:absolute;left:90.00px;top:205.46px" class="cls_011"><span class="cls_011">Anyone can create a Docker Hub account and publish container images there. There are no</span></div>
<div style="position:absolute;left:90.00px;top:217.46px" class="cls_011"><span class="cls_011">general assurances about quality and security; images on Docker Hub range from professionally</span></div>
<div style="position:absolute;left:90.00px;top:229.46px" class="cls_011"><span class="cls_011">supported to one-time experiments. Each image has to be evaluated individually.</span></div>
<div style="position:absolute;left:90.00px;top:250.96px" class="cls_011"><span class="cls_011">After searching for an image, the documentation page might provide a link to its Dockerfile. For</span></div>
<div style="position:absolute;left:90.00px;top:262.96px" class="cls_011"><span class="cls_011">example, the first result when searching for </span><span class="cls_021">mysql</span><span class="cls_011"> is the documentation page for the MySQL</span></div>
<div style="position:absolute;left:90.00px;top:274.95px" class="cls_011"><span class="cls_011">official image at </span><A HREF="https://hub.docker.com/_/mysql">https://hub.docker.com/_/mysql</A>.</div>
<div style="position:absolute;left:90.00px;top:296.45px" class="cls_011"><span class="cls_011">On that page, the link for the 5.6/Dockerfile image points to the </span><span class="cls_021">docker-library</span><span class="cls_011"> GitHub</span></div>
<div style="position:absolute;left:90.00px;top:308.45px" class="cls_011"><span class="cls_011">project, which hosts </span><span class="cls_021">Dockerfiles</span><span class="cls_011"> for images built by the Docker community automatic build</span></div>
<div style="position:absolute;left:90.00px;top:320.45px" class="cls_011"><span class="cls_011">system.</span></div>
<div style="position:absolute;left:90.00px;top:341.95px" class="cls_011"><span class="cls_011">The direct URL for the Docker Hub MySQL 5.6 </span><span class="cls_021">Dockerfile</span><span class="cls_011"> tree is <A HREF="https://github.com/docker-library/mysql/blob/master/5.6">https://github.com/docker-</A> </span></div>
<div style="position:absolute;left:90.00px;top:353.94px" class="cls_011"><span class="cls_011"> </span><A HREF="https://github.com/docker-library/mysql/blob/master/5.6">library/mysql/blob/master/5.6</A>.</div>
<div style="position:absolute;left:90.00px;top:376.23px" class="cls_024"><span class="cls_024">Describing How to use the OpenShift Source-to-</span></div>
<div style="position:absolute;left:90.00px;top:393.23px" class="cls_024"><span class="cls_024">Image Tool</span></div>
<div style="position:absolute;left:90.00px;top:417.94px" class="cls_011"><span class="cls_011">Source-to-Image (S2I) provides an alternative to using Dockerfiles to create new container</span></div>
<div style="position:absolute;left:90.00px;top:429.94px" class="cls_011"><span class="cls_011">images and can be used either as a feature from OpenShift or as the standalone </span><span class="cls_021">s2i</span><span class="cls_011"> utility. S2I</span></div>
<div style="position:absolute;left:90.00px;top:441.94px" class="cls_011"><span class="cls_011">allows developers to work using their usual tools, instead of learning Dockerfile syntax and using</span></div>
<div style="position:absolute;left:90.00px;top:453.94px" class="cls_011"><span class="cls_011">operating system commands such as </span><span class="cls_021">yum</span><span class="cls_011">, and usually creates slimmer images, with fewer layers.</span></div>
<div style="position:absolute;left:90.00px;top:475.43px" class="cls_011"><span class="cls_011">S2I uses the following process to build a custom container image for an application:</span></div>
<div style="position:absolute;left:90.00px;top:497.92px" class="cls_011"><span class="cls_011">1.</span></div>
<div style="position:absolute;left:109.00px;top:497.92px" class="cls_011"><span class="cls_011">Start a container from a base container image called the builder image, which includes a</span></div>
<div style="position:absolute;left:109.00px;top:509.92px" class="cls_011"><span class="cls_011">programming language runtime and essential development tools such as compilers and</span></div>
<div style="position:absolute;left:109.00px;top:521.92px" class="cls_011"><span class="cls_011">package managers.</span></div>
<div style="position:absolute;left:90.00px;top:544.41px" class="cls_011"><span class="cls_011">2.</span></div>
<div style="position:absolute;left:109.00px;top:544.41px" class="cls_011"><span class="cls_011">Fetch the application source code, usually from a Git server, and send it to the container.</span></div>
<div style="position:absolute;left:90.00px;top:566.90px" class="cls_011"><span class="cls_011">3.</span></div>
<div style="position:absolute;left:109.00px;top:566.90px" class="cls_011"><span class="cls_011">Build the application binary files inside the container.</span></div>
<div style="position:absolute;left:90.00px;top:589.39px" class="cls_011"><span class="cls_011">4.</span></div>
<div style="position:absolute;left:109.00px;top:589.39px" class="cls_011"><span class="cls_011">Save the container, after some clean up, as a new container image, which includes the</span></div>
<div style="position:absolute;left:109.00px;top:601.39px" class="cls_011"><span class="cls_011">programming language runtime and the application binaries.</span></div>
<div style="position:absolute;left:90.00px;top:622.89px" class="cls_011"><span class="cls_011">The builder image is a regular container image following a standard directory structure and</span></div>
<div style="position:absolute;left:90.00px;top:634.89px" class="cls_011"><span class="cls_011">providing scripts that are called during the S2I process. Most of these builder images can also be</span></div>
<div style="position:absolute;left:90.00px;top:646.89px" class="cls_011"><span class="cls_011">used as base images for Dockerfiles, outside the S2I process.</span></div>
<div style="position:absolute;left:90.00px;top:668.38px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">s2i</span><span class="cls_011"> command is used to run the S2I process outside of OpenShift, in a Docker-only</span></div>
<div style="position:absolute;left:90.00px;top:680.38px" class="cls_011"><span class="cls_011">environment. It can be installed on a RHEL system from the source-to-image RPM package, and</span></div>
<div style="position:absolute;left:90.00px;top:692.38px" class="cls_011"><span class="cls_011">on other platforms, including Windows and Mac OS, from the installers available in the S2I project</span></div>
<div style="position:absolute;left:90.00px;top:704.38px" class="cls_011"><span class="cls_011">on GitHub.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">112</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:104260px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background131.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:144.00px;top:63.50px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:144.00px;top:77.82px" class="cls_022"><span class="cls_022">Red Hat Software Collections Library (RHSCL)</span></div>
<div style="position:absolute;left:144.00px;top:89.87px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/documentation/en/red-hat-software-collections/">https://access.redhat.com/documentation/en/red-hat-software-collections/</A> </div>
<div style="position:absolute;left:144.00px;top:111.32px" class="cls_022"><span class="cls_022">Red Hat Container Catalog (RHCC)</span></div>
<div style="position:absolute;left:144.00px;top:123.37px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/containers/">https://access.redhat.com/containers/</A> </div>
<div style="position:absolute;left:144.00px;top:144.81px" class="cls_022"><span class="cls_022">RHSCL Dockerfiles on GitHub</span></div>
<div style="position:absolute;left:144.00px;top:156.87px" class="cls_033"><span class="cls_033"> </span><A HREF="https://github.com/sclorg?q=-container">https://github.com/sclorg?q=-container</A> </div>
<div style="position:absolute;left:144.00px;top:178.31px" class="cls_022"><span class="cls_022">Using Red Hat Software Collections Container Images</span></div>
<div style="position:absolute;left:144.00px;top:190.36px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/articles/1752723">https://access.redhat.com/articles/1752723</A> </div>
<div style="position:absolute;left:144.00px;top:211.80px" class="cls_022"><span class="cls_022">Quay.io</span></div>
<div style="position:absolute;left:144.00px;top:223.86px" class="cls_033"><span class="cls_033"> </span><A HREF="https://quay.io/search">https://quay.io/search</A> </div>
<div style="position:absolute;left:144.00px;top:245.30px" class="cls_022"><span class="cls_022">Docker Hub</span></div>
<div style="position:absolute;left:144.00px;top:257.35px" class="cls_033"><span class="cls_033"> </span><A HREF="https://hub.docker.com/">https://hub.docker.com/</A> </div>
<div style="position:absolute;left:144.00px;top:278.80px" class="cls_022"><span class="cls_022">Docker Library GitHub project</span></div>
<div style="position:absolute;left:144.00px;top:290.85px" class="cls_033"><span class="cls_033"> </span><A HREF="https://github.com/docker-library">https://github.com/docker-library</A> </div>
<div style="position:absolute;left:144.00px;top:312.29px" class="cls_022"><span class="cls_022">The S2I GitHub project</span></div>
<div style="position:absolute;left:144.00px;top:324.35px" class="cls_033"><span class="cls_033"> </span><A HREF="https://github.com/openshift/source-to-image">https://github.com/openshift/source-to-image</A> </div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:506.69px;top:751.59px" class="cls_013"><span class="cls_013">113</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:105062px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background132.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_034"><span class="cls_034">Quiz</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Approaches to Container Image Design</span></div>
<div style="position:absolute;left:102.00px;top:137.59px" class="cls_011"><span class="cls_011">Choose the correct answers to the following questions:</span></div>
<div style="position:absolute;left:101.41px;top:180.93px" class="cls_035"><span class="cls_035">1.</span></div>
<div style="position:absolute;left:114.00px;top:181.03px" class="cls_035"><span class="cls_035">Which method for creating container images is recommended by the containers</span></div>
<div style="position:absolute;left:114.00px;top:196.03px" class="cls_035"><span class="cls_035">community? (Choose one.)</span></div>
<div style="position:absolute;left:114.00px;top:211.09px" class="cls_011"><span class="cls_011">a. Run commands inside a basic OS container, commit the container, and save or export it as</span></div>
<div style="position:absolute;left:125.00px;top:226.09px" class="cls_011"><span class="cls_011">a new container image.</span></div>
<div style="position:absolute;left:114.00px;top:241.09px" class="cls_011"><span class="cls_011">b. Run commands from a Dockerfile and push the generated container image to an image</span></div>
<div style="position:absolute;left:125.00px;top:256.09px" class="cls_011"><span class="cls_011">registry.</span></div>
<div style="position:absolute;left:114.00px;top:271.09px" class="cls_011"><span class="cls_011">c. Create the container image layers manually from tar files.</span></div>
<div style="position:absolute;left:114.00px;top:286.09px" class="cls_011"><span class="cls_011">d. Run the </span><span class="cls_021">podman build</span><span class="cls_011"> command to process a container image description in YAML</span></div>
<div style="position:absolute;left:125.00px;top:301.09px" class="cls_011"><span class="cls_011">format.</span></div>
<div style="position:absolute;left:101.41px;top:327.93px" class="cls_035"><span class="cls_035">2.</span></div>
<div style="position:absolute;left:114.00px;top:328.03px" class="cls_035"><span class="cls_035">What are two advantages of using the standalone S2I process as an alternative to</span></div>
<div style="position:absolute;left:114.00px;top:343.03px" class="cls_035"><span class="cls_035">Dockerfiles? (Choose two.)</span></div>
<div style="position:absolute;left:114.00px;top:358.09px" class="cls_011"><span class="cls_011">a. Requires no additional tools apart from a basic Podman setup.</span></div>
<div style="position:absolute;left:114.00px;top:373.09px" class="cls_011"><span class="cls_011">b. Creates smaller container images, having fewer layers.</span></div>
<div style="position:absolute;left:114.00px;top:388.09px" class="cls_011"><span class="cls_011">c. Reuses high-quality builder images.</span></div>
<div style="position:absolute;left:114.00px;top:403.09px" class="cls_011"><span class="cls_011">d. Automatically updates the child image as the parent image changes (for example, with</span></div>
<div style="position:absolute;left:125.00px;top:418.09px" class="cls_011"><span class="cls_011">security fixes).</span></div>
<div style="position:absolute;left:114.00px;top:433.09px" class="cls_011"><span class="cls_011">e. Creates images compatible with OpenShift, unlike container images created from Docker</span></div>
<div style="position:absolute;left:125.00px;top:448.09px" class="cls_011"><span class="cls_011">tools.</span></div>
<div style="position:absolute;left:101.41px;top:474.93px" class="cls_035"><span class="cls_035">3.</span></div>
<div style="position:absolute;left:114.00px;top:475.03px" class="cls_035"><span class="cls_035">What are two typical scenarios for creating a Dockerfile to build a child image from an</span></div>
<div style="position:absolute;left:114.00px;top:490.03px" class="cls_035"><span class="cls_035">existing image? (Choose two.)</span></div>
<div style="position:absolute;left:114.00px;top:505.09px" class="cls_011"><span class="cls_011">a. Adding new runtime libraries.</span></div>
<div style="position:absolute;left:114.00px;top:520.09px" class="cls_011"><span class="cls_011">b. Setting constraints to a container's access to the host machine's CPU.</span></div>
<div style="position:absolute;left:114.00px;top:535.09px" class="cls_011"><span class="cls_011">c. Adding internal libraries to be shared as a single image layer by multiple container images</span></div>
<div style="position:absolute;left:125.00px;top:550.09px" class="cls_011"><span class="cls_011">for different applications.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">114</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:105864px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background133.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_034"><span class="cls_034">Solution</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Approaches to Container Image Design</span></div>
<div style="position:absolute;left:120.00px;top:137.59px" class="cls_011"><span class="cls_011">Choose the correct answers to the following questions:</span></div>
<div style="position:absolute;left:119.41px;top:180.93px" class="cls_035"><span class="cls_035">1.</span></div>
<div style="position:absolute;left:132.00px;top:181.03px" class="cls_035"><span class="cls_035">Which method for creating container images is recommended by the containers</span></div>
<div style="position:absolute;left:132.00px;top:196.03px" class="cls_035"><span class="cls_035">community? (Choose one.)</span></div>
<div style="position:absolute;left:132.00px;top:211.09px" class="cls_011"><span class="cls_011">a.</span><span class="cls_036"> Run commands inside a basic OS container, commit the container, and save or export it as</span></div>
<div style="position:absolute;left:143.00px;top:226.09px" class="cls_036"><span class="cls_036">a new container image.</span></div>
<div style="position:absolute;left:132.00px;top:241.09px" class="cls_011"><span class="cls_011">b. Run commands from a Dockerfile and push the generated container image to an image</span></div>
<div style="position:absolute;left:143.00px;top:256.09px" class="cls_011"><span class="cls_011">registry.</span></div>
<div style="position:absolute;left:132.00px;top:271.09px" class="cls_011"><span class="cls_011">c.</span><span class="cls_036"> Create the container image layers manually from tar files.</span></div>
<div style="position:absolute;left:132.00px;top:286.09px" class="cls_011"><span class="cls_011">d.</span><span class="cls_036"> Run the </span><span class="cls_048">podman build</span><span class="cls_036"> command to process a container image description in YAML</span></div>
<div style="position:absolute;left:143.00px;top:301.09px" class="cls_036"><span class="cls_036">format.</span></div>
<div style="position:absolute;left:119.41px;top:327.93px" class="cls_035"><span class="cls_035">2.</span></div>
<div style="position:absolute;left:132.00px;top:328.03px" class="cls_035"><span class="cls_035">What are two advantages of using the standalone S2I process as an alternative to</span></div>
<div style="position:absolute;left:132.00px;top:343.03px" class="cls_035"><span class="cls_035">Dockerfiles? (Choose two.)</span></div>
<div style="position:absolute;left:132.00px;top:358.09px" class="cls_011"><span class="cls_011">a.</span><span class="cls_036"> Requires no additional tools apart from a basic Podman setup.</span></div>
<div style="position:absolute;left:132.00px;top:373.09px" class="cls_011"><span class="cls_011">b. Creates smaller container images, having fewer layers.</span></div>
<div style="position:absolute;left:132.00px;top:388.09px" class="cls_011"><span class="cls_011">c. Reuses high-quality builder images.</span></div>
<div style="position:absolute;left:132.00px;top:403.09px" class="cls_011"><span class="cls_011">d.</span><span class="cls_036"> Automatically updates the child image as the parent image changes (for example, with</span></div>
<div style="position:absolute;left:143.00px;top:418.09px" class="cls_036"><span class="cls_036">security fixes).</span></div>
<div style="position:absolute;left:132.00px;top:433.09px" class="cls_011"><span class="cls_011">e.</span><span class="cls_036"> Creates images compatible with OpenShift, unlike container images created from Docker</span></div>
<div style="position:absolute;left:143.00px;top:448.09px" class="cls_036"><span class="cls_036">tools.</span></div>
<div style="position:absolute;left:119.41px;top:474.93px" class="cls_035"><span class="cls_035">3.</span></div>
<div style="position:absolute;left:132.00px;top:475.03px" class="cls_035"><span class="cls_035">What are two typical scenarios for creating a Dockerfile to build a child image from an</span></div>
<div style="position:absolute;left:132.00px;top:490.03px" class="cls_035"><span class="cls_035">existing image? (Choose two.)</span></div>
<div style="position:absolute;left:132.00px;top:505.09px" class="cls_011"><span class="cls_011">a. Adding new runtime libraries.</span></div>
<div style="position:absolute;left:132.00px;top:520.09px" class="cls_011"><span class="cls_011">b.</span><span class="cls_036"> Setting constraints to a container's access to the host machine's CPU.</span></div>
<div style="position:absolute;left:132.00px;top:535.09px" class="cls_011"><span class="cls_011">c. Adding internal libraries to be shared as a single image layer by multiple container images</span></div>
<div style="position:absolute;left:143.00px;top:550.09px" class="cls_011"><span class="cls_011">for different applications.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:506.78px;top:751.59px" class="cls_013"><span class="cls_013">115</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:106666px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background134.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:90.00px;top:62.06px" class="cls_014"><span class="cls_014">Building Custom Container Images with</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Dockerfiles</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to create a container image using common</span></div>
<div style="position:absolute;left:90.00px;top:170.97px" class="cls_011"><span class="cls_011">Dockerfile commands.</span></div>
<div style="position:absolute;left:90.00px;top:193.26px" class="cls_024"><span class="cls_024">Building Base Containers</span></div>
<div style="position:absolute;left:90.00px;top:217.97px" class="cls_011"><span class="cls_011">A </span><span class="cls_021">Dockerfile</span><span class="cls_011"> is a mechanism to automate the building of container images. Building an image</span></div>
<div style="position:absolute;left:90.00px;top:229.97px" class="cls_011"><span class="cls_011">from a Dockerfile is a three-step process:</span></div>
<div style="position:absolute;left:90.00px;top:251.88px" class="cls_011"><span class="cls_011">1.</span></div>
<div style="position:absolute;left:109.00px;top:251.88px" class="cls_011"><span class="cls_011">Create a working directory</span></div>
<div style="position:absolute;left:90.00px;top:273.79px" class="cls_011"><span class="cls_011">2.</span></div>
<div style="position:absolute;left:109.00px;top:273.79px" class="cls_011"><span class="cls_011">Write the </span><span class="cls_021">Dockerfile</span></div>
<div style="position:absolute;left:90.00px;top:295.70px" class="cls_011"><span class="cls_011">3.</span></div>
<div style="position:absolute;left:109.00px;top:295.70px" class="cls_011"><span class="cls_011">Build the image with Podman</span></div>
<div style="position:absolute;left:90.00px;top:319.76px" class="cls_002"><span class="cls_002">Create a Working Directory</span></div>
<div style="position:absolute;left:90.00px;top:341.70px" class="cls_011"><span class="cls_011">The working directory is the directory containing all files needed to build the image. Creating an</span></div>
<div style="position:absolute;left:90.00px;top:353.70px" class="cls_011"><span class="cls_011">empty working directory is good practice to avoid incorporating unnecessary files into the image.</span></div>
<div style="position:absolute;left:90.00px;top:365.70px" class="cls_011"><span class="cls_011">For security reasons, the root directory, </span><span class="cls_021">/</span><span class="cls_011">, should never be used as a working directory for image</span></div>
<div style="position:absolute;left:90.00px;top:377.69px" class="cls_011"><span class="cls_011">builds.</span></div>
<div style="position:absolute;left:90.00px;top:401.76px" class="cls_002"><span class="cls_002">Write the Dockerfile Specification</span></div>
<div style="position:absolute;left:90.00px;top:423.69px" class="cls_011"><span class="cls_011">A </span><span class="cls_021">Dockerfile</span><span class="cls_011"> is a text file that must exist in the working directory. This file contains the</span></div>
<div style="position:absolute;left:90.00px;top:435.69px" class="cls_011"><span class="cls_011">instructions needed to build the image. The basic syntax of a </span><span class="cls_021">Dockerfile</span><span class="cls_011"> follows:</span></div>
<div style="position:absolute;left:101.00px;top:463.41px" class="cls_026"><span class="cls_026"># Comment</span></div>
<div style="position:absolute;left:101.00px;top:475.41px" class="cls_029"><span class="cls_029">INSTRUCTION</span><span class="cls_026"> arguments</span></div>
<div style="position:absolute;left:90.00px;top:503.19px" class="cls_011"><span class="cls_011">Lines that begin with a hash, or pound, symbol (#) are comments. INSTRUCTION states for any</span></div>
<div style="position:absolute;left:90.00px;top:515.18px" class="cls_011"><span class="cls_011">Dockerfile instruction keyword. Instructions are not case-sensitive, but the convention is to make</span></div>
<div style="position:absolute;left:90.00px;top:527.18px" class="cls_011"><span class="cls_011">instructions all uppercase to improve visibility.</span></div>
<div style="position:absolute;left:90.00px;top:548.68px" class="cls_011"><span class="cls_011">The first non-comment instruction must be a </span><span class="cls_021">FROM</span><span class="cls_011"> instruction to specify the base image.</span></div>
<div style="position:absolute;left:90.00px;top:560.68px" class="cls_011"><span class="cls_011">Dockerfile instructions are executed into a new container using this image and then committed to</span></div>
<div style="position:absolute;left:90.00px;top:572.67px" class="cls_011"><span class="cls_011">a new image. The next instruction (if any) executes into that new image. The execution order of</span></div>
<div style="position:absolute;left:90.00px;top:584.67px" class="cls_011"><span class="cls_011">instructions is the order of their appearance in the Dockerfile.</span></div>
<div style="position:absolute;left:126.00px;top:616.11px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:630.48px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">ARG</span><span class="cls_011"> instruction can appear before the </span><span class="cls_021">FROM</span><span class="cls_011"> instruction, but </span><span class="cls_021">ARG</span><span class="cls_011"> instructions</span></div>
<div style="position:absolute;left:126.00px;top:642.48px" class="cls_011"><span class="cls_011">are outside the objectives for this section.</span></div>
<div style="position:absolute;left:90.00px;top:680.38px" class="cls_011"><span class="cls_011">Each Dockerfile instruction runs in an independent container using an intermediate image built</span></div>
<div style="position:absolute;left:90.00px;top:692.38px" class="cls_011"><span class="cls_011">from every previous command. This means each instruction is independent from other instructions</span></div>
<div style="position:absolute;left:90.00px;top:704.38px" class="cls_011"><span class="cls_011">in the Dockerfile.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">116</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:107468px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background135.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">The following is an example Dockerfile for building a simple Apache web server container:</span></div>
<div style="position:absolute;left:119.00px;top:81.69px" class="cls_026"><span class="cls_026"># This is a comment line</span></div>
<div style="position:absolute;left:119.00px;top:93.69px" class="cls_026"><span class="cls_026">FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:119.00px;top:105.69px" class="cls_026"><span class="cls_026">LABEL description="This is a custom httpd container image"</span></div>
<div style="position:absolute;left:119.00px;top:117.69px" class="cls_026"><span class="cls_026">MAINTAINER John Doe &lt;jdoe@xyz.com></span></div>
<div style="position:absolute;left:119.00px;top:129.68px" class="cls_026"><span class="cls_026">RUN yum install -y httpd</span></div>
<div style="position:absolute;left:119.00px;top:141.68px" class="cls_026"><span class="cls_026">EXPOSE 80</span></div>
<div style="position:absolute;left:119.00px;top:153.68px" class="cls_026"><span class="cls_026">ENV LogLevel "info"</span></div>
<div style="position:absolute;left:119.00px;top:165.68px" class="cls_026"><span class="cls_026">ADD </span><A HREF="http://someserver.com/filename.pdf/">http://someserver.com/filename.pdf</A> /var/www/html</div>
<div style="position:absolute;left:119.00px;top:177.68px" class="cls_026"><span class="cls_026">COPY ./src/ /var/www/html/</span></div>
<div style="position:absolute;left:119.00px;top:189.68px" class="cls_026"><span class="cls_026">USER apache</span></div>
<div style="position:absolute;left:119.00px;top:201.67px" class="cls_026"><span class="cls_026">ENTRYPOINT ["/usr/sbin/httpd"]</span></div>
<div style="position:absolute;left:119.00px;top:213.67px" class="cls_026"><span class="cls_026">CMD ["-D", "FOREGROUND"]</span></div>
<div style="position:absolute;left:128.90px;top:241.48px" class="cls_011"><span class="cls_011">Lines that begin with a hash, or pound, sign (#) are comments.</span></div>
<div style="position:absolute;left:128.90px;top:253.92px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">FROM</span><span class="cls_011"> instruction declares that the new container image extends </span><span class="cls_021">ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:128.90px;top:265.91px" class="cls_011"><span class="cls_011">container base image. Dockerfiles can use any other container image as a base image, not</span></div>
<div style="position:absolute;left:128.90px;top:277.91px" class="cls_011"><span class="cls_011">only images from operating system distributions. Red Hat provides a set of container images</span></div>
<div style="position:absolute;left:128.90px;top:289.91px" class="cls_011"><span class="cls_011">that are certified and tested and highly recommends using these container images as a base.</span></div>
<div style="position:absolute;left:128.90px;top:301.91px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">LABEL</span><span class="cls_011"> is responsible for adding generic metadata to an image. A </span><span class="cls_021">LABEL</span><span class="cls_011"> is a simple key-</span></div>
<div style="position:absolute;left:128.90px;top:313.91px" class="cls_011"><span class="cls_011">value pair.</span></div>
<div style="position:absolute;left:128.90px;top:325.90px" class="cls_021"><span class="cls_021">MAINTAINER</span><span class="cls_011"> indicates the </span><span class="cls_021">Author</span><span class="cls_011"> field of the generated container image's metadata. You</span></div>
<div style="position:absolute;left:128.90px;top:337.90px" class="cls_011"><span class="cls_011">can use the </span><span class="cls_021">podman inspect</span><span class="cls_011"> command to view image metadata.</span></div>
<div style="position:absolute;left:128.90px;top:349.90px" class="cls_021"><span class="cls_021">RUN</span><span class="cls_011"> executes commands in a new layer on top of the current image. The shell that is used to</span></div>
<div style="position:absolute;left:128.90px;top:361.90px" class="cls_011"><span class="cls_011">execute commands is </span><span class="cls_021">/bin/sh</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:128.90px;top:373.90px" class="cls_021"><span class="cls_021">EXPOSE</span><span class="cls_011"> indicates that the container listens on the specified network port at runtime. The</span></div>
<div style="position:absolute;left:128.90px;top:385.89px" class="cls_021"><span class="cls_021">EXPOSE</span><span class="cls_011"> instruction defines metadata only; it does not make ports accessible from the host.</span></div>
<div style="position:absolute;left:128.90px;top:397.89px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">-p</span><span class="cls_011"> option in the </span><span class="cls_021">podman run</span><span class="cls_011"> command exposes container ports from the host.</span></div>
<div style="position:absolute;left:128.90px;top:409.89px" class="cls_021"><span class="cls_021">ENV</span><span class="cls_011"> is responsible for defining environment variables that are available in the container. You</span></div>
<div style="position:absolute;left:128.90px;top:421.89px" class="cls_011"><span class="cls_011">can declare multiple </span><span class="cls_021">ENV</span><span class="cls_011"> instructions within the </span><span class="cls_021">Dockerfile</span><span class="cls_011">. You can use the </span><span class="cls_021">env</span><span class="cls_011"> command</span></div>
<div style="position:absolute;left:128.90px;top:433.89px" class="cls_011"><span class="cls_011">inside the container to view each of the environment variables.</span></div>
<div style="position:absolute;left:128.90px;top:445.88px" class="cls_021"><span class="cls_021">ADD</span><span class="cls_011"> instruction copies files or folders from a local or remote source and adds them to the</span></div>
<div style="position:absolute;left:128.90px;top:457.88px" class="cls_011"><span class="cls_011">container's file system. If used to copy local files, those must be in the working directory. </span><span class="cls_021">ADD</span></div>
<div style="position:absolute;left:128.90px;top:469.88px" class="cls_011"><span class="cls_011">instruction unpacks local </span><span class="cls_021">.tar</span><span class="cls_011"> files to the destination image directory.</span></div>
<div style="position:absolute;left:128.90px;top:481.88px" class="cls_021"><span class="cls_021">COPY</span><span class="cls_011"> copies files from the working directory and adds them to the container's file system. It</span></div>
<div style="position:absolute;left:128.90px;top:493.88px" class="cls_011"><span class="cls_011">is not possible to copy a remote file using its URL with this Dockerfile instruction.</span></div>
<div style="position:absolute;left:128.90px;top:505.87px" class="cls_021"><span class="cls_021">USER</span><span class="cls_011"> specifies the username or the UID to use when running the container image for the</span></div>
<div style="position:absolute;left:128.90px;top:517.87px" class="cls_021"><span class="cls_021">RUN</span><span class="cls_011">, </span><span class="cls_021">CMD</span><span class="cls_011">, and </span><span class="cls_021">ENTRYPOINT</span><span class="cls_011"> instructions. It is a good practice to define a different user other</span></div>
<div style="position:absolute;left:128.90px;top:529.87px" class="cls_011"><span class="cls_011">than </span><span class="cls_021">root</span><span class="cls_011"> for security reasons.</span></div>
<div style="position:absolute;left:128.90px;top:541.87px" class="cls_021"><span class="cls_021">ENTRYPOINT</span><span class="cls_011"> specifies the default command to execute when the image runs in a container.</span></div>
<div style="position:absolute;left:128.90px;top:553.87px" class="cls_011"><span class="cls_011">If omitted, the default </span><span class="cls_021">ENTRYPOINT</span><span class="cls_011"> is </span><span class="cls_021">/bin/sh -c</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:128.90px;top:565.86px" class="cls_021"><span class="cls_021">CMD</span><span class="cls_011"> provides the default arguments for the </span><span class="cls_021">ENTRYPOINT</span><span class="cls_011"> instruction. If the default</span></div>
<div style="position:absolute;left:128.90px;top:577.86px" class="cls_021"><span class="cls_021">ENTRYPOINT</span><span class="cls_011"> applies (</span><span class="cls_021">/bin/sh -c</span><span class="cls_011">), then </span><span class="cls_021">CMD</span><span class="cls_011"> forms an executable command and</span></div>
<div style="position:absolute;left:128.90px;top:589.86px" class="cls_011"><span class="cls_011">parameters that run at container start.</span></div>
<div style="position:absolute;left:108.00px;top:612.14px" class="cls_024"><span class="cls_024">CMD and ENTRYPOINT</span></div>
<div style="position:absolute;left:108.00px;top:636.86px" class="cls_021"><span class="cls_021">ENTRYPOINT</span><span class="cls_011"> and </span><span class="cls_021">CMD</span><span class="cls_011"> instructions have two formats:</span></div>
<div style="position:absolute;left:108.00px;top:658.38px" class="cls_011"><span class="cls_011">• Exec form (using a JSON array):</span></div>
<div style="position:absolute;left:119.00px;top:686.10px" class="cls_026"><span class="cls_026">ENTRYPOINT ["command", "param1", "param2"]</span></div>
<div style="position:absolute;left:119.00px;top:698.10px" class="cls_026"><span class="cls_026">CMD ["param1","param2"]</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:506.77px;top:751.59px" class="cls_013"><span class="cls_013">117</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:108270px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background136.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_011"><span class="cls_011">• Shell form:</span></div>
<div style="position:absolute;left:101.00px;top:81.69px" class="cls_026"><span class="cls_026">ENTRYPOINT command param1 param2</span></div>
<div style="position:absolute;left:101.00px;top:93.69px" class="cls_026"><span class="cls_026">CMD param1 param2</span></div>
<div style="position:absolute;left:90.00px;top:121.47px" class="cls_011"><span class="cls_011">Exec form is the preferred form. Shell form wraps the commands in a </span><span class="cls_021">/bin/sh -c</span><span class="cls_011"> shell, creating</span></div>
<div style="position:absolute;left:90.00px;top:133.47px" class="cls_011"><span class="cls_011">a sometimes unnecessary shell process. Also, some combinations are not allowed, or may not</span></div>
<div style="position:absolute;left:90.00px;top:145.47px" class="cls_011"><span class="cls_011">work as expected. For example, if </span><span class="cls_021">ENTRYPOINT</span><span class="cls_011"> is </span><span class="cls_021">["ping"]</span><span class="cls_011"> (exec form) and </span><span class="cls_021">CMD</span><span class="cls_011"> is </span><span class="cls_021">localhost</span></div>
<div style="position:absolute;left:90.00px;top:157.46px" class="cls_011"><span class="cls_011">(shell form), then the expected executed command is </span><span class="cls_021">ping localhost</span><span class="cls_011">, but the container tries</span></div>
<div style="position:absolute;left:90.00px;top:169.46px" class="cls_021"><span class="cls_021">ping /bin/sh -c localhost</span><span class="cls_011">, which is a malformed command.</span></div>
<div style="position:absolute;left:90.00px;top:190.96px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">Dockerfile</span><span class="cls_011"> should contain at most one </span><span class="cls_021">ENTRYPOINT</span><span class="cls_011"> and one </span><span class="cls_021">CMD</span><span class="cls_011"> instruction. If more than</span></div>
<div style="position:absolute;left:90.00px;top:202.96px" class="cls_011"><span class="cls_011">one of each is present, then only the last instruction takes effect. </span><span class="cls_021">CMD</span><span class="cls_011"> can be present without</span></div>
<div style="position:absolute;left:90.00px;top:214.96px" class="cls_011"><span class="cls_011">specifying an </span><span class="cls_021">ENTRYPOINT</span><span class="cls_011">. In this case, the base image's </span><span class="cls_021">ENTRYPOINT</span><span class="cls_011"> applies, or the default</span></div>
<div style="position:absolute;left:90.00px;top:226.95px" class="cls_021"><span class="cls_021">ENTRYPOINT</span><span class="cls_011"> if none is defined.</span></div>
<div style="position:absolute;left:90.00px;top:248.45px" class="cls_011"><span class="cls_011">Podman can override the </span><span class="cls_021">CMD</span><span class="cls_011"> instruction when starting a container. If present, all parameters for</span></div>
<div style="position:absolute;left:90.00px;top:260.45px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">podman run</span><span class="cls_011"> command after the image name form the </span><span class="cls_021">CMD</span><span class="cls_011"> instruction. For example, the</span></div>
<div style="position:absolute;left:90.00px;top:272.45px" class="cls_011"><span class="cls_011">following instruction causes the running container to display the current time:</span></div>
<div style="position:absolute;left:101.00px;top:300.17px" class="cls_026"><span class="cls_026">ENTRYPOINT ["/bin/date", "+%H:%M"]</span></div>
<div style="position:absolute;left:90.00px;top:327.94px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">ENTRYPOINT</span><span class="cls_011"> defines both the command to be executed and the parameters. So the </span><span class="cls_021">CMD</span></div>
<div style="position:absolute;left:90.00px;top:339.94px" class="cls_011"><span class="cls_011">instruction cannot be used. The following example provides the same functionality, with the added</span></div>
<div style="position:absolute;left:90.00px;top:351.94px" class="cls_011"><span class="cls_011">benefit of the </span><span class="cls_021">CMD</span><span class="cls_011"> instruction being overwritable when a container starts:</span></div>
<div style="position:absolute;left:101.00px;top:379.66px" class="cls_026"><span class="cls_026">ENTRYPOINT ["/bin/date"]</span></div>
<div style="position:absolute;left:101.00px;top:391.65px" class="cls_026"><span class="cls_026">CMD ["+%H:%M"]</span></div>
<div style="position:absolute;left:90.00px;top:419.43px" class="cls_011"><span class="cls_011">In both cases, when a container starts without providing a parameter, the current time is displayed:</span></div>
<div style="position:absolute;left:101.00px;top:447.15px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run -it do180/rhel</span></div>
<div style="position:absolute;left:101.00px;top:459.15px" class="cls_026"><span class="cls_026">11:41</span></div>
<div style="position:absolute;left:90.00px;top:486.93px" class="cls_011"><span class="cls_011">In the second case, if a parameter appears after the image name in the </span><span class="cls_021">podman run</span><span class="cls_011"> command,</span></div>
<div style="position:absolute;left:90.00px;top:498.93px" class="cls_011"><span class="cls_011">it overwrites the </span><span class="cls_021">CMD</span><span class="cls_011"> instruction. The following command displays the current day of the week</span></div>
<div style="position:absolute;left:90.00px;top:510.92px" class="cls_011"><span class="cls_011">instead of the time:</span></div>
<div style="position:absolute;left:101.00px;top:538.64px" class="cls_026"><span class="cls_026">[student@workstation demo-basic]$ </span><span class="cls_027">sudo podman run -it do180/rhel +%A</span></div>
<div style="position:absolute;left:101.00px;top:550.64px" class="cls_026"><span class="cls_026">Tuesday</span></div>
<div style="position:absolute;left:90.00px;top:578.42px" class="cls_011"><span class="cls_011">Another approach is using the default </span><span class="cls_021">ENTRYPOINT</span><span class="cls_011"> and the </span><span class="cls_021">CMD</span><span class="cls_011"> instruction to define the initial</span></div>
<div style="position:absolute;left:90.00px;top:590.42px" class="cls_011"><span class="cls_011">command. The following instruction displays the current time, with the added benefit of being able</span></div>
<div style="position:absolute;left:90.00px;top:602.41px" class="cls_011"><span class="cls_011">to be overridden at run time.</span></div>
<div style="position:absolute;left:101.00px;top:630.13px" class="cls_026"><span class="cls_026">CMD ["date", "+%H:%M"]</span></div>
<div style="position:absolute;left:90.00px;top:658.69px" class="cls_024"><span class="cls_024">ADD and COPY</span></div>
<div style="position:absolute;left:90.00px;top:683.41px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">ADD</span><span class="cls_011"> and </span><span class="cls_021">COPY</span><span class="cls_011"> instructions have two forms:</span></div>
<div style="position:absolute;left:90.00px;top:704.38px" class="cls_011"><span class="cls_011">• The Shell form:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">118</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:109072px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background137.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">ADD &lt;</span><span class="cls_029">source</span><span class="cls_026">>... &lt;</span><span class="cls_029">destination</span><span class="cls_026">></span></div>
<div style="position:absolute;left:119.00px;top:73.69px" class="cls_026"><span class="cls_026">COPY &lt;</span><span class="cls_029">source</span><span class="cls_026">>... &lt;</span><span class="cls_029">destination</span><span class="cls_026">></span></div>
<div style="position:absolute;left:108.00px;top:103.37px" class="cls_011"><span class="cls_011">• The Exec form:</span></div>
<div style="position:absolute;left:119.00px;top:131.09px" class="cls_026"><span class="cls_026">ADD ["&lt;</span><span class="cls_029">source</span><span class="cls_026">>",... "&lt;</span><span class="cls_029">destination</span><span class="cls_026">>"]</span></div>
<div style="position:absolute;left:119.00px;top:143.09px" class="cls_026"><span class="cls_026">COPY ["&lt;</span><span class="cls_029">source</span><span class="cls_026">>",... "&lt;</span><span class="cls_029">destination</span><span class="cls_026">>"]</span></div>
<div style="position:absolute;left:108.00px;top:170.87px" class="cls_011"><span class="cls_011">If the source is a file system path, it must be inside the working directory.</span></div>
<div style="position:absolute;left:108.00px;top:192.36px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">ADD</span><span class="cls_011"> instruction also allows you to specify a resource using a URL:</span></div>
<div style="position:absolute;left:119.00px;top:220.08px" class="cls_026"><span class="cls_026">ADD </span><A HREF="http://someserver.com/filename.pdf/">http://someserver.com/filename.pdf</A> /var/www/html</div>
<div style="position:absolute;left:108.00px;top:247.86px" class="cls_011"><span class="cls_011">If the source is a compressed file, then the </span><span class="cls_021">ADD</span><span class="cls_011"> instruction decompresses the file to the</span></div>
<div style="position:absolute;left:108.00px;top:259.86px" class="cls_011"><span class="cls_011">destination folder. The </span><span class="cls_021">COPY</span><span class="cls_011"> instruction does not have this functionality.</span></div>
<div style="position:absolute;left:144.00px;top:292.78px" class="cls_015"><span class="cls_015">Warning</span></div>
<div style="position:absolute;left:144.00px;top:307.16px" class="cls_011"><span class="cls_011">Both the </span><span class="cls_021">ADD</span><span class="cls_011"> and </span><span class="cls_021">COPY</span><span class="cls_011"> instructions copy the files, retaining permissions, with </span><span class="cls_021">root</span></div>
<div style="position:absolute;left:144.00px;top:319.15px" class="cls_011"><span class="cls_011">as the owner, even if the </span><span class="cls_021">USER</span><span class="cls_011"> instruction is specified. Red Hat recommends using a</span></div>
<div style="position:absolute;left:144.00px;top:331.15px" class="cls_021"><span class="cls_021">RUN</span><span class="cls_011"> instruction after the copy to change the owner and avoid “permission denied”</span></div>
<div style="position:absolute;left:144.00px;top:343.15px" class="cls_011"><span class="cls_011">errors.</span></div>
<div style="position:absolute;left:108.00px;top:379.33px" class="cls_024"><span class="cls_024">Layering Image</span></div>
<div style="position:absolute;left:108.00px;top:404.05px" class="cls_011"><span class="cls_011">Each instruction in a </span><span class="cls_021">Dockerfile</span><span class="cls_011"> creates a new image layer. Having too many instructions in</span></div>
<div style="position:absolute;left:108.00px;top:416.05px" class="cls_011"><span class="cls_011">a </span><span class="cls_021">Dockerfile</span><span class="cls_011"> causes too many layers, resulting in large images. For example, consider the</span></div>
<div style="position:absolute;left:108.00px;top:428.04px" class="cls_011"><span class="cls_011">following </span><span class="cls_021">RUN</span><span class="cls_011"> instructions in a </span><span class="cls_021">Dockerfile</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:119.00px;top:455.76px" class="cls_026"><span class="cls_026">RUN yum --disablerepo=* --enablerepo="rhel-7-server-rpms"</span></div>
<div style="position:absolute;left:119.00px;top:467.76px" class="cls_026"><span class="cls_026">RUN yum update -y</span></div>
<div style="position:absolute;left:119.00px;top:479.76px" class="cls_026"><span class="cls_026">RUN yum install -y httpd</span></div>
<div style="position:absolute;left:108.00px;top:507.54px" class="cls_011"><span class="cls_011">The previous example is not a good practice when creating container images. It creates three</span></div>
<div style="position:absolute;left:108.00px;top:519.53px" class="cls_011"><span class="cls_011">layers (one for each </span><span class="cls_021">RUN</span><span class="cls_011"> instruction) while only the last is meaningful. Red Hat recommends</span></div>
<div style="position:absolute;left:108.00px;top:531.53px" class="cls_011"><span class="cls_011">minimizing the number of layers. You can achieve the same objective while creating a single layer</span></div>
<div style="position:absolute;left:108.00px;top:543.53px" class="cls_011"><span class="cls_011">by using the </span><span class="cls_021">&&</span><span class="cls_011"> conjunction:</span></div>
<div style="position:absolute;left:119.00px;top:571.25px" class="cls_026"><span class="cls_026">RUN yum --disablerepo=* --enablerepo="rhel-7-server-rpms" && yum update -y && yum</span></div>
<div style="position:absolute;left:123.80px;top:583.24px" class="cls_026"><span class="cls_026">install -y httpd</span></div>
<div style="position:absolute;left:108.00px;top:611.02px" class="cls_011"><span class="cls_011">The problem with this approach is that the readability of the </span><span class="cls_021">Dockerfile</span><span class="cls_011"> decays. Use the </span><span class="cls_021">\</span></div>
<div style="position:absolute;left:108.00px;top:623.02px" class="cls_011"><span class="cls_011">escape code to insert line breaks and improve readability. You can also indent lines to align the</span></div>
<div style="position:absolute;left:108.00px;top:635.02px" class="cls_011"><span class="cls_011">commands:</span></div>
<div style="position:absolute;left:119.00px;top:662.74px" class="cls_026"><span class="cls_026">RUN yum --disablerepo=* --enablerepo="rhel-7-server-rpms" && \</span></div>
<div style="position:absolute;left:138.20px;top:674.73px" class="cls_026"><span class="cls_026">yum update -y && \</span></div>
<div style="position:absolute;left:138.20px;top:686.73px" class="cls_026"><span class="cls_026">yum install -y httpd</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:506.57px;top:751.59px" class="cls_013"><span class="cls_013">119</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:109874px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background138.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_011"><span class="cls_011">This example creates only one layer, and the readability improves. </span><span class="cls_021">RUN</span><span class="cls_011">, </span><span class="cls_021">COPY</span><span class="cls_011">, and </span><span class="cls_021">ADD</span><span class="cls_011"> instructions</span></div>
<div style="position:absolute;left:90.00px;top:65.97px" class="cls_011"><span class="cls_011">create new image layers, but </span><span class="cls_021">RUN</span><span class="cls_011"> can be improved this way.</span></div>
<div style="position:absolute;left:90.00px;top:87.47px" class="cls_011"><span class="cls_011">Red Hat recommends applying similar formatting rules to other instructions accepting multiple</span></div>
<div style="position:absolute;left:90.00px;top:99.47px" class="cls_011"><span class="cls_011">parameters, such as </span><span class="cls_021">LABEL</span><span class="cls_011"> and </span><span class="cls_021">ENV</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:101.00px;top:127.19px" class="cls_026"><span class="cls_026">LABEL version="2.0" \</span></div>
<div style="position:absolute;left:129.80px;top:139.18px" class="cls_026"><span class="cls_026">description="This is an example container image" \</span></div>
<div style="position:absolute;left:129.80px;top:151.18px" class="cls_026"><span class="cls_026">creationDate="01-09-2017"</span></div>
<div style="position:absolute;left:101.00px;top:185.18px" class="cls_026"><span class="cls_026">ENV MYSQL_ROOT_PASSWORD="my_password" \</span></div>
<div style="position:absolute;left:120.20px;top:197.18px" class="cls_026"><span class="cls_026">MYSQL_DATABASE "my_database"</span></div>
<div style="position:absolute;left:90.00px;top:225.74px" class="cls_024"><span class="cls_024">Building Images with Podman</span></div>
<div style="position:absolute;left:90.00px;top:250.46px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">podman build</span><span class="cls_011"> command processes the </span><span class="cls_021">Dockerfile</span><span class="cls_011"> and builds a new image based on the</span></div>
<div style="position:absolute;left:90.00px;top:262.46px" class="cls_011"><span class="cls_011">instructions it contains. The syntax for this command is as follows:</span></div>
<div style="position:absolute;left:101.00px;top:290.17px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">podman build -t </span><span class="cls_040">NAME:TAG</span><span class="cls_027"> </span><span class="cls_040">DIR</span></div>
<div style="position:absolute;left:90.00px;top:317.95px" class="cls_011"><span class="cls_011">DIR is the path to the working directory, which must include the </span><span class="cls_021">Dockerfile</span><span class="cls_011">. It can be the current</span></div>
<div style="position:absolute;left:90.00px;top:329.95px" class="cls_011"><span class="cls_011">directory as designated by a dot (.) if the working directory is the current directory. NAME:TAG is</span></div>
<div style="position:absolute;left:90.00px;top:341.95px" class="cls_011"><span class="cls_011">a name with a tag given to the new image. If TAG is not specified, then the image is automatically</span></div>
<div style="position:absolute;left:90.00px;top:353.95px" class="cls_011"><span class="cls_011">tagged as </span><span class="cls_021">latest</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:126.00px;top:384.97px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:126.00px;top:399.29px" class="cls_022"><span class="cls_022">Dockerfile Reference Guide</span></div>
<div style="position:absolute;left:126.00px;top:411.34px" class="cls_033"><span class="cls_033"> </span><A HREF="https://docs.docker.com/engine/reference/builder/">https://docs.docker.com/engine/reference/builder/</A> </div>
<div style="position:absolute;left:126.00px;top:432.78px" class="cls_022"><span class="cls_022">Creating base images</span></div>
<div style="position:absolute;left:126.00px;top:444.84px" class="cls_033"><span class="cls_033"> </span><A HREF="https://docs.docker.com/engine/userguide/eng-image/baseimages/">https://docs.docker.com/engine/userguide/eng-image/baseimages/</A> </div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">120</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:110676px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background139.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Creating a Basic Apache Container Image</span></div>
<div style="position:absolute;left:120.00px;top:137.59px" class="cls_011"><span class="cls_011">In this exercise, you will create a basic Apache container image.</span></div>
<div style="position:absolute;left:120.00px;top:160.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:120.00px;top:178.59px" class="cls_011"><span class="cls_011">You should be able to create a custom Apache container image built on a Red Hat</span></div>
<div style="position:absolute;left:120.00px;top:190.59px" class="cls_011"><span class="cls_011">Enterprise Linux 7.5 image.</span></div>
<div style="position:absolute;left:120.00px;top:213.65px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:120.00px;top:231.58px" class="cls_011"><span class="cls_011">Run the following command to download the relevant lab files and to verify that Docker is</span></div>
<div style="position:absolute;left:120.00px;top:243.58px" class="cls_011"><span class="cls_011">running:</span></div>
<div style="position:absolute;left:119.00px;top:271.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab dockerfile-create start</span></div>
<div style="position:absolute;left:119.41px;top:324.19px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:137.00px;top:324.25px" class="cls_011"><span class="cls_011">Create the Apache Dockerfile</span></div>
<div style="position:absolute;left:137.00px;top:347.27px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:161.70px;top:347.27px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011">. Use your preferred editor and create a new</span></div>
<div style="position:absolute;left:161.70px;top:359.27px" class="cls_011"><span class="cls_011">Dockerfile:</span></div>
<div style="position:absolute;left:119.00px;top:386.99px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">vim /home/student/DO180/labs/dockerfile-create/Dockerfile</span></div>
<div style="position:absolute;left:137.00px;top:416.29px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:161.70px;top:416.29px" class="cls_011"><span class="cls_011">Use UBI 7.7 as a base image by adding the following </span><span class="cls_021">FROM</span><span class="cls_011"> instruction at the top of</span></div>
<div style="position:absolute;left:161.70px;top:428.29px" class="cls_011"><span class="cls_011">the new Dockerfile:</span></div>
<div style="position:absolute;left:119.00px;top:456.01px" class="cls_026"><span class="cls_026">FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:137.00px;top:485.31px" class="cls_011"><span class="cls_011">1.3.</span></div>
<div style="position:absolute;left:161.70px;top:485.31px" class="cls_011"><span class="cls_011">Below the </span><span class="cls_021">FROM</span><span class="cls_011"> instruction, include the </span><span class="cls_021">MAINTAINER</span><span class="cls_011"> instruction to set the </span><span class="cls_021">Author</span></div>
<div style="position:absolute;left:161.70px;top:497.31px" class="cls_011"><span class="cls_011">field in the new image. Replace the values to include your name and email address:</span></div>
<div style="position:absolute;left:119.00px;top:525.03px" class="cls_026"><span class="cls_026">MAINTAINER </span><span class="cls_029">Your Name</span><span class="cls_026"> &lt;</span><span class="cls_029">youremail</span><span class="cls_026">></span></div>
<div style="position:absolute;left:137.00px;top:554.33px" class="cls_011"><span class="cls_011">1.4.</span></div>
<div style="position:absolute;left:161.70px;top:554.33px" class="cls_011"><span class="cls_011">Below the </span><span class="cls_021">MAINTAINER</span><span class="cls_011"> instruction, add the following </span><span class="cls_021">LABEL</span><span class="cls_011"> instruction to add</span></div>
<div style="position:absolute;left:161.70px;top:566.33px" class="cls_011"><span class="cls_011">description metadata to the new image:</span></div>
<div style="position:absolute;left:119.00px;top:594.05px" class="cls_026"><span class="cls_026">LABEL description="A custom Apache container based on UBI 7"</span></div>
<div style="position:absolute;left:137.00px;top:623.36px" class="cls_011"><span class="cls_011">1.5.</span></div>
<div style="position:absolute;left:161.70px;top:623.36px" class="cls_011"><span class="cls_011">Add a </span><span class="cls_021">RUN</span><span class="cls_011"> instruction with a </span><span class="cls_021">yum install</span><span class="cls_011"> command to install Apache on the new</span></div>
<div style="position:absolute;left:161.70px;top:635.35px" class="cls_011"><span class="cls_011">container:</span></div>
<div style="position:absolute;left:119.00px;top:663.07px" class="cls_026"><span class="cls_026">RUN yum install -y httpd && \</span></div>
<div style="position:absolute;left:138.20px;top:675.07px" class="cls_026"><span class="cls_026">yum clean all</span></div>
<div style="position:absolute;left:137.00px;top:704.37px" class="cls_011"><span class="cls_011">1.6.</span></div>
<div style="position:absolute;left:161.70px;top:704.37px" class="cls_011"><span class="cls_011">Add a </span><span class="cls_021">RUN</span><span class="cls_011"> instruction to replace contents of the default HTTPD home page:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.01px;top:751.59px" class="cls_013"><span class="cls_013">121</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:111478px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background140.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">RUN echo "Hello from Dockerfile" > /var/www/html/index.html</span></div>
<div style="position:absolute;left:119.00px;top:92.02px" class="cls_011"><span class="cls_011">1.7.</span></div>
<div style="position:absolute;left:143.70px;top:92.02px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">EXPOSE</span><span class="cls_011"> instruction below the </span><span class="cls_021">RUN</span><span class="cls_011"> instruction to document the port that the</span></div>
<div style="position:absolute;left:143.70px;top:104.01px" class="cls_011"><span class="cls_011">container listens to at runtime. In this instance, set the port to 80, because it is the</span></div>
<div style="position:absolute;left:143.70px;top:116.01px" class="cls_011"><span class="cls_011">default for an Apache server:</span></div>
<div style="position:absolute;left:101.00px;top:143.73px" class="cls_026"><span class="cls_026">EXPOSE 80</span></div>
<div style="position:absolute;left:126.00px;top:182.58px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:196.95px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">EXPOSE</span><span class="cls_011"> instruction does not actually make the specified port available to the</span></div>
<div style="position:absolute;left:126.00px;top:208.95px" class="cls_011"><span class="cls_011">host; rather, the instruction serves as metadata about which ports the container is</span></div>
<div style="position:absolute;left:126.00px;top:220.95px" class="cls_011"><span class="cls_011">listening on.</span></div>
<div style="position:absolute;left:119.00px;top:253.89px" class="cls_011"><span class="cls_011">1.8.</span></div>
<div style="position:absolute;left:143.70px;top:253.89px" class="cls_011"><span class="cls_011">At the end of the file, use the following </span><span class="cls_021">CMD</span><span class="cls_011"> instruction to set </span><span class="cls_021">httpd</span><span class="cls_011"> as the default</span></div>
<div style="position:absolute;left:143.70px;top:265.89px" class="cls_011"><span class="cls_011">entry point:</span></div>
<div style="position:absolute;left:101.00px;top:293.60px" class="cls_026"><span class="cls_026">CMD ["httpd", "-D", "FOREGROUND"]</span></div>
<div style="position:absolute;left:119.00px;top:323.93px" class="cls_011"><span class="cls_011">1.9.</span></div>
<div style="position:absolute;left:143.70px;top:323.93px" class="cls_011"><span class="cls_011">Verify that your Dockerfile matches the following before saving and proceeding with</span></div>
<div style="position:absolute;left:143.70px;top:335.92px" class="cls_011"><span class="cls_011">the next steps:</span></div>
<div style="position:absolute;left:101.00px;top:363.64px" class="cls_026"><span class="cls_026">FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:101.00px;top:387.64px" class="cls_026"><span class="cls_026">MAINTAINER </span><span class="cls_029">Your Name</span><span class="cls_026"> &lt;</span><span class="cls_029">youremail</span><span class="cls_026">></span></div>
<div style="position:absolute;left:101.00px;top:411.63px" class="cls_026"><span class="cls_026">LABEL description="A custom Apache container based on UBI 7"</span></div>
<div style="position:absolute;left:101.00px;top:435.63px" class="cls_026"><span class="cls_026">RUN yum install -y httpd && \</span></div>
<div style="position:absolute;left:120.20px;top:447.63px" class="cls_026"><span class="cls_026">yum clean all</span></div>
<div style="position:absolute;left:101.00px;top:471.62px" class="cls_026"><span class="cls_026">RUN echo "Hello from Dockerfile" > /var/www/html/index.html</span></div>
<div style="position:absolute;left:101.00px;top:495.62px" class="cls_026"><span class="cls_026">EXPOSE 80</span></div>
<div style="position:absolute;left:101.00px;top:519.62px" class="cls_026"><span class="cls_026">CMD ["httpd", "-D", "FOREGROUND"]</span></div>
<div style="position:absolute;left:101.41px;top:549.84px" class="cls_022"><span class="cls_022">2.</span><span class="cls_011">   Build and verify the Apache container image.</span></div>
<div style="position:absolute;left:119.00px;top:573.94px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:143.70px;top:573.94px" class="cls_011"><span class="cls_011">Use the following commands to create a basic Apache container image using the</span></div>
<div style="position:absolute;left:143.70px;top:585.94px" class="cls_011"><span class="cls_011">newly created Dockerfile:</span></div>
<div style="position:absolute;left:101.00px;top:613.65px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd /home/student/DO180/labs/dockerfile-create</span></div>
<div style="position:absolute;left:101.00px;top:625.65px" class="cls_026"><span class="cls_026">[student@workstation dockerfile-create]$ </span><span class="cls_027">sudo podman build --layers=false \</span></div>
<div style="position:absolute;left:101.00px;top:637.65px" class="cls_027"><span class="cls_027">> -t do180/apache .</span></div>
<div style="position:absolute;left:101.00px;top:649.65px" class="cls_026"><span class="cls_026">STEP 1: FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:101.00px;top:661.64px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:101.00px;top:673.64px" class="cls_026"><span class="cls_026">Copying blob sha256:</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:685.64px" class="cls_026"><span class="cls_026">71.46 MB / 71.46 MB [=====================================================] 18s</span></div>
<div style="position:absolute;left:101.00px;top:697.64px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">122</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:112280px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background141.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:119.00px;top:53.69px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:119.00px;top:65.69px" class="cls_026"><span class="cls_026">STEP 2: MAINTAINER Your Name &lt;youremail></span></div>
<div style="position:absolute;left:119.00px;top:77.69px" class="cls_026"><span class="cls_026">STEP 3: LABEL description="A custom Apache container based on UBI 7"</span></div>
<div style="position:absolute;left:119.00px;top:89.69px" class="cls_026"><span class="cls_026">STEP 4: RUN yum install -y httpd &&</span></div>
<div style="position:absolute;left:311.00px;top:89.69px" class="cls_026"><span class="cls_026">yum clean all</span></div>
<div style="position:absolute;left:119.00px;top:101.69px" class="cls_026"><span class="cls_026">Loaded plugins: ovl, product-id, search-disabled-repos, subscription-manager</span></div>
<div style="position:absolute;left:119.00px;top:113.68px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:125.68px" class="cls_026"><span class="cls_026">STEP 5: RUN echo "Hello from Dockerfile" > /var/www/html/index.html</span></div>
<div style="position:absolute;left:119.00px;top:137.68px" class="cls_026"><span class="cls_026">STEP 6: EXPOSE 80</span></div>
<div style="position:absolute;left:119.00px;top:149.68px" class="cls_026"><span class="cls_026">STEP 7: CMD ["httpd", "-D", "FOREGROUND"]</span></div>
<div style="position:absolute;left:119.00px;top:161.68px" class="cls_026"><span class="cls_026">STEP 8: COMMIT </span><span class="cls_029">...output omitted...</span><span class="cls_026"> localhost/do180/apache:latest</span></div>
<div style="position:absolute;left:119.00px;top:173.68px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:119.00px;top:185.67px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:197.67px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:119.00px;top:209.67px" class="cls_026"><span class="cls_026">b49375fa8ee1e549dc1b72742532f01c13e0ad5b4a82bb088e5befbe59377bcf</span></div>
<div style="position:absolute;left:182.60px;top:239.35px" class="cls_011"><span class="cls_011">The container image listed in the </span><span class="cls_021">FROM</span><span class="cls_011"> instruction is only downloaded if not</span></div>
<div style="position:absolute;left:182.60px;top:251.35px" class="cls_011"><span class="cls_011">already present in local storage.</span></div>
<div style="position:absolute;left:144.00px;top:284.27px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:298.64px" class="cls_011"><span class="cls_011">Podman creates many anonymous intermediate images during the build process.</span></div>
<div style="position:absolute;left:144.00px;top:310.64px" class="cls_011"><span class="cls_011">They are not be listed unless </span><span class="cls_021">-a</span><span class="cls_011"> is used. Use the </span><span class="cls_021">--layers=false</span><span class="cls_011"> option of the</span></div>
<div style="position:absolute;left:144.00px;top:322.64px" class="cls_021"><span class="cls_021">build</span><span class="cls_011"> subcommand to instruct Podman to delete intermediate images.</span></div>
<div style="position:absolute;left:137.00px;top:355.94px" class="cls_011"><span class="cls_011">2.2.   After the build process has finished, run </span><span class="cls_021">podman images</span><span class="cls_011"> to see the new image in the</span></div>
<div style="position:absolute;left:161.70px;top:367.94px" class="cls_011"><span class="cls_011">image repository:</span></div>
<div style="position:absolute;left:119.00px;top:395.65px" class="cls_026"><span class="cls_026">[student@workstation dockerfile-create]$ </span><span class="cls_027">sudo podman images</span></div>
<div style="position:absolute;left:119.00px;top:407.65px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:296.60px;top:407.65px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:335.00px;top:407.65px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:402.20px;top:407.65px" class="cls_026"><span class="cls_026">CREATED</span></div>
<div style="position:absolute;left:479.00px;top:407.65px" class="cls_026"><span class="cls_026">SIZE</span></div>
<div style="position:absolute;left:119.00px;top:419.65px" class="cls_026"><span class="cls_026">localhost/do180/apache</span></div>
<div style="position:absolute;left:296.60px;top:419.65px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:335.00px;top:419.65px" class="cls_026"><span class="cls_026">b49375fa8ee1</span></div>
<div style="position:absolute;left:402.20px;top:419.65px" class="cls_026"><span class="cls_026">11 seconds ago</span></div>
<div style="position:absolute;left:479.00px;top:419.65px" class="cls_026"><span class="cls_026">247MB</span></div>
<div style="position:absolute;left:119.00px;top:431.65px" class="cls_026"><span class="cls_026">registry.access.redhat.com/ubi7/ubi</span></div>
<div style="position:absolute;left:296.60px;top:431.65px" class="cls_026"><span class="cls_026">7.7</span></div>
<div style="position:absolute;left:335.00px;top:431.65px" class="cls_026"><span class="cls_026">0355cd652bd1</span></div>
<div style="position:absolute;left:402.20px;top:431.65px" class="cls_026"><span class="cls_026">8 months ago</span></div>
<div style="position:absolute;left:479.00px;top:431.65px" class="cls_026"><span class="cls_026">215MB</span></div>
<div style="position:absolute;left:119.41px;top:461.87px" class="cls_022"><span class="cls_022">3.</span><span class="cls_011">  Run the Apache container.</span></div>
<div style="position:absolute;left:137.00px;top:486.33px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:161.70px;top:486.33px" class="cls_011"><span class="cls_011">Use the following command to run a container using the Apache image:</span></div>
<div style="position:absolute;left:119.00px;top:514.04px" class="cls_026"><span class="cls_026">[student@workstation dockerfile-create]$ </span><span class="cls_027">sudo podman run --name lab-apache \</span></div>
<div style="position:absolute;left:119.00px;top:526.04px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-d -p 10080:80 do180/apache</span></div>
<div style="position:absolute;left:119.00px;top:538.04px" class="cls_026"><span class="cls_026">fa1d1c450e8892ae085dd8bbf763edac92c41e6ffaa7ad6ec6388466809bb391</span></div>
<div style="position:absolute;left:137.00px;top:568.72px" class="cls_011"><span class="cls_011">3.2.   Run the </span><span class="cls_021">podman ps</span><span class="cls_011"> command to see the running container:</span></div>
<div style="position:absolute;left:119.00px;top:596.43px" class="cls_026"><span class="cls_026">[student@workstation dockerfile-create]$ </span><span class="cls_027">sudo podman ps</span></div>
<div style="position:absolute;left:119.00px;top:608.43px" class="cls_026"><span class="cls_026">CONTAINER ID IMAGE</span></div>
<div style="position:absolute;left:325.40px;top:608.43px" class="cls_026"><span class="cls_026">COMMAND</span></div>
<div style="position:absolute;left:407.00px;top:608.43px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:620.43px" class="cls_026"><span class="cls_026">fa1d1c450e88 localhost/do180/apache:latest httpd -D FOREGROU</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:137.00px;top:651.11px" class="cls_011"><span class="cls_011">3.3.  Use the </span><span class="cls_021">curl</span><span class="cls_011"> command to verify that the server is running:</span></div>
<div style="position:absolute;left:119.00px;top:678.83px" class="cls_026"><span class="cls_026">[student@workstation dockerfile-create]$ </span><span class="cls_027">curl 127.0.0.1:10080</span></div>
<div style="position:absolute;left:119.00px;top:690.83px" class="cls_026"><span class="cls_026">Hello from Dockerfile</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:505.09px;top:751.59px" class="cls_013"><span class="cls_013">123</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:113082px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background142.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:90.00px;top:52.04px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:73.98px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab dockerfile-create finish</span><span class="cls_011"> script to complete this lab.</span></div>
<div style="position:absolute;left:101.00px;top:101.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab dockerfile-create finish</span></div>
<div style="position:absolute;left:90.00px;top:129.47px" class="cls_011"><span class="cls_011">This concludes the guided exercise.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">124</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:113884px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background143.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_042"><span class="cls_042">Lab</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Creating Custom Container Images</span></div>
<div style="position:absolute;left:120.00px;top:139.15px" class="cls_043"><span class="cls_043">Performance Checklist</span></div>
<div style="position:absolute;left:120.00px;top:157.09px" class="cls_011"><span class="cls_011">In this lab, you will create a Dockerfile to build a custom Apache Web Server container image.</span></div>
<div style="position:absolute;left:120.00px;top:169.09px" class="cls_011"><span class="cls_011">The custom image will be based on a RHEL 7.7 UBI image and serve a custom </span><span class="cls_021">index.html</span></div>
<div style="position:absolute;left:120.00px;top:181.09px" class="cls_011"><span class="cls_011">page.</span></div>
<div style="position:absolute;left:120.00px;top:204.15px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:120.00px;top:222.08px" class="cls_011"><span class="cls_011">You should be able to create a custom Apache Web Server container that hosts static HTML</span></div>
<div style="position:absolute;left:120.00px;top:234.08px" class="cls_011"><span class="cls_011">files.</span></div>
<div style="position:absolute;left:120.00px;top:257.14px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:120.00px;top:275.08px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:119.00px;top:302.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab dockerfile-review start</span></div>
<div style="position:absolute;left:108.00px;top:357.42px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:130.00px;top:357.48px" class="cls_011"><span class="cls_011">Review the provided Dockerfile stub in the </span><span class="cls_021">/home/student/DO180/labs/dockerfile-</span></div>
<div style="position:absolute;left:130.00px;top:369.48px" class="cls_021"><span class="cls_021">review/</span><span class="cls_011"> folder. Edit the </span><span class="cls_021">Dockerfile</span><span class="cls_011"> and ensure that it meets the following specifications:</span></div>
<div style="position:absolute;left:130.00px;top:392.88px" class="cls_011"><span class="cls_011">• The base image is </span><span class="cls_021">ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:130.00px;top:416.28px" class="cls_011"><span class="cls_011">• Sets the desired author name and email ID with the </span><span class="cls_021">MAINTAINER</span><span class="cls_011"> instruction</span></div>
<div style="position:absolute;left:130.00px;top:439.68px" class="cls_011"><span class="cls_011">• Sets the environment variable </span><span class="cls_021">PORT</span><span class="cls_011"> to 8080</span></div>
<div style="position:absolute;left:130.00px;top:463.08px" class="cls_011"><span class="cls_011">• Install Apache (httpd package).</span></div>
<div style="position:absolute;left:130.00px;top:486.48px" class="cls_011"><span class="cls_011">• Change the Apache configuration file </span><span class="cls_021">/etc/httpd/conf/httpd.conf</span><span class="cls_011"> to listen to port</span></div>
<div style="position:absolute;left:139.50px;top:498.48px" class="cls_011"><span class="cls_011">8080 instead of the default port 80.</span></div>
<div style="position:absolute;left:130.00px;top:521.88px" class="cls_011"><span class="cls_011">• Change ownership of the </span><span class="cls_021">/etc/httpd/logs</span><span class="cls_011"> and </span><span class="cls_021">/run/httpd</span><span class="cls_011"> folders to user and group</span></div>
<div style="position:absolute;left:139.50px;top:533.88px" class="cls_021"><span class="cls_021">apache</span><span class="cls_011"> (UID and GID are 48).</span></div>
<div style="position:absolute;left:130.00px;top:557.28px" class="cls_011"><span class="cls_011">• So that container users know how to access the Apache Web Server, expose the value set</span></div>
<div style="position:absolute;left:139.50px;top:569.28px" class="cls_011"><span class="cls_011">in the </span><span class="cls_021">PORT</span><span class="cls_011"> environment variable.</span></div>
<div style="position:absolute;left:130.00px;top:592.68px" class="cls_011"><span class="cls_011">• Copy the contents of the </span><span class="cls_021">src/</span><span class="cls_011"> folder in the lab directory to the Apache </span><span class="cls_021">DocumentRoot</span></div>
<div style="position:absolute;left:139.50px;top:604.68px" class="cls_011"><span class="cls_011">file (</span><span class="cls_021">/var/www/html/</span><span class="cls_011">) inside the container.</span></div>
<div style="position:absolute;left:139.50px;top:626.18px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">src</span><span class="cls_011"> folder contains a single </span><span class="cls_021">index.html</span><span class="cls_011"> file that prints a </span><span class="cls_021">Hello World!</span><span class="cls_011"> message.</span></div>
<div style="position:absolute;left:130.00px;top:649.58px" class="cls_011"><span class="cls_011">• Start the Apache </span><span class="cls_021">httpd</span><span class="cls_011"> daemon in the foreground using the following command:</span></div>
<div style="position:absolute;left:119.00px;top:677.30px" class="cls_026"><span class="cls_026">httpd -D FOREGROUND</span></div>
<div style="position:absolute;left:108.00px;top:701.52px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:130.00px;top:701.58px" class="cls_011"><span class="cls_011">Build the custom Apache image with the name </span><span class="cls_021">do180/custom-apache</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:108.00px;top:719.52px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:130.00px;top:719.58px" class="cls_011"><span class="cls_011">Create a new container in detached mode with the following characteristics:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:505.18px;top:751.59px" class="cls_013"><span class="cls_013">125</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:114686px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background144.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:112.00px;top:53.98px" class="cls_011"><span class="cls_011">• Name: </span><span class="cls_021">dockerfile</span></div>
<div style="position:absolute;left:112.00px;top:75.48px" class="cls_011"><span class="cls_011">• Container image: </span><span class="cls_021">do180/custom-apache</span></div>
<div style="position:absolute;left:112.00px;top:96.98px" class="cls_011"><span class="cls_011">• Port forward: from host port 20080 to container port 8080</span></div>
<div style="position:absolute;left:112.00px;top:118.48px" class="cls_011"><span class="cls_011">• Run as a daemon: yes</span></div>
<div style="position:absolute;left:112.00px;top:139.98px" class="cls_011"><span class="cls_011">Verify that the container is ready and running.</span></div>
<div style="position:absolute;left:90.00px;top:157.92px" class="cls_022"><span class="cls_022">4.</span></div>
<div style="position:absolute;left:112.00px;top:157.98px" class="cls_011"><span class="cls_011">Verify that the server is serving the HTML file.</span></div>
<div style="position:absolute;left:90.00px;top:182.04px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:90.00px;top:203.98px" class="cls_011"><span class="cls_011">Grade your work by running the </span><span class="cls_021">lab dockerfile-review grade</span><span class="cls_011"> command from your</span></div>
<div style="position:absolute;left:90.00px;top:215.97px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011"> machine. Correct any reported failures and rerun the script until successful.</span></div>
<div style="position:absolute;left:101.00px;top:243.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab dockerfile-review grade</span></div>
<div style="position:absolute;left:90.00px;top:274.03px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:295.97px" class="cls_011"><span class="cls_011">From </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab dockerfile-review finish</span><span class="cls_011"> command to complete this</span></div>
<div style="position:absolute;left:90.00px;top:307.97px" class="cls_011"><span class="cls_011">lab.</span></div>
<div style="position:absolute;left:101.00px;top:335.68px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab dockerfile-review finish</span></div>
<div style="position:absolute;left:90.00px;top:363.46px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">126</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:115488px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background145.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_042"><span class="cls_042">Solution</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Creating Custom Container Images</span></div>
<div style="position:absolute;left:120.00px;top:139.15px" class="cls_043"><span class="cls_043">Performance Checklist</span></div>
<div style="position:absolute;left:120.00px;top:157.09px" class="cls_011"><span class="cls_011">In this lab, you will create a Dockerfile to build a custom Apache Web Server container image.</span></div>
<div style="position:absolute;left:120.00px;top:169.09px" class="cls_011"><span class="cls_011">The custom image will be based on a RHEL 7.7 UBI image and serve a custom </span><span class="cls_021">index.html</span></div>
<div style="position:absolute;left:120.00px;top:181.09px" class="cls_011"><span class="cls_011">page.</span></div>
<div style="position:absolute;left:120.00px;top:204.15px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:120.00px;top:222.08px" class="cls_011"><span class="cls_011">You should be able to create a custom Apache Web Server container that hosts static HTML</span></div>
<div style="position:absolute;left:120.00px;top:234.08px" class="cls_011"><span class="cls_011">files.</span></div>
<div style="position:absolute;left:120.00px;top:257.14px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:120.00px;top:275.08px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:119.00px;top:302.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab dockerfile-review start</span></div>
<div style="position:absolute;left:108.00px;top:357.42px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:130.00px;top:357.48px" class="cls_011"><span class="cls_011">Review the provided Dockerfile stub in the </span><span class="cls_021">/home/student/DO180/labs/dockerfile-</span></div>
<div style="position:absolute;left:130.00px;top:369.48px" class="cls_021"><span class="cls_021">review/</span><span class="cls_011"> folder. Edit the </span><span class="cls_021">Dockerfile</span><span class="cls_011"> and ensure that it meets the following specifications:</span></div>
<div style="position:absolute;left:130.00px;top:392.88px" class="cls_011"><span class="cls_011">• The base image is </span><span class="cls_021">ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:130.00px;top:416.28px" class="cls_011"><span class="cls_011">• Sets the desired author name and email ID with the </span><span class="cls_021">MAINTAINER</span><span class="cls_011"> instruction</span></div>
<div style="position:absolute;left:130.00px;top:439.68px" class="cls_011"><span class="cls_011">• Sets the environment variable </span><span class="cls_021">PORT</span><span class="cls_011"> to 8080</span></div>
<div style="position:absolute;left:130.00px;top:463.08px" class="cls_011"><span class="cls_011">• Install Apache (httpd package).</span></div>
<div style="position:absolute;left:130.00px;top:486.48px" class="cls_011"><span class="cls_011">• Change the Apache configuration file </span><span class="cls_021">/etc/httpd/conf/httpd.conf</span><span class="cls_011"> to listen to port</span></div>
<div style="position:absolute;left:139.50px;top:498.48px" class="cls_011"><span class="cls_011">8080 instead of the default port 80.</span></div>
<div style="position:absolute;left:130.00px;top:521.88px" class="cls_011"><span class="cls_011">• Change ownership of the </span><span class="cls_021">/etc/httpd/logs</span><span class="cls_011"> and </span><span class="cls_021">/run/httpd</span><span class="cls_011"> folders to user and group</span></div>
<div style="position:absolute;left:139.50px;top:533.88px" class="cls_021"><span class="cls_021">apache</span><span class="cls_011"> (UID and GID are 48).</span></div>
<div style="position:absolute;left:130.00px;top:557.28px" class="cls_011"><span class="cls_011">• So that container users know how to access the Apache Web Server, expose the value set</span></div>
<div style="position:absolute;left:139.50px;top:569.28px" class="cls_011"><span class="cls_011">in the </span><span class="cls_021">PORT</span><span class="cls_011"> environment variable.</span></div>
<div style="position:absolute;left:130.00px;top:592.68px" class="cls_011"><span class="cls_011">• Copy the contents of the </span><span class="cls_021">src/</span><span class="cls_011"> folder in the lab directory to the Apache </span><span class="cls_021">DocumentRoot</span></div>
<div style="position:absolute;left:139.50px;top:604.68px" class="cls_011"><span class="cls_011">file (</span><span class="cls_021">/var/www/html/</span><span class="cls_011">) inside the container.</span></div>
<div style="position:absolute;left:139.50px;top:626.18px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">src</span><span class="cls_011"> folder contains a single </span><span class="cls_021">index.html</span><span class="cls_011"> file that prints a </span><span class="cls_021">Hello World!</span><span class="cls_011"> message.</span></div>
<div style="position:absolute;left:130.00px;top:649.58px" class="cls_011"><span class="cls_011">• Start the Apache </span><span class="cls_021">httpd</span><span class="cls_011"> daemon in the foreground using the following command:</span></div>
<div style="position:absolute;left:119.00px;top:677.30px" class="cls_026"><span class="cls_026">httpd -D FOREGROUND</span></div>
<div style="position:absolute;left:130.00px;top:707.98px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:154.70px;top:707.98px" class="cls_011"><span class="cls_011">Use your preferred editor to modify the Dockerfile located in the </span><span class="cls_021">/home/student/</span></div>
<div style="position:absolute;left:154.70px;top:719.97px" class="cls_021"><span class="cls_021">DO180/labs/dockerfile-review/</span><span class="cls_011"> folder.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:505.17px;top:751.59px" class="cls_013"><span class="cls_013">127</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:116290px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background146.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd /home/student/DO180/labs/dockerfile-review/</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">[student@workstation dockerfile-review]$ </span><span class="cls_027">vim Dockerfile</span></div>
<div style="position:absolute;left:112.00px;top:102.03px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:136.70px;top:102.03px" class="cls_011"><span class="cls_011">Set the base image for the Dockerfile to </span><span class="cls_021">ubi7/ubi:7.7</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:101.00px;top:129.75px" class="cls_026"><span class="cls_026">FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:112.00px;top:158.08px" class="cls_011"><span class="cls_011">1.3.</span></div>
<div style="position:absolute;left:136.70px;top:158.08px" class="cls_011"><span class="cls_011">Set your name and email with a </span><span class="cls_021">MAINTAINER</span><span class="cls_011"> instruction.</span></div>
<div style="position:absolute;left:101.00px;top:185.80px" class="cls_026"><span class="cls_026">MAINTAINER Your Name &lt;youremail></span></div>
<div style="position:absolute;left:112.00px;top:214.14px" class="cls_011"><span class="cls_011">1.4.</span></div>
<div style="position:absolute;left:136.70px;top:214.14px" class="cls_011"><span class="cls_011">Create an environment variable called </span><span class="cls_021">PORT</span><span class="cls_011"> and set it to 8080.</span></div>
<div style="position:absolute;left:101.00px;top:241.85px" class="cls_026"><span class="cls_026">ENV PORT 8080</span></div>
<div style="position:absolute;left:112.00px;top:270.19px" class="cls_011"><span class="cls_011">1.5.</span></div>
<div style="position:absolute;left:136.70px;top:270.19px" class="cls_011"><span class="cls_011">Install Apache server.</span></div>
<div style="position:absolute;left:101.00px;top:297.91px" class="cls_026"><span class="cls_026">RUN yum install -y httpd && \</span></div>
<div style="position:absolute;left:120.20px;top:309.91px" class="cls_026"><span class="cls_026">yum clean all</span></div>
<div style="position:absolute;left:112.00px;top:338.24px" class="cls_011"><span class="cls_011">1.6.</span></div>
<div style="position:absolute;left:136.70px;top:338.24px" class="cls_011"><span class="cls_011">Change the Apache HTTP Server configuration file to listen to port 8080 and change</span></div>
<div style="position:absolute;left:136.70px;top:350.24px" class="cls_011"><span class="cls_011">ownership of the server working folders with a single </span><span class="cls_021">RUN</span><span class="cls_011"> instruction.</span></div>
<div style="position:absolute;left:101.00px;top:377.96px" class="cls_026"><span class="cls_026">RUN sed -ri -e "/^Listen 80/c\Listen ${PORT}" /etc/httpd/conf/httpd.conf && \</span></div>
<div style="position:absolute;left:120.20px;top:389.96px" class="cls_026"><span class="cls_026">chown -R apache:apache /etc/httpd/logs/ && \</span></div>
<div style="position:absolute;left:120.20px;top:401.95px" class="cls_026"><span class="cls_026">chown -R apache:apache /run/httpd/</span></div>
<div style="position:absolute;left:112.00px;top:430.29px" class="cls_011"><span class="cls_011">1.7.</span></div>
<div style="position:absolute;left:136.70px;top:430.29px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">USER</span><span class="cls_011"> instruction to run the container as the </span><span class="cls_021">apache</span><span class="cls_011"> user. Use the </span><span class="cls_021">EXPOSE</span></div>
<div style="position:absolute;left:136.70px;top:442.29px" class="cls_011"><span class="cls_011">instruction to document the port that the container listens to at runtime. In this</span></div>
<div style="position:absolute;left:136.70px;top:454.29px" class="cls_011"><span class="cls_011">instance, set the port to the </span><span class="cls_021">PORT</span><span class="cls_011"> environment variable, which is the default for an</span></div>
<div style="position:absolute;left:136.70px;top:466.29px" class="cls_011"><span class="cls_011">Apache server.</span></div>
<div style="position:absolute;left:101.00px;top:494.00px" class="cls_026"><span class="cls_026">USER apache</span></div>
<div style="position:absolute;left:101.00px;top:518.00px" class="cls_026"><span class="cls_026"># Expose the custom port that you provided in the ENV var</span></div>
<div style="position:absolute;left:101.00px;top:530.00px" class="cls_026"><span class="cls_026">EXPOSE ${PORT}</span></div>
<div style="position:absolute;left:112.00px;top:558.33px" class="cls_011"><span class="cls_011">1.8.</span></div>
<div style="position:absolute;left:136.70px;top:558.33px" class="cls_011"><span class="cls_011">Copy all the files from the </span><span class="cls_021">src</span><span class="cls_011"> folder to the Apache </span><span class="cls_021">DocumentRoot</span><span class="cls_011"> path at </span><span class="cls_021">/var/</span></div>
<div style="position:absolute;left:136.70px;top:570.33px" class="cls_021"><span class="cls_021">www/html</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:101.00px;top:598.05px" class="cls_026"><span class="cls_026"># Copy all files under src/ folder to Apache DocumentRoot (/var/www/html)</span></div>
<div style="position:absolute;left:101.00px;top:610.05px" class="cls_026"><span class="cls_026">COPY ./src/ /var/www/html/</span></div>
<div style="position:absolute;left:112.00px;top:638.38px" class="cls_011"><span class="cls_011">1.9.</span></div>
<div style="position:absolute;left:136.70px;top:638.38px" class="cls_011"><span class="cls_011">Finally, insert a </span><span class="cls_021">CMD</span><span class="cls_011"> instruction to run </span><span class="cls_021">httpd</span><span class="cls_011"> in the foreground, and then save the</span></div>
<div style="position:absolute;left:136.70px;top:650.38px" class="cls_011"><span class="cls_011">Dockerfile.</span></div>
<div style="position:absolute;left:101.00px;top:678.10px" class="cls_026"><span class="cls_026"># Start Apache in the foreground</span></div>
<div style="position:absolute;left:101.00px;top:690.10px" class="cls_026"><span class="cls_026">CMD ["httpd", "-D", "FOREGROUND"]</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">128</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:117092px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background147.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:108.00px;top:53.92px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:130.00px;top:53.98px" class="cls_011"><span class="cls_011">Build the custom Apache image with the name </span><span class="cls_021">do180/custom-apache</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:130.00px;top:78.38px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:154.70px;top:78.38px" class="cls_011"><span class="cls_011">Verify the Dockerfile for the custom Apache image.</span></div>
<div style="position:absolute;left:154.70px;top:94.37px" class="cls_011"><span class="cls_011">The Dockerfile for the custom Apache image should look like the following:</span></div>
<div style="position:absolute;left:119.00px;top:122.09px" class="cls_026"><span class="cls_026">FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:119.00px;top:146.09px" class="cls_026"><span class="cls_026">MAINTAINER Your Name &lt;youremail></span></div>
<div style="position:absolute;left:119.00px;top:170.08px" class="cls_026"><span class="cls_026">ENV PORT 8080</span></div>
<div style="position:absolute;left:119.00px;top:194.08px" class="cls_026"><span class="cls_026">RUN yum install -y httpd && \</span></div>
<div style="position:absolute;left:138.20px;top:206.08px" class="cls_026"><span class="cls_026">yum clean all</span></div>
<div style="position:absolute;left:119.00px;top:230.07px" class="cls_026"><span class="cls_026">RUN sed -ri -e "/^Listen 80/c\Listen ${PORT}" /etc/httpd/conf/httpd.conf && \</span></div>
<div style="position:absolute;left:138.20px;top:242.07px" class="cls_026"><span class="cls_026">chown -R apache:apache /etc/httpd/logs/ && \</span></div>
<div style="position:absolute;left:138.20px;top:254.07px" class="cls_026"><span class="cls_026">chown -R apache:apache /run/httpd/</span></div>
<div style="position:absolute;left:119.00px;top:278.07px" class="cls_026"><span class="cls_026">USER apache</span></div>
<div style="position:absolute;left:119.00px;top:302.06px" class="cls_026"><span class="cls_026"># Expose the custom port that you provided in the ENV var</span></div>
<div style="position:absolute;left:119.00px;top:314.06px" class="cls_026"><span class="cls_026">EXPOSE ${PORT}</span></div>
<div style="position:absolute;left:119.00px;top:338.05px" class="cls_026"><span class="cls_026"># Copy all files under src/ folder to Apache DocumentRoot (/var/www/html)</span></div>
<div style="position:absolute;left:119.00px;top:350.05px" class="cls_026"><span class="cls_026">COPY ./src/ /var/www/html/</span></div>
<div style="position:absolute;left:119.00px;top:374.05px" class="cls_026"><span class="cls_026"># Start Apache in the foreground</span></div>
<div style="position:absolute;left:119.00px;top:386.05px" class="cls_026"><span class="cls_026">CMD ["httpd", "-D", "FOREGROUND"]</span></div>
<div style="position:absolute;left:130.00px;top:416.73px" class="cls_011"><span class="cls_011">2.2.   Run a </span><span class="cls_021">sudo podman build</span><span class="cls_011"> command to build the custom Apache image and name it</span></div>
<div style="position:absolute;left:154.70px;top:428.72px" class="cls_021"><span class="cls_021">do180/custom-apache</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:456.44px" class="cls_026"><span class="cls_026">[student@workstation dockerfile-review]$ </span><span class="cls_027">sudo podman build --layers=false \</span></div>
<div style="position:absolute;left:119.00px;top:468.44px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-t do180/custom-apache .</span></div>
<div style="position:absolute;left:119.00px;top:480.44px" class="cls_026"><span class="cls_026">STEP 1: FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:119.00px;top:492.43px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:504.43px" class="cls_026"><span class="cls_026">STEP 2: MAINTAINER username &lt;username@example.com></span></div>
<div style="position:absolute;left:119.00px;top:516.43px" class="cls_026"><span class="cls_026">STEP 3: ENV PORT 8080</span></div>
<div style="position:absolute;left:119.00px;top:528.43px" class="cls_026"><span class="cls_026">STEP 4: RUN yum install -y httpd &&</span></div>
<div style="position:absolute;left:311.00px;top:528.43px" class="cls_026"><span class="cls_026">yum clean all</span></div>
<div style="position:absolute;left:119.00px;top:540.43px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:552.42px" class="cls_026"><span class="cls_026">STEP 5: RUN sed -ri -e "/^Listen 80/c\Listen ${PORT}" /etc/httpd/conf/httpd.conf</span></div>
<div style="position:absolute;left:123.80px;top:564.42px" class="cls_026"><span class="cls_026">&&</span></div>
<div style="position:absolute;left:157.40px;top:564.42px" class="cls_026"><span class="cls_026">chown -R apache:apache /etc/httpd/logs/ &&</span></div>
<div style="position:absolute;left:383.00px;top:564.42px" class="cls_026"><span class="cls_026">chown -R apache:apache /</span></div>
<div style="position:absolute;left:119.00px;top:576.42px" class="cls_026"><span class="cls_026">run/httpd/</span></div>
<div style="position:absolute;left:119.00px;top:588.42px" class="cls_026"><span class="cls_026">STEP 6: USER apache</span></div>
<div style="position:absolute;left:119.00px;top:600.42px" class="cls_026"><span class="cls_026">STEP 7: EXPOSE ${PORT}</span></div>
<div style="position:absolute;left:119.00px;top:612.41px" class="cls_026"><span class="cls_026">STEP 8: COPY ./src/ /var/www/html/</span></div>
<div style="position:absolute;left:119.00px;top:624.41px" class="cls_026"><span class="cls_026">STEP 9: CMD ["httpd", "-D", "FOREGROUND"]</span></div>
<div style="position:absolute;left:119.00px;top:636.41px" class="cls_026"><span class="cls_026">STEP 10: COMMIT </span><span class="cls_029">...output omitted...</span><span class="cls_026"> localhost/do180/custom-apache:latest</span></div>
<div style="position:absolute;left:119.00px;top:648.41px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:130.00px;top:679.09px" class="cls_011"><span class="cls_011">2.3.   Run the </span><span class="cls_021">podman images</span><span class="cls_011"> command to verify that the custom image is built</span></div>
<div style="position:absolute;left:154.70px;top:691.09px" class="cls_011"><span class="cls_011">successfully.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.97px;top:751.59px" class="cls_013"><span class="cls_013">129</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:117894px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background148.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation dockerfile-review]$ </span><span class="cls_027">sudo podman images</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:321.80px;top:73.69px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:365.00px;top:73.69px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:101.00px;top:85.69px" class="cls_026"><span class="cls_026">locahost/do180/custom-apache</span></div>
<div style="position:absolute;left:321.80px;top:85.69px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:365.00px;top:85.69px" class="cls_026"><span class="cls_026">da92b9426325  ...</span></div>
<div style="position:absolute;left:101.00px;top:97.69px" class="cls_026"><span class="cls_026">registry.access.redhat.com/ubi7/ubi</span></div>
<div style="position:absolute;left:321.80px;top:97.69px" class="cls_026"><span class="cls_026">7.7</span></div>
<div style="position:absolute;left:365.00px;top:97.69px" class="cls_026"><span class="cls_026">6fecccc91c83  ...</span></div>
<div style="position:absolute;left:90.00px;top:127.31px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:112.00px;top:127.37px" class="cls_011"><span class="cls_011">Create a new container in detached mode with the following characteristics:</span></div>
<div style="position:absolute;left:112.00px;top:150.77px" class="cls_011"><span class="cls_011">• Name: </span><span class="cls_021">dockerfile</span></div>
<div style="position:absolute;left:112.00px;top:174.17px" class="cls_011"><span class="cls_011">• Container image: </span><span class="cls_021">do180/custom-apache</span></div>
<div style="position:absolute;left:112.00px;top:197.57px" class="cls_011"><span class="cls_011">• Port forward: from host port 20080 to container port 8080</span></div>
<div style="position:absolute;left:112.00px;top:220.97px" class="cls_011"><span class="cls_011">• Run as a daemon: yes</span></div>
<div style="position:absolute;left:112.00px;top:244.37px" class="cls_011"><span class="cls_011">Verify that the container is ready and running.</span></div>
<div style="position:absolute;left:112.00px;top:268.77px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:136.70px;top:268.77px" class="cls_011"><span class="cls_011">Create and run the container.</span></div>
<div style="position:absolute;left:101.00px;top:296.48px" class="cls_026"><span class="cls_026">[student@workstation dockerfile-review]$ </span><span class="cls_027">sudo podman run -d \</span></div>
<div style="position:absolute;left:101.00px;top:308.48px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--name dockerfile -p 20080:8080 do180/custom-apache</span></div>
<div style="position:absolute;left:101.00px;top:320.48px" class="cls_026"><span class="cls_026">367823e35c4a...</span></div>
<div style="position:absolute;left:112.00px;top:351.16px" class="cls_011"><span class="cls_011">3.2.   Verify that the container is ready and running.</span></div>
<div style="position:absolute;left:101.00px;top:378.88px" class="cls_026"><span class="cls_026">[student@workstation dockerfile-review]$ </span><span class="cls_027">sudo podman ps</span></div>
<div style="position:absolute;left:101.00px;top:390.88px" class="cls_026"><span class="cls_026">... IMAGE</span></div>
<div style="position:absolute;left:197.00px;top:390.88px" class="cls_026"><span class="cls_026">COMMAND</span></div>
<div style="position:absolute;left:269.00px;top:390.88px" class="cls_026"><span class="cls_026">... PORTS</span></div>
<div style="position:absolute;left:408.20px;top:390.88px" class="cls_026"><span class="cls_026">NAMES</span></div>
<div style="position:absolute;left:101.00px;top:402.87px" class="cls_026"><span class="cls_026">... do180/custom... "httpd -D ..." ... 0.0.0.0:20080->8080/tcp</span></div>
<div style="position:absolute;left:408.20px;top:402.87px" class="cls_026"><span class="cls_026">dockerfile</span></div>
<div style="position:absolute;left:90.00px;top:432.49px" class="cls_022"><span class="cls_022">4.</span></div>
<div style="position:absolute;left:112.00px;top:432.55px" class="cls_011"><span class="cls_011">Verify that the server is serving the HTML file.</span></div>
<div style="position:absolute;left:112.00px;top:448.55px" class="cls_011"><span class="cls_011">Run a </span><span class="cls_021">curl</span><span class="cls_011"> command on </span><span class="cls_021">127.0.0.1:20080</span></div>
<div style="position:absolute;left:101.00px;top:476.27px" class="cls_026"><span class="cls_026">[student@workstation dockerfile-review]$ </span><span class="cls_027">curl 127.0.0.1:20080</span></div>
<div style="position:absolute;left:112.00px;top:498.55px" class="cls_011"><span class="cls_011">The output should be as follows:</span></div>
<div style="position:absolute;left:101.00px;top:526.27px" class="cls_026"><span class="cls_026">&lt;html></span></div>
<div style="position:absolute;left:105.80px;top:538.27px" class="cls_026"><span class="cls_026">&lt;header>&lt;title>DO180 Hello!&lt;/title>&lt;/header></span></div>
<div style="position:absolute;left:105.80px;top:550.27px" class="cls_026"><span class="cls_026">&lt;body></span></div>
<div style="position:absolute;left:115.40px;top:562.27px" class="cls_026"><span class="cls_026">Hello World! The dockerfile-review lab works!</span></div>
<div style="position:absolute;left:105.80px;top:574.27px" class="cls_026"><span class="cls_026">&lt;/body></span></div>
<div style="position:absolute;left:101.00px;top:586.27px" class="cls_026"><span class="cls_026">&lt;/html></span></div>
<div style="position:absolute;left:90.00px;top:616.62px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:90.00px;top:638.55px" class="cls_011"><span class="cls_011">Grade your work by running the </span><span class="cls_021">lab dockerfile-review grade</span><span class="cls_011"> command from your</span></div>
<div style="position:absolute;left:90.00px;top:650.55px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011"> machine. Correct any reported failures and rerun the script until successful.</span></div>
<div style="position:absolute;left:101.00px;top:678.27px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab dockerfile-review grade</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">130</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:118696px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background149.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:108.00px;top:52.04px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:108.00px;top:73.98px" class="cls_011"><span class="cls_011">From </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab dockerfile-review finish</span><span class="cls_011"> command to complete this</span></div>
<div style="position:absolute;left:108.00px;top:85.97px" class="cls_011"><span class="cls_011">lab.</span></div>
<div style="position:absolute;left:119.00px;top:113.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab dockerfile-review finish</span></div>
<div style="position:absolute;left:108.00px;top:141.47px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:506.69px;top:751.59px" class="cls_013"><span class="cls_013">131</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:119498px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background150.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 5 |</span><span class="cls_019"> Creating Custom Container Images</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Summary</span></div>
<div style="position:absolute;left:90.00px;top:135.98px" class="cls_011"><span class="cls_011">In this chapter, you learned:</span></div>
<div style="position:absolute;left:90.00px;top:157.47px" class="cls_011"><span class="cls_011">• A </span><span class="cls_021">Dockerfile</span><span class="cls_011"> contains instructions that specify how to construct a container image.</span></div>
<div style="position:absolute;left:90.00px;top:178.97px" class="cls_011"><span class="cls_011">• Container images provided by Red Hat Container Catalog or Quay.io are a good starting point</span></div>
<div style="position:absolute;left:99.50px;top:190.97px" class="cls_011"><span class="cls_011">for creating custom images for a specific language or technology.</span></div>
<div style="position:absolute;left:90.00px;top:212.47px" class="cls_011"><span class="cls_011">• Building an image from a Dockerfile is a three-step process:</span></div>
<div style="position:absolute;left:99.50px;top:233.97px" class="cls_011"><span class="cls_011">1.</span></div>
<div style="position:absolute;left:118.50px;top:233.97px" class="cls_011"><span class="cls_011">Create a working directory.</span></div>
<div style="position:absolute;left:99.50px;top:255.46px" class="cls_011"><span class="cls_011">2.</span></div>
<div style="position:absolute;left:118.50px;top:255.46px" class="cls_011"><span class="cls_011">Specify the build instructions in a </span><span class="cls_021">Dockerfile</span><span class="cls_011"> file.</span></div>
<div style="position:absolute;left:99.50px;top:276.96px" class="cls_011"><span class="cls_011">3.</span></div>
<div style="position:absolute;left:118.50px;top:276.96px" class="cls_011"><span class="cls_011">Build the image with the </span><span class="cls_021">podman build</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:90.00px;top:298.46px" class="cls_011"><span class="cls_011">• The Source-to-Image (S2I) process provides an alternative to Dockerfiles. S2I implements</span></div>
<div style="position:absolute;left:99.50px;top:310.46px" class="cls_011"><span class="cls_011">a standardized container image build process for common technologies from application</span></div>
<div style="position:absolute;left:99.50px;top:322.46px" class="cls_011"><span class="cls_011">source code. This allows developers to focus on application development and not Dockerfile</span></div>
<div style="position:absolute;left:99.50px;top:334.45px" class="cls_011"><span class="cls_011">development.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">132</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:120300px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background151.jpg" width=612 height=792></div>
<div style="position:absolute;left:126.00px;top:69.76px" class="cls_030"><span class="cls_030">Chapter 6</span></div>
<div style="position:absolute;left:126.00px;top:148.50px" class="cls_031"><span class="cls_031">Deploying Containerized</span></div>
<div style="position:absolute;left:126.00px;top:175.50px" class="cls_031"><span class="cls_031">Applications on OpenShift</span></div>
<div style="position:absolute;left:146.00px;top:228.67px" class="cls_018"><span class="cls_018">Goal</span></div>
<div style="position:absolute;left:252.88px;top:228.01px" class="cls_008"><span class="cls_008">Deploy single container applications on OpenShift</span></div>
<div style="position:absolute;left:252.88px;top:240.01px" class="cls_008"><span class="cls_008">Container Platform.</span></div>
<div style="position:absolute;left:146.00px;top:268.67px" class="cls_018"><span class="cls_018">Objectives</span></div>
<div style="position:absolute;left:252.88px;top:268.01px" class="cls_008"><span class="cls_008">•  Describe the architecture of Kubernetes and</span></div>
<div style="position:absolute;left:267.88px;top:280.01px" class="cls_008"><span class="cls_008">Red Hat OpenShift Container Platform.</span></div>
<div style="position:absolute;left:252.88px;top:296.01px" class="cls_008"><span class="cls_008">•  Create standard Kubernetes resources.</span></div>
<div style="position:absolute;left:252.88px;top:312.01px" class="cls_008"><span class="cls_008">•  Create a route to a service.</span></div>
<div style="position:absolute;left:252.88px;top:328.01px" class="cls_008"><span class="cls_008">•  Build an application using the Source-to-Image</span></div>
<div style="position:absolute;left:267.88px;top:340.01px" class="cls_008"><span class="cls_008">facility of OpenShift Container Platform.</span></div>
<div style="position:absolute;left:252.88px;top:356.01px" class="cls_008"><span class="cls_008">•  Create an application using the OpenShift web</span></div>
<div style="position:absolute;left:267.88px;top:368.01px" class="cls_008"><span class="cls_008">console.</span></div>
<div style="position:absolute;left:146.00px;top:396.67px" class="cls_018"><span class="cls_018">Sections</span></div>
<div style="position:absolute;left:252.88px;top:396.01px" class="cls_008"><span class="cls_008">•  Describing Kubernetes and OpenShift</span></div>
<div style="position:absolute;left:267.88px;top:408.01px" class="cls_008"><span class="cls_008">Architecture (and Quiz)</span></div>
<div style="position:absolute;left:252.88px;top:424.01px" class="cls_008"><span class="cls_008">•  Creating Kubernetes Resources (and Guided</span></div>
<div style="position:absolute;left:267.88px;top:436.01px" class="cls_008"><span class="cls_008">Exercise)</span></div>
<div style="position:absolute;left:252.88px;top:452.01px" class="cls_008"><span class="cls_008">•  Creating Routes (and Guided Exercise)</span></div>
<div style="position:absolute;left:252.88px;top:468.01px" class="cls_008"><span class="cls_008">•  Creating Applications with the Source-to-</span></div>
<div style="position:absolute;left:267.88px;top:480.01px" class="cls_008"><span class="cls_008">Image Facility (and Guided Exercise)</span></div>
<div style="position:absolute;left:252.88px;top:496.01px" class="cls_008"><span class="cls_008">•  Creating Applications with the OpenShift Web</span></div>
<div style="position:absolute;left:267.88px;top:508.01px" class="cls_008"><span class="cls_008">Console (and Guided Exercise)</span></div>
<div style="position:absolute;left:146.00px;top:536.67px" class="cls_018"><span class="cls_018">Lab</span></div>
<div style="position:absolute;left:252.88px;top:536.01px" class="cls_008"><span class="cls_008">•  Deploying Containerized Applications on</span></div>
<div style="position:absolute;left:267.88px;top:548.01px" class="cls_008"><span class="cls_008">OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.77px;top:751.59px" class="cls_013"><span class="cls_013">133</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:121102px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background152.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:62.06px" class="cls_014"><span class="cls_014">Describing Kubernetes and OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Architecture</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to:</span></div>
<div style="position:absolute;left:90.00px;top:182.37px" class="cls_011"><span class="cls_011">• Describe the architecture of a Kubernetes cluster running on the Red Hat OpenShift Container</span></div>
<div style="position:absolute;left:99.50px;top:194.37px" class="cls_011"><span class="cls_011">Platform (RHOCP).</span></div>
<div style="position:absolute;left:90.00px;top:217.77px" class="cls_011"><span class="cls_011">• List the main resource types provided by Kubernetes and RHOCP.</span></div>
<div style="position:absolute;left:90.00px;top:241.17px" class="cls_011"><span class="cls_011">• Identify the network characteristics of containers, Kubernetes, and RHOCP.</span></div>
<div style="position:absolute;left:90.00px;top:264.57px" class="cls_011"><span class="cls_011">• List mechanisms to make a pod externally available.</span></div>
<div style="position:absolute;left:90.00px;top:286.85px" class="cls_024"><span class="cls_024">Kubernetes and OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:311.56px" class="cls_011"><span class="cls_011">In previous chapters we saw that Kubernetes is an orchestration service that simplifies the</span></div>
<div style="position:absolute;left:90.00px;top:323.56px" class="cls_011"><span class="cls_011">deployment, management, and scaling of containerized applications. One of the main advantages</span></div>
<div style="position:absolute;left:90.00px;top:335.56px" class="cls_011"><span class="cls_011">of using Kubernetes is that it uses several nodes to ensure the resiliency and scalability of its</span></div>
<div style="position:absolute;left:90.00px;top:347.56px" class="cls_011"><span class="cls_011">managed applications. Kubernetes forms a cluster of node servers that run containers and are</span></div>
<div style="position:absolute;left:90.00px;top:359.56px" class="cls_011"><span class="cls_011">centrally managed by a set of master servers. A server can act as both a server and a node, but</span></div>
<div style="position:absolute;left:90.00px;top:371.55px" class="cls_011"><span class="cls_011">those roles are usually segregated for increased stability.</span></div>
<div style="position:absolute;left:90.00px;top:397.50px" class="cls_022"><span class="cls_022">Kubernetes Terminology</span></div>
<div style="position:absolute;left:96.25px;top:423.74px" class="cls_023"><span class="cls_023">Term</span></div>
<div style="position:absolute;left:171.52px;top:423.74px" class="cls_023"><span class="cls_023">Definition</span></div>
<div style="position:absolute;left:96.25px;top:446.33px" class="cls_011"><span class="cls_011">Node</span></div>
<div style="position:absolute;left:171.52px;top:446.30px" class="cls_011"><span class="cls_011">A server that hosts applications in a Kubernetes cluster.</span></div>
<div style="position:absolute;left:96.25px;top:468.83px" class="cls_011"><span class="cls_011">Master Node</span></div>
<div style="position:absolute;left:171.52px;top:468.80px" class="cls_011"><span class="cls_011">A node server that manages the </span><span class="cls_021">control plane</span><span class="cls_011"> in a Kubernetes cluster.</span></div>
<div style="position:absolute;left:171.52px;top:480.80px" class="cls_011"><span class="cls_011">Master nodes provide basic cluster services such as APIs or controllers.</span></div>
<div style="position:absolute;left:96.25px;top:503.33px" class="cls_011"><span class="cls_011">Worker Node</span></div>
<div style="position:absolute;left:171.52px;top:503.29px" class="cls_011"><span class="cls_011">Also named </span><span class="cls_021">Compute Node</span><span class="cls_011">, worker nodes execute workloads for the cluster.</span></div>
<div style="position:absolute;left:171.52px;top:515.29px" class="cls_011"><span class="cls_011">Application pods are scheduled onto worker nodes.</span></div>
<div style="position:absolute;left:96.25px;top:537.82px" class="cls_011"><span class="cls_011">Resource</span></div>
<div style="position:absolute;left:171.52px;top:537.79px" class="cls_011"><span class="cls_011">Resources are any kind of component definition managed by Kubernetes.</span></div>
<div style="position:absolute;left:171.52px;top:549.79px" class="cls_011"><span class="cls_011">Resources contain the configuration of the managed component (for</span></div>
<div style="position:absolute;left:171.52px;top:561.79px" class="cls_011"><span class="cls_011">example, the role assigned to a node), and the current state of the</span></div>
<div style="position:absolute;left:171.52px;top:573.78px" class="cls_011"><span class="cls_011">component (for example, if the node is available).</span></div>
<div style="position:absolute;left:96.25px;top:596.32px" class="cls_011"><span class="cls_011">Controller</span></div>
<div style="position:absolute;left:171.52px;top:596.28px" class="cls_011"><span class="cls_011">A controller is a Kubernetes process that watches resources and makes</span></div>
<div style="position:absolute;left:171.52px;top:608.28px" class="cls_011"><span class="cls_011">changes attempting to move the current state towards the desired state.</span></div>
<div style="position:absolute;left:96.25px;top:630.81px" class="cls_011"><span class="cls_011">Label</span></div>
<div style="position:absolute;left:171.52px;top:630.78px" class="cls_011"><span class="cls_011">A key-value pair that can be assigned to any Kubernetes resource. Selectors</span></div>
<div style="position:absolute;left:171.52px;top:642.78px" class="cls_011"><span class="cls_011">use labels to filter eligible resources for scheduling and other operations.</span></div>
<div style="position:absolute;left:96.25px;top:665.31px" class="cls_011"><span class="cls_011">Namespace</span></div>
<div style="position:absolute;left:171.52px;top:665.27px" class="cls_011"><span class="cls_011">A scope for Kubernetes resources and processes, so that resources with the</span></div>
<div style="position:absolute;left:171.52px;top:677.27px" class="cls_011"><span class="cls_011">same name can be used in different boundaries.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">134</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:121904px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background153.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:144.00px;top:63.50px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:77.88px" class="cls_011"><span class="cls_011">The latest Kubernetes versions implement many controllers as Operators. Operators</span></div>
<div style="position:absolute;left:144.00px;top:89.87px" class="cls_011"><span class="cls_011">are Kubernetes plug-in components that can react to cluster events and control</span></div>
<div style="position:absolute;left:144.00px;top:101.87px" class="cls_011"><span class="cls_011">the state of resources. Operators and CoreOS Operator Framework are outside the</span></div>
<div style="position:absolute;left:144.00px;top:113.87px" class="cls_011"><span class="cls_011">scope of this document.</span></div>
<div style="position:absolute;left:108.00px;top:151.77px" class="cls_011"><span class="cls_011">Red Hat OpenShift Container Platform is a set of modular components and services built on top</span></div>
<div style="position:absolute;left:108.00px;top:163.77px" class="cls_011"><span class="cls_011">of Red Hat CoreOS and Kubernetes. RHOCP adds PaaS capabilities such as remote management,</span></div>
<div style="position:absolute;left:108.00px;top:175.76px" class="cls_011"><span class="cls_011">increased security, monitoring and auditing, application life-cycle management, and self-service</span></div>
<div style="position:absolute;left:108.00px;top:187.76px" class="cls_011"><span class="cls_011">interfaces for developers.</span></div>
<div style="position:absolute;left:108.00px;top:209.26px" class="cls_011"><span class="cls_011">An OpenShift cluster is a Kubernetes cluster that can be managed the same way, but using</span></div>
<div style="position:absolute;left:108.00px;top:221.26px" class="cls_011"><span class="cls_011">the management tools provided by OpenShift, such as the command-line interface or the web</span></div>
<div style="position:absolute;left:108.00px;top:233.26px" class="cls_011"><span class="cls_011">console. This allows for more productive workflows and makes common tasks much easier.</span></div>
<div style="position:absolute;left:108.00px;top:259.20px" class="cls_022"><span class="cls_022">OpenShift Terminology</span></div>
<div style="position:absolute;left:114.25px;top:285.45px" class="cls_023"><span class="cls_023">Term</span></div>
<div style="position:absolute;left:189.52px;top:285.45px" class="cls_023"><span class="cls_023">Definition</span></div>
<div style="position:absolute;left:114.25px;top:308.04px" class="cls_011"><span class="cls_011">Infra Node</span></div>
<div style="position:absolute;left:189.52px;top:308.00px" class="cls_011"><span class="cls_011">A node server containing infrastructure services like monitoring, logging, or</span></div>
<div style="position:absolute;left:189.52px;top:320.00px" class="cls_011"><span class="cls_011">external routing.</span></div>
<div style="position:absolute;left:114.25px;top:342.53px" class="cls_011"><span class="cls_011">Console</span></div>
<div style="position:absolute;left:189.52px;top:342.50px" class="cls_011"><span class="cls_011">A web UI provided by the RHOCP cluster that allows developers and</span></div>
<div style="position:absolute;left:189.52px;top:354.50px" class="cls_011"><span class="cls_011">administrators to interact with cluster resources.</span></div>
<div style="position:absolute;left:114.25px;top:377.03px" class="cls_011"><span class="cls_011">Project</span></div>
<div style="position:absolute;left:189.52px;top:376.99px" class="cls_011"><span class="cls_011">OpenShift's extension of Kubernetes' namespaces. Allows the definition of</span></div>
<div style="position:absolute;left:189.52px;top:388.99px" class="cls_011"><span class="cls_011">user access control (UAC) to resources.</span></div>
<div style="position:absolute;left:108.00px;top:414.74px" class="cls_011"><span class="cls_011">The following schema illustrates the OpenShift Container Platform stack.</span></div>
<div style="position:absolute;left:237.54px;top:669.49px" class="cls_020"><span class="cls_020">Figure 6.1: OpenShift component stack</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.86px;top:751.59px" class="cls_013"><span class="cls_013">135</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:122706px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background154.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_011"><span class="cls_011">From bottom to top, and from left to right, this shows the basic container infrastructure, integrated</span></div>
<div style="position:absolute;left:90.00px;top:65.97px" class="cls_011"><span class="cls_011">and enhanced by Red Hat:</span></div>
<div style="position:absolute;left:90.00px;top:89.37px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:89.37px" class="cls_011"><span class="cls_011">The base OS is Red Hat CoreOS. Red Hat CoreOS is a Linux distribution focused on providing</span></div>
<div style="position:absolute;left:99.50px;top:101.37px" class="cls_011"><span class="cls_011">an immutable operating system for container execution.</span></div>
<div style="position:absolute;left:90.00px;top:124.77px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:124.77px" class="cls_011"><span class="cls_011">CRI-O is an implementation of the Kubernetes CRI (Container Runtime Interface) to enable</span></div>
<div style="position:absolute;left:99.50px;top:136.77px" class="cls_011"><span class="cls_011">using OCI (Open Container Initiative) compatible runtimes. CRI-O can use any container</span></div>
<div style="position:absolute;left:99.50px;top:148.76px" class="cls_011"><span class="cls_011">runtime that satisfies CRI: </span><span class="cls_021">runc</span><span class="cls_011"> (used by the Docker service), </span><span class="cls_021">libpod</span><span class="cls_011"> (used by Podman) or</span></div>
<div style="position:absolute;left:99.50px;top:160.76px" class="cls_021"><span class="cls_021">rkt</span><span class="cls_011"> (from CoreOS).</span></div>
<div style="position:absolute;left:90.00px;top:184.16px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:184.16px" class="cls_011"><span class="cls_011">Kubernetes manages a cluster of hosts, physical or virtual, that run containers. It uses resources</span></div>
<div style="position:absolute;left:99.50px;top:196.16px" class="cls_011"><span class="cls_011">that describe multicontainer applications composed of multiple resources, and how they</span></div>
<div style="position:absolute;left:99.50px;top:208.16px" class="cls_011"><span class="cls_011">interconnect.</span></div>
<div style="position:absolute;left:90.00px;top:231.55px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:231.55px" class="cls_011"><span class="cls_011">Etcd is a distributed key-value store, used by Kubernetes to store configuration and state</span></div>
<div style="position:absolute;left:99.50px;top:243.55px" class="cls_011"><span class="cls_011">information about the containers and other resources inside the Kubernetes cluster.</span></div>
<div style="position:absolute;left:90.00px;top:266.95px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:266.95px" class="cls_011"><span class="cls_011">Custom Resource Definitions (CRDs) are resource types stored in Etcd and managed by</span></div>
<div style="position:absolute;left:99.50px;top:278.95px" class="cls_011"><span class="cls_011">Kubernetes. These resource types form the state and configuration of all resources managed by</span></div>
<div style="position:absolute;left:99.50px;top:290.95px" class="cls_011"><span class="cls_011">OpenShift.</span></div>
<div style="position:absolute;left:90.00px;top:314.34px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:314.34px" class="cls_011"><span class="cls_011">Containerized services fulfill many PaaS infrastructure functions, such as networking and</span></div>
<div style="position:absolute;left:99.50px;top:326.34px" class="cls_011"><span class="cls_011">authorization. RHOCP uses the basic container infrastructure from Kubernetes and the</span></div>
<div style="position:absolute;left:99.50px;top:338.34px" class="cls_011"><span class="cls_011">underlying container runtime for most internal functions. That is, most RHOCP internal services</span></div>
<div style="position:absolute;left:99.50px;top:350.34px" class="cls_011"><span class="cls_011">run as containers orchestrated by Kubernetes.</span></div>
<div style="position:absolute;left:90.00px;top:373.74px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:373.74px" class="cls_011"><span class="cls_011">Runtimes and xPaaS are base container images ready for use by developers, each preconfigured</span></div>
<div style="position:absolute;left:99.50px;top:385.73px" class="cls_011"><span class="cls_011">with a particular runtime language or database. The xPaaS offering is a set of base images for</span></div>
<div style="position:absolute;left:99.50px;top:397.73px" class="cls_011"><span class="cls_011">Red Hat middleware products such as JBoss EAP and ActiveMQ. Red Hat OpenShift Application</span></div>
<div style="position:absolute;left:99.50px;top:409.73px" class="cls_011"><span class="cls_011">Runtimes (RHOAR) are a set runtimes optimized for cloud native applications in OpenShift.</span></div>
<div style="position:absolute;left:99.50px;top:421.73px" class="cls_011"><span class="cls_011">The application runtimes available are Red Hat JBoss EAP, OpenJDK, Thorntail, Eclipse Vert.x,</span></div>
<div style="position:absolute;left:99.50px;top:433.73px" class="cls_011"><span class="cls_011">Spring Boot, and Node.js.</span></div>
<div style="position:absolute;left:90.00px;top:457.12px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:457.12px" class="cls_011"><span class="cls_011">DevOps tools and user experience: RHOCP provides web UI and CLI management tools for</span></div>
<div style="position:absolute;left:99.50px;top:469.12px" class="cls_011"><span class="cls_011">managing user applications and RHOCP services. The OpenShift web UI and CLI tools are built</span></div>
<div style="position:absolute;left:99.50px;top:481.12px" class="cls_011"><span class="cls_011">from REST APIs which can be used by external tools such as IDEs and CI platforms.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">136</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:123508px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background155.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:213.54px;top:354.23px" class="cls_020"><span class="cls_020">Figure 6.2: OpenShift and Kubernetes architecture</span></div>
<div style="position:absolute;left:108.00px;top:375.44px" class="cls_024"><span class="cls_024">New Features in RHOCP 4</span></div>
<div style="position:absolute;left:108.00px;top:400.15px" class="cls_011"><span class="cls_011">RHOCP 4 is a massive change from previous versions. As well as keeping backwards compatibility</span></div>
<div style="position:absolute;left:108.00px;top:412.15px" class="cls_011"><span class="cls_011">with previous releases, it includes new features, such as:</span></div>
<div style="position:absolute;left:108.00px;top:435.18px" class="cls_011"><span class="cls_011">• CoreOS as the mandatory operating system for all nodes, offering an immutable infrastructure</span></div>
<div style="position:absolute;left:117.50px;top:447.18px" class="cls_011"><span class="cls_011">optimized for containers.</span></div>
<div style="position:absolute;left:108.00px;top:470.22px" class="cls_011"><span class="cls_011">• A brand new cluster installer which guides the process of installation and update.</span></div>
<div style="position:absolute;left:108.00px;top:493.25px" class="cls_011"><span class="cls_011">• A self-managing platform, able to automatically apply cluster updates and recoveries without</span></div>
<div style="position:absolute;left:117.50px;top:505.25px" class="cls_011"><span class="cls_011">disruption.</span></div>
<div style="position:absolute;left:108.00px;top:528.29px" class="cls_011"><span class="cls_011">• A redesigned application life-cycle management.</span></div>
<div style="position:absolute;left:108.00px;top:551.32px" class="cls_011"><span class="cls_011">• An Operator SDK to build, test, and package Operators.</span></div>
<div style="position:absolute;left:108.00px;top:573.60px" class="cls_024"><span class="cls_024">Describing Kubernetes Resource Types</span></div>
<div style="position:absolute;left:108.00px;top:598.32px" class="cls_011"><span class="cls_011">Kubernetes has six main resource types that can be created and configured using a YAML or a</span></div>
<div style="position:absolute;left:108.00px;top:610.32px" class="cls_011"><span class="cls_011">JSON file, or using OpenShift management tools:</span></div>
<div style="position:absolute;left:108.00px;top:633.35px" class="cls_022"><span class="cls_022">Pods (</span><span class="cls_021">po</span><span class="cls_022">)</span></div>
<div style="position:absolute;left:126.00px;top:645.35px" class="cls_011"><span class="cls_011">Represent a collection of containers that share resources, such as IP addresses and persistent</span></div>
<div style="position:absolute;left:126.00px;top:657.35px" class="cls_011"><span class="cls_011">storage volumes. It is the basic unit of work for Kubernetes.</span></div>
<div style="position:absolute;left:108.00px;top:680.38px" class="cls_022"><span class="cls_022">Services (</span><span class="cls_021">svc</span><span class="cls_022">)</span></div>
<div style="position:absolute;left:126.00px;top:692.38px" class="cls_011"><span class="cls_011">Define a single IP/port combination that provides access to a pool of pods. By default,</span></div>
<div style="position:absolute;left:126.00px;top:704.38px" class="cls_011"><span class="cls_011">services connect clients to pods in a round-robin fashion.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.85px;top:751.59px" class="cls_013"><span class="cls_013">137</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:124310px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background156.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_022"><span class="cls_022">Replication Controllers (</span><span class="cls_021">rc</span><span class="cls_022">)</span></div>
<div style="position:absolute;left:108.00px;top:65.97px" class="cls_011"><span class="cls_011">A Kubernetes resource that defines how pods are replicated (horizontally scaled) into</span></div>
<div style="position:absolute;left:108.00px;top:77.97px" class="cls_011"><span class="cls_011">different nodes. Replication controllers are a basic Kubernetes service to provide high</span></div>
<div style="position:absolute;left:108.00px;top:89.97px" class="cls_011"><span class="cls_011">availability for pods and containers.</span></div>
<div style="position:absolute;left:90.00px;top:109.92px" class="cls_022"><span class="cls_022">Persistent Volumes (</span><span class="cls_021">pv</span><span class="cls_022">)</span></div>
<div style="position:absolute;left:108.00px;top:121.92px" class="cls_011"><span class="cls_011">Define storage areas to be used by Kubernetes pods.</span></div>
<div style="position:absolute;left:90.00px;top:141.87px" class="cls_022"><span class="cls_022">Persistent Volume Claims (</span><span class="cls_021">pvc</span><span class="cls_022">)</span></div>
<div style="position:absolute;left:108.00px;top:153.87px" class="cls_011"><span class="cls_011">Represent a request for storage by a pod. PVCs links a PV to a pod so its containers can make</span></div>
<div style="position:absolute;left:108.00px;top:165.87px" class="cls_011"><span class="cls_011">use of it, usually by mounting the storage into the container's file system.</span></div>
<div style="position:absolute;left:90.00px;top:185.82px" class="cls_022"><span class="cls_022">ConfigMaps (</span><span class="cls_021">cm</span><span class="cls_022">) and Secrets</span></div>
<div style="position:absolute;left:108.00px;top:197.82px" class="cls_011"><span class="cls_011">Contains a set of keys and values that can be used by other resources. ConfigMaps and</span></div>
<div style="position:absolute;left:108.00px;top:209.82px" class="cls_011"><span class="cls_011">Secrets are usually used to centralize configuration values used by several resources. Secrets</span></div>
<div style="position:absolute;left:108.00px;top:221.81px" class="cls_011"><span class="cls_011">differ from ConfigMaps maps in that Secrets' values are always encoded (not encrypted) and</span></div>
<div style="position:absolute;left:108.00px;top:233.81px" class="cls_011"><span class="cls_011">their access is restricted to fewer authorized users.</span></div>
<div style="position:absolute;left:90.00px;top:255.31px" class="cls_011"><span class="cls_011">Although Kubernetes pods can be created standalone, they are usually created by high-level</span></div>
<div style="position:absolute;left:90.00px;top:267.31px" class="cls_011"><span class="cls_011">resources such as replication controllers.</span></div>
<div style="position:absolute;left:90.00px;top:289.59px" class="cls_024"><span class="cls_024">OpenShift Resource Types</span></div>
<div style="position:absolute;left:90.00px;top:314.31px" class="cls_011"><span class="cls_011">The main resource types added by OpenShift Container Platform to Kubernetes are as follows:</span></div>
<div style="position:absolute;left:90.00px;top:334.26px" class="cls_022"><span class="cls_022">Deployment config (</span><span class="cls_021">dc</span><span class="cls_022">)</span></div>
<div style="position:absolute;left:108.00px;top:346.26px" class="cls_011"><span class="cls_011">Represents the set of containers included in a pod, and the deployment strategies to be used.</span></div>
<div style="position:absolute;left:108.00px;top:358.25px" class="cls_011"><span class="cls_011">A </span><span class="cls_021">dc</span><span class="cls_011"> also provides a basic but extensible continuous delivery workflow.</span></div>
<div style="position:absolute;left:90.00px;top:378.21px" class="cls_022"><span class="cls_022">Build config (</span><span class="cls_021">bc</span><span class="cls_022">)</span></div>
<div style="position:absolute;left:108.00px;top:390.20px" class="cls_011"><span class="cls_011">Defines a process to be executed in the OpenShift project. Used by the OpenShift Source-</span></div>
<div style="position:absolute;left:108.00px;top:402.20px" class="cls_011"><span class="cls_011">to-Image (S2I) feature to build a container image from application source code stored in a</span></div>
<div style="position:absolute;left:108.00px;top:414.20px" class="cls_011"><span class="cls_011">Git repository. A </span><span class="cls_021">bc</span><span class="cls_011"> works together with a </span><span class="cls_021">dc</span><span class="cls_011"> to provide a basic but extensible continuous</span></div>
<div style="position:absolute;left:108.00px;top:426.20px" class="cls_011"><span class="cls_011">integration and continuous delivery workflows.</span></div>
<div style="position:absolute;left:90.00px;top:446.15px" class="cls_022"><span class="cls_022">Routes</span></div>
<div style="position:absolute;left:108.00px;top:458.15px" class="cls_011"><span class="cls_011">Represent a DNS host name recognized by the OpenShift router as an ingress point for</span></div>
<div style="position:absolute;left:108.00px;top:470.15px" class="cls_011"><span class="cls_011">applications and microservices.</span></div>
<div style="position:absolute;left:126.00px;top:499.62px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:514.00px" class="cls_011"><span class="cls_011">To obtain a list of all the resources available in a RHOCP cluster and their</span></div>
<div style="position:absolute;left:126.00px;top:526.00px" class="cls_011"><span class="cls_011">abbreviations, use the </span><span class="cls_021">oc api-resources</span><span class="cls_011"> or </span><span class="cls_021">kubectl api-resources</span></div>
<div style="position:absolute;left:126.00px;top:537.99px" class="cls_011"><span class="cls_011">commands.</span></div>
<div style="position:absolute;left:90.00px;top:575.89px" class="cls_011"><span class="cls_011">Although Kubernetes replication controllers can be created standalone in OpenShift, they are</span></div>
<div style="position:absolute;left:90.00px;top:587.89px" class="cls_011"><span class="cls_011">usually created by higher-level resources such as deployment controllers.</span></div>
<div style="position:absolute;left:90.00px;top:610.17px" class="cls_024"><span class="cls_024">Networking</span></div>
<div style="position:absolute;left:90.00px;top:634.89px" class="cls_011"><span class="cls_011">Each container deployed in a Kubernetes cluster has an IP address assigned from an internal</span></div>
<div style="position:absolute;left:90.00px;top:646.89px" class="cls_011"><span class="cls_011">network that is accessible only from the node running the container. Because of the container's</span></div>
<div style="position:absolute;left:90.00px;top:658.88px" class="cls_011"><span class="cls_011">ephemeral nature, IP addresses are constantly assigned and released.</span></div>
<div style="position:absolute;left:90.00px;top:680.38px" class="cls_011"><span class="cls_011">Kubernetes provides a software-defined network (SDN) that spawns the internal container</span></div>
<div style="position:absolute;left:90.00px;top:692.38px" class="cls_011"><span class="cls_011">networks from multiple nodes and allows containers from any pod, inside any host, to access pods</span></div>
<div style="position:absolute;left:90.00px;top:704.38px" class="cls_011"><span class="cls_011">from other hosts. Access to the SDN only works from inside the same Kubernetes cluster.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">138</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:125112px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background157.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">Containers inside Kubernetes pods should not connect to each other's dynamic IP address directly.</span></div>
<div style="position:absolute;left:108.00px;top:65.97px" class="cls_011"><span class="cls_011">Services resolves this problem by linking more stable IP addresses from the SDN to the pods. If</span></div>
<div style="position:absolute;left:108.00px;top:77.97px" class="cls_011"><span class="cls_011">pods are restarted, replicated, or rescheduled to different nodes, services are updated, providing</span></div>
<div style="position:absolute;left:108.00px;top:89.97px" class="cls_011"><span class="cls_011">scalability and fault tolerance.</span></div>
<div style="position:absolute;left:108.00px;top:111.47px" class="cls_011"><span class="cls_011">External access to containers is more complicated. Kubernetes services can specify a </span><span class="cls_021">NodePort</span></div>
<div style="position:absolute;left:108.00px;top:123.47px" class="cls_011"><span class="cls_011">attribute, which is a network port redirected by all the cluster nodes to the SDN. Then, the</span></div>
<div style="position:absolute;left:108.00px;top:135.46px" class="cls_011"><span class="cls_011">containers in the node can redirect a port to the node's port. Unfortunately, none of these</span></div>
<div style="position:absolute;left:108.00px;top:147.46px" class="cls_011"><span class="cls_011">approaches scale well.</span></div>
<div style="position:absolute;left:108.00px;top:168.96px" class="cls_011"><span class="cls_011">OpenShift makes external access to containers both scalable and simpler by defining route</span></div>
<div style="position:absolute;left:108.00px;top:180.96px" class="cls_011"><span class="cls_011">resources. A route defines external-facing DNS names and ports for a service. A router (ingress</span></div>
<div style="position:absolute;left:108.00px;top:192.96px" class="cls_011"><span class="cls_011">controller) forwards HTTP and TLS requests to the service addresses inside the Kubernetes</span></div>
<div style="position:absolute;left:108.00px;top:204.95px" class="cls_011"><span class="cls_011">SDN. The only requirement is that the desired DNS names are mapped to the IP addresses of the</span></div>
<div style="position:absolute;left:108.00px;top:216.95px" class="cls_011"><span class="cls_011">RHOCP router nodes.</span></div>
<div style="position:absolute;left:144.00px;top:247.97px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:144.00px;top:262.29px" class="cls_022"><span class="cls_022">Kubernetes documentation website</span></div>
<div style="position:absolute;left:144.00px;top:274.35px" class="cls_033"><span class="cls_033"> </span><A HREF="https://kubernetes.io/docs/">https://kubernetes.io/docs/</A> </div>
<div style="position:absolute;left:144.00px;top:295.79px" class="cls_022"><span class="cls_022">OpenShift documentation website</span></div>
<div style="position:absolute;left:144.00px;top:307.84px" class="cls_033"><span class="cls_033"> </span><A HREF="https://docs.openshift.com/">https://docs.openshift.com/</A> </div>
<div style="position:absolute;left:144.00px;top:329.29px" class="cls_022"><span class="cls_022">Understanding Operators</span></div>
<div style="position:absolute;left:144.00px;top:341.34px" class="cls_033"><span class="cls_033"> </span><A HREF="https://docs.openshift.com/container-platform/4.5/operators/olm-what-operators-are.html">https://docs.openshift.com/container-platform/4.5/operators/olm-what-</A> </div>
<div style="position:absolute;left:144.00px;top:353.34px" class="cls_033"><span class="cls_033"> </span><A HREF="https://docs.openshift.com/container-platform/4.5/operators/olm-what-operators-are.html">operators-are.html</A> </div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.65px;top:751.59px" class="cls_013"><span class="cls_013">139</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:125914px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background158.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_034"><span class="cls_034">Quiz</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Describing Kubernetes and OpenShift</span></div>
<div style="position:absolute;left:102.00px;top:137.59px" class="cls_011"><span class="cls_011">Choose the correct answers to the following questions:</span></div>
<div style="position:absolute;left:101.41px;top:180.93px" class="cls_035"><span class="cls_035">1.</span></div>
<div style="position:absolute;left:114.00px;top:181.03px" class="cls_035"><span class="cls_035">Which two sentences are correct regarding Kubernetes architecture? (Choose two.)</span></div>
<div style="position:absolute;left:114.00px;top:196.09px" class="cls_011"><span class="cls_011">a. Kubernetes nodes can be managed without a master.</span></div>
<div style="position:absolute;left:114.00px;top:211.09px" class="cls_011"><span class="cls_011">b. Kubernetes masters manage pod scaling.</span></div>
<div style="position:absolute;left:114.00px;top:226.09px" class="cls_011"><span class="cls_011">c. Kubernetes masters schedule pods to specific nodes.</span></div>
<div style="position:absolute;left:114.00px;top:241.09px" class="cls_011"><span class="cls_011">d. Kubernetes tools cannot be used to manage resources in an OpenShift cluster.</span></div>
<div style="position:absolute;left:114.00px;top:256.09px" class="cls_011"><span class="cls_011">e. Containers created from Kubernetes pods cannot be managed using standalone tools</span></div>
<div style="position:absolute;left:125.00px;top:271.09px" class="cls_011"><span class="cls_011">such as Podman.</span></div>
<div style="position:absolute;left:101.41px;top:297.93px" class="cls_035"><span class="cls_035">2.</span></div>
<div style="position:absolute;left:114.00px;top:298.03px" class="cls_035"><span class="cls_035">Which two sentences are correct regarding Kubernetes and OpenShift resource types?</span></div>
<div style="position:absolute;left:114.00px;top:313.03px" class="cls_035"><span class="cls_035">(Choose two.)</span></div>
<div style="position:absolute;left:114.00px;top:328.09px" class="cls_011"><span class="cls_011">a. A pod is responsible for provisioning its own persistent storage.</span></div>
<div style="position:absolute;left:114.00px;top:343.09px" class="cls_011"><span class="cls_011">b. All pods generated from the same replication controller have to run in the same node.</span></div>
<div style="position:absolute;left:114.00px;top:358.09px" class="cls_011"><span class="cls_011">c. A route is responsible for providing IP addresses for external access to pods.</span></div>
<div style="position:absolute;left:114.00px;top:373.09px" class="cls_011"><span class="cls_011">d. A replication controller is responsible for monitoring and maintaining the number of pods</span></div>
<div style="position:absolute;left:125.00px;top:388.09px" class="cls_011"><span class="cls_011">for a particular application.</span></div>
<div style="position:absolute;left:101.41px;top:414.93px" class="cls_035"><span class="cls_035">3.</span></div>
<div style="position:absolute;left:114.00px;top:415.03px" class="cls_035"><span class="cls_035">Which two statements are true regarding Kubernetes and OpenShift networking?</span></div>
<div style="position:absolute;left:114.00px;top:430.03px" class="cls_035"><span class="cls_035">(Choose two.)</span></div>
<div style="position:absolute;left:114.00px;top:445.09px" class="cls_011"><span class="cls_011">a. A Kubernetes service can provide an IP address to access a set of pods.</span></div>
<div style="position:absolute;left:114.00px;top:460.09px" class="cls_011"><span class="cls_011">b. Kubernetes is responsible for providing a fully qualified domain name for a pod.</span></div>
<div style="position:absolute;left:114.00px;top:475.09px" class="cls_011"><span class="cls_011">c. A replication controller is responsible for routing external requests to the pods.</span></div>
<div style="position:absolute;left:114.00px;top:490.09px" class="cls_011"><span class="cls_011">d. A route is responsible for providing DNS names for external access.</span></div>
<div style="position:absolute;left:101.41px;top:516.93px" class="cls_035"><span class="cls_035">4. Which statement is correct regarding persistent storage in OpenShift and Kubernetes?</span></div>
<div style="position:absolute;left:114.00px;top:532.09px" class="cls_011"><span class="cls_011">a. A PVC represents a storage area that a pod can use to store data and is provisioned by</span></div>
<div style="position:absolute;left:125.00px;top:547.09px" class="cls_011"><span class="cls_011">the application developer.</span></div>
<div style="position:absolute;left:114.00px;top:562.09px" class="cls_011"><span class="cls_011">b. A PVC represents a storage area that can be requested by a pod to store data but is</span></div>
<div style="position:absolute;left:125.00px;top:577.09px" class="cls_011"><span class="cls_011">provisioned by the cluster administrator.</span></div>
<div style="position:absolute;left:114.00px;top:592.09px" class="cls_011"><span class="cls_011">c. A PVC represents the amount of memory that can be allocated to a node, so that a</span></div>
<div style="position:absolute;left:125.00px;top:607.09px" class="cls_011"><span class="cls_011">developer can state how much memory he requires for his application to run.</span></div>
<div style="position:absolute;left:114.00px;top:622.09px" class="cls_011"><span class="cls_011">d. A PVC represents the number of CPU processing units that can be allocated to an</span></div>
<div style="position:absolute;left:125.00px;top:637.09px" class="cls_011"><span class="cls_011">application pod, subject to a limit managed by the cluster administrator.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">140</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:126716px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background159.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:119.41px;top:55.32px" class="cls_035"><span class="cls_035">5. Which statement is correct regarding OpenShift additions to Kubernetes?</span></div>
<div style="position:absolute;left:132.00px;top:70.48px" class="cls_011"><span class="cls_011">a. OpenShift adds features to simplify Kubernetes configuration of many real-world use</span></div>
<div style="position:absolute;left:143.00px;top:85.48px" class="cls_011"><span class="cls_011">cases.</span></div>
<div style="position:absolute;left:132.00px;top:100.48px" class="cls_011"><span class="cls_011">b. Container images created for OpenShift cannot be used with plain Kubernetes.</span></div>
<div style="position:absolute;left:132.00px;top:115.48px" class="cls_011"><span class="cls_011">c. Red Hat maintains forked versions of Kubernetes internal to the RHOCP product.</span></div>
<div style="position:absolute;left:132.00px;top:130.48px" class="cls_011"><span class="cls_011">d. Doing continuous integration and continuous deployment with RHOCP requires external</span></div>
<div style="position:absolute;left:143.00px;top:145.48px" class="cls_011"><span class="cls_011">tools.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:506.20px;top:751.59px" class="cls_013"><span class="cls_013">141</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:127518px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background160.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_034"><span class="cls_034">Solution</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Describing Kubernetes and OpenShift</span></div>
<div style="position:absolute;left:102.00px;top:137.59px" class="cls_011"><span class="cls_011">Choose the correct answers to the following questions:</span></div>
<div style="position:absolute;left:101.41px;top:180.93px" class="cls_035"><span class="cls_035">1.</span></div>
<div style="position:absolute;left:114.00px;top:181.03px" class="cls_035"><span class="cls_035">Which two sentences are correct regarding Kubernetes architecture? (Choose two.)</span></div>
<div style="position:absolute;left:114.00px;top:196.09px" class="cls_011"><span class="cls_011">a.</span><span class="cls_036"> Kubernetes nodes can be managed without a master.</span></div>
<div style="position:absolute;left:114.00px;top:211.09px" class="cls_011"><span class="cls_011">b. Kubernetes masters manage pod scaling.</span></div>
<div style="position:absolute;left:114.00px;top:226.09px" class="cls_011"><span class="cls_011">c. Kubernetes masters schedule pods to specific nodes.</span></div>
<div style="position:absolute;left:114.00px;top:241.09px" class="cls_011"><span class="cls_011">d.</span><span class="cls_036"> Kubernetes tools cannot be used to manage resources in an OpenShift cluster.</span></div>
<div style="position:absolute;left:114.00px;top:256.09px" class="cls_011"><span class="cls_011">e.</span><span class="cls_036"> Containers created from Kubernetes pods cannot be managed using standalone tools</span></div>
<div style="position:absolute;left:125.00px;top:271.09px" class="cls_036"><span class="cls_036">such as Podman.</span></div>
<div style="position:absolute;left:101.41px;top:297.93px" class="cls_035"><span class="cls_035">2.</span></div>
<div style="position:absolute;left:114.00px;top:298.03px" class="cls_035"><span class="cls_035">Which two sentences are correct regarding Kubernetes and OpenShift resource types?</span></div>
<div style="position:absolute;left:114.00px;top:313.03px" class="cls_035"><span class="cls_035">(Choose two.)</span></div>
<div style="position:absolute;left:114.00px;top:328.09px" class="cls_011"><span class="cls_011">a.</span><span class="cls_036"> A pod is responsible for provisioning its own persistent storage.</span></div>
<div style="position:absolute;left:114.00px;top:343.09px" class="cls_011"><span class="cls_011">b.</span><span class="cls_036"> All pods generated from the same replication controller have to run in the same node.</span></div>
<div style="position:absolute;left:114.00px;top:358.09px" class="cls_011"><span class="cls_011">c. A route is responsible for providing IP addresses for external access to pods.</span></div>
<div style="position:absolute;left:114.00px;top:373.09px" class="cls_011"><span class="cls_011">d. A replication controller is responsible for monitoring and maintaining the number of pods</span></div>
<div style="position:absolute;left:125.00px;top:388.09px" class="cls_011"><span class="cls_011">for a particular application.</span></div>
<div style="position:absolute;left:101.41px;top:414.93px" class="cls_035"><span class="cls_035">3.</span></div>
<div style="position:absolute;left:114.00px;top:415.03px" class="cls_035"><span class="cls_035">Which two statements are true regarding Kubernetes and OpenShift networking?</span></div>
<div style="position:absolute;left:114.00px;top:430.03px" class="cls_035"><span class="cls_035">(Choose two.)</span></div>
<div style="position:absolute;left:114.00px;top:445.09px" class="cls_011"><span class="cls_011">a. A Kubernetes service can provide an IP address to access a set of pods.</span></div>
<div style="position:absolute;left:114.00px;top:460.09px" class="cls_011"><span class="cls_011">b.</span><span class="cls_036"> Kubernetes is responsible for providing a fully qualified domain name for a pod.</span></div>
<div style="position:absolute;left:114.00px;top:475.09px" class="cls_011"><span class="cls_011">c.</span><span class="cls_036"> A replication controller is responsible for routing external requests to the pods.</span></div>
<div style="position:absolute;left:114.00px;top:490.09px" class="cls_011"><span class="cls_011">d. A route is responsible for providing DNS names for external access.</span></div>
<div style="position:absolute;left:101.41px;top:516.93px" class="cls_035"><span class="cls_035">4. Which statement is correct regarding persistent storage in OpenShift and Kubernetes?</span></div>
<div style="position:absolute;left:114.00px;top:532.09px" class="cls_011"><span class="cls_011">a.</span><span class="cls_036"> A PVC represents a storage area that a pod can use to store data and is provisioned by</span></div>
<div style="position:absolute;left:125.00px;top:547.09px" class="cls_036"><span class="cls_036">the application developer.</span></div>
<div style="position:absolute;left:114.00px;top:562.09px" class="cls_011"><span class="cls_011">b. A PVC represents a storage area that can be requested by a pod to store data but is</span></div>
<div style="position:absolute;left:125.00px;top:577.09px" class="cls_011"><span class="cls_011">provisioned by the cluster administrator.</span></div>
<div style="position:absolute;left:114.00px;top:592.09px" class="cls_011"><span class="cls_011">c.</span><span class="cls_036"> A PVC represents the amount of memory that can be allocated to a node, so that a</span></div>
<div style="position:absolute;left:125.00px;top:607.09px" class="cls_036"><span class="cls_036">developer can state how much memory he requires for his application to run.</span></div>
<div style="position:absolute;left:114.00px;top:622.09px" class="cls_011"><span class="cls_011">d.</span><span class="cls_036"> A PVC represents the number of CPU processing units that can be allocated to an</span></div>
<div style="position:absolute;left:125.00px;top:637.09px" class="cls_036"><span class="cls_036">application pod, subject to a limit managed by the cluster administrator.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">142</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:128320px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background161.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:119.41px;top:55.32px" class="cls_035"><span class="cls_035">5. Which statement is correct regarding OpenShift additions to Kubernetes?</span></div>
<div style="position:absolute;left:132.00px;top:70.48px" class="cls_011"><span class="cls_011">a. OpenShift adds features to simplify Kubernetes configuration of many real-world use</span></div>
<div style="position:absolute;left:143.00px;top:85.48px" class="cls_011"><span class="cls_011">cases.</span></div>
<div style="position:absolute;left:132.00px;top:100.48px" class="cls_011"><span class="cls_011">b.</span><span class="cls_036"> Container images created for OpenShift cannot be used with plain Kubernetes.</span></div>
<div style="position:absolute;left:132.00px;top:115.48px" class="cls_011"><span class="cls_011">c.</span><span class="cls_036"> Red Hat maintains forked versions of Kubernetes internal to the RHOCP product.</span></div>
<div style="position:absolute;left:132.00px;top:130.48px" class="cls_011"><span class="cls_011">d.</span><span class="cls_036"> Doing continuous integration and continuous deployment with RHOCP requires external</span></div>
<div style="position:absolute;left:143.00px;top:145.48px" class="cls_036"><span class="cls_036">tools.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.28px;top:751.59px" class="cls_013"><span class="cls_013">143</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:129122px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background162.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Creating Kubernetes Resources</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to create standard Kubernetes resources.</span></div>
<div style="position:absolute;left:90.00px;top:181.26px" class="cls_024"><span class="cls_024">The Red Hat OpenShift Container Platform (RHOCP)</span></div>
<div style="position:absolute;left:90.00px;top:198.26px" class="cls_024"><span class="cls_024">Command-line Tool</span></div>
<div style="position:absolute;left:90.00px;top:222.97px" class="cls_011"><span class="cls_011">The main method of interacting with an RHOCP cluster is using the </span><span class="cls_021">oc</span><span class="cls_011"> command. The basic usage</span></div>
<div style="position:absolute;left:90.00px;top:234.97px" class="cls_011"><span class="cls_011">of the command is through its subcommands in the following syntax:</span></div>
<div style="position:absolute;left:101.00px;top:262.69px" class="cls_026"><span class="cls_026">$> </span><span class="cls_027">oc &lt;command></span></div>
<div style="position:absolute;left:90.00px;top:290.47px" class="cls_011"><span class="cls_011">Before interacting with a cluster, most operations require a logged-in user. The syntax to log in is</span></div>
<div style="position:absolute;left:90.00px;top:302.47px" class="cls_011"><span class="cls_011">shown below:</span></div>
<div style="position:absolute;left:101.00px;top:330.18px" class="cls_026"><span class="cls_026">$> </span><span class="cls_027">oc login &lt;clusterUrl></span></div>
<div style="position:absolute;left:90.00px;top:358.75px" class="cls_024"><span class="cls_024">Describing Pod Resource Definition Syntax</span></div>
<div style="position:absolute;left:90.00px;top:383.46px" class="cls_011"><span class="cls_011">RHOCP runs containers inside Kubernetes pods, and to create a pod from a container image,</span></div>
<div style="position:absolute;left:90.00px;top:395.46px" class="cls_011"><span class="cls_011">OpenShift needs a pod resource definition. This can be provided either as a JSON or YAML text</span></div>
<div style="position:absolute;left:90.00px;top:407.46px" class="cls_011"><span class="cls_011">file, or can be generated from defaults by the </span><span class="cls_021">oc new-app</span><span class="cls_011"> command or the OpenShift web</span></div>
<div style="position:absolute;left:90.00px;top:419.46px" class="cls_011"><span class="cls_011">console.</span></div>
<div style="position:absolute;left:90.00px;top:440.95px" class="cls_011"><span class="cls_011">A pod is a collection of containers and other resources. An example of a WildFly application server</span></div>
<div style="position:absolute;left:90.00px;top:452.95px" class="cls_011"><span class="cls_011">pod definition in YAML format is shown below:</span></div>
<div style="position:absolute;left:101.00px;top:480.67px" class="cls_026"><span class="cls_026">apiVersion: v1</span></div>
<div style="position:absolute;left:101.00px;top:492.67px" class="cls_026"><span class="cls_026">kind: Pod</span></div>
<div style="position:absolute;left:101.00px;top:504.66px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:110.60px;top:516.66px" class="cls_026"><span class="cls_026">name: wildfly</span></div>
<div style="position:absolute;left:110.60px;top:528.66px" class="cls_026"><span class="cls_026">labels:</span></div>
<div style="position:absolute;left:120.20px;top:540.66px" class="cls_026"><span class="cls_026">name: wildfly</span></div>
<div style="position:absolute;left:101.00px;top:552.66px" class="cls_026"><span class="cls_026">spec:</span></div>
<div style="position:absolute;left:110.60px;top:564.66px" class="cls_026"><span class="cls_026">containers:</span></div>
<div style="position:absolute;left:120.20px;top:576.65px" class="cls_026"><span class="cls_026">- resources:</span></div>
<div style="position:absolute;left:139.40px;top:588.65px" class="cls_026"><span class="cls_026">limits :</span></div>
<div style="position:absolute;left:149.00px;top:600.65px" class="cls_026"><span class="cls_026">cpu: 0.5</span></div>
<div style="position:absolute;left:129.80px;top:612.65px" class="cls_026"><span class="cls_026">image: do276/todojee</span></div>
<div style="position:absolute;left:129.80px;top:624.65px" class="cls_026"><span class="cls_026">name: wildfly</span></div>
<div style="position:absolute;left:129.80px;top:636.64px" class="cls_026"><span class="cls_026">ports:</span></div>
<div style="position:absolute;left:139.40px;top:648.64px" class="cls_026"><span class="cls_026">- containerPort: 8080</span></div>
<div style="position:absolute;left:149.00px;top:660.64px" class="cls_026"><span class="cls_026">name: wildfly</span></div>
<div style="position:absolute;left:129.80px;top:672.64px" class="cls_026"><span class="cls_026">env:</span></div>
<div style="position:absolute;left:139.40px;top:684.64px" class="cls_026"><span class="cls_026">- name: MYSQL_ENV_MYSQL_DATABASE</span></div>
<div style="position:absolute;left:149.00px;top:696.63px" class="cls_026"><span class="cls_026">value: items</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">144</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:129924px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background163.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:157.40px;top:53.69px" class="cls_026"><span class="cls_026">- name: MYSQL_ENV_MYSQL_USER</span></div>
<div style="position:absolute;left:167.00px;top:65.69px" class="cls_026"><span class="cls_026">value: user1</span></div>
<div style="position:absolute;left:157.40px;top:77.69px" class="cls_026"><span class="cls_026">- name: MYSQL_ENV_MYSQL_PASSWORD</span></div>
<div style="position:absolute;left:167.00px;top:89.69px" class="cls_026"><span class="cls_026">value: mypa55</span></div>
<div style="position:absolute;left:128.90px;top:119.37px" class="cls_011"><span class="cls_011">Declares a Kubernetes pod resource type.</span></div>
<div style="position:absolute;left:128.90px;top:131.81px" class="cls_011"><span class="cls_011">A unique name for a pod in Kubernetes that allows administrators to run commands on it.</span></div>
<div style="position:absolute;left:128.90px;top:144.25px" class="cls_011"><span class="cls_011">Creates a label with a key named </span><span class="cls_021">name</span><span class="cls_011"> that other resources in Kubernetes, usually as service,</span></div>
<div style="position:absolute;left:128.90px;top:156.25px" class="cls_011"><span class="cls_011">can use to find it.</span></div>
<div style="position:absolute;left:128.90px;top:168.25px" class="cls_011"><span class="cls_011">A container-dependent attribute identifying which port on the container is exposed.</span></div>
<div style="position:absolute;left:128.90px;top:180.69px" class="cls_011"><span class="cls_011">Defines a collection of environment variables.</span></div>
<div style="position:absolute;left:108.00px;top:202.63px" class="cls_011"><span class="cls_011">Some pods may require environment variables that can be read by a container. Kubernetes</span></div>
<div style="position:absolute;left:108.00px;top:214.63px" class="cls_011"><span class="cls_011">transforms all the </span><span class="cls_021">name</span><span class="cls_011"> and </span><span class="cls_021">value</span><span class="cls_011"> pairs to environment variables. For instance, the</span></div>
<div style="position:absolute;left:108.00px;top:226.62px" class="cls_021"><span class="cls_021">MYSQL_ENV_MYSQL_USER</span><span class="cls_011"> variable is declared internally by the Kubernetes runtime with a value</span></div>
<div style="position:absolute;left:108.00px;top:238.62px" class="cls_011"><span class="cls_011">of </span><span class="cls_021">user1</span><span class="cls_011">, and is forwarded to the container image definition. Because the container uses the</span></div>
<div style="position:absolute;left:108.00px;top:250.62px" class="cls_011"><span class="cls_011">same variable name to get the user's login, the value is used by the WildFly container instance to</span></div>
<div style="position:absolute;left:108.00px;top:262.62px" class="cls_011"><span class="cls_011">set the username that accesses a MySQL database instance.</span></div>
<div style="position:absolute;left:108.00px;top:284.90px" class="cls_024"><span class="cls_024">Describing Service Resource Definition Syntax</span></div>
<div style="position:absolute;left:108.00px;top:309.62px" class="cls_011"><span class="cls_011">Kubernetes provides a virtual network that allows pods from different workers to connect. But,</span></div>
<div style="position:absolute;left:108.00px;top:321.61px" class="cls_011"><span class="cls_011">Kubernetes provides no easy way for a pod to discover the IP addresses of other pods.</span></div>
<div style="position:absolute;left:234.02px;top:587.84px" class="cls_020"><span class="cls_020">Figure 6.3: Basic Kubernetes networking</span></div>
<div style="position:absolute;left:108.00px;top:610.76px" class="cls_011"><span class="cls_011">Services are essential resources to any OpenShift application. They allow containers in one pod to</span></div>
<div style="position:absolute;left:108.00px;top:622.76px" class="cls_011"><span class="cls_011">open network connections to containers in another pod. A pod can be restarted for many reasons,</span></div>
<div style="position:absolute;left:108.00px;top:634.76px" class="cls_011"><span class="cls_011">and it gets a different internal IP address each time. Instead of a pod having to discover the IP</span></div>
<div style="position:absolute;left:108.00px;top:646.75px" class="cls_011"><span class="cls_011">address of another pod after each restart, a service provides a stable IP address for other pods to</span></div>
<div style="position:absolute;left:108.00px;top:658.75px" class="cls_011"><span class="cls_011">use, no matter what worker node runs the pod after each restart.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.37px;top:751.59px" class="cls_013"><span class="cls_013">145</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:130726px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background164.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:209.82px;top:302.21px" class="cls_020"><span class="cls_020">Figure 6.4: Kubernetes services networking</span></div>
<div style="position:absolute;left:90.00px;top:325.12px" class="cls_011"><span class="cls_011">Most real-world applications do not run as a single pod. They need to scale horizontally, so many</span></div>
<div style="position:absolute;left:90.00px;top:337.12px" class="cls_011"><span class="cls_011">pods run the same containers from the same pod resource definition to meet growing user</span></div>
<div style="position:absolute;left:90.00px;top:349.12px" class="cls_011"><span class="cls_011">demand. A service is tied to a set of pods, providing a single IP address for the whole set, and a</span></div>
<div style="position:absolute;left:90.00px;top:361.12px" class="cls_011"><span class="cls_011">load-balancing client request among member pods.</span></div>
<div style="position:absolute;left:90.00px;top:382.61px" class="cls_011"><span class="cls_011">The set of pods running behind a service is managed by a DeploymentConfig resource. A</span></div>
<div style="position:absolute;left:90.00px;top:394.61px" class="cls_011"><span class="cls_011">DeploymentConfig resource embeds a ReplicationController that manages how many pod copies</span></div>
<div style="position:absolute;left:90.00px;top:406.61px" class="cls_011"><span class="cls_011">(replicas) have to be created, and creates new ones if any of them fail. DeploymentConfig and</span></div>
<div style="position:absolute;left:90.00px;top:418.61px" class="cls_011"><span class="cls_011">ReplicationController resources are explained later in this chapter.</span></div>
<div style="position:absolute;left:90.00px;top:440.11px" class="cls_011"><span class="cls_011">The following example shows a minimal service definition in JSON syntax:</span></div>
<div style="position:absolute;left:101.00px;top:467.82px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:120.20px;top:479.82px" class="cls_026"><span class="cls_026">"kind": "Service",</span></div>
<div style="position:absolute;left:120.20px;top:491.82px" class="cls_026"><span class="cls_026">"apiVersion": "v1",</span></div>
<div style="position:absolute;left:120.20px;top:503.82px" class="cls_026"><span class="cls_026">"metadata": {</span></div>
<div style="position:absolute;left:139.40px;top:515.82px" class="cls_026"><span class="cls_026">"name": "quotedb"</span></div>
<div style="position:absolute;left:120.20px;top:527.81px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:120.20px;top:539.81px" class="cls_026"><span class="cls_026">"spec": {</span></div>
<div style="position:absolute;left:139.40px;top:551.81px" class="cls_026"><span class="cls_026">"ports": [</span></div>
<div style="position:absolute;left:158.60px;top:563.81px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:177.80px;top:575.81px" class="cls_026"><span class="cls_026">"port": 3306,</span></div>
<div style="position:absolute;left:177.80px;top:587.80px" class="cls_026"><span class="cls_026">"targetPort": </span><span class="cls_029">3306</span></div>
<div style="position:absolute;left:158.60px;top:599.80px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:139.40px;top:611.80px" class="cls_026"><span class="cls_026">],</span></div>
<div style="position:absolute;left:139.40px;top:623.80px" class="cls_026"><span class="cls_026">"selector": {</span></div>
<div style="position:absolute;left:158.60px;top:635.80px" class="cls_029"><span class="cls_029">"name": "mysqldb"</span></div>
<div style="position:absolute;left:139.40px;top:647.79px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:120.20px;top:659.79px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:101.00px;top:671.79px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:110.90px;top:699.57px" class="cls_011"><span class="cls_011">The kind of Kubernetes resource. In this case, a Service.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">146</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:131528px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background165.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:128.90px;top:53.98px" class="cls_011"><span class="cls_011">A unique name for the service.</span></div>
<div style="position:absolute;left:128.90px;top:66.42px" class="cls_021"><span class="cls_021">ports</span><span class="cls_011"> is an array of objects that describes network ports exposed by the service. The</span></div>
<div style="position:absolute;left:128.90px;top:78.42px" class="cls_021"><span class="cls_021">targetPort</span><span class="cls_011"> attribute has to match a </span><span class="cls_021">containerPort</span><span class="cls_011"> from a pod container definition, and</span></div>
<div style="position:absolute;left:128.90px;top:90.41px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">port</span><span class="cls_011"> attribute is the port that is exposed by the service. Clients connect to the service</span></div>
<div style="position:absolute;left:128.90px;top:102.41px" class="cls_011"><span class="cls_011">port and the service forwards packets to the pod </span><span class="cls_021">targetPort</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:128.90px;top:114.41px" class="cls_021"><span class="cls_021">selector</span><span class="cls_011"> is how the service finds pods to forward packets to. The target pods need to have</span></div>
<div style="position:absolute;left:128.90px;top:126.41px" class="cls_011"><span class="cls_011">matching labels in their metadata attributes. If the service finds multiple pods with matching</span></div>
<div style="position:absolute;left:128.90px;top:138.40px" class="cls_011"><span class="cls_011">labels, it load balances network connections between them.</span></div>
<div style="position:absolute;left:108.00px;top:159.90px" class="cls_011"><span class="cls_011">Each service is assigned a unique IP address for clients to connect to. This IP address comes from</span></div>
<div style="position:absolute;left:108.00px;top:171.90px" class="cls_011"><span class="cls_011">another internal OpenShift SDN, distinct from the pods' internal network, but visible only to pods.</span></div>
<div style="position:absolute;left:108.00px;top:183.90px" class="cls_011"><span class="cls_011">Each pod matching the </span><span class="cls_021">selector</span><span class="cls_011"> is added to the service resource as an endpoint.</span></div>
<div style="position:absolute;left:108.00px;top:206.18px" class="cls_024"><span class="cls_024">Discovering Services</span></div>
<div style="position:absolute;left:108.00px;top:230.90px" class="cls_011"><span class="cls_011">An application typically finds a service IP address and port by using environment variables. For</span></div>
<div style="position:absolute;left:108.00px;top:242.90px" class="cls_011"><span class="cls_011">each service inside an OpenShift project, the following environment variables are automatically</span></div>
<div style="position:absolute;left:108.00px;top:254.89px" class="cls_011"><span class="cls_011">defined and injected into containers for all pods inside the same project:</span></div>
<div style="position:absolute;left:108.00px;top:278.29px" class="cls_011"><span class="cls_011">•</span><span class="cls_028"> SVC_NAME</span><span class="cls_021">_SERVICE_HOST</span><span class="cls_011"> is the service IP address.</span></div>
<div style="position:absolute;left:108.00px;top:301.69px" class="cls_011"><span class="cls_011">•</span><span class="cls_028"> SVC_NAME</span><span class="cls_021">_SERVICE_PORT</span><span class="cls_011"> is the service TCP port.</span></div>
<div style="position:absolute;left:144.00px;top:334.61px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:348.99px" class="cls_011"><span class="cls_011">The SVC_NAME part of the variable is changed to comply with DNS naming</span></div>
<div style="position:absolute;left:144.00px;top:360.98px" class="cls_011"><span class="cls_011">restrictions: letters are capitalized and underscores (_) are replaced by dashes (-).</span></div>
<div style="position:absolute;left:108.00px;top:398.88px" class="cls_011"><span class="cls_011">Another way to discover a service from a pod is by using the OpenShift internal DNS server, which</span></div>
<div style="position:absolute;left:108.00px;top:410.88px" class="cls_011"><span class="cls_011">is visible only to pods. Each service is dynamically assigned an SRV record with an FQDN of the</span></div>
<div style="position:absolute;left:108.00px;top:422.88px" class="cls_011"><span class="cls_011">form:</span></div>
<div style="position:absolute;left:108.00px;top:444.38px" class="cls_028"><span class="cls_028">SVC_NAME</span><span class="cls_021">.</span><span class="cls_028">PROJECT_NAME</span><span class="cls_021">.svc.cluster.local</span></div>
<div style="position:absolute;left:108.00px;top:465.87px" class="cls_011"><span class="cls_011">When discovering services using environment variables, a pod has to be created and started only</span></div>
<div style="position:absolute;left:108.00px;top:477.87px" class="cls_011"><span class="cls_011">after the service is created. If the application was written to discover services using DNS queries,</span></div>
<div style="position:absolute;left:108.00px;top:489.87px" class="cls_011"><span class="cls_011">however, it can find services created after the pod was started.</span></div>
<div style="position:absolute;left:108.00px;top:511.37px" class="cls_011"><span class="cls_011">There are two ways for an application to access the service from outside an OpenShift cluster:</span></div>
<div style="position:absolute;left:108.00px;top:534.77px" class="cls_011"><span class="cls_011">1.</span></div>
<div style="position:absolute;left:127.00px;top:534.77px" class="cls_021"><span class="cls_021">NodePort</span><span class="cls_011"> type: This is an older Kubernetes-based approach, where the service is exposed</span></div>
<div style="position:absolute;left:127.00px;top:546.76px" class="cls_011"><span class="cls_011">to external clients by binding to available ports on the worker node host, which then proxies</span></div>
<div style="position:absolute;left:127.00px;top:558.76px" class="cls_011"><span class="cls_011">connections to the service IP address. Use the </span><span class="cls_021">oc edit svc</span><span class="cls_011"> command to edit service</span></div>
<div style="position:absolute;left:127.00px;top:570.76px" class="cls_011"><span class="cls_011">attributes and specify </span><span class="cls_021">NodePort</span><span class="cls_011"> as the value for </span><span class="cls_021">type</span><span class="cls_011">, and provide a port value for the</span></div>
<div style="position:absolute;left:127.00px;top:582.76px" class="cls_021"><span class="cls_021">nodePort</span><span class="cls_011"> attribute. OpenShift then proxies connections to the service via the public IP</span></div>
<div style="position:absolute;left:127.00px;top:594.76px" class="cls_011"><span class="cls_011">address of the worker node host and the port value set in </span><span class="cls_021">nodePort</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:108.00px;top:618.15px" class="cls_011"><span class="cls_011">2.</span></div>
<div style="position:absolute;left:127.00px;top:618.15px" class="cls_011"><span class="cls_011">OpenShift Routes: This is the preferred approach in OpenShift to expose services using a</span></div>
<div style="position:absolute;left:127.00px;top:630.15px" class="cls_011"><span class="cls_011">unique URL. Use the </span><span class="cls_021">oc expose</span><span class="cls_011"> command to expose a service for external access or expose</span></div>
<div style="position:absolute;left:127.00px;top:642.15px" class="cls_011"><span class="cls_011">a service from the OpenShift web console.</span></div>
<div style="position:absolute;left:108.00px;top:663.65px" class="cls_011"><span class="cls_011">Figure 6.5 illustrates how </span><span class="cls_021">NodePort</span><span class="cls_011"> services allow external access to Kubernetes services.</span></div>
<div style="position:absolute;left:108.00px;top:675.65px" class="cls_011"><span class="cls_011">OpenShift routes are covered in more detail later in this course.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.36px;top:751.59px" class="cls_013"><span class="cls_013">147</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:132330px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background166.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:148.66px;top:244.53px" class="cls_020"><span class="cls_020">Figure 6.5: Alternative method for external access to a Kubernetes service</span></div>
<div style="position:absolute;left:90.00px;top:267.45px" class="cls_011"><span class="cls_011">OpenShift provides the </span><span class="cls_021">oc port-forward</span><span class="cls_011"> command for forwarding a local port to a pod port.</span></div>
<div style="position:absolute;left:90.00px;top:279.45px" class="cls_011"><span class="cls_011">This is different from having access to a pod through a service resource:</span></div>
<div style="position:absolute;left:90.00px;top:302.84px" class="cls_011"><span class="cls_011">• The port-forwarding mapping exists only on the workstation where the </span><span class="cls_021">oc</span><span class="cls_011"> client runs, while a</span></div>
<div style="position:absolute;left:99.50px;top:314.84px" class="cls_011"><span class="cls_011">service maps a port for all network users.</span></div>
<div style="position:absolute;left:90.00px;top:338.24px" class="cls_011"><span class="cls_011">• A service load-balances connections to potentially multiple pods, whereas a port-forwarding</span></div>
<div style="position:absolute;left:99.50px;top:350.24px" class="cls_011"><span class="cls_011">mapping forwards connections to a single pod.</span></div>
<div style="position:absolute;left:126.00px;top:383.16px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:397.54px" class="cls_011"><span class="cls_011">Red Hat discourages the use of the </span><span class="cls_021">NodePort</span><span class="cls_011"> approach to avoid exposing</span></div>
<div style="position:absolute;left:126.00px;top:409.53px" class="cls_011"><span class="cls_011">the service to direct connections. Mapping via port-forwarding in OpenShift is</span></div>
<div style="position:absolute;left:126.00px;top:421.53px" class="cls_011"><span class="cls_011">considered a more secure alternative.</span></div>
<div style="position:absolute;left:90.00px;top:459.43px" class="cls_011"><span class="cls_011">The following example demonstrates the use of the </span><span class="cls_021">oc port-forward</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:101.00px;top:487.15px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc port-forward mysql-openshift-1-glqrp 3306:3306</span></div>
<div style="position:absolute;left:90.00px;top:514.93px" class="cls_011"><span class="cls_011">The previous command forwards port 3306 from the developer machine to port 3306 on the </span><span class="cls_021">db</span></div>
<div style="position:absolute;left:90.00px;top:526.92px" class="cls_011"><span class="cls_011">pod, where a MySQL server (inside a container) accepts network connections.</span></div>
<div style="position:absolute;left:126.00px;top:559.85px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:574.22px" class="cls_011"><span class="cls_011">When running this command, make sure you leave the terminal window running.</span></div>
<div style="position:absolute;left:126.00px;top:586.22px" class="cls_011"><span class="cls_011">Closing the window or canceling the process stops the port mapping.</span></div>
<div style="position:absolute;left:90.00px;top:622.40px" class="cls_024"><span class="cls_024">Creating New Applications</span></div>
<div style="position:absolute;left:90.00px;top:647.12px" class="cls_011"><span class="cls_011">Simple applications, complex multitier applications, and microservice applications can be</span></div>
<div style="position:absolute;left:90.00px;top:659.12px" class="cls_011"><span class="cls_011">described by a single resource definition file. This single file would contain many pod definitions,</span></div>
<div style="position:absolute;left:90.00px;top:671.11px" class="cls_011"><span class="cls_011">service definitions to connect the pods, replication controllers or DeploymentConfigs to</span></div>
<div style="position:absolute;left:90.00px;top:683.11px" class="cls_011"><span class="cls_011">horizontally scale the application pods, PersistentVolumeClaims to persist application data, and</span></div>
<div style="position:absolute;left:90.00px;top:695.11px" class="cls_011"><span class="cls_011">anything else needed that can be managed by OpenShift.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">148</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:133132px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background167.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:144.00px;top:63.50px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:144.00px;top:77.88px" class="cls_011"><span class="cls_011">In OpenShift 4.5 the </span><span class="cls_021">oc new-app</span><span class="cls_011"> command now produces Deployment resources</span></div>
<div style="position:absolute;left:144.00px;top:89.87px" class="cls_011"><span class="cls_011">instead of DeploymentConfig resources by default. This version of DO180</span></div>
<div style="position:absolute;left:144.00px;top:101.87px" class="cls_011"><span class="cls_011">does not cover the Deployment resource, only DeploymentConfigs. To create</span></div>
<div style="position:absolute;left:144.00px;top:113.87px" class="cls_011"><span class="cls_011">DeploymentConfig resources, you can pass the </span><span class="cls_021">--as-deployment-config</span><span class="cls_011"> flag</span></div>
<div style="position:absolute;left:144.00px;top:125.87px" class="cls_011"><span class="cls_011">when invoking </span><span class="cls_021">oc new-app</span><span class="cls_011">, which is done throughout this version of the course.</span></div>
<div style="position:absolute;left:144.00px;top:137.87px" class="cls_011"><span class="cls_011">For more information, see </span><A HREF="https://docs.openshift.com/container-platform/4.5/applications/deployments/what-deployments-are.html#what-deployments-are">Understanding Deployments and DeploymentConfigs</A> </div>
<div style="position:absolute;left:144.00px;top:149.86px" class="cls_011"><span class="cls_011">[</span><A HREF="https://docs.openshift.com/container-platform/4.5/applications/deployments/what-deployments-are.html#what-deployments-are">https://docs.openshift.com/container-platform/4.5/applications/deployments/</A> </div>
<div style="position:absolute;left:144.00px;top:161.86px" class="cls_011"><span class="cls_011"> </span><A HREF="https://docs.openshift.com/container-platform/4.5/applications/deployments/what-deployments-are.html#what-deployments-are">what-deployments-are.html#what-deployments-are</A>].</div>
<div style="position:absolute;left:108.00px;top:199.76px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">oc new-app</span><span class="cls_011"> command can be used with the </span><span class="cls_021">-o json</span><span class="cls_011"> or </span><span class="cls_021">-o yaml</span><span class="cls_011"> option to create a</span></div>
<div style="position:absolute;left:108.00px;top:211.76px" class="cls_011"><span class="cls_011">skeleton resource definition file in JSON or YAML format, respectively. This file can be customized</span></div>
<div style="position:absolute;left:108.00px;top:223.76px" class="cls_011"><span class="cls_011">and used to create an application using the </span><span class="cls_021">oc create -f &lt;filename></span><span class="cls_011"> command, or merged</span></div>
<div style="position:absolute;left:108.00px;top:235.75px" class="cls_011"><span class="cls_011">with other resource definition files to create a composite application.</span></div>
<div style="position:absolute;left:108.00px;top:257.25px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">oc new-app</span><span class="cls_011"> command can create application pods to run on OpenShift in many different</span></div>
<div style="position:absolute;left:108.00px;top:269.25px" class="cls_011"><span class="cls_011">ways. It can create pods from existing docker images, from Dockerfiles, and from raw source code</span></div>
<div style="position:absolute;left:108.00px;top:281.25px" class="cls_011"><span class="cls_011">using the Source-to-Image (S2I) process.</span></div>
<div style="position:absolute;left:108.00px;top:302.75px" class="cls_011"><span class="cls_011">Run the </span><span class="cls_021">oc new-app -h</span><span class="cls_011"> command to understand all the different options available for creating</span></div>
<div style="position:absolute;left:108.00px;top:314.74px" class="cls_011"><span class="cls_011">new applications on OpenShift.</span></div>
<div style="position:absolute;left:108.00px;top:336.24px" class="cls_011"><span class="cls_011">The following command creates an application based on an image, </span><span class="cls_021">mysql</span><span class="cls_011">, from Docker Hub, with</span></div>
<div style="position:absolute;left:108.00px;top:348.24px" class="cls_011"><span class="cls_011">the label set to </span><span class="cls_021">db=mysql</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:119.00px;top:375.96px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc new-app mysql --as-deployment-config \</span></div>
<div style="position:absolute;left:119.00px;top:387.95px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">MYSQL_USER=user MYSQL_PASSWORD=pass MYSQL_DATABASE=testdb -l db=mysql</span></div>
<div style="position:absolute;left:108.00px;top:415.73px" class="cls_011"><span class="cls_011">The following figure shows the Kubernetes and OpenShift resources created by the </span><span class="cls_021">oc new-app</span></div>
<div style="position:absolute;left:108.00px;top:427.73px" class="cls_011"><span class="cls_011">command when the argument is a container image:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.16px;top:751.59px" class="cls_013"><span class="cls_013">149</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:133934px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background168.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:195.15px;top:329.03px" class="cls_020"><span class="cls_020">Figure 6.6: Resources created for a new application</span></div>
<div style="position:absolute;left:90.00px;top:351.94px" class="cls_011"><span class="cls_011">The following command creates an application based on an image from a private Docker image</span></div>
<div style="position:absolute;left:90.00px;top:363.94px" class="cls_011"><span class="cls_011">registry:</span></div>
<div style="position:absolute;left:101.00px;top:391.66px" class="cls_026"><span class="cls_026">oc new-app --docker-image=myregistry.com/mycompany/myapp --name=myapp --as-</span></div>
<div style="position:absolute;left:101.00px;top:403.65px" class="cls_026"><span class="cls_026">deployment-config</span></div>
<div style="position:absolute;left:90.00px;top:431.43px" class="cls_011"><span class="cls_011">The following command creates an application based on source code stored in a Git repository:</span></div>
<div style="position:absolute;left:101.00px;top:459.15px" class="cls_026"><span class="cls_026">oc new-app </span><A HREF="https://github.com/openshift/ruby-hello-world/">https://github.com/openshift/ruby-hello-world</A> --name=ruby-hello --as-</div>
<div style="position:absolute;left:101.00px;top:471.15px" class="cls_026"><span class="cls_026">deployment-config</span></div>
<div style="position:absolute;left:90.00px;top:498.93px" class="cls_011"><span class="cls_011">You will learn more about the Source-to-Image (S2I) process, its associated concepts, and more</span></div>
<div style="position:absolute;left:90.00px;top:510.93px" class="cls_011"><span class="cls_011">advanced ways to use </span><span class="cls_021">oc new-app</span><span class="cls_011"> to build applications for OpenShift in the next section.</span></div>
<div style="position:absolute;left:90.00px;top:533.21px" class="cls_024"><span class="cls_024">Managing OpenShift Resources at the Command Line</span></div>
<div style="position:absolute;left:90.00px;top:557.92px" class="cls_011"><span class="cls_011">There are several essential commands used to manage OpenShift resources as described below.</span></div>
<div style="position:absolute;left:90.00px;top:579.42px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">oc get</span><span class="cls_011"> command to retrieve information about resources in the cluster. Generally, this</span></div>
<div style="position:absolute;left:90.00px;top:591.42px" class="cls_011"><span class="cls_011">command outputs only the most important characteristics of the resources and omits more</span></div>
<div style="position:absolute;left:90.00px;top:603.42px" class="cls_011"><span class="cls_011">detailed information.</span></div>
<div style="position:absolute;left:90.00px;top:624.92px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">oc get </span><span class="cls_028">RESOURCE_TYPE</span><span class="cls_011"> command displays a summary of all resources of the specified</span></div>
<div style="position:absolute;left:90.00px;top:636.91px" class="cls_011"><span class="cls_011">type. The following illustrates example output of the </span><span class="cls_021">oc get pods</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:101.00px;top:664.63px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:192.20px;top:664.63px" class="cls_026"><span class="cls_026">READY   STATUS</span></div>
<div style="position:absolute;left:288.20px;top:664.63px" class="cls_026"><span class="cls_026">RESTARTS  AGE</span></div>
<div style="position:absolute;left:101.00px;top:676.63px" class="cls_026"><span class="cls_026">nginx-1-5r583</span></div>
<div style="position:absolute;left:192.20px;top:676.63px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:230.60px;top:676.63px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:288.20px;top:676.63px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:336.20px;top:676.63px" class="cls_026"><span class="cls_026">1h</span></div>
<div style="position:absolute;left:101.00px;top:688.63px" class="cls_026"><span class="cls_026">myapp-1-l44m7</span></div>
<div style="position:absolute;left:192.20px;top:688.63px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:230.60px;top:688.63px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:288.20px;top:688.63px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:336.20px;top:688.63px" class="cls_026"><span class="cls_026">1h</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">150</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:134736px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background169.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:52.04px" class="cls_002"><span class="cls_002">oc get all</span></div>
<div style="position:absolute;left:108.00px;top:73.98px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">oc get all</span><span class="cls_011"> command to retrieve a summary of the most important components of a</span></div>
<div style="position:absolute;left:108.00px;top:85.97px" class="cls_011"><span class="cls_011">cluster. This command iterates through the major resource types for the current project and prints</span></div>
<div style="position:absolute;left:108.00px;top:97.97px" class="cls_011"><span class="cls_011">out a summary of their information.</span></div>
<div style="position:absolute;left:119.00px;top:137.69px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:171.80px;top:137.69px" class="cls_026"><span class="cls_026">DOCKER REPO</span></div>
<div style="position:absolute;left:368.60px;top:137.69px" class="cls_026"><span class="cls_026">TAGS</span></div>
<div style="position:absolute;left:416.60px;top:137.69px" class="cls_026"><span class="cls_026">UPDATED</span></div>
<div style="position:absolute;left:119.00px;top:149.68px" class="cls_026"><span class="cls_026">is/nginx</span></div>
<div style="position:absolute;left:171.80px;top:149.68px" class="cls_026"><span class="cls_026">172.30.1.1:5000/basic-kubernetes/nginx</span></div>
<div style="position:absolute;left:368.60px;top:149.68px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:416.60px;top:149.68px" class="cls_026"><span class="cls_026">About an hour ago</span></div>
<div style="position:absolute;left:119.00px;top:173.68px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:171.80px;top:173.68px" class="cls_026"><span class="cls_026">REVISION   DESIRED   CURRENT   TRIGGERED BY</span></div>
<div style="position:absolute;left:119.00px;top:185.68px" class="cls_026"><span class="cls_026">dc/nginx</span></div>
<div style="position:absolute;left:171.80px;top:185.68px" class="cls_026"><span class="cls_026">1</span></div>
<div style="position:absolute;left:224.60px;top:185.68px" class="cls_026"><span class="cls_026">1</span></div>
<div style="position:absolute;left:272.60px;top:185.68px" class="cls_026"><span class="cls_026">1</span></div>
<div style="position:absolute;left:320.60px;top:185.68px" class="cls_026"><span class="cls_026">config,image(nginx:latest)</span></div>
<div style="position:absolute;left:119.00px;top:209.67px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:181.40px;top:209.67px" class="cls_026"><span class="cls_026">DESIRED   CURRENT   READY</span></div>
<div style="position:absolute;left:325.40px;top:209.67px" class="cls_026"><span class="cls_026">AGE</span></div>
<div style="position:absolute;left:119.00px;top:221.67px" class="cls_026"><span class="cls_026">rc/nginx-1</span></div>
<div style="position:absolute;left:181.40px;top:221.67px" class="cls_026"><span class="cls_026">1</span></div>
<div style="position:absolute;left:229.40px;top:221.67px" class="cls_026"><span class="cls_026">1</span></div>
<div style="position:absolute;left:277.40px;top:221.67px" class="cls_026"><span class="cls_026">1</span></div>
<div style="position:absolute;left:325.40px;top:221.67px" class="cls_026"><span class="cls_026">1h</span></div>
<div style="position:absolute;left:119.00px;top:245.67px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:176.60px;top:245.67px" class="cls_026"><span class="cls_026">CLUSTER-IP</span></div>
<div style="position:absolute;left:248.60px;top:245.67px" class="cls_026"><span class="cls_026">EXTERNAL-IP   PORT(S)</span></div>
<div style="position:absolute;left:397.40px;top:245.67px" class="cls_026"><span class="cls_026">AGE</span></div>
<div style="position:absolute;left:119.00px;top:257.67px" class="cls_026"><span class="cls_026">svc/nginx</span></div>
<div style="position:absolute;left:176.60px;top:257.67px" class="cls_026"><span class="cls_026">172.30.72.75</span></div>
<div style="position:absolute;left:248.60px;top:257.67px" class="cls_026"><span class="cls_026">&lt;none></span></div>
<div style="position:absolute;left:315.80px;top:257.67px" class="cls_026"><span class="cls_026">80/TCP,443/TCP</span></div>
<div style="position:absolute;left:397.40px;top:257.67px" class="cls_026"><span class="cls_026">1h</span></div>
<div style="position:absolute;left:119.00px;top:281.66px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:210.20px;top:281.66px" class="cls_026"><span class="cls_026">READY</span></div>
<div style="position:absolute;left:258.20px;top:281.66px" class="cls_026"><span class="cls_026">STATUS</span></div>
<div style="position:absolute;left:306.20px;top:281.66px" class="cls_026"><span class="cls_026">RESTARTS   AGE</span></div>
<div style="position:absolute;left:119.00px;top:293.66px" class="cls_026"><span class="cls_026">po/nginx-1-ypp8t</span></div>
<div style="position:absolute;left:210.20px;top:293.66px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:258.20px;top:293.66px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:306.20px;top:293.66px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:359.00px;top:293.66px" class="cls_026"><span class="cls_026">1h</span></div>
<div style="position:absolute;left:108.00px;top:324.00px" class="cls_002"><span class="cls_002">oc describe RESOURCE_TYPE RESOURCE_NAME</span></div>
<div style="position:absolute;left:108.00px;top:345.94px" class="cls_011"><span class="cls_011">If the summaries provided by </span><span class="cls_021">oc get</span><span class="cls_011"> are insufficient, use the </span><span class="cls_021">oc describe</span><span class="cls_011"> command to retrieve</span></div>
<div style="position:absolute;left:108.00px;top:357.94px" class="cls_011"><span class="cls_011">additional information. Unlike the </span><span class="cls_021">oc get</span><span class="cls_011"> command, there is no way to iterate through all the</span></div>
<div style="position:absolute;left:108.00px;top:369.94px" class="cls_011"><span class="cls_011">different resources by type. Although most major resources can be described, this functionality</span></div>
<div style="position:absolute;left:108.00px;top:381.93px" class="cls_011"><span class="cls_011">is not available across all resources. The following is an example output from describing a pod</span></div>
<div style="position:absolute;left:108.00px;top:393.93px" class="cls_011"><span class="cls_011">resource:</span></div>
<div style="position:absolute;left:119.00px;top:421.65px" class="cls_026"><span class="cls_026">Name:</span></div>
<div style="position:absolute;left:176.60px;top:421.65px" class="cls_026"><span class="cls_026">mysql-openshift-1-glqrp</span></div>
<div style="position:absolute;left:119.00px;top:433.65px" class="cls_026"><span class="cls_026">Namespace:</span></div>
<div style="position:absolute;left:215.00px;top:433.65px" class="cls_026"><span class="cls_026">mysql-openshift</span></div>
<div style="position:absolute;left:119.00px;top:445.64px" class="cls_026"><span class="cls_026">Priority:</span></div>
<div style="position:absolute;left:215.00px;top:445.64px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:119.00px;top:457.64px" class="cls_026"><span class="cls_026">PriorityClassName:</span></div>
<div style="position:absolute;left:215.00px;top:457.64px" class="cls_026"><span class="cls_026">none</span></div>
<div style="position:absolute;left:119.00px;top:469.64px" class="cls_026"><span class="cls_026">Node:</span></div>
<div style="position:absolute;left:215.00px;top:469.64px" class="cls_026"><span class="cls_026">cluster-worker-1/172.25.250.52</span></div>
<div style="position:absolute;left:119.00px;top:481.64px" class="cls_026"><span class="cls_026">Start Time:</span></div>
<div style="position:absolute;left:215.00px;top:481.64px" class="cls_026"><span class="cls_026">Fri, 15 Feb 2019 02:14:34 +0000</span></div>
<div style="position:absolute;left:119.00px;top:493.64px" class="cls_026"><span class="cls_026">Labels:</span></div>
<div style="position:absolute;left:215.00px;top:493.64px" class="cls_026"><span class="cls_026">app=mysql-openshift</span></div>
<div style="position:absolute;left:215.00px;top:505.64px" class="cls_026"><span class="cls_026">deployment=mysql-openshift-1</span></div>
<div style="position:absolute;left:215.00px;top:517.63px" class="cls_026"><span class="cls_026">deploymentconfig=mysql-openshift</span></div>
<div style="position:absolute;left:119.00px;top:529.63px" class="cls_026"><span class="cls_026">Annotations:</span></div>
<div style="position:absolute;left:215.00px;top:529.63px" class="cls_026"><span class="cls_026">openshift.io/deployment-config.latest-version: 1</span></div>
<div style="position:absolute;left:215.00px;top:541.63px" class="cls_026"><span class="cls_026">openshift.io/deployment-config.name: mysql-openshift</span></div>
<div style="position:absolute;left:215.00px;top:553.63px" class="cls_026"><span class="cls_026">openshift.io/deployment.name: mysql-openshift-1</span></div>
<div style="position:absolute;left:215.00px;top:565.63px" class="cls_026"><span class="cls_026">openshift.io/generated-by: OpenShiftNewApp</span></div>
<div style="position:absolute;left:215.00px;top:577.62px" class="cls_026"><span class="cls_026">openshift.io/scc: restricted</span></div>
<div style="position:absolute;left:119.00px;top:589.62px" class="cls_026"><span class="cls_026">Status:</span></div>
<div style="position:absolute;left:215.00px;top:589.62px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:119.00px;top:601.62px" class="cls_026"><span class="cls_026">IP:</span></div>
<div style="position:absolute;left:215.00px;top:601.62px" class="cls_026"><span class="cls_026">10.129.0.85</span></div>
<div style="position:absolute;left:108.00px;top:631.96px" class="cls_002"><span class="cls_002">oc get RESOURCE_TYPE RESOURCE_NAME -o yaml</span></div>
<div style="position:absolute;left:108.00px;top:653.90px" class="cls_011"><span class="cls_011">This command can be used to export a resource definition. Typical use cases include creating a</span></div>
<div style="position:absolute;left:108.00px;top:665.90px" class="cls_011"><span class="cls_011">backup, or to aid in the modification of a definition. The </span><span class="cls_021">-o yaml</span><span class="cls_011"> option prints out the object</span></div>
<div style="position:absolute;left:108.00px;top:677.89px" class="cls_011"><span class="cls_011">representation in YAML format, but this can be changed to JSON format by providing a </span><span class="cls_021">-o json</span></div>
<div style="position:absolute;left:108.00px;top:689.89px" class="cls_011"><span class="cls_011">option.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:506.78px;top:751.59px" class="cls_013"><span class="cls_013">151</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:135538px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background170.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:52.04px" class="cls_002"><span class="cls_002">oc create</span></div>
<div style="position:absolute;left:90.00px;top:73.98px" class="cls_011"><span class="cls_011">This command creates resources from a resource definition. Typically, this is paired with the </span><span class="cls_021">oc</span></div>
<div style="position:absolute;left:90.00px;top:85.97px" class="cls_021"><span class="cls_021">get RESOURCE_TYPE RESOURCE_NAME -o yaml</span><span class="cls_011"> command for editing definitions.</span></div>
<div style="position:absolute;left:90.00px;top:110.04px" class="cls_002"><span class="cls_002">oc edit</span></div>
<div style="position:absolute;left:90.00px;top:131.97px" class="cls_011"><span class="cls_011">This command allows the user to edit resources of a resource definition. By default, this command</span></div>
<div style="position:absolute;left:90.00px;top:143.97px" class="cls_011"><span class="cls_011">opens a </span><span class="cls_021">vi</span><span class="cls_011"> buffer for editing the resource definition.</span></div>
<div style="position:absolute;left:90.00px;top:168.03px" class="cls_002"><span class="cls_002">oc delete RESOURCE_TYPE name</span></div>
<div style="position:absolute;left:90.00px;top:189.97px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">oc delete</span><span class="cls_011"> command removes a resource from an OpenShift cluster. Note that a</span></div>
<div style="position:absolute;left:90.00px;top:201.97px" class="cls_011"><span class="cls_011">fundamental understanding of the OpenShift architecture is needed here, because deleting</span></div>
<div style="position:absolute;left:90.00px;top:213.96px" class="cls_011"><span class="cls_011">managed resources such as pods results in new instances of those resources being automatically</span></div>
<div style="position:absolute;left:90.00px;top:225.96px" class="cls_011"><span class="cls_011">created. When a project is deleted, it deletes all of the resources and applications contained within</span></div>
<div style="position:absolute;left:90.00px;top:237.96px" class="cls_011"><span class="cls_011">it.</span></div>
<div style="position:absolute;left:90.00px;top:262.02px" class="cls_002"><span class="cls_002">oc exec CONTAINER_ID options command</span></div>
<div style="position:absolute;left:90.00px;top:283.96px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">oc exec</span><span class="cls_011"> command executes commands inside a container. You can use this command to run</span></div>
<div style="position:absolute;left:90.00px;top:295.96px" class="cls_011"><span class="cls_011">interactive and noninteractive batch commands as part of a script.</span></div>
<div style="position:absolute;left:90.00px;top:318.24px" class="cls_024"><span class="cls_024">Labelling resources</span></div>
<div style="position:absolute;left:90.00px;top:342.95px" class="cls_011"><span class="cls_011">When working with many resources in the same project, it is often useful to group those resources</span></div>
<div style="position:absolute;left:90.00px;top:354.95px" class="cls_011"><span class="cls_011">by application, environment, or some other criteria. To establish these groups, you define labels</span></div>
<div style="position:absolute;left:90.00px;top:366.95px" class="cls_011"><span class="cls_011">for the resources in your project. Labels are part of the </span><span class="cls_021">metadata</span><span class="cls_011"> section of a resource, and are</span></div>
<div style="position:absolute;left:90.00px;top:378.95px" class="cls_011"><span class="cls_011">defined as key/value pairs, as shown in the following example:</span></div>
<div style="position:absolute;left:101.00px;top:418.66px" class="cls_026"><span class="cls_026">apiVersion: v1</span></div>
<div style="position:absolute;left:101.00px;top:430.66px" class="cls_026"><span class="cls_026">kind: Service</span></div>
<div style="position:absolute;left:101.00px;top:442.66px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:101.00px;top:454.66px" class="cls_029"><span class="cls_029">...contents omitted...</span></div>
<div style="position:absolute;left:110.60px;top:466.65px" class="cls_026"><span class="cls_026">labels:</span></div>
<div style="position:absolute;left:120.20px;top:478.65px" class="cls_026"><span class="cls_026">app: nexus</span></div>
<div style="position:absolute;left:120.20px;top:490.65px" class="cls_026"><span class="cls_026">template: nexus-persistent-template</span></div>
<div style="position:absolute;left:110.60px;top:502.65px" class="cls_026"><span class="cls_026">name: nexus</span></div>
<div style="position:absolute;left:101.00px;top:514.65px" class="cls_029"><span class="cls_029">...contents omitted...</span></div>
<div style="position:absolute;left:90.00px;top:542.43px" class="cls_011"><span class="cls_011">Many </span><span class="cls_021">oc</span><span class="cls_011"> subcommands support a </span><span class="cls_021">-l</span><span class="cls_011"> option to process resources from a label specification.</span></div>
<div style="position:absolute;left:90.00px;top:554.42px" class="cls_011"><span class="cls_011">For the </span><span class="cls_021">oc get</span><span class="cls_011"> command, the </span><span class="cls_021">-l</span><span class="cls_011"> option acts as a selector to only retrieve objects that have a</span></div>
<div style="position:absolute;left:90.00px;top:566.42px" class="cls_011"><span class="cls_011">matching label:</span></div>
<div style="position:absolute;left:101.00px;top:594.14px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc get svc,dc -l app=nexus</span></div>
<div style="position:absolute;left:101.00px;top:606.14px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:177.80px;top:606.14px" class="cls_026"><span class="cls_026">TYPE</span></div>
<div style="position:absolute;left:235.40px;top:606.14px" class="cls_026"><span class="cls_026">CLUSTER-IP</span></div>
<div style="position:absolute;left:312.20px;top:606.14px" class="cls_026"><span class="cls_026">EXTERNAL-IP   PORT(S)</span></div>
<div style="position:absolute;left:432.20px;top:606.14px" class="cls_026"><span class="cls_026">AGE</span></div>
<div style="position:absolute;left:101.00px;top:618.14px" class="cls_026"><span class="cls_026">service/nexus</span></div>
<div style="position:absolute;left:177.80px;top:618.14px" class="cls_026"><span class="cls_026">ClusterIP</span></div>
<div style="position:absolute;left:235.40px;top:618.14px" class="cls_026"><span class="cls_026">172.30.29.218</span></div>
<div style="position:absolute;left:312.20px;top:618.14px" class="cls_026"><span class="cls_026">&lt;none></span></div>
<div style="position:absolute;left:379.40px;top:618.14px" class="cls_026"><span class="cls_026">8081/TCP</span></div>
<div style="position:absolute;left:432.20px;top:618.14px" class="cls_026"><span class="cls_026">4h</span></div>
<div style="position:absolute;left:101.00px;top:642.13px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:307.40px;top:642.13px" class="cls_026"><span class="cls_026">REVISION   DESIRED   CURRENT   ...</span></div>
<div style="position:absolute;left:101.00px;top:654.13px" class="cls_026"><span class="cls_026">deploymentconfig.apps.openshift.io/nexus</span></div>
<div style="position:absolute;left:307.40px;top:654.13px" class="cls_026"><span class="cls_026">1</span></div>
<div style="position:absolute;left:360.20px;top:654.13px" class="cls_026"><span class="cls_026">1</span></div>
<div style="position:absolute;left:408.20px;top:654.13px" class="cls_026"><span class="cls_026">1</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">152</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:136340px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background171.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:144.00px;top:63.50px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:77.88px" class="cls_011"><span class="cls_011">Although any label can appear in resources, both the </span><span class="cls_021">app</span><span class="cls_011"> and </span><span class="cls_021">template</span><span class="cls_011"> keys are</span></div>
<div style="position:absolute;left:144.00px;top:89.87px" class="cls_011"><span class="cls_011">common for labels. By convention, the </span><span class="cls_021">app</span><span class="cls_011"> key indicates the application related</span></div>
<div style="position:absolute;left:144.00px;top:101.87px" class="cls_011"><span class="cls_011">to this resource. The </span><span class="cls_021">template</span><span class="cls_011"> key labels all resources generated by the same</span></div>
<div style="position:absolute;left:144.00px;top:113.87px" class="cls_011"><span class="cls_011">template with the template's name.</span></div>
<div style="position:absolute;left:108.00px;top:151.77px" class="cls_011"><span class="cls_011">When using templates to generate resources, labels are especially useful. A template resource has</span></div>
<div style="position:absolute;left:108.00px;top:163.77px" class="cls_011"><span class="cls_011">a </span><span class="cls_021">labels</span><span class="cls_011"> section separated from the </span><span class="cls_021">metadata.labels</span><span class="cls_011"> section. Labels defined in the </span><span class="cls_021">labels</span></div>
<div style="position:absolute;left:108.00px;top:175.76px" class="cls_011"><span class="cls_011">section do not apply to the template itself, but are added to every resource generated by the</span></div>
<div style="position:absolute;left:108.00px;top:187.76px" class="cls_011"><span class="cls_011">template.</span></div>
<div style="position:absolute;left:119.00px;top:215.48px" class="cls_026"><span class="cls_026">apiVersion: template.openshift.io/v1</span></div>
<div style="position:absolute;left:119.00px;top:227.48px" class="cls_026"><span class="cls_026">kind: Template</span></div>
<div style="position:absolute;left:119.00px;top:239.48px" class="cls_026"><span class="cls_026">labels:</span></div>
<div style="position:absolute;left:128.60px;top:251.47px" class="cls_026"><span class="cls_026">app: nexus</span></div>
<div style="position:absolute;left:128.60px;top:263.47px" class="cls_026"><span class="cls_026">template: nexus-persistent-template</span></div>
<div style="position:absolute;left:119.00px;top:275.47px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:119.00px;top:287.47px" class="cls_029"><span class="cls_029">...contents omitted...</span></div>
<div style="position:absolute;left:128.60px;top:299.46px" class="cls_026"><span class="cls_026">labels:</span></div>
<div style="position:absolute;left:138.20px;top:311.46px" class="cls_026"><span class="cls_026">maintainer: redhat</span></div>
<div style="position:absolute;left:128.60px;top:323.46px" class="cls_026"><span class="cls_026">name: nexus-persistent</span></div>
<div style="position:absolute;left:119.00px;top:335.46px" class="cls_029"><span class="cls_029">...contents omitted...</span></div>
<div style="position:absolute;left:119.00px;top:347.46px" class="cls_026"><span class="cls_026">objects:</span></div>
<div style="position:absolute;left:119.00px;top:359.45px" class="cls_026"><span class="cls_026">- apiVersion: v1</span></div>
<div style="position:absolute;left:128.60px;top:371.45px" class="cls_026"><span class="cls_026">kind: Service</span></div>
<div style="position:absolute;left:128.60px;top:383.45px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:138.20px;top:395.45px" class="cls_026"><span class="cls_026">name: nexus</span></div>
<div style="position:absolute;left:138.20px;top:407.45px" class="cls_026"><span class="cls_026">labels:</span></div>
<div style="position:absolute;left:147.80px;top:419.45px" class="cls_026"><span class="cls_026">version: 1</span></div>
<div style="position:absolute;left:119.00px;top:431.44px" class="cls_029"><span class="cls_029">...contents omitted...</span></div>
<div style="position:absolute;left:108.00px;top:459.22px" class="cls_011"><span class="cls_011">The previous example defines a template resource with a single label: </span><span class="cls_021">maintainer: redhat</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:108.00px;top:471.22px" class="cls_011"><span class="cls_011">The template generates a service resource with three labels: </span><span class="cls_021">app: nexus</span><span class="cls_011">, </span><span class="cls_021">template: nexus-</span></div>
<div style="position:absolute;left:108.00px;top:483.22px" class="cls_021"><span class="cls_021">persistent-template</span><span class="cls_011">, and </span><span class="cls_021">version: 1</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.86px;top:751.59px" class="cls_013"><span class="cls_013">153</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:137142px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background172.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:126.00px;top:63.50px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:126.00px;top:77.88px" class="cls_011"><span class="cls_011">Additional information about pods and services is available in the Pods and Services</span></div>
<div style="position:absolute;left:126.00px;top:89.87px" class="cls_011"><span class="cls_011">section of the OpenShift Container Platform documentation:</span></div>
<div style="position:absolute;left:126.00px;top:101.81px" class="cls_022"><span class="cls_022">Architecture</span></div>
<div style="position:absolute;left:126.00px;top:113.87px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.5/html-single/architecture/index">https://access.redhat.com/documentation/en-us/</A> </div>
<div style="position:absolute;left:126.00px;top:125.87px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.5/html-single/architecture/index">openshift_container_platform/4.5/html-single/architecture/index</A> </div>
<div style="position:absolute;left:126.00px;top:147.37px" class="cls_011"><span class="cls_011">Additional information about creating images is available in the OpenShift</span></div>
<div style="position:absolute;left:126.00px;top:159.36px" class="cls_011"><span class="cls_011">Container Platform documentation:</span></div>
<div style="position:absolute;left:126.00px;top:171.30px" class="cls_022"><span class="cls_022">Creating Images</span></div>
<div style="position:absolute;left:126.00px;top:183.36px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.5/html-single/images/index">https://access.redhat.com/documentation/en-us/</A> </div>
<div style="position:absolute;left:126.00px;top:195.36px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.5/html-single/images/index">openshift_container_platform/4.5/html-single/images/index</A> </div>
<div style="position:absolute;left:126.00px;top:216.86px" class="cls_011"><span class="cls_011">Labels and label selectors details are available in Working with Kubernetes Objects</span></div>
<div style="position:absolute;left:126.00px;top:228.85px" class="cls_011"><span class="cls_011">section for the Kubernetes documentation:</span></div>
<div style="position:absolute;left:126.00px;top:240.79px" class="cls_022"><span class="cls_022">Labels and Selectors</span></div>
<div style="position:absolute;left:126.00px;top:252.85px" class="cls_033"><span class="cls_033"> </span><A HREF="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/">https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/</A> </div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">154</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:137944px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background173.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Deploying a Database Server on</span></div>
<div style="position:absolute;left:108.00px;top:112.56px" class="cls_014"><span class="cls_014">OpenShift</span></div>
<div style="position:absolute;left:120.00px;top:158.59px" class="cls_011"><span class="cls_011">In this exercise, you will create and deploy a MySQL database pod on OpenShift using the </span><span class="cls_021">oc</span></div>
<div style="position:absolute;left:120.00px;top:170.59px" class="cls_021"><span class="cls_021">new-app</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:120.00px;top:193.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:120.00px;top:211.59px" class="cls_011"><span class="cls_011">You should be able to create and deploy a MySQL database pod on OpenShift.</span></div>
<div style="position:absolute;left:120.00px;top:234.65px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:120.00px;top:252.58px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the following command to set up the environment:</span></div>
<div style="position:absolute;left:119.00px;top:280.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab openshift-resources start</span></div>
<div style="position:absolute;left:119.41px;top:334.92px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:137.00px;top:334.98px" class="cls_011"><span class="cls_011">Prepare the lab environment.</span></div>
<div style="position:absolute;left:137.00px;top:359.38px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:161.70px;top:359.38px" class="cls_011"><span class="cls_011">Load your classroom environment configuration.</span></div>
<div style="position:absolute;left:161.70px;top:375.38px" class="cls_011"><span class="cls_011">Run the following command to load the environment variables created in the first</span></div>
<div style="position:absolute;left:161.70px;top:387.38px" class="cls_011"><span class="cls_011">guided exercise:</span></div>
<div style="position:absolute;left:119.00px;top:415.09px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">source /usr/local/etc/ocp4.config</span></div>
<div style="position:absolute;left:137.00px;top:445.77px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:161.70px;top:445.77px" class="cls_011"><span class="cls_011">Log in to the OpenShift cluster.</span></div>
<div style="position:absolute;left:119.00px;top:473.49px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc login -u ${RHT_OCP4_DEV_USER} -p \</span></div>
<div style="position:absolute;left:119.00px;top:485.49px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}</span></div>
<div style="position:absolute;left:119.00px;top:497.48px" class="cls_026"><span class="cls_026">Login successful</span></div>
<div style="position:absolute;left:119.00px;top:509.48px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:137.00px;top:540.16px" class="cls_011"><span class="cls_011">1.3.</span></div>
<div style="position:absolute;left:161.70px;top:540.16px" class="cls_011"><span class="cls_011">Create a new project that contains your RHOCP developer username for the</span></div>
<div style="position:absolute;left:161.70px;top:552.16px" class="cls_011"><span class="cls_011">resources you create during this exercise:</span></div>
<div style="position:absolute;left:119.00px;top:579.88px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc new-project ${RHT_OCP4_DEV_USER}-mysql-openshift</span></div>
<div style="position:absolute;left:119.00px;top:591.88px" class="cls_026"><span class="cls_026">Now using project </span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.41px;top:622.10px" class="cls_022"><span class="cls_022">2.</span><span class="cls_011">   Create a new application from the </span><span class="cls_021">rhscl/mysql-57-rhel7</span><span class="cls_011"> container image using the </span><span class="cls_021">oc</span></div>
<div style="position:absolute;left:137.00px;top:634.16px" class="cls_021"><span class="cls_021">new-app</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:137.00px;top:650.16px" class="cls_011"><span class="cls_011">This image requires that you use the </span><span class="cls_021">-e</span><span class="cls_011"> option to set the </span><span class="cls_021">MYSQL_USER</span><span class="cls_011">, </span><span class="cls_021">MYSQL_PASSWORD</span><span class="cls_011">,</span></div>
<div style="position:absolute;left:137.00px;top:662.16px" class="cls_021"><span class="cls_021">MYSQL_DATABASE</span><span class="cls_011">, and </span><span class="cls_021">MYSQL_ROOT_PASSWORD</span><span class="cls_011"> environment variables.</span></div>
<div style="position:absolute;left:137.00px;top:678.16px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">--docker-image</span><span class="cls_011"> option with the </span><span class="cls_021">oc new-app</span><span class="cls_011"> command to specify the</span></div>
<div style="position:absolute;left:137.00px;top:690.16px" class="cls_011"><span class="cls_011">classroom private registry URI so that OpenShift does not try and pull the image from the</span></div>
<div style="position:absolute;left:137.00px;top:702.16px" class="cls_011"><span class="cls_011">internet:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.95px;top:751.59px" class="cls_013"><span class="cls_013">155</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:138746px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background174.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:101.00px;top:61.70px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc new-app --as-deployment-config \</span></div>
<div style="position:absolute;left:101.00px;top:73.70px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--docker-image=registry.access.redhat.com/rhscl/mysql-57-rhel7:latest \</span></div>
<div style="position:absolute;left:101.00px;top:85.70px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--name=mysql-openshift \</span></div>
<div style="position:absolute;left:101.00px;top:97.70px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=testdb \</span></div>
<div style="position:absolute;left:101.00px;top:109.70px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-e MYSQL_ROOT_PASSWORD=r00tpa55</span></div>
<div style="position:absolute;left:101.00px;top:121.70px" class="cls_026"><span class="cls_026">--> Found container image 60726b3 (14 months old) from registry.access.redhat.com</span></div>
<div style="position:absolute;left:105.80px;top:133.70px" class="cls_026"><span class="cls_026">for "registry.access.redhat.com/rhscl/mysql-57-rhel7:latest"</span></div>
<div style="position:absolute;left:101.00px;top:145.70px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:157.70px" class="cls_026"><span class="cls_026">--> Creating resources ...</span></div>
<div style="position:absolute;left:120.20px;top:169.70px" class="cls_026"><span class="cls_026">imagestream.image.openshift.io "mysql-openshift" created</span></div>
<div style="position:absolute;left:120.20px;top:181.70px" class="cls_026"><span class="cls_026">deploymentconfig.apps.openshift.io "mysql-openshift" created</span></div>
<div style="position:absolute;left:120.20px;top:193.70px" class="cls_026"><span class="cls_026">service "mysql-openshift" created</span></div>
<div style="position:absolute;left:101.00px;top:205.70px" class="cls_026"><span class="cls_026">--> Success</span></div>
<div style="position:absolute;left:120.20px;top:217.70px" class="cls_026"><span class="cls_026">Application is not exposed. You can expose services to the outside world by</span></div>
<div style="position:absolute;left:105.80px;top:229.70px" class="cls_026"><span class="cls_026">executing one or more of the commands below:</span></div>
<div style="position:absolute;left:125.00px;top:241.70px" class="cls_026"><span class="cls_026">'oc expose svc/mysql-openshift'</span></div>
<div style="position:absolute;left:120.20px;top:253.70px" class="cls_026"><span class="cls_026">Run 'oc status' to view your app.</span></div>
<div style="position:absolute;left:101.41px;top:283.92px" class="cls_022"><span class="cls_022">3.</span><span class="cls_011">  Verify that the MySQL pod was created successfully and view the details about the pod and</span></div>
<div style="position:absolute;left:119.00px;top:295.98px" class="cls_011"><span class="cls_011">its service.</span></div>
<div style="position:absolute;left:119.00px;top:319.36px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:143.70px;top:319.36px" class="cls_011"><span class="cls_011">Run the </span><span class="cls_021">oc status</span><span class="cls_011"> command to view the status of the new application and verify</span></div>
<div style="position:absolute;left:143.70px;top:331.36px" class="cls_011"><span class="cls_011">that the deployment of the MySQL image was successful:</span></div>
<div style="position:absolute;left:101.00px;top:359.07px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc status</span></div>
<div style="position:absolute;left:101.00px;top:371.07px" class="cls_026"><span class="cls_026">In project ${RHT_OCP4_DEV_USER}-mysql-openshift on server ...</span></div>
<div style="position:absolute;left:101.00px;top:395.07px" class="cls_026"><span class="cls_026">svc/mysql-openshift - 172.30.114.39:3306</span></div>
<div style="position:absolute;left:110.60px;top:407.06px" class="cls_026"><span class="cls_026">dc/mysql-openshift deploys istag/mysql-openshift:latest</span></div>
<div style="position:absolute;left:120.20px;top:419.06px" class="cls_026"><span class="cls_026">deployment #1 running for 11 seconds - 0/1 pods</span></div>
<div style="position:absolute;left:101.00px;top:431.06px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:460.72px" class="cls_011"><span class="cls_011">3.2.   List the pods in this project to verify that the MySQL pod is ready and running:</span></div>
<div style="position:absolute;left:101.00px;top:488.44px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc get pods</span></div>
<div style="position:absolute;left:101.00px;top:500.43px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:230.60px;top:500.43px" class="cls_026"><span class="cls_026">READY   STATUS</span></div>
<div style="position:absolute;left:326.60px;top:500.43px" class="cls_026"><span class="cls_026">RESTARTS   AGE</span></div>
<div style="position:absolute;left:101.00px;top:512.43px" class="cls_026"><span class="cls_026">mysql-openshift-1-deploy</span></div>
<div style="position:absolute;left:230.60px;top:512.43px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:269.00px;top:512.43px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:326.60px;top:512.43px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:379.40px;top:512.43px" class="cls_026"><span class="cls_026">111s</span></div>
<div style="position:absolute;left:101.00px;top:524.43px" class="cls_026"><span class="cls_026">mysql-openshift-1-xg665</span></div>
<div style="position:absolute;left:230.60px;top:524.43px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:269.00px;top:524.43px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:326.60px;top:524.43px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:379.40px;top:524.43px" class="cls_026"><span class="cls_026">109s</span></div>
<div style="position:absolute;left:126.00px;top:562.61px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:576.99px" class="cls_011"><span class="cls_011">Notice the name of the running pod. You need this information to be able to log in</span></div>
<div style="position:absolute;left:126.00px;top:588.99px" class="cls_011"><span class="cls_011">to the MySQL database server later.</span></div>
<div style="position:absolute;left:119.00px;top:621.27px" class="cls_011"><span class="cls_011">3.3.  Use the </span><span class="cls_021">oc describe</span><span class="cls_011"> command to view more details about the pod:</span></div>
<div style="position:absolute;left:101.00px;top:648.98px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc describe pod mysql-openshift-1-</span><span class="cls_040">xg665</span></div>
<div style="position:absolute;left:101.00px;top:660.98px" class="cls_026"><span class="cls_026">Name:</span></div>
<div style="position:absolute;left:168.20px;top:660.98px" class="cls_026"><span class="cls_026">mysql-openshift-1-xg665</span></div>
<div style="position:absolute;left:101.00px;top:672.98px" class="cls_026"><span class="cls_026">Namespace:</span></div>
<div style="position:absolute;left:168.20px;top:672.98px" class="cls_026"><span class="cls_026">${RHT_OCP4_DEV_USER}-mysql-openshift</span></div>
<div style="position:absolute;left:101.00px;top:684.98px" class="cls_026"><span class="cls_026">Priority:</span></div>
<div style="position:absolute;left:168.20px;top:684.98px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:101.00px;top:696.98px" class="cls_026"><span class="cls_026">Node:</span></div>
<div style="position:absolute;left:168.20px;top:696.98px" class="cls_026"><span class="cls_026">master01/192.168.50.10</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">156</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:139548px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background175.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:119.00px;top:53.69px" class="cls_026"><span class="cls_026">Start Time:   Fri, 13 Nov 2020 08:50:03 -0500</span></div>
<div style="position:absolute;left:119.00px;top:65.69px" class="cls_026"><span class="cls_026">Labels:</span></div>
<div style="position:absolute;left:186.20px;top:65.69px" class="cls_026"><span class="cls_026">deployment=mysql-openshift-1</span></div>
<div style="position:absolute;left:186.20px;top:77.69px" class="cls_026"><span class="cls_026">deploymentconfig=mysql-openshift</span></div>
<div style="position:absolute;left:119.00px;top:89.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:101.69px" class="cls_026"><span class="cls_026">Status:</span></div>
<div style="position:absolute;left:186.20px;top:101.69px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:119.00px;top:113.68px" class="cls_026"><span class="cls_026">IP:</span></div>
<div style="position:absolute;left:186.20px;top:113.68px" class="cls_026"><span class="cls_026">10.10.0.34</span></div>
<div style="position:absolute;left:119.00px;top:125.68px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:137.00px;top:156.36px" class="cls_011"><span class="cls_011">3.4.  List the services in this project and verify that the service to access the MySQL pod</span></div>
<div style="position:absolute;left:161.70px;top:168.36px" class="cls_011"><span class="cls_011">was created:</span></div>
<div style="position:absolute;left:119.00px;top:196.08px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc get svc</span></div>
<div style="position:absolute;left:119.00px;top:208.07px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:205.40px;top:208.07px" class="cls_026"><span class="cls_026">TYPE</span></div>
<div style="position:absolute;left:263.00px;top:208.07px" class="cls_026"><span class="cls_026">CLUSTER-IP</span></div>
<div style="position:absolute;left:339.80px;top:208.07px" class="cls_026"><span class="cls_026">EXTERNAL-IP   PORT(S)</span></div>
<div style="position:absolute;left:459.80px;top:208.07px" class="cls_026"><span class="cls_026">AGE</span></div>
<div style="position:absolute;left:119.00px;top:220.07px" class="cls_026"><span class="cls_026">mysql-openshift</span></div>
<div style="position:absolute;left:205.40px;top:220.07px" class="cls_026"><span class="cls_026">ClusterIP</span></div>
<div style="position:absolute;left:263.00px;top:220.07px" class="cls_026"><span class="cls_026">172.30.121.55</span></div>
<div style="position:absolute;left:339.80px;top:220.07px" class="cls_026"><span class="cls_026">&lt;none></span></div>
<div style="position:absolute;left:407.00px;top:220.07px" class="cls_026"><span class="cls_026">3306/TCP</span></div>
<div style="position:absolute;left:459.80px;top:220.07px" class="cls_026"><span class="cls_026">10m</span></div>
<div style="position:absolute;left:137.00px;top:250.75px" class="cls_011"><span class="cls_011">3.5.   Retrieve the details of the </span><span class="cls_021">mysql-openshift</span><span class="cls_011"> service using the </span><span class="cls_021">oc describe</span></div>
<div style="position:absolute;left:161.70px;top:262.75px" class="cls_011"><span class="cls_011">command and note that the service type is </span><span class="cls_021">ClusterIP</span><span class="cls_011"> by default:</span></div>
<div style="position:absolute;left:119.00px;top:290.47px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc describe service mysql-openshift</span></div>
<div style="position:absolute;left:119.00px;top:302.46px" class="cls_026"><span class="cls_026">Name:</span></div>
<div style="position:absolute;left:210.20px;top:302.46px" class="cls_026"><span class="cls_026">mysql-openshift</span></div>
<div style="position:absolute;left:119.00px;top:314.46px" class="cls_026"><span class="cls_026">Namespace:</span></div>
<div style="position:absolute;left:210.20px;top:314.46px" class="cls_026"><span class="cls_026">${RHT_OCP4_DEV_USER}-mysql-openshift</span></div>
<div style="position:absolute;left:119.00px;top:326.46px" class="cls_026"><span class="cls_026">Labels:</span></div>
<div style="position:absolute;left:210.20px;top:326.46px" class="cls_026"><span class="cls_026">app=mysql-openshift</span></div>
<div style="position:absolute;left:210.20px;top:338.46px" class="cls_026"><span class="cls_026">app.kubernetes.io/component=mysql-openshift</span></div>
<div style="position:absolute;left:210.20px;top:350.46px" class="cls_026"><span class="cls_026">app.kubernetes.io/instance=mysql-openshift</span></div>
<div style="position:absolute;left:119.00px;top:362.45px" class="cls_026"><span class="cls_026">Annotations:</span></div>
<div style="position:absolute;left:210.20px;top:362.45px" class="cls_026"><span class="cls_026">openshift.io/generated-by: OpenShiftNewApp</span></div>
<div style="position:absolute;left:119.00px;top:374.45px" class="cls_026"><span class="cls_026">Selector:</span></div>
<div style="position:absolute;left:210.20px;top:374.45px" class="cls_026"><span class="cls_026">deploymentconfig=mysql-openshift</span></div>
<div style="position:absolute;left:119.00px;top:386.45px" class="cls_026"><span class="cls_026">Type:</span></div>
<div style="position:absolute;left:210.20px;top:386.45px" class="cls_026"><span class="cls_026">ClusterIP</span></div>
<div style="position:absolute;left:119.00px;top:398.45px" class="cls_026"><span class="cls_026">IP:</span></div>
<div style="position:absolute;left:210.20px;top:398.45px" class="cls_026"><span class="cls_026">172.30.121.55</span></div>
<div style="position:absolute;left:119.00px;top:410.45px" class="cls_026"><span class="cls_026">Port:</span></div>
<div style="position:absolute;left:210.20px;top:410.45px" class="cls_026"><span class="cls_026">3306-tcp</span></div>
<div style="position:absolute;left:258.20px;top:410.45px" class="cls_026"><span class="cls_026">3306/TCP</span></div>
<div style="position:absolute;left:119.00px;top:422.45px" class="cls_026"><span class="cls_026">TargetPort:</span></div>
<div style="position:absolute;left:210.20px;top:422.45px" class="cls_026"><span class="cls_026">3306/TCP</span></div>
<div style="position:absolute;left:119.00px;top:434.44px" class="cls_026"><span class="cls_026">Endpoints:</span></div>
<div style="position:absolute;left:210.20px;top:434.44px" class="cls_026"><span class="cls_026">10.10.0.34:3306</span></div>
<div style="position:absolute;left:119.00px;top:446.44px" class="cls_026"><span class="cls_026">Session Affinity:</span></div>
<div style="position:absolute;left:210.20px;top:446.44px" class="cls_026"><span class="cls_026">None</span></div>
<div style="position:absolute;left:119.00px;top:458.44px" class="cls_026"><span class="cls_026">Events:</span></div>
<div style="position:absolute;left:210.20px;top:458.44px" class="cls_026"><span class="cls_026">&lt;none></span></div>
<div style="position:absolute;left:137.00px;top:489.12px" class="cls_011"><span class="cls_011">3.6.  View details about the deployment configuration (</span><span class="cls_021">dc</span><span class="cls_011">) for this application:</span></div>
<div style="position:absolute;left:119.00px;top:516.84px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc describe dc mysql-openshift</span></div>
<div style="position:absolute;left:119.00px;top:528.83px" class="cls_026"><span class="cls_026">Name:</span></div>
<div style="position:absolute;left:195.80px;top:528.83px" class="cls_026"><span class="cls_026">mysql-openshift</span></div>
<div style="position:absolute;left:119.00px;top:540.83px" class="cls_026"><span class="cls_026">Namespace:</span></div>
<div style="position:absolute;left:195.80px;top:540.83px" class="cls_026"><span class="cls_026">${RHT_OCP4_DEV_USER}-mysql-openshift</span></div>
<div style="position:absolute;left:119.00px;top:552.83px" class="cls_026"><span class="cls_026">Created:</span></div>
<div style="position:absolute;left:195.80px;top:552.83px" class="cls_026"><span class="cls_026">15 minutes ago</span></div>
<div style="position:absolute;left:119.00px;top:564.83px" class="cls_026"><span class="cls_026">Labels:</span></div>
<div style="position:absolute;left:195.80px;top:564.83px" class="cls_026"><span class="cls_026">app=mysql-openshift</span></div>
<div style="position:absolute;left:195.80px;top:576.82px" class="cls_026"><span class="cls_026">app.kubernetes.io/component=mysql-openshift</span></div>
<div style="position:absolute;left:195.80px;top:588.82px" class="cls_026"><span class="cls_026">app.kubernetes.io/instance=mysql-openshift</span></div>
<div style="position:absolute;left:119.00px;top:600.82px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:612.82px" class="cls_026"><span class="cls_026">Deployment #1 (latest):</span></div>
<div style="position:absolute;left:133.40px;top:624.82px" class="cls_026"><span class="cls_026">Name:</span></div>
<div style="position:absolute;left:210.20px;top:624.82px" class="cls_026"><span class="cls_026">mysql-openshift-1</span></div>
<div style="position:absolute;left:133.40px;top:636.81px" class="cls_026"><span class="cls_026">Created:</span></div>
<div style="position:absolute;left:210.20px;top:636.81px" class="cls_026"><span class="cls_026">15 minutes ago</span></div>
<div style="position:absolute;left:133.40px;top:648.81px" class="cls_026"><span class="cls_026">Status:</span></div>
<div style="position:absolute;left:210.20px;top:648.81px" class="cls_026"><span class="cls_026">Complete</span></div>
<div style="position:absolute;left:133.40px;top:660.81px" class="cls_026"><span class="cls_026">Replicas:</span></div>
<div style="position:absolute;left:210.20px;top:660.81px" class="cls_026"><span class="cls_026">1 current / 1 desired</span></div>
<div style="position:absolute;left:133.40px;top:672.81px" class="cls_026"><span class="cls_026">Selector:</span></div>
<div style="position:absolute;left:210.20px;top:672.81px" class="cls_026"><span class="cls_026">deployment=mysql-openshift-1,deploymentconfig=mysql-openshift</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.94px;top:751.59px" class="cls_013"><span class="cls_013">157</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:140350px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background176.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:115.40px;top:53.69px" class="cls_026"><span class="cls_026">Labels:</span></div>
<div style="position:absolute;left:192.20px;top:53.69px" class="cls_026"><span class="cls_026">app.kubernetes.io/component=mysql-openshift,app.kubernetes.io/</span></div>
<div style="position:absolute;left:101.00px;top:65.69px" class="cls_026"><span class="cls_026">instance=mysql-openshift,app=mysql-openshift,openshift.io/deployment-</span></div>
<div style="position:absolute;left:101.00px;top:77.69px" class="cls_026"><span class="cls_026">config.name=mysql-openshift</span></div>
<div style="position:absolute;left:115.40px;top:89.69px" class="cls_026"><span class="cls_026">Pods Status:</span></div>
<div style="position:absolute;left:192.20px;top:89.69px" class="cls_026"><span class="cls_026">1 Running / 0 Waiting / 0 Succeeded / 0 Failed</span></div>
<div style="position:absolute;left:101.00px;top:101.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:130.46px" class="cls_011"><span class="cls_011">3.7.   Expose the service creating a route with a default name and a fully qualified domain</span></div>
<div style="position:absolute;left:143.70px;top:142.46px" class="cls_011"><span class="cls_011">name (FQDN):</span></div>
<div style="position:absolute;left:101.00px;top:170.18px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc expose service mysql-openshift</span></div>
<div style="position:absolute;left:101.00px;top:182.18px" class="cls_026"><span class="cls_026">route.route.openshift.io/mysql-openshift exposed</span></div>
<div style="position:absolute;left:101.00px;top:194.17px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc get routes</span></div>
<div style="position:absolute;left:101.00px;top:206.17px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:187.40px;top:206.17px" class="cls_026"><span class="cls_026">HOST/PORT</span></div>
<div style="position:absolute;left:417.80px;top:206.17px" class="cls_026"><span class="cls_026">...   PORT</span></div>
<div style="position:absolute;left:101.00px;top:218.17px" class="cls_026"><span class="cls_026">mysql-openshift</span></div>
<div style="position:absolute;left:187.40px;top:218.17px" class="cls_026"><span class="cls_026">mysql-openshift-${RHT_OCP4_DEV_USER}-mysql</span></div>
<div style="position:absolute;left:446.60px;top:218.17px" class="cls_026"><span class="cls_026">3306-tcp</span></div>
<div style="position:absolute;left:101.41px;top:248.39px" class="cls_022"><span class="cls_022">4.</span><span class="cls_011">  Connect to the MySQL database server and verify that the database was created</span></div>
<div style="position:absolute;left:119.00px;top:260.45px" class="cls_011"><span class="cls_011">successfully.</span></div>
<div style="position:absolute;left:119.00px;top:282.94px" class="cls_011"><span class="cls_011">4.1.</span></div>
<div style="position:absolute;left:143.70px;top:282.94px" class="cls_011"><span class="cls_011">From the </span><span class="cls_021">workstation</span><span class="cls_011"> machine, configure port forwarding between </span><span class="cls_021">workstation</span></div>
<div style="position:absolute;left:143.70px;top:294.94px" class="cls_011"><span class="cls_011">and the database pod running on OpenShift using port 3306. The terminal will hang</span></div>
<div style="position:absolute;left:143.70px;top:306.94px" class="cls_011"><span class="cls_011">after executing the command.</span></div>
<div style="position:absolute;left:101.00px;top:334.66px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc port-forward mysql-openshift-1-</span><span class="cls_040">xg665</span><span class="cls_027"> 3306:3306</span></div>
<div style="position:absolute;left:101.00px;top:346.65px" class="cls_026"><span class="cls_026">Forwarding from 127.0.0.1:3306 -> 3306</span></div>
<div style="position:absolute;left:101.00px;top:358.65px" class="cls_026"><span class="cls_026">Forwarding from [::1]:3306 -> 3306</span></div>
<div style="position:absolute;left:119.00px;top:387.43px" class="cls_011"><span class="cls_011">4.2.  From the </span><span class="cls_021">workstation</span><span class="cls_011"> machine open another terminal and connect to the MySQL</span></div>
<div style="position:absolute;left:143.70px;top:399.43px" class="cls_011"><span class="cls_011">server using the MySQL client.</span></div>
<div style="position:absolute;left:101.00px;top:427.14px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">mysql -uuser1 -pmypa55 --protocol tcp -h localhost</span></div>
<div style="position:absolute;left:101.00px;top:439.14px" class="cls_026"><span class="cls_026">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span></div>
<div style="position:absolute;left:101.00px;top:451.14px" class="cls_026"><span class="cls_026">Your MySQL connection id is 2</span></div>
<div style="position:absolute;left:101.00px;top:463.14px" class="cls_026"><span class="cls_026">Server version: 5.7.24 MySQL Community Server (GPL)</span></div>
<div style="position:absolute;left:101.00px;top:487.13px" class="cls_026"><span class="cls_026">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span></div>
<div style="position:absolute;left:101.00px;top:511.13px" class="cls_026"><span class="cls_026">Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.</span></div>
<div style="position:absolute;left:101.00px;top:535.12px" class="cls_026"><span class="cls_026">MySQL [(none)]></span></div>
<div style="position:absolute;left:119.00px;top:563.90px" class="cls_011"><span class="cls_011">4.3.  Verify the creation of the </span><span class="cls_021">testdb</span><span class="cls_011"> database.</span></div>
<div style="position:absolute;left:101.00px;top:591.62px" class="cls_026"><span class="cls_026">MySQL [(none)]> </span><span class="cls_027">show databases;</span></div>
<div style="position:absolute;left:101.00px;top:603.61px" class="cls_026"><span class="cls_026">+--------------------+</span></div>
<div style="position:absolute;left:101.00px;top:615.61px" class="cls_026"><span class="cls_026">| Database</span></div>
<div style="position:absolute;left:201.80px;top:615.61px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:101.00px;top:627.61px" class="cls_026"><span class="cls_026">+--------------------+</span></div>
<div style="position:absolute;left:101.00px;top:639.61px" class="cls_026"><span class="cls_026">| information_schema |</span></div>
<div style="position:absolute;left:101.00px;top:651.61px" class="cls_026"><span class="cls_026">| testdb</span></div>
<div style="position:absolute;left:201.80px;top:651.61px" class="cls_026"><span class="cls_026">|</span></div>
<div style="position:absolute;left:101.00px;top:663.60px" class="cls_026"><span class="cls_026">+--------------------+</span></div>
<div style="position:absolute;left:101.00px;top:675.60px" class="cls_026"><span class="cls_026">2 rows in set (0.00 sec)</span></div>
<div style="position:absolute;left:119.00px;top:704.38px" class="cls_011"><span class="cls_011">4.4.  Exit from the MySQL prompt:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">158</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:141152px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background177.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">MySQL [(none)]> </span><span class="cls_027">exit</span></div>
<div style="position:absolute;left:119.00px;top:73.69px" class="cls_026"><span class="cls_026">Bye</span></div>
<div style="position:absolute;left:161.70px;top:95.97px" class="cls_011"><span class="cls_011">Close the terminal and return to the previous one. Finish the port forwarding process</span></div>
<div style="position:absolute;left:161.70px;top:107.97px" class="cls_011"><span class="cls_011">by pressing </span><span class="cls_021">Ctrl</span><span class="cls_011">+</span><span class="cls_021">C</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:135.69px" class="cls_026"><span class="cls_026">Forwarding from 127.0.0.1:3306 -> 3306</span></div>
<div style="position:absolute;left:119.00px;top:147.68px" class="cls_026"><span class="cls_026">Forwarding from [::1]:3306 -> 3306</span></div>
<div style="position:absolute;left:119.00px;top:159.68px" class="cls_026"><span class="cls_026">Handling connection for 3306</span></div>
<div style="position:absolute;left:119.00px;top:171.68px" class="cls_027"><span class="cls_027">^C</span></div>
<div style="position:absolute;left:119.41px;top:201.90px" class="cls_022"><span class="cls_022">5.</span><span class="cls_011">  Delete the project to remove all the resources within the project:</span></div>
<div style="position:absolute;left:119.00px;top:229.68px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc delete project ${RHT_OCP4_DEV_USER}-mysql-openshift</span></div>
<div style="position:absolute;left:108.00px;top:260.02px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:108.00px;top:281.96px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab openshift-resources finish</span><span class="cls_011"> script to complete this lab.</span></div>
<div style="position:absolute;left:119.00px;top:309.68px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab openshift-resources finish</span></div>
<div style="position:absolute;left:108.00px;top:337.46px" class="cls_011"><span class="cls_011">This concludes the exercise.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.74px;top:751.59px" class="cls_013"><span class="cls_013">159</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:141954px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background178.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Creating Routes</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to expose services using OpenShift routes.</span></div>
<div style="position:absolute;left:90.00px;top:181.26px" class="cls_024"><span class="cls_024">Working with Routes</span></div>
<div style="position:absolute;left:90.00px;top:205.97px" class="cls_011"><span class="cls_011">Services allow for network access between pods inside an OpenShift instance, and routes allow for</span></div>
<div style="position:absolute;left:90.00px;top:217.97px" class="cls_011"><span class="cls_011">network access to pods from users and applications outside the OpenShift instance.</span></div>
<div style="position:absolute;left:189.85px;top:544.13px" class="cls_020"><span class="cls_020">Figure 6.7: OpenShift routes and Kubernetes services</span></div>
<div style="position:absolute;left:90.00px;top:567.04px" class="cls_011"><span class="cls_011">A route connects a public-facing IP address and DNS host name to an internal-facing service IP. It</span></div>
<div style="position:absolute;left:90.00px;top:579.04px" class="cls_011"><span class="cls_011">uses the service resource to find the endpoints; that is, the ports exposed by the service.</span></div>
<div style="position:absolute;left:90.00px;top:600.54px" class="cls_011"><span class="cls_011">OpenShift routes are implemented by a cluster-wide router service, which runs as a containerized</span></div>
<div style="position:absolute;left:90.00px;top:612.54px" class="cls_011"><span class="cls_011">application in the OpenShift cluster. OpenShift scales and replicates router pods like any other</span></div>
<div style="position:absolute;left:90.00px;top:624.53px" class="cls_011"><span class="cls_011">OpenShift application.</span></div>
<div style="position:absolute;left:126.00px;top:657.11px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:671.48px" class="cls_011"><span class="cls_011">In practice, to improve performance and reduce latency, the OpenShift router</span></div>
<div style="position:absolute;left:126.00px;top:683.48px" class="cls_011"><span class="cls_011">connects directly to the pods using the internal pod software-defined network</span></div>
<div style="position:absolute;left:126.00px;top:695.48px" class="cls_011"><span class="cls_011">(SDN).</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">160</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:142756px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background179.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">The router service uses HAProxy as the default implementation.</span></div>
<div style="position:absolute;left:108.00px;top:75.47px" class="cls_011"><span class="cls_011">An important consideration for OpenShift administrators is that the public DNS host names</span></div>
<div style="position:absolute;left:108.00px;top:87.47px" class="cls_011"><span class="cls_011">configured for routes need to point to the public-facing IP addresses of the nodes running the</span></div>
<div style="position:absolute;left:108.00px;top:99.47px" class="cls_011"><span class="cls_011">router. Router pods, unlike regular application pods, bind to their nodes' public IP addresses</span></div>
<div style="position:absolute;left:108.00px;top:111.47px" class="cls_011"><span class="cls_011">instead of to the internal pod SDN.</span></div>
<div style="position:absolute;left:108.00px;top:132.97px" class="cls_011"><span class="cls_011">The following example shows a minimal route defined using JSON syntax:</span></div>
<div style="position:absolute;left:119.00px;top:160.68px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:138.20px;top:172.68px" class="cls_026"><span class="cls_026">"apiVersion": "v1",</span></div>
<div style="position:absolute;left:138.20px;top:184.68px" class="cls_026"><span class="cls_026">"kind": "Route",</span></div>
<div style="position:absolute;left:138.20px;top:196.68px" class="cls_026"><span class="cls_026">"metadata": {</span></div>
<div style="position:absolute;left:157.40px;top:208.68px" class="cls_026"><span class="cls_026">"name": "quoteapp"</span></div>
<div style="position:absolute;left:138.20px;top:220.67px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:138.20px;top:232.67px" class="cls_026"><span class="cls_026">"spec": {</span></div>
<div style="position:absolute;left:157.40px;top:244.67px" class="cls_026"><span class="cls_026">"host": "quoteapp.apps.example.com",</span></div>
<div style="position:absolute;left:157.40px;top:256.67px" class="cls_026"><span class="cls_026">"to": {</span></div>
<div style="position:absolute;left:176.60px;top:268.67px" class="cls_026"><span class="cls_026">"kind": "Service",</span></div>
<div style="position:absolute;left:176.60px;top:280.66px" class="cls_026"><span class="cls_026">"name": "quoteapp"</span></div>
<div style="position:absolute;left:157.40px;top:292.66px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:138.20px;top:304.66px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:119.00px;top:316.66px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:108.00px;top:344.44px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">apiVersion</span><span class="cls_011">, </span><span class="cls_021">kind</span><span class="cls_011">, and </span><span class="cls_021">metadata</span><span class="cls_011"> attributes follow standard Kubernetes resource definition</span></div>
<div style="position:absolute;left:108.00px;top:356.43px" class="cls_011"><span class="cls_011">rules. The </span><span class="cls_021">Route</span><span class="cls_011"> value for </span><span class="cls_021">kind</span><span class="cls_011"> shows that this is a route resource, and the </span><span class="cls_021">metadata.name</span></div>
<div style="position:absolute;left:108.00px;top:368.43px" class="cls_011"><span class="cls_011">attribute gives this particular route the identifier </span><span class="cls_021">quoteapp</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:108.00px;top:389.93px" class="cls_011"><span class="cls_011">As with pods and services, the main part is the </span><span class="cls_021">spec</span><span class="cls_011"> attribute, which is an object containing the</span></div>
<div style="position:absolute;left:108.00px;top:401.93px" class="cls_011"><span class="cls_011">following attributes:</span></div>
<div style="position:absolute;left:108.00px;top:425.33px" class="cls_011"><span class="cls_011">•</span><span class="cls_021"> host</span><span class="cls_011"> is a string containing the FQDN associated with the route. DNS must resolve this FQDN to</span></div>
<div style="position:absolute;left:117.50px;top:437.32px" class="cls_011"><span class="cls_011">the IP address of the OpenShift router. The details to modify DNS configuration are outside the</span></div>
<div style="position:absolute;left:117.50px;top:449.32px" class="cls_011"><span class="cls_011">scope of this course.</span></div>
<div style="position:absolute;left:108.00px;top:472.72px" class="cls_011"><span class="cls_011">•</span><span class="cls_021"> to</span><span class="cls_011"> is an object stating the resource this route points to. In this case, the route points to an</span></div>
<div style="position:absolute;left:117.50px;top:484.72px" class="cls_011"><span class="cls_011">OpenShift Service with the </span><span class="cls_021">name</span><span class="cls_011"> set to </span><span class="cls_021">quoteapp</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:144.00px;top:517.64px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:532.02px" class="cls_011"><span class="cls_011">Names of different resource types do not collide. It is perfectly legal to have a route</span></div>
<div style="position:absolute;left:144.00px;top:544.01px" class="cls_011"><span class="cls_011">named </span><span class="cls_021">quoteapp</span><span class="cls_011"> that points to a service also named </span><span class="cls_021">quoteapp</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:144.00px;top:591.44px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:144.00px;top:605.81px" class="cls_011"><span class="cls_011">Unlike services, which use selectors to link to pod resources containing specific</span></div>
<div style="position:absolute;left:144.00px;top:617.81px" class="cls_011"><span class="cls_011">labels, a route links directly to the service resource name.</span></div>
<div style="position:absolute;left:108.00px;top:653.99px" class="cls_024"><span class="cls_024">Creating Routes</span></div>
<div style="position:absolute;left:108.00px;top:678.71px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">oc create</span><span class="cls_011"> command to create route resources, just like any other OpenShift resource.</span></div>
<div style="position:absolute;left:108.00px;top:690.71px" class="cls_011"><span class="cls_011">You must provide a JSON or YAML resource definition file, which defines the route, to the </span><span class="cls_021">oc</span></div>
<div style="position:absolute;left:108.00px;top:702.70px" class="cls_021"><span class="cls_021">create</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:506.57px;top:751.59px" class="cls_013"><span class="cls_013">161</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:143558px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background180.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">oc new-app</span><span class="cls_011"> command does not create a route resource when building a pod from container</span></div>
<div style="position:absolute;left:90.00px;top:65.97px" class="cls_011"><span class="cls_011">images, Dockerfiles, or application source code. After all, </span><span class="cls_021">oc new-app</span><span class="cls_011"> does not know if the pod is</span></div>
<div style="position:absolute;left:90.00px;top:77.97px" class="cls_011"><span class="cls_011">intended to be accessible from outside the OpenShift instance or not.</span></div>
<div style="position:absolute;left:90.00px;top:99.47px" class="cls_011"><span class="cls_011">Another way to create a route is to use the </span><span class="cls_021">oc expose service</span><span class="cls_011"> command, passing a service</span></div>
<div style="position:absolute;left:90.00px;top:111.47px" class="cls_011"><span class="cls_011">resource name as the input. The </span><span class="cls_021">--name</span><span class="cls_011"> option can be used to control the name of the route</span></div>
<div style="position:absolute;left:90.00px;top:123.47px" class="cls_011"><span class="cls_011">resource. For example:</span></div>
<div style="position:absolute;left:101.00px;top:151.18px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc expose service quotedb --name quote</span></div>
<div style="position:absolute;left:90.00px;top:178.96px" class="cls_011"><span class="cls_011">By default, routes created by </span><span class="cls_021">oc expose</span><span class="cls_011"> generate DNS names of the form:</span></div>
<div style="position:absolute;left:90.00px;top:200.46px" class="cls_028"><span class="cls_028">route-name</span><span class="cls_021">-</span><span class="cls_028">project-name</span><span class="cls_021">.</span><span class="cls_028">default-domain</span></div>
<div style="position:absolute;left:90.00px;top:221.96px" class="cls_011"><span class="cls_011">Where:</span></div>
<div style="position:absolute;left:90.00px;top:244.87px" class="cls_011"><span class="cls_011">• route-name is the name assigned to the route. If no explicit name is set, OpenShift assigns the</span></div>
<div style="position:absolute;left:99.50px;top:256.87px" class="cls_011"><span class="cls_011">route the same name as the originating resource (for example, the service name).</span></div>
<div style="position:absolute;left:90.00px;top:279.79px" class="cls_011"><span class="cls_011">• project-name is the name of the project containing the resource.</span></div>
<div style="position:absolute;left:90.00px;top:302.70px" class="cls_011"><span class="cls_011">• default-domain is configured on the OpenShift master and corresponds to the wildcard DNS</span></div>
<div style="position:absolute;left:99.50px;top:314.70px" class="cls_011"><span class="cls_011">domain listed as a prerequisite for installing OpenShift.</span></div>
<div style="position:absolute;left:90.00px;top:336.20px" class="cls_011"><span class="cls_011">For example, creating a route named </span><span class="cls_021">quote</span><span class="cls_011"> in project named </span><span class="cls_021">test</span><span class="cls_011"> from an OpenShift instance</span></div>
<div style="position:absolute;left:90.00px;top:348.20px" class="cls_011"><span class="cls_011">where the wildcard domain is </span><span class="cls_021">cloudapps.example.com</span><span class="cls_011"> results in the FQDN </span><span class="cls_021">quote-</span></div>
<div style="position:absolute;left:90.00px;top:360.20px" class="cls_021"><span class="cls_021">test.cloudapps.example.com</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:126.00px;top:392.64px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:407.01px" class="cls_011"><span class="cls_011">The DNS server that hosts the wildcard domain knows nothing about route host</span></div>
<div style="position:absolute;left:126.00px;top:419.01px" class="cls_011"><span class="cls_011">names. It merely resolves any name to the configured IP addresses. Only the</span></div>
<div style="position:absolute;left:126.00px;top:431.01px" class="cls_011"><span class="cls_011">OpenShift router knows about route host names, treating each one as an HTTP</span></div>
<div style="position:absolute;left:126.00px;top:443.01px" class="cls_011"><span class="cls_011">virtual host. The OpenShift router blocks invalid wildcard domain host names that</span></div>
<div style="position:absolute;left:126.00px;top:455.00px" class="cls_011"><span class="cls_011">do not correspond to any route and returns an HTTP 404 error.</span></div>
<div style="position:absolute;left:90.00px;top:490.97px" class="cls_002"><span class="cls_002">Leveraging the Default Routing Service</span></div>
<div style="position:absolute;left:90.00px;top:512.90px" class="cls_011"><span class="cls_011">The default routing service is implemented as an </span><span class="cls_021">HAProxy</span><span class="cls_011"> pod. Router pods, containers, and their</span></div>
<div style="position:absolute;left:90.00px;top:524.90px" class="cls_011"><span class="cls_011">configuration can be inspected just like any other resource in an OpenShift cluster:</span></div>
<div style="position:absolute;left:101.00px;top:552.62px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc get pod --all-namespaces -l app=router</span></div>
<div style="position:absolute;left:101.00px;top:564.61px" class="cls_026"><span class="cls_026">NAMESPACE</span></div>
<div style="position:absolute;left:192.20px;top:564.61px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:345.80px;top:564.61px" class="cls_026"><span class="cls_026">READY  STATUS   RESTARTS  AGE</span></div>
<div style="position:absolute;left:101.00px;top:576.61px" class="cls_026"><span class="cls_026">openshift-ingress</span></div>
<div style="position:absolute;left:192.20px;top:576.61px" class="cls_026"><span class="cls_026">router-default-746b5cfb65-f6sdm 1/1</span></div>
<div style="position:absolute;left:379.40px;top:576.61px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:422.60px;top:576.61px" class="cls_026"><span class="cls_026">1</span></div>
<div style="position:absolute;left:470.60px;top:576.61px" class="cls_026"><span class="cls_026">4d</span></div>
<div style="position:absolute;left:90.00px;top:604.39px" class="cls_011"><span class="cls_011">By default, router is deployed in </span><span class="cls_021">openshift-ingress</span><span class="cls_011"> project. Use </span><span class="cls_021">oc describe pod</span></div>
<div style="position:absolute;left:90.00px;top:616.39px" class="cls_011"><span class="cls_011">command to get the routing configuration details:</span></div>
<div style="position:absolute;left:101.00px;top:644.11px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc describe pod </span><span class="cls_040">router-default-746b5cfb65-f6sdm</span></div>
<div style="position:absolute;left:101.00px;top:656.10px" class="cls_026"><span class="cls_026">Name:</span></div>
<div style="position:absolute;left:197.00px;top:656.10px" class="cls_026"><span class="cls_026">router-default-746b5cfb65-f6sdm</span></div>
<div style="position:absolute;left:101.00px;top:668.10px" class="cls_026"><span class="cls_026">Namespace:</span></div>
<div style="position:absolute;left:197.00px;top:668.10px" class="cls_026"><span class="cls_026">openshift-ingress</span></div>
<div style="position:absolute;left:101.00px;top:680.10px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:692.10px" class="cls_026"><span class="cls_026">Containers:</span></div>
<div style="position:absolute;left:110.60px;top:704.10px" class="cls_026"><span class="cls_026">router:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">162</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:144360px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background181.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:119.00px;top:53.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:138.20px;top:65.69px" class="cls_026"><span class="cls_026">Environment:</span></div>
<div style="position:absolute;left:147.80px;top:77.69px" class="cls_026"><span class="cls_026">STATS_PORT:</span></div>
<div style="position:absolute;left:282.20px;top:77.69px" class="cls_026"><span class="cls_026">1936</span></div>
<div style="position:absolute;left:147.80px;top:89.69px" class="cls_026"><span class="cls_026">ROUTER_SERVICE_NAMESPACE:</span></div>
<div style="position:absolute;left:282.20px;top:89.69px" class="cls_026"><span class="cls_026">openshift-ingress</span></div>
<div style="position:absolute;left:147.80px;top:101.69px" class="cls_026"><span class="cls_026">DEFAULT_CERTIFICATE_DIR:</span></div>
<div style="position:absolute;left:282.20px;top:101.69px" class="cls_026"><span class="cls_026">/etc/pki/tls/private</span></div>
<div style="position:absolute;left:147.80px;top:113.68px" class="cls_026"><span class="cls_026">ROUTER_SERVICE_NAME:</span></div>
<div style="position:absolute;left:282.20px;top:113.68px" class="cls_026"><span class="cls_026">default</span></div>
<div style="position:absolute;left:147.80px;top:125.68px" class="cls_026"><span class="cls_026">ROUTER_CANONICAL_HOSTNAME:</span></div>
<div style="position:absolute;left:282.20px;top:125.68px" class="cls_026"><span class="cls_026">apps.cluster.lab.example.com</span></div>
<div style="position:absolute;left:119.00px;top:137.68px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:108.00px;top:165.46px" class="cls_011"><span class="cls_011">The subdomain, or default domain to be used in all default routes, takes its value from the</span></div>
<div style="position:absolute;left:108.00px;top:177.46px" class="cls_021"><span class="cls_021">ROUTER_CANONICAL_HOSTNAME</span><span class="cls_011"> entry.</span></div>
<div style="position:absolute;left:144.00px;top:208.48px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:144.00px;top:222.86px" class="cls_011"><span class="cls_011">Additional information about the architecture of routes in OpenShift is available in</span></div>
<div style="position:absolute;left:144.00px;top:234.85px" class="cls_011"><span class="cls_011">the Architecture and Developer Guide sections of the</span></div>
<div style="position:absolute;left:144.00px;top:246.79px" class="cls_022"><span class="cls_022">OpenShift Container Platform documentation.</span></div>
<div style="position:absolute;left:144.00px;top:258.85px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/documentation/en-us/openshift_container_platform/">https://access.redhat.com/documentation/en-us/openshift_container_platform/</A> </div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.65px;top:751.59px" class="cls_013"><span class="cls_013">163</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:145162px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background182.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Exposing a Service as a Route</span></div>
<div style="position:absolute;left:102.00px;top:137.59px" class="cls_011"><span class="cls_011">In this exercise, you will create, build, and deploy an application on an OpenShift cluster and</span></div>
<div style="position:absolute;left:102.00px;top:149.59px" class="cls_011"><span class="cls_011">expose its service as a route.</span></div>
<div style="position:absolute;left:102.00px;top:172.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:190.59px" class="cls_011"><span class="cls_011">You should be able to expose a service as a route for a deployed OpenShift application.</span></div>
<div style="position:absolute;left:102.00px;top:213.65px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:231.58px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:101.00px;top:259.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab openshift-routes start</span></div>
<div style="position:absolute;left:101.41px;top:311.27px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:119.00px;top:311.33px" class="cls_011"><span class="cls_011">Prepare the lab environment.</span></div>
<div style="position:absolute;left:119.00px;top:333.52px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:143.70px;top:333.52px" class="cls_011"><span class="cls_011">Load your classroom environment configuration.</span></div>
<div style="position:absolute;left:143.70px;top:349.52px" class="cls_011"><span class="cls_011">Run the following command to load the environment variables created in the first</span></div>
<div style="position:absolute;left:143.70px;top:361.52px" class="cls_011"><span class="cls_011">guided exercise:</span></div>
<div style="position:absolute;left:101.00px;top:389.23px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">source /usr/local/etc/ocp4.config</span></div>
<div style="position:absolute;left:119.00px;top:417.71px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:143.70px;top:417.71px" class="cls_011"><span class="cls_011">Log in to the OpenShift cluster.</span></div>
<div style="position:absolute;left:101.00px;top:445.42px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc login -u ${RHT_OCP4_DEV_USER} -p \</span></div>
<div style="position:absolute;left:101.00px;top:457.42px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}</span></div>
<div style="position:absolute;left:101.00px;top:469.42px" class="cls_026"><span class="cls_026">Login successful</span></div>
<div style="position:absolute;left:101.00px;top:481.42px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:509.89px" class="cls_011"><span class="cls_011">1.3.</span></div>
<div style="position:absolute;left:143.70px;top:509.89px" class="cls_011"><span class="cls_011">Create a new project that contains your RHOCP developer username for the</span></div>
<div style="position:absolute;left:143.70px;top:521.89px" class="cls_011"><span class="cls_011">resources you create during this exercise:</span></div>
<div style="position:absolute;left:101.00px;top:549.61px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc new-project ${RHT_OCP4_DEV_USER}-route</span></div>
<div style="position:absolute;left:101.41px;top:579.83px" class="cls_022"><span class="cls_022">2.</span><span class="cls_011">   Create a new PHP application using Source-to-Image from the </span><span class="cls_021">php-helloworld</span></div>
<div style="position:absolute;left:119.00px;top:591.89px" class="cls_011"><span class="cls_011">directory in the Git repository at </span><A HREF="http://github.com/${rht_ocp4_github_user}/">http://github.com/${RHT_OCP4_GITHUB_USER}/</A> </span></div>
<div style="position:absolute;left:119.00px;top:603.89px" class="cls_021"><span class="cls_021">DO180-apps/</span></div>
<div style="position:absolute;left:119.00px;top:626.08px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:143.70px;top:626.08px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">oc new-app</span><span class="cls_011"> command to create the PHP application.</span></div>
<div style="position:absolute;left:126.00px;top:656.80px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:126.00px;top:671.18px" class="cls_011"><span class="cls_011">The following example uses a backslash (\) to indicate that the second line is a</span></div>
<div style="position:absolute;left:126.00px;top:683.18px" class="cls_011"><span class="cls_011">continuation of the first line. If you wish to ignore the backslash, you can type the</span></div>
<div style="position:absolute;left:126.00px;top:695.17px" class="cls_011"><span class="cls_011">entire command in one line.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">164</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:145964px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background183.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc new-app --as-deployment-config \</span></div>
<div style="position:absolute;left:119.00px;top:73.69px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">php:7.3~<A HREF="https://github.com/${rht_ocp4_github_user}/do180-apps/">https://github.com/${RHT_OCP4_GITHUB_USER}/DO180-apps</A> \</span></div>
<div style="position:absolute;left:119.00px;top:85.69px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--context-dir php-helloworld --name php-helloworld</span></div>
<div style="position:absolute;left:119.00px;top:97.69px" class="cls_026"><span class="cls_026">--> Found image fbe3911 (13 days old) in image stream "openshift/php" under tag</span></div>
<div style="position:absolute;left:123.80px;top:109.69px" class="cls_026"><span class="cls_026">"7.3" for "php:7.3"</span></div>
<div style="position:absolute;left:119.00px;top:121.68px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:133.68px" class="cls_026"><span class="cls_026">--> Creating resources</span></div>
<div style="position:absolute;left:119.00px;top:145.68px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:157.68px" class="cls_026"><span class="cls_026">--> Success</span></div>
<div style="position:absolute;left:138.20px;top:169.68px" class="cls_026"><span class="cls_026">Build scheduled, use 'oc logs -f bc/php-helloworld' to track its progress.</span></div>
<div style="position:absolute;left:138.20px;top:181.68px" class="cls_026"><span class="cls_026">Application is not exposed. You can expose services to the outside world by</span></div>
<div style="position:absolute;left:123.80px;top:193.67px" class="cls_026"><span class="cls_026">executing one or more of the commands below:</span></div>
<div style="position:absolute;left:143.00px;top:205.67px" class="cls_026"><span class="cls_026">'oc expose svc/php-helloworld'</span></div>
<div style="position:absolute;left:138.20px;top:217.67px" class="cls_026"><span class="cls_026">Run 'oc status' to view your app.</span></div>
<div style="position:absolute;left:137.00px;top:245.44px" class="cls_011"><span class="cls_011">2.2.   Wait until the application finishes building and deploying by monitoring the progress</span></div>
<div style="position:absolute;left:161.70px;top:257.44px" class="cls_011"><span class="cls_011">with the </span><span class="cls_021">oc get pods -w</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:119.00px;top:285.16px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc get pods -w</span></div>
<div style="position:absolute;left:119.00px;top:297.16px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:239.00px;top:297.16px" class="cls_026"><span class="cls_026">READY   STATUS</span></div>
<div style="position:absolute;left:330.20px;top:297.16px" class="cls_026"><span class="cls_026">RESTARTS   AGE</span></div>
<div style="position:absolute;left:119.00px;top:309.16px" class="cls_026"><span class="cls_026">php-helloworld-1-build</span></div>
<div style="position:absolute;left:239.00px;top:309.16px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:277.40px;top:309.16px" class="cls_026"><span class="cls_026">Init:0/2</span></div>
<div style="position:absolute;left:330.20px;top:309.16px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:383.00px;top:309.16px" class="cls_026"><span class="cls_026">2s</span></div>
<div style="position:absolute;left:119.00px;top:321.15px" class="cls_026"><span class="cls_026">php-helloworld-1-build</span></div>
<div style="position:absolute;left:239.00px;top:321.15px" class="cls_026"><span class="cls_026">0/1   Init:0/2</span></div>
<div style="position:absolute;left:320.60px;top:321.15px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:349.40px;top:321.15px" class="cls_026"><span class="cls_026">4s</span></div>
<div style="position:absolute;left:119.00px;top:333.15px" class="cls_026"><span class="cls_026">php-helloworld-1-build</span></div>
<div style="position:absolute;left:239.00px;top:333.15px" class="cls_026"><span class="cls_026">0/1   Init:1/2</span></div>
<div style="position:absolute;left:320.60px;top:333.15px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:349.40px;top:333.15px" class="cls_026"><span class="cls_026">5s</span></div>
<div style="position:absolute;left:119.00px;top:345.15px" class="cls_026"><span class="cls_026">php-helloworld-1-build</span></div>
<div style="position:absolute;left:239.00px;top:345.15px" class="cls_026"><span class="cls_026">0/1   PodInitializing</span></div>
<div style="position:absolute;left:354.20px;top:345.15px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:383.00px;top:345.15px" class="cls_026"><span class="cls_026">6s</span></div>
<div style="position:absolute;left:119.00px;top:357.15px" class="cls_026"><span class="cls_026">php-helloworld-1-build</span></div>
<div style="position:absolute;left:239.00px;top:357.15px" class="cls_026"><span class="cls_026">1/1   Running</span></div>
<div style="position:absolute;left:315.80px;top:357.15px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:344.60px;top:357.15px" class="cls_026"><span class="cls_026">7s</span></div>
<div style="position:absolute;left:119.00px;top:369.15px" class="cls_026"><span class="cls_026">php-helloworld-1-deploy</span></div>
<div style="position:absolute;left:243.80px;top:369.15px" class="cls_026"><span class="cls_026">0/1   Pending</span></div>
<div style="position:absolute;left:320.60px;top:369.15px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:349.40px;top:369.15px" class="cls_026"><span class="cls_026">0s</span></div>
<div style="position:absolute;left:119.00px;top:381.14px" class="cls_026"><span class="cls_026">php-helloworld-1-deploy</span></div>
<div style="position:absolute;left:243.80px;top:381.14px" class="cls_026"><span class="cls_026">0/1   Pending</span></div>
<div style="position:absolute;left:320.60px;top:381.14px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:349.40px;top:381.14px" class="cls_026"><span class="cls_026">0s</span></div>
<div style="position:absolute;left:119.00px;top:393.14px" class="cls_026"><span class="cls_026">php-helloworld-1-deploy</span></div>
<div style="position:absolute;left:243.80px;top:393.14px" class="cls_026"><span class="cls_026">0/1   ContainerCreating</span></div>
<div style="position:absolute;left:368.60px;top:393.14px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:397.40px;top:393.14px" class="cls_026"><span class="cls_026">0s</span></div>
<div style="position:absolute;left:119.00px;top:405.14px" class="cls_026"><span class="cls_026">php-helloworld-1-build</span></div>
<div style="position:absolute;left:239.00px;top:405.14px" class="cls_026"><span class="cls_026">0/1   Completed</span></div>
<div style="position:absolute;left:325.40px;top:405.14px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:354.20px;top:405.14px" class="cls_026"><span class="cls_026">5m8s</span></div>
<div style="position:absolute;left:119.00px;top:417.14px" class="cls_026"><span class="cls_026">php-helloworld-1-cnphm</span></div>
<div style="position:absolute;left:239.00px;top:417.14px" class="cls_026"><span class="cls_026">0/1   Pending</span></div>
<div style="position:absolute;left:315.80px;top:417.14px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:344.60px;top:417.14px" class="cls_026"><span class="cls_026">0s</span></div>
<div style="position:absolute;left:119.00px;top:429.14px" class="cls_026"><span class="cls_026">php-helloworld-1-cnphm</span></div>
<div style="position:absolute;left:239.00px;top:429.14px" class="cls_026"><span class="cls_026">0/1   Pending</span></div>
<div style="position:absolute;left:315.80px;top:429.14px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:344.60px;top:429.14px" class="cls_026"><span class="cls_026">1s</span></div>
<div style="position:absolute;left:119.00px;top:441.13px" class="cls_026"><span class="cls_026">php-helloworld-1-deploy</span></div>
<div style="position:absolute;left:243.80px;top:441.13px" class="cls_026"><span class="cls_026">1/1   Running</span></div>
<div style="position:absolute;left:320.60px;top:441.13px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:349.40px;top:441.13px" class="cls_026"><span class="cls_026">4s</span></div>
<div style="position:absolute;left:119.00px;top:453.13px" class="cls_026"><span class="cls_026">php-helloworld-1-cnphm</span></div>
<div style="position:absolute;left:239.00px;top:453.13px" class="cls_026"><span class="cls_026">0/1   ContainerCreating</span></div>
<div style="position:absolute;left:363.80px;top:453.13px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:392.60px;top:453.13px" class="cls_026"><span class="cls_026">1s</span></div>
<div style="position:absolute;left:119.00px;top:465.13px" class="cls_026"><span class="cls_026">php-helloworld-1-cnphm</span></div>
<div style="position:absolute;left:239.00px;top:465.13px" class="cls_026"><span class="cls_026">1/1   Running</span></div>
<div style="position:absolute;left:315.80px;top:465.13px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:344.60px;top:465.13px" class="cls_026"><span class="cls_026">62s</span></div>
<div style="position:absolute;left:119.00px;top:477.13px" class="cls_026"><span class="cls_026">php-helloworld-1-deploy</span></div>
<div style="position:absolute;left:243.80px;top:477.13px" class="cls_026"><span class="cls_026">0/1   Completed</span></div>
<div style="position:absolute;left:330.20px;top:477.13px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:359.00px;top:477.13px" class="cls_026"><span class="cls_026">65s</span></div>
<div style="position:absolute;left:119.00px;top:489.13px" class="cls_026"><span class="cls_026">php-helloworld-1-deploy</span></div>
<div style="position:absolute;left:243.80px;top:489.13px" class="cls_026"><span class="cls_026">0/1   Terminating</span></div>
<div style="position:absolute;left:339.80px;top:489.13px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:368.60px;top:489.13px" class="cls_026"><span class="cls_026">66s</span></div>
<div style="position:absolute;left:119.00px;top:501.12px" class="cls_026"><span class="cls_026">php-helloworld-1-deploy</span></div>
<div style="position:absolute;left:243.80px;top:501.12px" class="cls_026"><span class="cls_026">0/1   Terminating</span></div>
<div style="position:absolute;left:339.80px;top:501.12px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:368.60px;top:501.12px" class="cls_026"><span class="cls_026">66s</span></div>
<div style="position:absolute;left:119.00px;top:513.12px" class="cls_027"><span class="cls_027">^C</span></div>
<div style="position:absolute;left:161.70px;top:535.40px" class="cls_011"><span class="cls_011">Your exact output may differ in names, status, timing, and order. Look for the</span></div>
<div style="position:absolute;left:161.70px;top:547.40px" class="cls_021"><span class="cls_021">Completed</span><span class="cls_011"> container with the </span><span class="cls_021">deploy</span><span class="cls_011"> suffix: That means the application is</span></div>
<div style="position:absolute;left:161.70px;top:559.40px" class="cls_011"><span class="cls_011">deployed successfully. The container in </span><span class="cls_021">Running</span><span class="cls_011"> status with a random suffix (</span><span class="cls_021">cnphm</span></div>
<div style="position:absolute;left:161.70px;top:571.40px" class="cls_011"><span class="cls_011">in the example) contains the application and shows it is up and running.</span></div>
<div style="position:absolute;left:161.70px;top:587.39px" class="cls_011"><span class="cls_011">Alternatively, monitor the build and deployment logs with the </span><span class="cls_021">oc logs -f</span></div>
<div style="position:absolute;left:161.70px;top:599.39px" class="cls_021"><span class="cls_021">bc/php-helloworld</span><span class="cls_011"> and </span><span class="cls_021">oc logs -f dc/php-helloworld</span><span class="cls_011"> commands,</span></div>
<div style="position:absolute;left:161.70px;top:611.39px" class="cls_011"><span class="cls_011">respectively. Press </span><span class="cls_021">Ctrl</span><span class="cls_011">+</span><span class="cls_021">C</span><span class="cls_011"> to exit the command if necessary.</span></div>
<div style="position:absolute;left:119.00px;top:639.11px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc logs -f bc/php-helloworld</span></div>
<div style="position:absolute;left:119.00px;top:651.10px" class="cls_026"><span class="cls_026">Cloning "</span><A HREF="https://github.com/${rht_ocp4_github_user}/do180-apps"/">https://github.com/${RHT_OCP4_GITHUB_USER}/DO180-apps"</A> ...</div>
<div style="position:absolute;left:123.80px;top:663.10px" class="cls_026"><span class="cls_026">Commit: f7cd8963ef353d9173c3a21dcccf402f3616840b (Initial commit, including all</span></div>
<div style="position:absolute;left:123.80px;top:675.10px" class="cls_026"><span class="cls_026">apps previously in course)</span></div>
<div style="position:absolute;left:119.00px;top:687.10px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.74px;top:751.59px" class="cls_013"><span class="cls_013">165</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:146766px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background184.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:101.00px;top:53.69px" class="cls_026"><span class="cls_026">STEP 7: USER 1001</span></div>
<div style="position:absolute;left:101.00px;top:65.69px" class="cls_026"><span class="cls_026">STEP 8: RUN /usr/libexec/s2i/assemble</span></div>
<div style="position:absolute;left:101.00px;top:77.69px" class="cls_026"><span class="cls_026">---> Installing application source</span></div>
<div style="position:absolute;left:101.00px;top:89.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:101.69px" class="cls_026"><span class="cls_026">Push successful</span></div>
<div style="position:absolute;left:101.00px;top:113.68px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc logs -f dc/php-helloworld</span></div>
<div style="position:absolute;left:101.00px;top:125.68px" class="cls_026"><span class="cls_026">-> Cgroups memory limit is set, using HTTPD_MAX_REQUEST_WORKERS=136</span></div>
<div style="position:absolute;left:101.00px;top:137.68px" class="cls_026"><span class="cls_026">=> sourcing 20-copy-config.sh</span></div>
<div style="position:absolute;left:101.00px;top:149.68px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:161.68px" class="cls_026"><span class="cls_026">[core:notice] [pid 1] AH00094: Command line: 'httpd -D FOREGROUND'</span></div>
<div style="position:absolute;left:101.00px;top:173.67px" class="cls_027"><span class="cls_027">^C</span></div>
<div style="position:absolute;left:143.70px;top:195.95px" class="cls_011"><span class="cls_011">Your exact output may differ.</span></div>
<div style="position:absolute;left:119.00px;top:218.42px" class="cls_011"><span class="cls_011">2.3.   Review the service for this application using the </span><span class="cls_021">oc describe</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:101.00px;top:246.13px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc describe svc/php-helloworld</span></div>
<div style="position:absolute;left:101.00px;top:258.13px" class="cls_026"><span class="cls_026">Name:</span></div>
<div style="position:absolute;left:192.20px;top:258.13px" class="cls_026"><span class="cls_026">php-helloworld</span></div>
<div style="position:absolute;left:101.00px;top:270.13px" class="cls_026"><span class="cls_026">Namespace:</span></div>
<div style="position:absolute;left:192.20px;top:270.13px" class="cls_026"><span class="cls_026">${RHT_OCP4_DEV_USER}-route</span></div>
<div style="position:absolute;left:101.00px;top:282.13px" class="cls_026"><span class="cls_026">Labels:</span></div>
<div style="position:absolute;left:192.20px;top:282.13px" class="cls_026"><span class="cls_026">app=php-helloworld</span></div>
<div style="position:absolute;left:192.20px;top:294.13px" class="cls_026"><span class="cls_026">app.kubernetes.io/component=php-helloworld</span></div>
<div style="position:absolute;left:192.20px;top:306.12px" class="cls_026"><span class="cls_026">app.kubernetes.io/instance=php-helloworld</span></div>
<div style="position:absolute;left:101.00px;top:318.12px" class="cls_026"><span class="cls_026">Annotations:</span></div>
<div style="position:absolute;left:192.20px;top:318.12px" class="cls_026"><span class="cls_026">openshift.io/generated-by: OpenShiftNewApp</span></div>
<div style="position:absolute;left:101.00px;top:330.12px" class="cls_026"><span class="cls_026">Selector:</span></div>
<div style="position:absolute;left:192.20px;top:330.12px" class="cls_026"><span class="cls_026">deploymentconfig=php-helloworld</span></div>
<div style="position:absolute;left:101.00px;top:342.12px" class="cls_026"><span class="cls_026">Type:</span></div>
<div style="position:absolute;left:192.20px;top:342.12px" class="cls_026"><span class="cls_026">ClusterIP</span></div>
<div style="position:absolute;left:101.00px;top:354.11px" class="cls_026"><span class="cls_026">IP:</span></div>
<div style="position:absolute;left:192.20px;top:354.11px" class="cls_026"><span class="cls_026">172.30.228.124</span></div>
<div style="position:absolute;left:101.00px;top:366.11px" class="cls_026"><span class="cls_026">Port:</span></div>
<div style="position:absolute;left:192.20px;top:366.11px" class="cls_026"><span class="cls_026">8080-tcp</span></div>
<div style="position:absolute;left:240.20px;top:366.11px" class="cls_026"><span class="cls_026">8080/TCP</span></div>
<div style="position:absolute;left:101.00px;top:378.11px" class="cls_026"><span class="cls_026">TargetPort:</span></div>
<div style="position:absolute;left:192.20px;top:378.11px" class="cls_026"><span class="cls_026">8080/TCP</span></div>
<div style="position:absolute;left:101.00px;top:390.11px" class="cls_026"><span class="cls_026">Endpoints:</span></div>
<div style="position:absolute;left:192.20px;top:390.11px" class="cls_026"><span class="cls_026">10.10.0.35:8080</span></div>
<div style="position:absolute;left:101.00px;top:402.11px" class="cls_026"><span class="cls_026">Port:</span></div>
<div style="position:absolute;left:192.20px;top:402.11px" class="cls_026"><span class="cls_026">8443-tcp</span></div>
<div style="position:absolute;left:240.20px;top:402.11px" class="cls_026"><span class="cls_026">8443/TCP</span></div>
<div style="position:absolute;left:101.00px;top:414.11px" class="cls_026"><span class="cls_026">TargetPort:</span></div>
<div style="position:absolute;left:192.20px;top:414.11px" class="cls_026"><span class="cls_026">8443/TCP</span></div>
<div style="position:absolute;left:101.00px;top:426.10px" class="cls_026"><span class="cls_026">Endpoints:</span></div>
<div style="position:absolute;left:192.20px;top:426.10px" class="cls_026"><span class="cls_026">10.10.0.35:8443</span></div>
<div style="position:absolute;left:101.00px;top:438.10px" class="cls_026"><span class="cls_026">Session Affinity:</span></div>
<div style="position:absolute;left:192.20px;top:438.10px" class="cls_026"><span class="cls_026">None</span></div>
<div style="position:absolute;left:101.00px;top:450.10px" class="cls_026"><span class="cls_026">Events:</span></div>
<div style="position:absolute;left:192.20px;top:450.10px" class="cls_026"><span class="cls_026">&lt;none></span></div>
<div style="position:absolute;left:143.70px;top:472.38px" class="cls_011"><span class="cls_011">The IP address displayed in the output of the command may differ.</span></div>
<div style="position:absolute;left:101.41px;top:496.32px" class="cls_022"><span class="cls_022">3.</span><span class="cls_011">  Expose the service, which creates a route. Use the default name and fully qualified domain</span></div>
<div style="position:absolute;left:119.00px;top:508.38px" class="cls_011"><span class="cls_011">name (FQDN) for the route:</span></div>
<div style="position:absolute;left:101.00px;top:536.10px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc expose svc/php-helloworld</span></div>
<div style="position:absolute;left:101.00px;top:548.10px" class="cls_026"><span class="cls_026">route.route.openshift.io/php-helloworld exposed</span></div>
<div style="position:absolute;left:101.00px;top:560.10px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc describe route</span></div>
<div style="position:absolute;left:101.00px;top:572.10px" class="cls_026"><span class="cls_026">Name:</span></div>
<div style="position:absolute;left:192.20px;top:572.10px" class="cls_026"><span class="cls_026">php-helloworld</span></div>
<div style="position:absolute;left:101.00px;top:584.10px" class="cls_026"><span class="cls_026">Namespace:</span></div>
<div style="position:absolute;left:192.20px;top:584.10px" class="cls_026"><span class="cls_026">${RHT_OCP4_DEV_USER}-route</span></div>
<div style="position:absolute;left:101.00px;top:596.10px" class="cls_026"><span class="cls_026">Created:</span></div>
<div style="position:absolute;left:192.20px;top:596.10px" class="cls_026"><span class="cls_026">5 seconds ago</span></div>
<div style="position:absolute;left:101.00px;top:608.10px" class="cls_026"><span class="cls_026">Labels:</span></div>
<div style="position:absolute;left:192.20px;top:608.10px" class="cls_026"><span class="cls_026">app=php-helloworld</span></div>
<div style="position:absolute;left:192.20px;top:620.10px" class="cls_026"><span class="cls_026">app.kubernetes.io/component=php-helloworld</span></div>
<div style="position:absolute;left:192.20px;top:632.10px" class="cls_026"><span class="cls_026">app.kubernetes.io/instance=php-helloworld</span></div>
<div style="position:absolute;left:101.00px;top:644.10px" class="cls_026"><span class="cls_026">Annotations:</span></div>
<div style="position:absolute;left:192.20px;top:644.10px" class="cls_026"><span class="cls_026">openshift.io/host.generated=true</span></div>
<div style="position:absolute;left:101.00px;top:656.10px" class="cls_026"><span class="cls_026">Requested Host:</span></div>
<div style="position:absolute;left:192.20px;top:656.10px" class="cls_026"><span class="cls_026">php-helloworld-$RHT_OCP4_DEV_USER}-route.${RHT_OCP4_WILDC...</span></div>
<div style="position:absolute;left:115.40px;top:668.10px" class="cls_026"><span class="cls_026">exposed on router default (host ${RHT_OCP4_WILDCARD_DOMAIN}) 4 seconds ago</span></div>
<div style="position:absolute;left:101.00px;top:680.10px" class="cls_026"><span class="cls_026">Path:</span></div>
<div style="position:absolute;left:192.20px;top:680.10px" class="cls_026"><span class="cls_026">&lt;none></span></div>
<div style="position:absolute;left:101.00px;top:692.10px" class="cls_026"><span class="cls_026">TLS Termination:</span></div>
<div style="position:absolute;left:192.20px;top:692.10px" class="cls_026"><span class="cls_026">&lt;none></span></div>
<div style="position:absolute;left:101.00px;top:704.10px" class="cls_026"><span class="cls_026">Insecure Policy:</span></div>
<div style="position:absolute;left:192.20px;top:704.10px" class="cls_026"><span class="cls_026">&lt;none></span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">166</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:147568px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background185.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:119.00px;top:53.70px" class="cls_026"><span class="cls_026">Endpoint Port:</span></div>
<div style="position:absolute;left:210.20px;top:53.70px" class="cls_026"><span class="cls_026">8080-tcp</span></div>
<div style="position:absolute;left:119.00px;top:77.70px" class="cls_026"><span class="cls_026">Service:</span></div>
<div style="position:absolute;left:176.60px;top:77.70px" class="cls_026"><span class="cls_026">php-helloworld</span></div>
<div style="position:absolute;left:119.00px;top:89.70px" class="cls_026"><span class="cls_026">Weight:</span></div>
<div style="position:absolute;left:176.60px;top:89.70px" class="cls_026"><span class="cls_026">100 (100%)</span></div>
<div style="position:absolute;left:119.00px;top:101.70px" class="cls_026"><span class="cls_026">Endpoints:</span></div>
<div style="position:absolute;left:176.60px;top:101.70px" class="cls_026"><span class="cls_026">10.10.0.35:8443, 10.10.0.35:8080</span></div>
<div style="position:absolute;left:119.41px;top:131.92px" class="cls_022"><span class="cls_022">4.</span><span class="cls_011">  Access the service from a host external to the cluster to verify that the service and route</span></div>
<div style="position:absolute;left:137.00px;top:143.98px" class="cls_011"><span class="cls_011">are working.</span></div>
<div style="position:absolute;left:119.00px;top:171.70px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl \</span></div>
<div style="position:absolute;left:119.00px;top:183.70px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">php-helloworld-${RHT_OCP4_DEV_USER}-route.${RHT_OCP4_WILDCARD_DOMAIN}</span></div>
<div style="position:absolute;left:119.00px;top:195.70px" class="cls_026"><span class="cls_026">Hello, World! php version is 7.3.11</span></div>
<div style="position:absolute;left:144.00px;top:234.90px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:249.28px" class="cls_011"><span class="cls_011">The output of the PHP application depends on the actual code in the Git repository.</span></div>
<div style="position:absolute;left:144.00px;top:261.28px" class="cls_011"><span class="cls_011">It may be different if you updated the code in previous sections.</span></div>
<div style="position:absolute;left:137.00px;top:299.18px" class="cls_011"><span class="cls_011">Notice the FQDN is comprised of the application name and project name by default. The</span></div>
<div style="position:absolute;left:137.00px;top:311.18px" class="cls_011"><span class="cls_011">remainder of the FQDN, the subdomain, is defined when OpenShift is installed.</span></div>
<div style="position:absolute;left:119.41px;top:335.12px" class="cls_022"><span class="cls_022">5.</span><span class="cls_011">  Replace this route with a route named </span><span class="cls_021">xyz</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:137.00px;top:359.58px" class="cls_011"><span class="cls_011">5.1.</span></div>
<div style="position:absolute;left:161.70px;top:359.58px" class="cls_011"><span class="cls_011">Delete the current route:</span></div>
<div style="position:absolute;left:119.00px;top:387.29px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc delete route/php-helloworld</span></div>
<div style="position:absolute;left:119.00px;top:399.29px" class="cls_026"><span class="cls_026">route.route.openshift.io "php-helloworld" deleted</span></div>
<div style="position:absolute;left:144.00px;top:438.49px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:452.87px" class="cls_011"><span class="cls_011">Deleting the route is optional. You can have multiple routes for the same service,</span></div>
<div style="position:absolute;left:144.00px;top:464.87px" class="cls_011"><span class="cls_011">provided they have different names.</span></div>
<div style="position:absolute;left:137.00px;top:498.17px" class="cls_011"><span class="cls_011">5.2.   Create a route for the service with a name of </span><span class="cls_021">${RHT_OCP4_DEV_USER}-xyz</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:525.88px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc expose svc/php-helloworld \</span></div>
<div style="position:absolute;left:119.00px;top:537.88px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--name=${RHT_OCP4_DEV_USER}-xyz</span></div>
<div style="position:absolute;left:119.00px;top:549.88px" class="cls_026"><span class="cls_026">route.route.openshift.io/${RHT_OCP4_DEV_USER}-xyz exposed</span></div>
<div style="position:absolute;left:119.00px;top:561.88px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc describe route</span></div>
<div style="position:absolute;left:119.00px;top:573.88px" class="cls_026"><span class="cls_026">Name:</span></div>
<div style="position:absolute;left:210.20px;top:573.88px" class="cls_026"><span class="cls_026">${RHT_OCP4_DEV_USER}-xyz</span></div>
<div style="position:absolute;left:119.00px;top:585.87px" class="cls_026"><span class="cls_026">Namespace:</span></div>
<div style="position:absolute;left:210.20px;top:585.87px" class="cls_026"><span class="cls_026">${RHT_OCP4_DEV_USER}-route</span></div>
<div style="position:absolute;left:119.00px;top:597.87px" class="cls_026"><span class="cls_026">Created:</span></div>
<div style="position:absolute;left:210.20px;top:597.87px" class="cls_026"><span class="cls_026">5 seconds ago</span></div>
<div style="position:absolute;left:119.00px;top:609.87px" class="cls_026"><span class="cls_026">Labels:</span></div>
<div style="position:absolute;left:210.20px;top:609.87px" class="cls_026"><span class="cls_026">app=php-helloworld</span></div>
<div style="position:absolute;left:210.20px;top:621.87px" class="cls_026"><span class="cls_026">app.kubernetes.io/component=php-helloworld</span></div>
<div style="position:absolute;left:210.20px;top:633.86px" class="cls_026"><span class="cls_026">app.kubernetes.io/instance=php-helloworld</span></div>
<div style="position:absolute;left:119.00px;top:645.86px" class="cls_026"><span class="cls_026">Annotations:</span></div>
<div style="position:absolute;left:210.20px;top:645.86px" class="cls_026"><span class="cls_026">openshift.io/host.generated=true</span></div>
<div style="position:absolute;left:119.00px;top:657.86px" class="cls_026"><span class="cls_026">Requested Host:</span></div>
<div style="position:absolute;left:210.20px;top:657.86px" class="cls_026"><span class="cls_026">${RHT_OCP4_DEV_USER}-xyz-${RHT_OCP4_DEV_USER}-route.${RHT_...</span></div>
<div style="position:absolute;left:133.40px;top:669.86px" class="cls_026"><span class="cls_026">exposed on router default (host ${RHT_OCP4_WILDCARD_DOMAIN}) 4 seconds ago</span></div>
<div style="position:absolute;left:119.00px;top:681.86px" class="cls_026"><span class="cls_026">Path:</span></div>
<div style="position:absolute;left:210.20px;top:681.86px" class="cls_026"><span class="cls_026">&lt;none></span></div>
<div style="position:absolute;left:119.00px;top:693.85px" class="cls_026"><span class="cls_026">TLS Termination:</span></div>
<div style="position:absolute;left:210.20px;top:693.85px" class="cls_026"><span class="cls_026">&lt;none></span></div>
<div style="position:absolute;left:119.00px;top:705.85px" class="cls_026"><span class="cls_026">Insecure Policy:</span></div>
<div style="position:absolute;left:210.20px;top:705.85px" class="cls_026"><span class="cls_026">&lt;none></span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.73px;top:751.59px" class="cls_013"><span class="cls_013">167</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:148370px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background186.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:101.00px;top:53.69px" class="cls_026"><span class="cls_026">Endpoint Port:</span></div>
<div style="position:absolute;left:192.20px;top:53.69px" class="cls_026"><span class="cls_026">8080-tcp</span></div>
<div style="position:absolute;left:101.00px;top:77.69px" class="cls_026"><span class="cls_026">Service:</span></div>
<div style="position:absolute;left:158.60px;top:77.69px" class="cls_026"><span class="cls_026">php-helloworld</span></div>
<div style="position:absolute;left:101.00px;top:89.69px" class="cls_026"><span class="cls_026">Weight:</span></div>
<div style="position:absolute;left:158.60px;top:89.69px" class="cls_026"><span class="cls_026">100 (100%)</span></div>
<div style="position:absolute;left:101.00px;top:101.69px" class="cls_026"><span class="cls_026">Endpoints:</span></div>
<div style="position:absolute;left:158.60px;top:101.69px" class="cls_026"><span class="cls_026">10.10.0.35:8443, 10.10.0.35:8080</span></div>
<div style="position:absolute;left:143.70px;top:123.97px" class="cls_011"><span class="cls_011">Note the new FQDN that was generated based on the new route name. Both the</span></div>
<div style="position:absolute;left:143.70px;top:135.96px" class="cls_011"><span class="cls_011">route name and the project name contain your user name, hence it appears twice in</span></div>
<div style="position:absolute;left:143.70px;top:147.96px" class="cls_011"><span class="cls_011">the route FQDN.</span></div>
<div style="position:absolute;left:119.00px;top:170.46px" class="cls_011"><span class="cls_011">5.3.   Make an HTTP request using the FQDN on port 80:</span></div>
<div style="position:absolute;left:101.00px;top:198.18px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl \</span></div>
<div style="position:absolute;left:101.00px;top:210.18px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">${RHT_OCP4_DEV_USER}-xyz-${RHT_OCP4_DEV_USER}-route.${RHT_OCP4_WILDCARD_DOMAIN}</span></div>
<div style="position:absolute;left:101.00px;top:222.17px" class="cls_026"><span class="cls_026">Hello, World! php version is 7.3.11</span></div>
<div style="position:absolute;left:90.00px;top:252.52px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:274.45px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab openshift-routes finish</span><span class="cls_011"> script to complete this exercise.</span></div>
<div style="position:absolute;left:101.00px;top:302.17px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab openshift-routes finish</span></div>
<div style="position:absolute;left:90.00px;top:329.95px" class="cls_011"><span class="cls_011">This concludes the guided exercise.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">168</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:149172px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background187.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:62.06px" class="cls_014"><span class="cls_014">Creating Applications with Source-to-</span></div>
<div style="position:absolute;left:108.00px;top:83.06px" class="cls_014"><span class="cls_014">Image</span></div>
<div style="position:absolute;left:108.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:108.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to deploy an application using the Source-</span></div>
<div style="position:absolute;left:108.00px;top:170.97px" class="cls_011"><span class="cls_011">to-Image (S2I) facility of OpenShift Container Platform.</span></div>
<div style="position:absolute;left:108.00px;top:193.26px" class="cls_024"><span class="cls_024">The Source-to-Image (S2I) Process</span></div>
<div style="position:absolute;left:108.00px;top:217.97px" class="cls_011"><span class="cls_011">Source-to-Image (S2I) is a tool that makes it easy to build container images from application</span></div>
<div style="position:absolute;left:108.00px;top:229.97px" class="cls_011"><span class="cls_011">source code. This tool takes an application's source code from a Git repository, injects the source</span></div>
<div style="position:absolute;left:108.00px;top:241.97px" class="cls_011"><span class="cls_011">code into a base container based on the language and framework desired, and produces a new</span></div>
<div style="position:absolute;left:108.00px;top:253.97px" class="cls_011"><span class="cls_011">container image that runs the assembled application.</span></div>
<div style="position:absolute;left:108.00px;top:275.46px" class="cls_011"><span class="cls_011">Figure 6.8 shows the resources created by the </span><span class="cls_021">oc new-app</span><span class="cls_011"> command when the argument is an</span></div>
<div style="position:absolute;left:108.00px;top:287.46px" class="cls_011"><span class="cls_011">application source code repository. Notice that S2I also creates a Deployment Configuration and</span></div>
<div style="position:absolute;left:108.00px;top:299.46px" class="cls_011"><span class="cls_011">all its dependent resources.</span></div>
<div style="position:absolute;left:187.01px;top:601.29px" class="cls_020"><span class="cls_020">Figure 6.8: Deployment Configuration and dependent resources</span></div>
<div style="position:absolute;left:108.00px;top:624.21px" class="cls_011"><span class="cls_011">S2I is the primary strategy used for building applications in OpenShift Container Platform. The</span></div>
<div style="position:absolute;left:108.00px;top:636.21px" class="cls_011"><span class="cls_011">main reasons for using source builds are:</span></div>
<div style="position:absolute;left:108.00px;top:659.60px" class="cls_011"><span class="cls_011">• User efficiency: Developers do not need to understand Dockerfiles and operating system</span></div>
<div style="position:absolute;left:117.50px;top:671.60px" class="cls_011"><span class="cls_011">commands such as </span><span class="cls_021">yum install</span><span class="cls_011">. They work using their standard programming language tools.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.53px;top:751.59px" class="cls_013"><span class="cls_013">169</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:149974px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background188.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_011"><span class="cls_011">• Patching: S2I allows for rebuilding all the applications consistently if a base image needs a</span></div>
<div style="position:absolute;left:99.50px;top:65.97px" class="cls_011"><span class="cls_011">patch due to a security issue. For example, if a security issue is found in a PHP base image, then</span></div>
<div style="position:absolute;left:99.50px;top:77.97px" class="cls_011"><span class="cls_011">updating this image with security patches updates all applications that use this image as a base.</span></div>
<div style="position:absolute;left:90.00px;top:100.86px" class="cls_011"><span class="cls_011">• Speed: With S2I, the assembly process can perform a large number of complex operations</span></div>
<div style="position:absolute;left:99.50px;top:112.86px" class="cls_011"><span class="cls_011">without creating a new layer at each step, resulting in faster builds.</span></div>
<div style="position:absolute;left:90.00px;top:135.75px" class="cls_011"><span class="cls_011">• Ecosystem: S2I encourages a shared ecosystem of images where base images and scripts can</span></div>
<div style="position:absolute;left:99.50px;top:147.75px" class="cls_011"><span class="cls_011">be customized and reused across multiple types of applications.</span></div>
<div style="position:absolute;left:90.00px;top:170.03px" class="cls_024"><span class="cls_024">Describing Image Streams</span></div>
<div style="position:absolute;left:90.00px;top:194.75px" class="cls_011"><span class="cls_011">OpenShift deploys new versions of user applications into pods quickly. To create a new application,</span></div>
<div style="position:absolute;left:90.00px;top:206.75px" class="cls_011"><span class="cls_011">in addition to the application source code, a base image (the S2I builder image) is required. If</span></div>
<div style="position:absolute;left:90.00px;top:218.75px" class="cls_011"><span class="cls_011">either of these two components gets updated, OpenShift creates a new container image. Pods</span></div>
<div style="position:absolute;left:90.00px;top:230.74px" class="cls_011"><span class="cls_011">created using the older container image are replaced by pods using the new image.</span></div>
<div style="position:absolute;left:90.00px;top:252.24px" class="cls_011"><span class="cls_011">Even though it is evident that the container image needs to be updated when application code</span></div>
<div style="position:absolute;left:90.00px;top:264.24px" class="cls_011"><span class="cls_011">changes, it may not be evident that the deployed pods also need to be updated should the builder</span></div>
<div style="position:absolute;left:90.00px;top:276.24px" class="cls_011"><span class="cls_011">image change.</span></div>
<div style="position:absolute;left:90.00px;top:297.74px" class="cls_011"><span class="cls_011">The image stream resource is a configuration that names specific container images associated</span></div>
<div style="position:absolute;left:90.00px;top:309.73px" class="cls_011"><span class="cls_011">with image stream tags, an alias for these container images. OpenShift builds applications against</span></div>
<div style="position:absolute;left:90.00px;top:321.73px" class="cls_011"><span class="cls_011">an image stream. The OpenShift installer populates several image streams by default during</span></div>
<div style="position:absolute;left:90.00px;top:333.73px" class="cls_011"><span class="cls_011">installation. To determine available image streams, use the </span><span class="cls_021">oc get</span><span class="cls_011"> command, as follows:</span></div>
<div style="position:absolute;left:101.00px;top:361.45px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc get is -n openshift</span></div>
<div style="position:absolute;left:101.00px;top:373.45px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:173.00px;top:373.45px" class="cls_026"><span class="cls_026">IMAGE REPOSITORY</span></div>
<div style="position:absolute;left:355.40px;top:373.45px" class="cls_026"><span class="cls_026">TAGS</span></div>
<div style="position:absolute;left:101.00px;top:385.44px" class="cls_026"><span class="cls_026">cli</span></div>
<div style="position:absolute;left:173.00px;top:385.44px" class="cls_026"><span class="cls_026">...svc:5000/openshift/cli</span></div>
<div style="position:absolute;left:355.40px;top:385.44px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:101.00px;top:397.44px" class="cls_026"><span class="cls_026">dotnet</span></div>
<div style="position:absolute;left:173.00px;top:397.44px" class="cls_026"><span class="cls_026">...svc:5000/openshift/dotnet</span></div>
<div style="position:absolute;left:355.40px;top:397.44px" class="cls_026"><span class="cls_026">2.0,2.1,latest</span></div>
<div style="position:absolute;left:101.00px;top:409.44px" class="cls_026"><span class="cls_026">dotnet-runtime ...svc:5000/openshift/dotnet-runtime</span></div>
<div style="position:absolute;left:355.40px;top:409.44px" class="cls_026"><span class="cls_026">2.0,2.1,latest</span></div>
<div style="position:absolute;left:101.00px;top:421.44px" class="cls_026"><span class="cls_026">httpd</span></div>
<div style="position:absolute;left:173.00px;top:421.44px" class="cls_026"><span class="cls_026">...svc:5000/openshift/httpd</span></div>
<div style="position:absolute;left:355.40px;top:421.44px" class="cls_026"><span class="cls_026">2.4,latest</span></div>
<div style="position:absolute;left:101.00px;top:433.43px" class="cls_026"><span class="cls_026">jenkins</span></div>
<div style="position:absolute;left:173.00px;top:433.43px" class="cls_026"><span class="cls_026">...svc:5000/openshift/jenkins</span></div>
<div style="position:absolute;left:355.40px;top:433.43px" class="cls_026"><span class="cls_026">1,2</span></div>
<div style="position:absolute;left:101.00px;top:445.43px" class="cls_026"><span class="cls_026">mariadb</span></div>
<div style="position:absolute;left:173.00px;top:445.43px" class="cls_026"><span class="cls_026">...svc:5000/openshift/mariadb</span></div>
<div style="position:absolute;left:355.40px;top:445.43px" class="cls_026"><span class="cls_026">10.1,10.2,latest</span></div>
<div style="position:absolute;left:101.00px;top:457.43px" class="cls_026"><span class="cls_026">mongodb</span></div>
<div style="position:absolute;left:173.00px;top:457.43px" class="cls_026"><span class="cls_026">...svc:5000/openshift/mongodb</span></div>
<div style="position:absolute;left:355.40px;top:457.43px" class="cls_026"><span class="cls_026">2.4,2.6,3.2,3.4,3.6,latest</span></div>
<div style="position:absolute;left:101.00px;top:469.43px" class="cls_026"><span class="cls_026">mysql</span></div>
<div style="position:absolute;left:173.00px;top:469.43px" class="cls_026"><span class="cls_026">...svc:5000/openshift/mysql</span></div>
<div style="position:absolute;left:355.40px;top:469.43px" class="cls_026"><span class="cls_026">5.5,5.6,5.7,latest</span></div>
<div style="position:absolute;left:101.00px;top:481.43px" class="cls_026"><span class="cls_026">nginx</span></div>
<div style="position:absolute;left:173.00px;top:481.43px" class="cls_026"><span class="cls_026">...svc:5000/openshift/nginx</span></div>
<div style="position:absolute;left:355.40px;top:481.43px" class="cls_026"><span class="cls_026">1.10,1.12,1.8,latest</span></div>
<div style="position:absolute;left:101.00px;top:493.42px" class="cls_026"><span class="cls_026">nodejs</span></div>
<div style="position:absolute;left:173.00px;top:493.42px" class="cls_026"><span class="cls_026">...svc:5000/openshift/nodejs</span></div>
<div style="position:absolute;left:355.40px;top:493.42px" class="cls_026"><span class="cls_026">0.10,10,11,4,6,8,latest</span></div>
<div style="position:absolute;left:101.00px;top:505.42px" class="cls_026"><span class="cls_026">perl</span></div>
<div style="position:absolute;left:173.00px;top:505.42px" class="cls_026"><span class="cls_026">...svc:5000/openshift/perl</span></div>
<div style="position:absolute;left:355.40px;top:505.42px" class="cls_026"><span class="cls_026">5.16,5.20,5.24,5.26,latest</span></div>
<div style="position:absolute;left:101.00px;top:517.42px" class="cls_026"><span class="cls_026">php</span></div>
<div style="position:absolute;left:173.00px;top:517.42px" class="cls_026"><span class="cls_026">...svc:5000/openshift/php</span></div>
<div style="position:absolute;left:355.40px;top:517.42px" class="cls_026"><span class="cls_026">5.5,5.6,7.0,7.1,latest</span></div>
<div style="position:absolute;left:101.00px;top:529.42px" class="cls_026"><span class="cls_026">postgresql</span></div>
<div style="position:absolute;left:173.00px;top:529.42px" class="cls_026"><span class="cls_026">...svc:5000/openshift/postgresql</span></div>
<div style="position:absolute;left:355.40px;top:529.42px" class="cls_026"><span class="cls_026">10,9.2,9.4,9.5,9.6,latest</span></div>
<div style="position:absolute;left:101.00px;top:541.42px" class="cls_026"><span class="cls_026">python</span></div>
<div style="position:absolute;left:173.00px;top:541.42px" class="cls_026"><span class="cls_026">...svc:5000/openshift/python</span></div>
<div style="position:absolute;left:355.40px;top:541.42px" class="cls_026"><span class="cls_026">2.7,3.3,3.4,3.5,3.6,latest</span></div>
<div style="position:absolute;left:101.00px;top:553.41px" class="cls_026"><span class="cls_026">redis</span></div>
<div style="position:absolute;left:173.00px;top:553.41px" class="cls_026"><span class="cls_026">...svc:5000/openshift/redis</span></div>
<div style="position:absolute;left:355.40px;top:553.41px" class="cls_026"><span class="cls_026">3.2,latest</span></div>
<div style="position:absolute;left:101.00px;top:565.41px" class="cls_026"><span class="cls_026">ruby</span></div>
<div style="position:absolute;left:173.00px;top:565.41px" class="cls_026"><span class="cls_026">...svc:5000/openshift/ruby</span></div>
<div style="position:absolute;left:355.40px;top:565.41px" class="cls_026"><span class="cls_026">2.0,2.2,2.3,2.4,2.5,latest</span></div>
<div style="position:absolute;left:101.00px;top:577.41px" class="cls_026"><span class="cls_026">wildfly</span></div>
<div style="position:absolute;left:173.00px;top:577.41px" class="cls_026"><span class="cls_026">...svc:5000/openshift/wildfly</span></div>
<div style="position:absolute;left:355.40px;top:577.41px" class="cls_026"><span class="cls_026">10.0,10.1,11.0,12.0,...</span></div>
<div style="position:absolute;left:126.00px;top:616.11px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:630.48px" class="cls_011"><span class="cls_011">Your OpenShift instance may have more or fewer image streams depending on local</span></div>
<div style="position:absolute;left:126.00px;top:642.48px" class="cls_011"><span class="cls_011">additions and OpenShift point releases.</span></div>
<div style="position:absolute;left:90.00px;top:680.38px" class="cls_011"><span class="cls_011">OpenShift detects when an image stream changes and takes action based on that change. If a</span></div>
<div style="position:absolute;left:90.00px;top:692.38px" class="cls_011"><span class="cls_011">security issue arises in the </span><span class="cls_021">nodejs-010-rhel7</span><span class="cls_011"> image, it can be updated in the image repository,</span></div>
<div style="position:absolute;left:90.00px;top:704.38px" class="cls_011"><span class="cls_011">and OpenShift can automatically trigger a new build of the application code.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">170</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:150776px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background189.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">It is likely that an organization chooses several supported base S2I images from Red Hat, but may</span></div>
<div style="position:absolute;left:108.00px;top:65.97px" class="cls_011"><span class="cls_011">also create their own base images.</span></div>
<div style="position:absolute;left:108.00px;top:88.26px" class="cls_024"><span class="cls_024">Building an Application with S2I and the CLI</span></div>
<div style="position:absolute;left:108.00px;top:112.97px" class="cls_011"><span class="cls_011">Building an application with S2I can be accomplished using the OpenShift CLI.</span></div>
<div style="position:absolute;left:108.00px;top:134.47px" class="cls_011"><span class="cls_011">An application can be created using the S2I process with the </span><span class="cls_021">oc new-app</span><span class="cls_011"> command from the</span></div>
<div style="position:absolute;left:108.00px;top:146.47px" class="cls_011"><span class="cls_011">CLI.</span></div>
<div style="position:absolute;left:119.00px;top:174.18px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc new-app</span></div>
<div style="position:absolute;left:191.40px;top:174.18px" class="cls_027"><span class="cls_027">--as-deployment-config    php~</span><A HREF="http://my.git.server.com/my-app/">http://my.git.server.com/my-app</A> </div>
<div style="position:absolute;left:123.80px;top:186.18px" class="cls_027"><span class="cls_027">--name=myapp</span></div>
<div style="position:absolute;left:128.90px;top:213.96px" class="cls_011"><span class="cls_011">Create a DeploymentConfig instead of a Deployment</span></div>
<div style="position:absolute;left:128.90px;top:226.40px" class="cls_011"><span class="cls_011">The image stream used in the process appears to the left of the tilde (~).</span></div>
<div style="position:absolute;left:128.90px;top:238.84px" class="cls_011"><span class="cls_011">The URL after the tilde indicates the location of the source code's Git repository.</span></div>
<div style="position:absolute;left:128.90px;top:251.29px" class="cls_011"><span class="cls_011">Sets the application name.</span></div>
<div style="position:absolute;left:144.00px;top:284.65px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:299.03px" class="cls_011"><span class="cls_011">Instead of using the tilde, you can set the image stream by using the </span><span class="cls_021">-i</span><span class="cls_011"> option.</span></div>
<div style="position:absolute;left:128.72px;top:326.74px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc new-app --as-deployment-config -i php <A HREF="http://services.lab.example.com/app/">http://services.lab.example.com/app</A> </span></div>
<div style="position:absolute;left:133.52px;top:338.74px" class="cls_027"><span class="cls_027">--name=myapp</span></div>
<div style="position:absolute;left:108.00px;top:382.92px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">oc new-app</span><span class="cls_011"> command allows creating applications using source code from a local or remote</span></div>
<div style="position:absolute;left:108.00px;top:394.92px" class="cls_011"><span class="cls_011">Git repository. If only a source repository is specified, </span><span class="cls_021">oc new-app</span><span class="cls_011"> tries to identify the correct</span></div>
<div style="position:absolute;left:108.00px;top:406.92px" class="cls_011"><span class="cls_011">image stream to use for building the application. In addition to application code, S2I can also</span></div>
<div style="position:absolute;left:108.00px;top:418.91px" class="cls_011"><span class="cls_011">identify and process Dockerfiles to create a new image.</span></div>
<div style="position:absolute;left:108.00px;top:440.41px" class="cls_011"><span class="cls_011">The following example creates an application using the Git repository in the current directory.</span></div>
<div style="position:absolute;left:119.00px;top:468.13px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc new-app --as-deployment-config .</span></div>
<div style="position:absolute;left:144.00px;top:507.33px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:144.00px;top:521.71px" class="cls_011"><span class="cls_011">When using a local Git repository, the repository must have a remote origin that</span></div>
<div style="position:absolute;left:144.00px;top:533.71px" class="cls_011"><span class="cls_011">points to a URL accessible by the OpenShift instance.</span></div>
<div style="position:absolute;left:108.00px;top:571.60px" class="cls_011"><span class="cls_011">It is also possible to create an application using a remote Git repository and a context</span></div>
<div style="position:absolute;left:108.00px;top:583.60px" class="cls_011"><span class="cls_011">subdirectory:</span></div>
<div style="position:absolute;left:119.00px;top:611.32px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc new-app --as-deployment-config \</span></div>
<div style="position:absolute;left:128.60px;top:623.32px" class="cls_027"><span class="cls_027"> </span><A HREF="https://github.com/openshift/sti-ruby.git/">https://github.com/openshift/sti-ruby.git</A> \</div>
<div style="position:absolute;left:128.60px;top:635.31px" class="cls_027"><span class="cls_027">--context-dir=2.0/test/puma-test-app</span></div>
<div style="position:absolute;left:108.00px;top:663.09px" class="cls_011"><span class="cls_011">Finally, it is possible to create an application using a remote Git repository with a specific branch</span></div>
<div style="position:absolute;left:108.00px;top:675.09px" class="cls_011"><span class="cls_011">reference:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:506.77px;top:751.59px" class="cls_013"><span class="cls_013">171</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:151578px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background190.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc new-app --as-deployment-config \</span></div>
<div style="position:absolute;left:110.60px;top:73.69px" class="cls_027"><span class="cls_027"> </span><A HREF="https://github.com/openshift/ruby-hello-world.git#beta4/">https://github.com/openshift/ruby-hello-world.git#beta4</A> </div>
<div style="position:absolute;left:90.00px;top:101.47px" class="cls_011"><span class="cls_011">If an image stream is not specified in the command, </span><span class="cls_021">new-app</span><span class="cls_011"> attempts to determine which</span></div>
<div style="position:absolute;left:90.00px;top:113.47px" class="cls_011"><span class="cls_011">language builder to use based on the presence of certain files in the root of the repository:</span></div>
<div style="position:absolute;left:96.25px;top:150.64px" class="cls_023"><span class="cls_023">Language</span></div>
<div style="position:absolute;left:234.25px;top:150.64px" class="cls_023"><span class="cls_023">Files</span></div>
<div style="position:absolute;left:96.25px;top:173.23px" class="cls_011"><span class="cls_011">Ruby</span></div>
<div style="position:absolute;left:234.25px;top:173.20px" class="cls_021"><span class="cls_021">Rakefile</span><span class="cls_011"> </span><span class="cls_021">Gemfile</span><span class="cls_011">, </span><span class="cls_021">config.ru</span></div>
<div style="position:absolute;left:96.25px;top:195.73px" class="cls_011"><span class="cls_011">Java EE</span></div>
<div style="position:absolute;left:234.25px;top:195.69px" class="cls_021"><span class="cls_021">pom.xml</span></div>
<div style="position:absolute;left:96.25px;top:218.23px" class="cls_011"><span class="cls_011">Node.js</span></div>
<div style="position:absolute;left:234.25px;top:218.19px" class="cls_021"><span class="cls_021">app.json package.json</span></div>
<div style="position:absolute;left:96.25px;top:240.72px" class="cls_011"><span class="cls_011">PHP</span></div>
<div style="position:absolute;left:234.25px;top:240.69px" class="cls_021"><span class="cls_021">index.php composer.json</span></div>
<div style="position:absolute;left:96.25px;top:263.22px" class="cls_011"><span class="cls_011">Python</span></div>
<div style="position:absolute;left:234.25px;top:263.19px" class="cls_021"><span class="cls_021">requirements.txt config.py</span></div>
<div style="position:absolute;left:96.25px;top:285.72px" class="cls_011"><span class="cls_011">Perl</span></div>
<div style="position:absolute;left:234.25px;top:285.69px" class="cls_021"><span class="cls_021">index.pl cpanfile</span></div>
<div style="position:absolute;left:90.00px;top:311.43px" class="cls_011"><span class="cls_011">After a language is detected, the </span><span class="cls_021">new-app</span><span class="cls_011"> command searches for image stream tags that have</span></div>
<div style="position:absolute;left:90.00px;top:323.43px" class="cls_011"><span class="cls_011">support for the detected language, or an image stream that matches the name of the detected</span></div>
<div style="position:absolute;left:90.00px;top:335.43px" class="cls_011"><span class="cls_011">language.</span></div>
<div style="position:absolute;left:90.00px;top:356.93px" class="cls_011"><span class="cls_011">Create a JSON resource definition file by using the </span><span class="cls_021">-o json</span><span class="cls_011"> parameter and output redirection:</span></div>
<div style="position:absolute;left:101.00px;top:384.64px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc -o json new-app --as-deployment-config \</span></div>
<div style="position:absolute;left:101.00px;top:396.64px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">php~<A HREF="http://services.lab.example.com/app/">http://services.lab.example.com/app</A> \</span></div>
<div style="position:absolute;left:101.00px;top:408.64px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--name=myapp > s2i.json</span></div>
<div style="position:absolute;left:90.00px;top:436.42px" class="cls_011"><span class="cls_011">This JSON definition file creates a list of resources. The first resource is the image stream:</span></div>
<div style="position:absolute;left:101.00px;top:464.14px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:476.14px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:120.20px;top:488.13px" class="cls_026"><span class="cls_026">"kind": "ImageStream",</span></div>
<div style="position:absolute;left:120.20px;top:500.13px" class="cls_026"><span class="cls_026">"apiVersion": "image.openshift.io/v1",</span></div>
<div style="position:absolute;left:120.20px;top:512.13px" class="cls_026"><span class="cls_026">"metadata": {</span></div>
<div style="position:absolute;left:139.40px;top:524.13px" class="cls_026"><span class="cls_026">"name": "myapp",</span></div>
<div style="position:absolute;left:139.40px;top:536.13px" class="cls_026"><span class="cls_026">"creationTimestamp": null</span></div>
<div style="position:absolute;left:139.40px;top:548.12px" class="cls_026"><span class="cls_026">"labels": {</span></div>
<div style="position:absolute;left:197.00px;top:560.12px" class="cls_026"><span class="cls_026">"app": "myapp"</span></div>
<div style="position:absolute;left:177.80px;top:572.12px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:177.80px;top:584.12px" class="cls_026"><span class="cls_026">"annotations": {</span></div>
<div style="position:absolute;left:197.00px;top:596.11px" class="cls_026"><span class="cls_026">"openshift.io/generated-by": "OpenShiftNewApp"</span></div>
<div style="position:absolute;left:177.80px;top:608.11px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:120.20px;top:620.11px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:120.20px;top:632.11px" class="cls_026"><span class="cls_026">"spec": {</span></div>
<div style="position:absolute;left:139.40px;top:644.11px" class="cls_026"><span class="cls_026">"lookupPolicy": {</span></div>
<div style="position:absolute;left:158.60px;top:656.10px" class="cls_026"><span class="cls_026">"local": false</span></div>
<div style="position:absolute;left:139.40px;top:668.10px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:120.20px;top:680.10px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:120.20px;top:692.10px" class="cls_026"><span class="cls_026">"status": {</span></div>
<div style="position:absolute;left:139.40px;top:704.10px" class="cls_026"><span class="cls_026">"dockerImageRepository": ""</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">172</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:152380px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background191.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:138.20px;top:53.69px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:119.00px;top:65.69px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:119.00px;top:77.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:128.90px;top:105.47px" class="cls_011"><span class="cls_011">Define a resource type of image stream.</span></div>
<div style="position:absolute;left:128.90px;top:117.91px" class="cls_011"><span class="cls_011">Name the image stream </span><span class="cls_021">myapp</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:108.00px;top:139.85px" class="cls_011"><span class="cls_011">The build configuration (</span><span class="cls_021">bc</span><span class="cls_011">) is responsible for defining input parameters and triggers that are</span></div>
<div style="position:absolute;left:108.00px;top:151.85px" class="cls_011"><span class="cls_011">executed to transform the source code into a runnable image. The </span><span class="cls_021">BuildConfig</span><span class="cls_011"> (BC) is the</span></div>
<div style="position:absolute;left:108.00px;top:163.85px" class="cls_011"><span class="cls_011">second resource, and the following example provides an overview of the parameters used by</span></div>
<div style="position:absolute;left:108.00px;top:175.85px" class="cls_011"><span class="cls_011">OpenShift to create a runnable image.</span></div>
<div style="position:absolute;left:119.00px;top:203.56px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:215.56px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:138.20px;top:227.56px" class="cls_026"><span class="cls_026">"kind": </span><span class="cls_029">"BuildConfig"</span><span class="cls_026">,</span></div>
<div style="position:absolute;left:138.20px;top:239.56px" class="cls_026"><span class="cls_026">"apiVersion": "build.openshift.io/v1",</span></div>
<div style="position:absolute;left:138.20px;top:251.55px" class="cls_026"><span class="cls_026">"metadata": {</span></div>
<div style="position:absolute;left:157.40px;top:263.55px" class="cls_026"><span class="cls_026">"name": </span><span class="cls_029">"myapp"</span><span class="cls_026">,</span></div>
<div style="position:absolute;left:157.40px;top:275.55px" class="cls_026"><span class="cls_026">"creationTimestamp": null,</span></div>
<div style="position:absolute;left:157.40px;top:287.55px" class="cls_026"><span class="cls_026">"labels": {</span></div>
<div style="position:absolute;left:176.60px;top:299.55px" class="cls_026"><span class="cls_026">"app": "myapp"</span></div>
<div style="position:absolute;left:157.40px;top:311.55px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:157.40px;top:323.54px" class="cls_026"><span class="cls_026">"annotations": {</span></div>
<div style="position:absolute;left:176.60px;top:335.54px" class="cls_026"><span class="cls_026">"openshift.io/generated-by": "OpenShiftNewApp"</span></div>
<div style="position:absolute;left:157.40px;top:347.54px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:138.20px;top:359.54px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:138.20px;top:371.54px" class="cls_026"><span class="cls_026">"spec": {</span></div>
<div style="position:absolute;left:157.40px;top:383.53px" class="cls_026"><span class="cls_026">"triggers": [</span></div>
<div style="position:absolute;left:176.60px;top:395.53px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:195.80px;top:407.53px" class="cls_026"><span class="cls_026">"type": "GitHub",</span></div>
<div style="position:absolute;left:195.80px;top:419.53px" class="cls_026"><span class="cls_026">"github": {</span></div>
<div style="position:absolute;left:215.00px;top:431.52px" class="cls_026"><span class="cls_026">"secret": "S5_4BZpPabM6KrIuPBvI"</span></div>
<div style="position:absolute;left:195.80px;top:443.52px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:176.60px;top:455.52px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:176.60px;top:467.52px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:195.80px;top:479.52px" class="cls_026"><span class="cls_026">"type": "Generic",</span></div>
<div style="position:absolute;left:195.80px;top:491.52px" class="cls_026"><span class="cls_026">"generic": {</span></div>
<div style="position:absolute;left:215.00px;top:503.51px" class="cls_026"><span class="cls_026">"secret": "3q8K8JNDoRzhjoz1KgMz"</span></div>
<div style="position:absolute;left:195.80px;top:515.51px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:176.60px;top:527.51px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:176.60px;top:539.51px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:195.80px;top:551.51px" class="cls_026"><span class="cls_026">"type": "ConfigChange"</span></div>
<div style="position:absolute;left:176.60px;top:563.50px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:176.60px;top:575.50px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:195.80px;top:587.50px" class="cls_026"><span class="cls_026">"type": "ImageChange",</span></div>
<div style="position:absolute;left:195.80px;top:599.50px" class="cls_026"><span class="cls_026">"imageChange": {}</span></div>
<div style="position:absolute;left:176.60px;top:611.49px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:157.40px;top:623.49px" class="cls_026"><span class="cls_026">],</span></div>
<div style="position:absolute;left:157.40px;top:635.49px" class="cls_026"><span class="cls_026">"source": {</span></div>
<div style="position:absolute;left:176.60px;top:647.49px" class="cls_026"><span class="cls_026">"type": "Git",</span></div>
<div style="position:absolute;left:176.60px;top:659.49px" class="cls_026"><span class="cls_026">"git": {</span></div>
<div style="position:absolute;left:195.80px;top:671.48px" class="cls_026"><span class="cls_026">"uri": </span><span class="cls_029">"<A HREF="http://services.lab.example.com/app"/">http://services.lab.example.com/app"</A> </span></div>
<div style="position:absolute;left:176.60px;top:683.48px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:157.40px;top:695.48px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.85px;top:751.59px" class="cls_013"><span class="cls_013">173</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:153182px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background192.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:139.40px;top:53.69px" class="cls_026"><span class="cls_026">"strategy": {</span></div>
<div style="position:absolute;left:158.60px;top:65.69px" class="cls_026"><span class="cls_026">"type": </span><span class="cls_029">"Source"</span><span class="cls_026">,</span></div>
<div style="position:absolute;left:158.60px;top:77.69px" class="cls_026"><span class="cls_026">"sourceStrategy": {</span></div>
<div style="position:absolute;left:177.80px;top:89.69px" class="cls_026"><span class="cls_026">"from": {</span></div>
<div style="position:absolute;left:197.00px;top:101.69px" class="cls_026"><span class="cls_026">"kind": "ImageStreamTag",</span></div>
<div style="position:absolute;left:197.00px;top:113.68px" class="cls_026"><span class="cls_026">"namespace": "openshift",</span></div>
<div style="position:absolute;left:197.00px;top:125.68px" class="cls_026"><span class="cls_026">"name": </span><span class="cls_029">"php:7.3"</span></div>
<div style="position:absolute;left:177.80px;top:137.68px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:158.60px;top:149.68px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:139.40px;top:161.68px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:139.40px;top:173.68px" class="cls_026"><span class="cls_026">"output": {</span></div>
<div style="position:absolute;left:158.60px;top:185.67px" class="cls_026"><span class="cls_026">"to": {</span></div>
<div style="position:absolute;left:177.80px;top:197.67px" class="cls_026"><span class="cls_026">"kind": "ImageStreamTag",</span></div>
<div style="position:absolute;left:177.80px;top:209.67px" class="cls_026"><span class="cls_026">"name": </span><span class="cls_029">"myapp:latest"</span></div>
<div style="position:absolute;left:158.60px;top:221.67px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:139.40px;top:233.66px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:139.40px;top:245.66px" class="cls_026"><span class="cls_026">"resources": {},</span></div>
<div style="position:absolute;left:139.40px;top:257.66px" class="cls_026"><span class="cls_026">"postCommit": {},</span></div>
<div style="position:absolute;left:139.40px;top:269.66px" class="cls_026"><span class="cls_026">"nodeSelector": null</span></div>
<div style="position:absolute;left:120.20px;top:281.66px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:120.20px;top:293.65px" class="cls_026"><span class="cls_026">"status": {</span></div>
<div style="position:absolute;left:139.40px;top:305.65px" class="cls_026"><span class="cls_026">"lastVersion": 0</span></div>
<div style="position:absolute;left:120.20px;top:317.65px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:101.00px;top:329.65px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:101.00px;top:341.65px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:110.90px;top:369.43px" class="cls_011"><span class="cls_011">Define a resource type of </span><span class="cls_021">BuildConfig</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:110.90px;top:381.87px" class="cls_011"><span class="cls_011">Name the </span><span class="cls_021">BuildConfig</span><span class="cls_011"> </span><span class="cls_021">myapp</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:110.90px;top:394.31px" class="cls_011"><span class="cls_011">Define the address to the source code Git repository.</span></div>
<div style="position:absolute;left:110.90px;top:406.75px" class="cls_011"><span class="cls_011">Define the strategy to use S2I.</span></div>
<div style="position:absolute;left:110.90px;top:419.19px" class="cls_011"><span class="cls_011">Define the builder image as the php:7.3 image stream.</span></div>
<div style="position:absolute;left:110.90px;top:431.63px" class="cls_011"><span class="cls_011">Name the output image stream </span><span class="cls_021">myapp:latest</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:453.57px" class="cls_011"><span class="cls_011">The third resource is the deployment configuration that is responsible for customizing the</span></div>
<div style="position:absolute;left:90.00px;top:465.57px" class="cls_011"><span class="cls_011">deployment process in OpenShift. It may include parameters and triggers that are necessary to</span></div>
<div style="position:absolute;left:90.00px;top:477.57px" class="cls_011"><span class="cls_011">create new container instances, and are translated into a replication controller from Kubernetes.</span></div>
<div style="position:absolute;left:90.00px;top:489.57px" class="cls_011"><span class="cls_011">Some of the features provided by </span><span class="cls_021">DeploymentConfig</span><span class="cls_011"> objects are:</span></div>
<div style="position:absolute;left:90.00px;top:511.27px" class="cls_011"><span class="cls_011">• User customizable strategies to transition from the existing deployments to new deployments.</span></div>
<div style="position:absolute;left:90.00px;top:532.98px" class="cls_011"><span class="cls_011">• Rollbacks to a previous deployment.</span></div>
<div style="position:absolute;left:90.00px;top:554.69px" class="cls_011"><span class="cls_011">• Manual replication scaling.</span></div>
<div style="position:absolute;left:101.00px;top:584.12px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:596.11px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:120.20px;top:608.11px" class="cls_026"><span class="cls_026">"kind": </span><span class="cls_029">"DeploymentConfig"</span><span class="cls_026">,</span></div>
<div style="position:absolute;left:120.20px;top:620.11px" class="cls_026"><span class="cls_026">"apiVersion": "apps.openshift.io/v1",</span></div>
<div style="position:absolute;left:120.20px;top:632.11px" class="cls_026"><span class="cls_026">"metadata": {</span></div>
<div style="position:absolute;left:139.40px;top:644.11px" class="cls_026"><span class="cls_026">"name": </span><span class="cls_029">"myapp</span><span class="cls_026">",</span></div>
<div style="position:absolute;left:139.40px;top:656.10px" class="cls_026"><span class="cls_026">"creationTimestamp": null,</span></div>
<div style="position:absolute;left:139.40px;top:668.10px" class="cls_026"><span class="cls_026">"labels": {</span></div>
<div style="position:absolute;left:158.60px;top:680.10px" class="cls_026"><span class="cls_026">"app": "myapp"</span></div>
<div style="position:absolute;left:139.40px;top:692.10px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:139.40px;top:704.10px" class="cls_026"><span class="cls_026">"annotations": {</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">174</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:153984px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background193.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:176.60px;top:53.69px" class="cls_026"><span class="cls_026">"openshift.io/generated-by": "OpenShiftNewApp"</span></div>
<div style="position:absolute;left:157.40px;top:65.69px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:138.20px;top:77.69px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:138.20px;top:89.69px" class="cls_026"><span class="cls_026">"spec": {</span></div>
<div style="position:absolute;left:157.40px;top:101.69px" class="cls_026"><span class="cls_026">"strategy": {</span></div>
<div style="position:absolute;left:176.60px;top:113.68px" class="cls_026"><span class="cls_026">"resources": {}</span></div>
<div style="position:absolute;left:157.40px;top:125.68px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:157.40px;top:137.68px" class="cls_026"><span class="cls_026">"triggers": [</span></div>
<div style="position:absolute;left:176.60px;top:149.68px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:195.80px;top:161.68px" class="cls_026"><span class="cls_026">"type": </span><span class="cls_029">"ConfigChange"</span></div>
<div style="position:absolute;left:176.60px;top:173.68px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:176.60px;top:185.67px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:195.80px;top:197.67px" class="cls_026"><span class="cls_026">"type": </span><span class="cls_029">"ImageChange"</span><span class="cls_026">,</span></div>
<div style="position:absolute;left:195.80px;top:209.67px" class="cls_026"><span class="cls_026">"imageChangeParams": {</span></div>
<div style="position:absolute;left:215.00px;top:221.67px" class="cls_026"><span class="cls_026">"automatic": true,</span></div>
<div style="position:absolute;left:215.00px;top:233.66px" class="cls_026"><span class="cls_026">"containerNames": [</span></div>
<div style="position:absolute;left:234.20px;top:245.66px" class="cls_026"><span class="cls_026">"myapp"</span></div>
<div style="position:absolute;left:215.00px;top:257.66px" class="cls_026"><span class="cls_026">],</span></div>
<div style="position:absolute;left:215.00px;top:269.66px" class="cls_026"><span class="cls_026">"from": {</span></div>
<div style="position:absolute;left:234.20px;top:281.66px" class="cls_026"><span class="cls_026">"kind": "ImageStreamTag",</span></div>
<div style="position:absolute;left:234.20px;top:293.65px" class="cls_026"><span class="cls_026">"name": "myapp:latest"</span></div>
<div style="position:absolute;left:215.00px;top:305.65px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:195.80px;top:317.65px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:176.60px;top:329.65px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:157.40px;top:341.64px" class="cls_026"><span class="cls_026">],</span></div>
<div style="position:absolute;left:157.40px;top:353.64px" class="cls_026"><span class="cls_026">"replicas": 1,</span></div>
<div style="position:absolute;left:157.40px;top:365.64px" class="cls_026"><span class="cls_026">"test": false,</span></div>
<div style="position:absolute;left:157.40px;top:377.64px" class="cls_026"><span class="cls_026">"selector": {</span></div>
<div style="position:absolute;left:176.60px;top:389.63px" class="cls_026"><span class="cls_026">"app": "myapp",</span></div>
<div style="position:absolute;left:176.60px;top:401.63px" class="cls_026"><span class="cls_026">"deploymentconfig": "myapp"</span></div>
<div style="position:absolute;left:157.40px;top:413.63px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:157.40px;top:425.63px" class="cls_026"><span class="cls_026">"template": {</span></div>
<div style="position:absolute;left:176.60px;top:437.63px" class="cls_026"><span class="cls_026">"metadata": {</span></div>
<div style="position:absolute;left:195.80px;top:449.62px" class="cls_026"><span class="cls_026">"creationTimestamp": null,</span></div>
<div style="position:absolute;left:195.80px;top:461.62px" class="cls_026"><span class="cls_026">"labels": {</span></div>
<div style="position:absolute;left:215.00px;top:473.62px" class="cls_026"><span class="cls_026">"app": "myapp",</span></div>
<div style="position:absolute;left:215.00px;top:485.62px" class="cls_026"><span class="cls_026">"deploymentconfig": "myapp"</span></div>
<div style="position:absolute;left:195.80px;top:497.61px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:195.80px;top:509.61px" class="cls_026"><span class="cls_026">"annotations": {</span></div>
<div style="position:absolute;left:215.00px;top:521.61px" class="cls_026"><span class="cls_026">"openshift.io/generated-by": "OpenShiftNewApp"</span></div>
<div style="position:absolute;left:195.80px;top:533.61px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:176.60px;top:545.60px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:176.60px;top:557.60px" class="cls_026"><span class="cls_026">"spec": {</span></div>
<div style="position:absolute;left:195.80px;top:569.60px" class="cls_026"><span class="cls_026">"containers": [</span></div>
<div style="position:absolute;left:215.00px;top:581.60px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:234.20px;top:593.60px" class="cls_026"><span class="cls_026">"name": "myapp",</span></div>
<div style="position:absolute;left:234.20px;top:605.59px" class="cls_026"><span class="cls_026">"image": </span><span class="cls_029">"myapp:latest"</span><span class="cls_026">,</span></div>
<div style="position:absolute;left:234.20px;top:617.60px" class="cls_029"><span class="cls_029">"ports"</span><span class="cls_026">: [</span></div>
<div style="position:absolute;left:253.40px;top:629.60px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:272.60px;top:641.60px" class="cls_026"><span class="cls_026">"containerPort": 8080,</span></div>
<div style="position:absolute;left:272.60px;top:653.59px" class="cls_026"><span class="cls_026">"protocol": "TCP"</span></div>
<div style="position:absolute;left:253.40px;top:665.59px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:253.40px;top:677.59px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:272.60px;top:689.59px" class="cls_026"><span class="cls_026">"containerPort": 8443,</span></div>
<div style="position:absolute;left:272.60px;top:701.59px" class="cls_026"><span class="cls_026">"protocol": "TCP"</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.94px;top:751.59px" class="cls_013"><span class="cls_013">175</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:154786px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background194.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:235.40px;top:53.69px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:216.20px;top:65.69px" class="cls_026"><span class="cls_026">],</span></div>
<div style="position:absolute;left:216.20px;top:77.69px" class="cls_026"><span class="cls_026">"resources": {}</span></div>
<div style="position:absolute;left:197.00px;top:89.69px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:177.80px;top:101.69px" class="cls_026"><span class="cls_026">]</span></div>
<div style="position:absolute;left:158.60px;top:113.68px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:139.40px;top:125.68px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:120.20px;top:137.68px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:120.20px;top:149.68px" class="cls_026"><span class="cls_026">"status": {</span></div>
<div style="position:absolute;left:139.40px;top:161.68px" class="cls_026"><span class="cls_026">"latestVersion": 0,</span></div>
<div style="position:absolute;left:139.40px;top:173.68px" class="cls_026"><span class="cls_026">"observedGeneration": 0,</span></div>
<div style="position:absolute;left:139.40px;top:185.67px" class="cls_026"><span class="cls_026">"replicas": 0,</span></div>
<div style="position:absolute;left:139.40px;top:197.67px" class="cls_026"><span class="cls_026">"updatedReplicas": 0,</span></div>
<div style="position:absolute;left:139.40px;top:209.67px" class="cls_026"><span class="cls_026">"availableReplicas": 0,</span></div>
<div style="position:absolute;left:139.40px;top:221.67px" class="cls_026"><span class="cls_026">"unavailableReplicas": 0</span></div>
<div style="position:absolute;left:120.20px;top:233.66px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:101.00px;top:245.66px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:101.00px;top:257.66px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:110.90px;top:285.44px" class="cls_011"><span class="cls_011">Define a resource type of </span><span class="cls_021">DeploymentConfig</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:110.90px;top:297.88px" class="cls_011"><span class="cls_011">Name the </span><span class="cls_021">DeploymentConfig</span><span class="cls_011"> </span><span class="cls_021">myapp</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:110.90px;top:310.32px" class="cls_011"><span class="cls_011">A configuration change trigger causes a new deployment to be created any time the</span></div>
<div style="position:absolute;left:110.90px;top:322.32px" class="cls_011"><span class="cls_011">replication controller template changes.</span></div>
<div style="position:absolute;left:110.90px;top:334.32px" class="cls_011"><span class="cls_011">An image change trigger causes the creation of a new deployment each time a new version of</span></div>
<div style="position:absolute;left:110.90px;top:346.32px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">myapp:latest</span><span class="cls_011"> image is available in the repository.</span></div>
<div style="position:absolute;left:110.90px;top:358.31px" class="cls_011"><span class="cls_011">Defines the container image to deploy: </span><span class="cls_021">myapp:latest</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:110.90px;top:370.76px" class="cls_011"><span class="cls_011">Specifies the container ports.</span></div>
<div style="position:absolute;left:90.00px;top:392.70px" class="cls_011"><span class="cls_011">The last item is the service, already covered in previous chapters:</span></div>
<div style="position:absolute;left:101.00px;top:420.41px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:432.41px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:120.20px;top:444.41px" class="cls_029"><span class="cls_029">"kind": "Service"</span><span class="cls_026">,</span></div>
<div style="position:absolute;left:120.20px;top:456.41px" class="cls_026"><span class="cls_026">"apiVersion": "v1",</span></div>
<div style="position:absolute;left:120.20px;top:468.40px" class="cls_026"><span class="cls_026">"metadata": {</span></div>
<div style="position:absolute;left:139.40px;top:480.40px" class="cls_029"><span class="cls_029">"name": "myapp",</span></div>
<div style="position:absolute;left:139.40px;top:492.40px" class="cls_026"><span class="cls_026">"creationTimestamp": null,</span></div>
<div style="position:absolute;left:139.40px;top:504.40px" class="cls_026"><span class="cls_026">"labels": {</span></div>
<div style="position:absolute;left:158.60px;top:516.40px" class="cls_026"><span class="cls_026">"app": "myapp"</span></div>
<div style="position:absolute;left:139.40px;top:528.40px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:139.40px;top:540.39px" class="cls_026"><span class="cls_026">"annotations": {</span></div>
<div style="position:absolute;left:158.60px;top:552.39px" class="cls_026"><span class="cls_026">"openshift.io/generated-by": "OpenShiftNewApp"</span></div>
<div style="position:absolute;left:139.40px;top:564.39px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:120.20px;top:576.39px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:120.20px;top:588.39px" class="cls_026"><span class="cls_026">"spec": {</span></div>
<div style="position:absolute;left:139.40px;top:600.38px" class="cls_026"><span class="cls_026">"ports": [</span></div>
<div style="position:absolute;left:158.60px;top:612.38px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:177.80px;top:624.38px" class="cls_026"><span class="cls_026">"name": "8080-tcp",</span></div>
<div style="position:absolute;left:177.80px;top:636.38px" class="cls_026"><span class="cls_026">"protocol": "TCP",</span></div>
<div style="position:absolute;left:177.80px;top:648.38px" class="cls_026"><span class="cls_026">"port": 8080,</span></div>
<div style="position:absolute;left:177.80px;top:660.37px" class="cls_026"><span class="cls_026">"targetPort": 8080</span></div>
<div style="position:absolute;left:158.60px;top:672.37px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:158.60px;top:684.37px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:177.80px;top:696.37px" class="cls_026"><span class="cls_026">"name": "8443-tcp",</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">176</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:155588px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background195.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:195.80px;top:53.69px" class="cls_026"><span class="cls_026">"protocol": "TCP",</span></div>
<div style="position:absolute;left:195.80px;top:65.69px" class="cls_026"><span class="cls_026">"port": 8443,</span></div>
<div style="position:absolute;left:195.80px;top:77.69px" class="cls_026"><span class="cls_026">"targetPort": 8443</span></div>
<div style="position:absolute;left:176.60px;top:89.69px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:157.40px;top:101.69px" class="cls_026"><span class="cls_026">],</span></div>
<div style="position:absolute;left:157.40px;top:113.68px" class="cls_026"><span class="cls_026">"selector": {</span></div>
<div style="position:absolute;left:176.60px;top:125.68px" class="cls_026"><span class="cls_026">"app": "myapp",</span></div>
<div style="position:absolute;left:176.60px;top:137.68px" class="cls_026"><span class="cls_026">"deploymentconfig": "myapp"</span></div>
<div style="position:absolute;left:157.40px;top:149.68px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:138.20px;top:161.68px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:138.20px;top:173.68px" class="cls_026"><span class="cls_026">"status": {</span></div>
<div style="position:absolute;left:157.40px;top:185.67px" class="cls_026"><span class="cls_026">"loadBalancer": {}</span></div>
<div style="position:absolute;left:138.20px;top:197.67px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:119.00px;top:209.67px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:144.00px;top:248.87px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:263.25px" class="cls_011"><span class="cls_011">By default, the </span><span class="cls_021">oc new-app</span><span class="cls_011"> command does not create a route. You can create a</span></div>
<div style="position:absolute;left:144.00px;top:275.25px" class="cls_011"><span class="cls_011">route after creating the application. However, a route is automatically created when</span></div>
<div style="position:absolute;left:144.00px;top:287.24px" class="cls_011"><span class="cls_011">using the web console because it uses a template.</span></div>
<div style="position:absolute;left:108.00px;top:325.14px" class="cls_011"><span class="cls_011">After creating a new application, the build process starts. Use the </span><span class="cls_021">oc get builds</span><span class="cls_011"> command to</span></div>
<div style="position:absolute;left:108.00px;top:337.14px" class="cls_011"><span class="cls_011">see a list of application builds:</span></div>
<div style="position:absolute;left:119.00px;top:364.86px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc get builds</span></div>
<div style="position:absolute;left:119.00px;top:376.86px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:210.20px;top:376.86px" class="cls_026"><span class="cls_026">TYPE</span></div>
<div style="position:absolute;left:253.40px;top:376.86px" class="cls_026"><span class="cls_026">FROM</span></div>
<div style="position:absolute;left:320.60px;top:376.86px" class="cls_026"><span class="cls_026">STATUS</span></div>
<div style="position:absolute;left:368.60px;top:376.86px" class="cls_026"><span class="cls_026">STARTED</span></div>
<div style="position:absolute;left:450.20px;top:376.86px" class="cls_026"><span class="cls_026">DURATION</span></div>
<div style="position:absolute;left:119.00px;top:388.85px" class="cls_026"><span class="cls_026">php-helloworld-1</span></div>
<div style="position:absolute;left:210.20px;top:388.85px" class="cls_026"><span class="cls_026">Source</span></div>
<div style="position:absolute;left:253.40px;top:388.85px" class="cls_026"><span class="cls_026">Git@9e17db8</span></div>
<div style="position:absolute;left:320.60px;top:388.85px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:368.60px;top:388.85px" class="cls_026"><span class="cls_026">13 seconds ago</span></div>
<div style="position:absolute;left:108.00px;top:416.63px" class="cls_011"><span class="cls_011">OpenShift allows viewing the build logs. The following command shows the last few lines of the</span></div>
<div style="position:absolute;left:108.00px;top:428.63px" class="cls_011"><span class="cls_011">build log:</span></div>
<div style="position:absolute;left:119.00px;top:456.35px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc logs build/myapp-1</span></div>
<div style="position:absolute;left:144.00px;top:495.55px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:144.00px;top:509.93px" class="cls_011"><span class="cls_011">If the build is not </span><span class="cls_021">Running</span><span class="cls_011"> yet, or OpenShift has not deployed the </span><span class="cls_021">s2i-build</span><span class="cls_011"> pod</span></div>
<div style="position:absolute;left:144.00px;top:521.92px" class="cls_011"><span class="cls_011">yet, the above command throws an error. Just wait a few moments and retry it.</span></div>
<div style="position:absolute;left:108.00px;top:559.82px" class="cls_011"><span class="cls_011">Trigger a new build with the </span><span class="cls_021">oc start-build build_config_name</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:119.00px;top:587.54px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc get buildconfig</span></div>
<div style="position:absolute;left:119.00px;top:599.54px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:191.00px;top:599.54px" class="cls_026"><span class="cls_026">TYPE</span></div>
<div style="position:absolute;left:239.00px;top:599.54px" class="cls_026"><span class="cls_026">FROM</span></div>
<div style="position:absolute;left:287.00px;top:599.54px" class="cls_026"><span class="cls_026">LATEST</span></div>
<div style="position:absolute;left:119.00px;top:611.53px" class="cls_026"><span class="cls_026">myapp</span></div>
<div style="position:absolute;left:191.00px;top:611.53px" class="cls_026"><span class="cls_026">Source</span></div>
<div style="position:absolute;left:239.00px;top:611.53px" class="cls_026"><span class="cls_026">Git</span></div>
<div style="position:absolute;left:287.00px;top:611.53px" class="cls_026"><span class="cls_026">1</span></div>
<div style="position:absolute;left:119.00px;top:645.53px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc start-build myapp</span></div>
<div style="position:absolute;left:119.00px;top:657.53px" class="cls_026"><span class="cls_026">build "myapp-2" started</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.93px;top:751.59px" class="cls_013"><span class="cls_013">177</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:156390px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background196.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:52.26px" class="cls_024"><span class="cls_024">Relationship Between Build and Deployment</span></div>
<div style="position:absolute;left:90.00px;top:69.26px" class="cls_024"><span class="cls_024">Configurations</span></div>
<div style="position:absolute;left:90.00px;top:93.98px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">BuildConfig</span><span class="cls_011"> pod is responsible for creating the images in OpenShift and pushing them to</span></div>
<div style="position:absolute;left:90.00px;top:105.97px" class="cls_011"><span class="cls_011">the internal container registry. Any source code or content update typically requires a new build to</span></div>
<div style="position:absolute;left:90.00px;top:117.97px" class="cls_011"><span class="cls_011">guarantee the image is updated.</span></div>
<div style="position:absolute;left:90.00px;top:139.47px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">DeploymentConfig</span><span class="cls_011"> pod is responsible for deploying pods to OpenShift. The outcome of</span></div>
<div style="position:absolute;left:90.00px;top:151.47px" class="cls_011"><span class="cls_011">a </span><span class="cls_021">DeploymentConfig</span><span class="cls_011"> pod execution is the creation of pods with the images deployed in the</span></div>
<div style="position:absolute;left:90.00px;top:163.47px" class="cls_011"><span class="cls_011">internal container registry. Any existing running pod may be destroyed, depending on how the</span></div>
<div style="position:absolute;left:90.00px;top:175.46px" class="cls_021"><span class="cls_021">DeploymentConfig</span><span class="cls_011"> resource is set.</span></div>
<div style="position:absolute;left:90.00px;top:196.96px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">BuildConfig</span><span class="cls_011"> and </span><span class="cls_021">DeploymentConfig</span><span class="cls_011"> resources do not interact directly. The</span></div>
<div style="position:absolute;left:90.00px;top:208.96px" class="cls_021"><span class="cls_021">BuildConfig</span><span class="cls_011"> resource creates or updates a container image. The </span><span class="cls_021">DeploymentConfig</span><span class="cls_011"> reacts to</span></div>
<div style="position:absolute;left:90.00px;top:220.96px" class="cls_011"><span class="cls_011">this new image or updated image event and creates pods from the container image.</span></div>
<div style="position:absolute;left:126.00px;top:251.98px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:126.00px;top:266.30px" class="cls_022"><span class="cls_022">Source-to-Image (S2I) Build</span></div>
<div style="position:absolute;left:126.00px;top:278.35px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.5/html-single/builds/build-strategies#build-strategy-s2i_build-strategies">https://access.redhat.com/documentation/en-us/</A> </div>
<div style="position:absolute;left:126.00px;top:290.35px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.5/html-single/builds/build-strategies#build-strategy-s2i_build-strategies">openshift_container_platform/4.5/html-single/builds/build-strategies#build-</A> </div>
<div style="position:absolute;left:126.00px;top:302.35px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.5/html-single/builds/build-strategies#build-strategy-s2i_build-strategies">strategy-s2i_build-strategies</A> </div>
<div style="position:absolute;left:126.00px;top:323.79px" class="cls_022"><span class="cls_022">S2I GitHub repository</span></div>
<div style="position:absolute;left:126.00px;top:335.85px" class="cls_033"><span class="cls_033"> </span><A HREF="https://github.com/openshift/source-to-image">https://github.com/openshift/source-to-image</A> </div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">178</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:157192px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background197.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Creating a Containerized Application with</span></div>
<div style="position:absolute;left:108.00px;top:112.56px" class="cls_014"><span class="cls_014">Source-to-Image</span></div>
<div style="position:absolute;left:120.00px;top:158.59px" class="cls_011"><span class="cls_011">In this exercise, you will build an application from source code and deploy the application to</span></div>
<div style="position:absolute;left:120.00px;top:170.59px" class="cls_011"><span class="cls_011">an OpenShift cluster.</span></div>
<div style="position:absolute;left:120.00px;top:193.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:120.00px;top:211.59px" class="cls_011"><span class="cls_011">You should be able to:</span></div>
<div style="position:absolute;left:120.00px;top:234.57px" class="cls_011"><span class="cls_011">• Build an application from source code using the OpenShift command-line interface.</span></div>
<div style="position:absolute;left:120.00px;top:257.56px" class="cls_011"><span class="cls_011">• Verify the successful deployment of the application using the OpenShift command-line</span></div>
<div style="position:absolute;left:129.50px;top:269.56px" class="cls_011"><span class="cls_011">interface.</span></div>
<div style="position:absolute;left:120.00px;top:292.62px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:120.00px;top:310.56px" class="cls_011"><span class="cls_011">Run the following command to download the relevant lab files and configure the</span></div>
<div style="position:absolute;left:120.00px;top:322.56px" class="cls_011"><span class="cls_011">environment:</span></div>
<div style="position:absolute;left:119.00px;top:350.27px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab openshift-s2i start</span></div>
<div style="position:absolute;left:119.41px;top:404.38px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:137.00px;top:404.44px" class="cls_011"><span class="cls_011">Inspect the PHP source code for the sample application and create and push a new branch</span></div>
<div style="position:absolute;left:137.00px;top:416.44px" class="cls_011"><span class="cls_011">named </span><span class="cls_021">s2i</span><span class="cls_011"> to use during this exercise.</span></div>
<div style="position:absolute;left:137.00px;top:440.43px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:161.70px;top:440.43px" class="cls_011"><span class="cls_011">Enter your local clone of the </span><span class="cls_021">DO180-apps</span><span class="cls_011"> Git repository and checkout the </span><span class="cls_021">master</span></div>
<div style="position:absolute;left:161.70px;top:452.42px" class="cls_011"><span class="cls_011">branch of the course's repository to ensure you start this exercise from a known good</span></div>
<div style="position:absolute;left:161.70px;top:464.42px" class="cls_011"><span class="cls_011">state:</span></div>
<div style="position:absolute;left:119.00px;top:492.14px" class="cls_026"><span class="cls_026">[student@workstation openshift-s2i]$ </span><span class="cls_027">cd ~/DO180-apps</span></div>
<div style="position:absolute;left:119.00px;top:504.14px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git checkout master</span></div>
<div style="position:absolute;left:119.00px;top:516.13px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:137.00px;top:546.40px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:161.70px;top:546.40px" class="cls_011"><span class="cls_011">Create a new branch to save any changes you make during this exercise:</span></div>
<div style="position:absolute;left:119.00px;top:574.12px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git checkout -b s2i</span></div>
<div style="position:absolute;left:119.00px;top:586.12px" class="cls_026"><span class="cls_026">Switched to a new branch 's2i'</span></div>
<div style="position:absolute;left:119.00px;top:598.12px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git push -u origin s2i</span></div>
<div style="position:absolute;left:119.00px;top:610.11px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:123.80px;top:622.11px" class="cls_026"><span class="cls_026">* [new branch]</span></div>
<div style="position:absolute;left:219.80px;top:622.11px" class="cls_026"><span class="cls_026">s2i -> s2i</span></div>
<div style="position:absolute;left:119.00px;top:634.11px" class="cls_026"><span class="cls_026">Branch 's2i' set up to track remote branch 's2i' from 'origin'.</span></div>
<div style="position:absolute;left:137.00px;top:664.38px" class="cls_011"><span class="cls_011">1.3.</span></div>
<div style="position:absolute;left:161.70px;top:664.38px" class="cls_011"><span class="cls_011">Review the PHP source code of the application, inside the the </span><span class="cls_021">php-helloworld</span></div>
<div style="position:absolute;left:161.70px;top:676.38px" class="cls_011"><span class="cls_011">folder.</span></div>
<div style="position:absolute;left:161.70px;top:692.37px" class="cls_011"><span class="cls_011">Open the </span><span class="cls_021">index.php</span><span class="cls_011"> file in the </span><span class="cls_021">/home/student/DO180-apps/php-helloworld</span></div>
<div style="position:absolute;left:161.70px;top:704.37px" class="cls_011"><span class="cls_011">folder:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.73px;top:751.59px" class="cls_013"><span class="cls_013">179</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:157994px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background198.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">&lt;?php</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">print "Hello, World! php version is " . PHP_VERSION . "\n";</span></div>
<div style="position:absolute;left:101.00px;top:85.69px" class="cls_026"><span class="cls_026">?></span></div>
<div style="position:absolute;left:143.70px;top:107.97px" class="cls_011"><span class="cls_011">The application implements a simple response which returns the PHP version it is</span></div>
<div style="position:absolute;left:143.70px;top:119.97px" class="cls_011"><span class="cls_011">running.</span></div>
<div style="position:absolute;left:101.41px;top:143.91px" class="cls_022"><span class="cls_022">2.</span><span class="cls_011">   Prepare the lab environment.</span></div>
<div style="position:absolute;left:119.00px;top:166.20px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:143.70px;top:166.20px" class="cls_011"><span class="cls_011">Load your classroom environment configuration.</span></div>
<div style="position:absolute;left:143.70px;top:182.20px" class="cls_011"><span class="cls_011">Run the following command to load the environment variables created in the first</span></div>
<div style="position:absolute;left:143.70px;top:194.19px" class="cls_011"><span class="cls_011">guided exercise:</span></div>
<div style="position:absolute;left:101.00px;top:221.91px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">source /usr/local/etc/ocp4.config</span></div>
<div style="position:absolute;left:119.00px;top:250.42px" class="cls_011"><span class="cls_011">2.2.   Log in to the OpenShift cluster.</span></div>
<div style="position:absolute;left:101.00px;top:278.14px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc login -u ${RHT_OCP4_DEV_USER} -p \</span></div>
<div style="position:absolute;left:101.00px;top:290.14px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}</span></div>
<div style="position:absolute;left:101.00px;top:302.14px" class="cls_026"><span class="cls_026">Login successful</span></div>
<div style="position:absolute;left:101.00px;top:314.13px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:342.64px" class="cls_011"><span class="cls_011">2.3.   Create a new project that contains your RHOCP developer username for the</span></div>
<div style="position:absolute;left:143.70px;top:354.64px" class="cls_011"><span class="cls_011">resources you create during this exercise:</span></div>
<div style="position:absolute;left:101.00px;top:382.36px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc new-project ${RHT_OCP4_DEV_USER}-s2i</span></div>
<div style="position:absolute;left:101.41px;top:412.58px" class="cls_022"><span class="cls_022">3.</span><span class="cls_011">  Create a new PHP application using Source-to-Image from the </span><span class="cls_021">php-helloworld</span></div>
<div style="position:absolute;left:119.00px;top:424.64px" class="cls_011"><span class="cls_011">directory using the </span><span class="cls_021">s2i</span><span class="cls_011"> branch you created in the previous step in your fork of the DO180-</span></div>
<div style="position:absolute;left:119.00px;top:436.64px" class="cls_011"><span class="cls_011">apps Git repository.</span></div>
<div style="position:absolute;left:119.00px;top:458.87px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:143.70px;top:458.87px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">oc new-app</span><span class="cls_011"> command to create the PHP application.</span></div>
<div style="position:absolute;left:126.00px;top:489.62px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:126.00px;top:504.00px" class="cls_011"><span class="cls_011">The following example uses the number sign (#) to select a specific branch from the</span></div>
<div style="position:absolute;left:126.00px;top:516.00px" class="cls_011"><span class="cls_011">git repository, in this case the </span><span class="cls_021">s2i</span><span class="cls_011"> branch created in the previous step.</span></div>
<div style="position:absolute;left:101.00px;top:561.61px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc new-app --as-deployment-config php:7.3 \</span></div>
<div style="position:absolute;left:101.00px;top:573.61px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--name=php-helloworld \</span></div>
<div style="position:absolute;left:101.00px;top:585.61px" class="cls_026"><span class="cls_026">> </span><A HREF="https://github.com/${rht_ocp4_github_user}/do180-apps#s2i/">https://github.com/${RHT_OCP4_GITHUB_USER}/DO180-apps#s2i</A> \</span></div>
<div style="position:absolute;left:101.00px;top:597.61px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--context-dir php-helloworld</span></div>
<div style="position:absolute;left:119.00px;top:626.12px" class="cls_011"><span class="cls_011">3.2.   Wait for the build to complete and the application to deploy. Verify that the build</span></div>
<div style="position:absolute;left:143.70px;top:638.12px" class="cls_011"><span class="cls_011">process starts with the </span><span class="cls_021">oc get pods</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:101.00px;top:665.84px" class="cls_026"><span class="cls_026">[student@workstation openshift-s2i]$ </span><span class="cls_027">oc get pods</span></div>
<div style="position:absolute;left:101.00px;top:677.83px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:221.00px;top:677.83px" class="cls_026"><span class="cls_026">READY   STATUS</span></div>
<div style="position:absolute;left:307.40px;top:677.83px" class="cls_026"><span class="cls_026">RESTARTS   AGE</span></div>
<div style="position:absolute;left:101.00px;top:689.83px" class="cls_026"><span class="cls_026">php-helloworld-1-build</span></div>
<div style="position:absolute;left:221.00px;top:689.83px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:259.40px;top:689.83px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:307.40px;top:689.83px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:360.20px;top:689.83px" class="cls_026"><span class="cls_026">5s</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">180</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:158796px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background199.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:137.00px;top:54.98px" class="cls_011"><span class="cls_011">3.3.  Examine the logs for this build. Use the build pod name for this build, </span><span class="cls_021">php-</span></div>
<div style="position:absolute;left:161.70px;top:66.97px" class="cls_021"><span class="cls_021">helloworld-1-build</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:94.69px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc logs --all-containers \</span></div>
<div style="position:absolute;left:119.00px;top:106.69px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-f php-helloworld-1-build</span></div>
<div style="position:absolute;left:119.00px;top:118.69px" class="cls_026"><span class="cls_026">Cloning "</span><A HREF="https://github.com/${rht_ocp4_github_user}/do180-apps"/">https://github.com/${RHT_OCP4_GITHUB_USER}/DO180-apps"</A> ...</div>
<div style="position:absolute;left:123.80px;top:130.68px" class="cls_026"><span class="cls_026">Commit: f7cd8963ef353d9173c3a21dcccf402f3616840b (Initial commit, including all</span></div>
<div style="position:absolute;left:123.80px;top:142.68px" class="cls_026"><span class="cls_026">apps previously in course)</span></div>
<div style="position:absolute;left:119.00px;top:166.68px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:190.68px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:119.00px;top:202.67px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:119.00px;top:214.67px" class="cls_026"><span class="cls_026">Generating dockerfile with builder image image-registry.openshift-image-...</span></div>
<div style="position:absolute;left:119.00px;top:226.67px" class="cls_026"><span class="cls_026">php@sha256:f3c9...7546</span></div>
<div style="position:absolute;left:119.00px;top:238.67px" class="cls_026"><span class="cls_026">STEP 1: FROM image-registry.openshift-image-registry.svc:5000/</span></div>
<div style="position:absolute;left:119.00px;top:262.66px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:286.66px" class="cls_026"><span class="cls_026">Pushing image ...openshift-image-registry.svc:5000/s2i/php-helloworld:latest...</span></div>
<div style="position:absolute;left:119.00px;top:298.66px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:119.00px;top:310.66px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:322.65px" class="cls_026"><span class="cls_026">STEP 8: RUN /usr/libexec/s2i/assemble</span></div>
<div style="position:absolute;left:119.00px;top:334.65px" class="cls_026"><span class="cls_026">---> Installing application source</span></div>
<div style="position:absolute;left:119.00px;top:346.65px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:358.65px" class="cls_026"><span class="cls_026">Copying config sha256:6ce5730f48d9c746e7cbd7ea7b8ed0f15b83932444d1d2bd7711d7...</span></div>
<div style="position:absolute;left:123.80px;top:370.65px" class="cls_026"><span class="cls_026">21.45 KiB / 21.45 KiB</span></div>
<div style="position:absolute;left:234.20px;top:370.65px" class="cls_026"><span class="cls_026">0s</span></div>
<div style="position:absolute;left:119.00px;top:382.64px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:119.00px;top:394.64px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:119.00px;top:406.64px" class="cls_026"><span class="cls_026">Successfully pushed .../php-helloworld:latest@sha256:63e757a4c0edaeda497dab7...</span></div>
<div style="position:absolute;left:119.00px;top:418.64px" class="cls_026"><span class="cls_026">Push successful</span></div>
<div style="position:absolute;left:161.70px;top:440.92px" class="cls_011"><span class="cls_011">Notice the clone of the Git repository as the first step of the build. Next, the Source-</span></div>
<div style="position:absolute;left:161.70px;top:452.91px" class="cls_011"><span class="cls_011">to-Image process built a new container called </span><span class="cls_021">s2i/php-helloworld:latest</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:161.70px;top:464.91px" class="cls_011"><span class="cls_011">The last step in the build process is to push this container to the OpenShift private</span></div>
<div style="position:absolute;left:161.70px;top:476.91px" class="cls_011"><span class="cls_011">registry.</span></div>
<div style="position:absolute;left:137.00px;top:501.31px" class="cls_011"><span class="cls_011">3.4.  Review the </span><span class="cls_021">DeploymentConfig</span><span class="cls_011"> for this application:</span></div>
<div style="position:absolute;left:119.00px;top:529.03px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc describe dc/php-helloworld</span></div>
<div style="position:absolute;left:119.00px;top:541.02px" class="cls_026"><span class="cls_026">Name:</span></div>
<div style="position:absolute;left:195.80px;top:541.02px" class="cls_026"><span class="cls_026">php-helloworld</span></div>
<div style="position:absolute;left:119.00px;top:553.02px" class="cls_026"><span class="cls_026">Namespace:</span></div>
<div style="position:absolute;left:195.80px;top:553.02px" class="cls_026"><span class="cls_026">${RHT_OCP4_DEV_USER}-s2i</span></div>
<div style="position:absolute;left:119.00px;top:565.02px" class="cls_026"><span class="cls_026">Created:</span></div>
<div style="position:absolute;left:195.80px;top:565.02px" class="cls_026"><span class="cls_026">About a minute ago</span></div>
<div style="position:absolute;left:119.00px;top:577.02px" class="cls_026"><span class="cls_026">Labels:</span></div>
<div style="position:absolute;left:195.80px;top:577.02px" class="cls_026"><span class="cls_026">app=php-helloworld</span></div>
<div style="position:absolute;left:195.80px;top:589.02px" class="cls_026"><span class="cls_026">app.kubernetes.io/component=php-helloworld</span></div>
<div style="position:absolute;left:195.80px;top:601.01px" class="cls_026"><span class="cls_026">app.kubernetes.io/instance=php-helloworld</span></div>
<div style="position:absolute;left:119.00px;top:613.01px" class="cls_026"><span class="cls_026">Annotations:</span></div>
<div style="position:absolute;left:195.80px;top:613.01px" class="cls_026"><span class="cls_026">openshift.io/generated-by=OpenShiftNewApp</span></div>
<div style="position:absolute;left:119.00px;top:625.01px" class="cls_026"><span class="cls_026">Latest Version: 1</span></div>
<div style="position:absolute;left:119.00px;top:637.01px" class="cls_026"><span class="cls_026">Selector:</span></div>
<div style="position:absolute;left:195.80px;top:637.01px" class="cls_026"><span class="cls_026">deploymentconfig=php-helloworld</span></div>
<div style="position:absolute;left:119.00px;top:649.01px" class="cls_026"><span class="cls_026">Replicas:</span></div>
<div style="position:absolute;left:195.80px;top:649.01px" class="cls_026"><span class="cls_026">1</span></div>
<div style="position:absolute;left:119.00px;top:661.00px" class="cls_026"><span class="cls_026">Triggers:</span></div>
<div style="position:absolute;left:195.80px;top:661.00px" class="cls_026"><span class="cls_026">Config, Image(php-helloworld@latest, auto=true)</span></div>
<div style="position:absolute;left:119.00px;top:673.00px" class="cls_026"><span class="cls_026">Strategy:</span></div>
<div style="position:absolute;left:195.80px;top:673.00px" class="cls_026"><span class="cls_026">Rolling</span></div>
<div style="position:absolute;left:119.00px;top:685.00px" class="cls_026"><span class="cls_026">Template:</span></div>
<div style="position:absolute;left:119.00px;top:697.00px" class="cls_026"><span class="cls_026">Pod Template:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:506.61px;top:751.59px" class="cls_013"><span class="cls_013">181</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:159598px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background200.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:110.60px;top:53.69px" class="cls_026"><span class="cls_026">Labels:</span></div>
<div style="position:absolute;left:177.80px;top:53.69px" class="cls_026"><span class="cls_026">deploymentconfig=php-helloworld</span></div>
<div style="position:absolute;left:110.60px;top:65.69px" class="cls_026"><span class="cls_026">Annotations:</span></div>
<div style="position:absolute;left:177.80px;top:65.69px" class="cls_026"><span class="cls_026">openshift.io/generated-by: OpenShiftNewApp</span></div>
<div style="position:absolute;left:110.60px;top:77.69px" class="cls_026"><span class="cls_026">Containers:</span></div>
<div style="position:absolute;left:115.40px;top:89.69px" class="cls_026"><span class="cls_026">php-helloworld:</span></div>
<div style="position:absolute;left:120.20px;top:101.69px" class="cls_026"><span class="cls_026">Image:</span></div>
<div style="position:absolute;left:197.00px;top:101.69px" class="cls_026"><span class="cls_026">image-registry.openshift-image-</span></div>
<div style="position:absolute;left:101.00px;top:113.68px" class="cls_026"><span class="cls_026">registry.svc:5000/${RHT_OCP4_DEV_USER}-s2i/php-</span></div>
<div style="position:absolute;left:101.00px;top:125.68px" class="cls_026"><span class="cls_026">helloworld@sha256:ae3ec890625f153c0163812501f2522fddc96431036374aa2472ddd52bc7ccb4</span></div>
<div style="position:absolute;left:120.20px;top:137.68px" class="cls_026"><span class="cls_026">Ports:</span></div>
<div style="position:absolute;left:197.00px;top:137.68px" class="cls_026"><span class="cls_026">8080/TCP, 8443/TCP</span></div>
<div style="position:absolute;left:120.20px;top:149.68px" class="cls_026"><span class="cls_026">Host Ports:</span></div>
<div style="position:absolute;left:197.00px;top:149.68px" class="cls_026"><span class="cls_026">0/TCP, 0/TCP</span></div>
<div style="position:absolute;left:120.20px;top:161.68px" class="cls_026"><span class="cls_026">Environment:</span></div>
<div style="position:absolute;left:197.00px;top:161.68px" class="cls_026"><span class="cls_026">&lt;none></span></div>
<div style="position:absolute;left:120.20px;top:173.68px" class="cls_026"><span class="cls_026">Mounts:</span></div>
<div style="position:absolute;left:197.00px;top:173.68px" class="cls_026"><span class="cls_026">&lt;none></span></div>
<div style="position:absolute;left:110.60px;top:185.67px" class="cls_026"><span class="cls_026">Volumes:</span></div>
<div style="position:absolute;left:197.00px;top:185.67px" class="cls_026"><span class="cls_026">&lt;none></span></div>
<div style="position:absolute;left:101.00px;top:209.67px" class="cls_026"><span class="cls_026">Deployment #1 (latest):</span></div>
<div style="position:absolute;left:110.60px;top:221.67px" class="cls_026"><span class="cls_026">Name:</span></div>
<div style="position:absolute;left:197.00px;top:221.67px" class="cls_026"><span class="cls_026">php-helloworld-1</span></div>
<div style="position:absolute;left:110.60px;top:233.66px" class="cls_026"><span class="cls_026">Created:</span></div>
<div style="position:absolute;left:197.00px;top:233.66px" class="cls_026"><span class="cls_026">about a minute ago</span></div>
<div style="position:absolute;left:110.60px;top:245.66px" class="cls_026"><span class="cls_026">Status:</span></div>
<div style="position:absolute;left:197.00px;top:245.66px" class="cls_026"><span class="cls_026">Complete</span></div>
<div style="position:absolute;left:110.60px;top:257.66px" class="cls_026"><span class="cls_026">Replicas:</span></div>
<div style="position:absolute;left:197.00px;top:257.66px" class="cls_026"><span class="cls_026">1 current / 1 desired</span></div>
<div style="position:absolute;left:110.60px;top:269.66px" class="cls_026"><span class="cls_026">Selector:</span></div>
<div style="position:absolute;left:197.00px;top:269.66px" class="cls_026"><span class="cls_026">deployment=php-helloworld-1,deploymentconfig=php-helloworld</span></div>
<div style="position:absolute;left:110.60px;top:281.66px" class="cls_026"><span class="cls_026">Labels:</span></div>
<div style="position:absolute;left:197.00px;top:281.66px" class="cls_026"><span class="cls_026">app.kubernetes.io/component=php-helloworld,app.kubernetes.io/</span></div>
<div style="position:absolute;left:101.00px;top:293.65px" class="cls_026"><span class="cls_026">instance=php-helloworld,app=php-helloworld,openshift.io/deployment-</span></div>
<div style="position:absolute;left:101.00px;top:305.65px" class="cls_026"><span class="cls_026">config.name=php-helloworld</span></div>
<div style="position:absolute;left:110.60px;top:317.65px" class="cls_026"><span class="cls_026">Pods Status:</span></div>
<div style="position:absolute;left:197.00px;top:317.65px" class="cls_026"><span class="cls_026">1 Running / 0 Waiting / 0 Succeeded / 0 Failed</span></div>
<div style="position:absolute;left:101.00px;top:329.65px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:360.33px" class="cls_011"><span class="cls_011">3.5.   Add a route to test the application:</span></div>
<div style="position:absolute;left:101.00px;top:388.05px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc expose service php-helloworld \</span></div>
<div style="position:absolute;left:101.00px;top:400.04px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--name ${RHT_OCP4_DEV_USER}-helloworld</span></div>
<div style="position:absolute;left:101.00px;top:412.04px" class="cls_026"><span class="cls_026">route.route.openshift.io/${RHT_OCP4_DEV_USER}-helloworld exposed</span></div>
<div style="position:absolute;left:119.00px;top:442.72px" class="cls_011"><span class="cls_011">3.6.  Find the URL associated with the new route:</span></div>
<div style="position:absolute;left:101.00px;top:470.44px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc get route -o jsonpath='{..spec.host}{"\n"}'</span></div>
<div style="position:absolute;left:101.00px;top:482.43px" class="cls_026"><span class="cls_026">${RHT_OCP4_DEV_USER}-helloworld-${RHT_OCP4_DEV_USER}-s2i.</span></div>
<div style="position:absolute;left:101.00px;top:494.43px" class="cls_026"><span class="cls_026">${RHT_OCP4_WILDCARD_DOMAIN}</span></div>
<div style="position:absolute;left:119.00px;top:525.11px" class="cls_011"><span class="cls_011">3.7.   Test the application by sending an HTTP GET request to the URL you obtained in the</span></div>
<div style="position:absolute;left:143.70px;top:537.11px" class="cls_011"><span class="cls_011">previous step:</span></div>
<div style="position:absolute;left:101.00px;top:564.83px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">curl -s \</span></div>
<div style="position:absolute;left:101.00px;top:576.83px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">${RHT_OCP4_DEV_USER}-helloworld-${RHT_OCP4_DEV_USER}-s2i.\</span></div>
<div style="position:absolute;left:101.00px;top:588.82px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">${RHT_OCP4_WILDCARD_DOMAIN}</span></div>
<div style="position:absolute;left:101.00px;top:600.82px" class="cls_026"><span class="cls_026">Hello, World! php version is 7.3.11</span></div>
<div style="position:absolute;left:101.41px;top:631.04px" class="cls_022"><span class="cls_022">4.</span><span class="cls_011">  Explore starting application builds by changing the application in its Git repository and</span></div>
<div style="position:absolute;left:119.00px;top:643.10px" class="cls_011"><span class="cls_011">executing the proper commands to start a new Source-to-Image build.</span></div>
<div style="position:absolute;left:119.00px;top:667.50px" class="cls_011"><span class="cls_011">4.1.</span></div>
<div style="position:absolute;left:143.70px;top:667.50px" class="cls_011"><span class="cls_011">Enter the source code directory.</span></div>
<div style="position:absolute;left:101.00px;top:695.22px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">cd ~/DO180-apps/php-helloworld</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">182</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:160400px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background201.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:137.00px;top:54.98px" class="cls_011"><span class="cls_011">4.2.  Edit the </span><span class="cls_021">index.php</span><span class="cls_011"> file as shown below:</span></div>
<div style="position:absolute;left:119.00px;top:82.69px" class="cls_026"><span class="cls_026">&lt;?php</span></div>
<div style="position:absolute;left:119.00px;top:94.69px" class="cls_026"><span class="cls_026">print "Hello, World! php version is " . PHP_VERSION . "\n";</span></div>
<div style="position:absolute;left:119.00px;top:106.69px" class="cls_026"><span class="cls_026">print "A change is a coming!\n";</span></div>
<div style="position:absolute;left:119.00px;top:118.69px" class="cls_026"><span class="cls_026">?></span></div>
<div style="position:absolute;left:161.70px;top:140.97px" class="cls_011"><span class="cls_011">Save the file.</span></div>
<div style="position:absolute;left:137.00px;top:161.76px" class="cls_011"><span class="cls_011">4.3.  Commit the changes and push the code back to the remote Git repository:</span></div>
<div style="position:absolute;left:119.00px;top:189.48px" class="cls_026"><span class="cls_026">[student@workstation php-helloworld]$ </span><span class="cls_027">git add .</span></div>
<div style="position:absolute;left:119.00px;top:201.48px" class="cls_026"><span class="cls_026">[student@workstation php-helloworld]$ </span><span class="cls_027">git commit -m 'Changed index page contents.'</span></div>
<div style="position:absolute;left:119.00px;top:213.47px" class="cls_026"><span class="cls_026">[s2i b1324aa] changed index page contents</span></div>
<div style="position:absolute;left:123.80px;top:225.47px" class="cls_026"><span class="cls_026">1 file changed, 1 insertion(+)</span></div>
<div style="position:absolute;left:119.00px;top:237.47px" class="cls_026"><span class="cls_026">[student@workstation php-helloworld]$ </span><span class="cls_027">git push origin s2i</span></div>
<div style="position:absolute;left:119.00px;top:249.47px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:261.46px" class="cls_026"><span class="cls_026">Counting objects: 7, done.</span></div>
<div style="position:absolute;left:119.00px;top:273.46px" class="cls_026"><span class="cls_026">Delta compression using up to 2 threads.</span></div>
<div style="position:absolute;left:119.00px;top:285.46px" class="cls_026"><span class="cls_026">Compressing objects: 100% (3/3), done.</span></div>
<div style="position:absolute;left:119.00px;top:297.46px" class="cls_026"><span class="cls_026">Writing objects: 100% (4/4), 417 bytes | 0 bytes/s, done.</span></div>
<div style="position:absolute;left:119.00px;top:309.46px" class="cls_026"><span class="cls_026">Total 4 (delta 1), reused 0 (delta 0)</span></div>
<div style="position:absolute;left:119.00px;top:321.45px" class="cls_026"><span class="cls_026">remote: Resolving deltas: 100% (1/1), completed with 1 local object.</span></div>
<div style="position:absolute;left:119.00px;top:333.45px" class="cls_026"><span class="cls_026">To </span><A HREF="https://github.com/${rht_ocp4_github_user}/do180-apps/">https://github.com/${RHT_OCP4_GITHUB_USER}/DO180-apps</A> </div>
<div style="position:absolute;left:133.40px;top:345.45px" class="cls_026"><span class="cls_026">f7cd896..b1324aa  s2i -> s2i</span></div>
<div style="position:absolute;left:137.00px;top:372.53px" class="cls_011"><span class="cls_011">4.4.  Start a new Source-to-Image build process and wait for it to build and deploy:</span></div>
<div style="position:absolute;left:119.00px;top:400.24px" class="cls_026"><span class="cls_026">[student@workstation php-helloworld]$ </span><span class="cls_027">oc start-build php-helloworld</span></div>
<div style="position:absolute;left:119.00px;top:412.24px" class="cls_026"><span class="cls_026">build.build.openshift.io/php-helloworld-2 started</span></div>
<div style="position:absolute;left:119.00px;top:424.24px" class="cls_026"><span class="cls_026">[student@workstation php-helloworld]$ </span><span class="cls_027">oc logs php-helloworld-2-build -f</span></div>
<div style="position:absolute;left:119.00px;top:436.24px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:460.23px" class="cls_026"><span class="cls_026">Successfully pushed .../php-helloworld:latest@sha256:74e757a4c0edaeda497dab7...</span></div>
<div style="position:absolute;left:119.00px;top:472.23px" class="cls_026"><span class="cls_026">Push successful</span></div>
<div style="position:absolute;left:144.00px;top:507.83px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:522.21px" class="cls_011"><span class="cls_011">Logs may take some seconds to be available after the build starts. If the previous</span></div>
<div style="position:absolute;left:144.00px;top:534.20px" class="cls_011"><span class="cls_011">command fails, wait a bit and try again.</span></div>
<div style="position:absolute;left:137.00px;top:563.90px" class="cls_011"><span class="cls_011">4.5.  After the second build has completed use the </span><span class="cls_021">oc get pods</span><span class="cls_011"> command to verify that</span></div>
<div style="position:absolute;left:161.70px;top:575.90px" class="cls_011"><span class="cls_011">the new version of the application is running.</span></div>
<div style="position:absolute;left:119.00px;top:603.61px" class="cls_026"><span class="cls_026">[student@workstation php-helloworld]$ </span><span class="cls_027">oc get pods</span></div>
<div style="position:absolute;left:119.00px;top:615.61px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:243.80px;top:615.61px" class="cls_026"><span class="cls_026">READY   STATUS</span></div>
<div style="position:absolute;left:339.80px;top:615.61px" class="cls_026"><span class="cls_026">RESTARTS   AGE</span></div>
<div style="position:absolute;left:119.00px;top:627.61px" class="cls_026"><span class="cls_026">php-helloworld-1-build</span></div>
<div style="position:absolute;left:243.80px;top:627.61px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:282.20px;top:627.61px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:339.80px;top:627.61px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:392.60px;top:627.61px" class="cls_026"><span class="cls_026">11m</span></div>
<div style="position:absolute;left:119.00px;top:639.61px" class="cls_026"><span class="cls_026">php-helloworld-1-deploy</span></div>
<div style="position:absolute;left:243.80px;top:639.61px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:282.20px;top:639.61px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:339.80px;top:639.61px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:392.60px;top:639.61px" class="cls_026"><span class="cls_026">10m</span></div>
<div style="position:absolute;left:119.00px;top:651.60px" class="cls_026"><span class="cls_026">php-helloworld-2-build</span></div>
<div style="position:absolute;left:243.80px;top:651.60px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:282.20px;top:651.60px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:339.80px;top:651.60px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:392.60px;top:651.60px" class="cls_026"><span class="cls_026">45s</span></div>
<div style="position:absolute;left:119.00px;top:663.60px" class="cls_026"><span class="cls_026">php-helloworld-2-deploy</span></div>
<div style="position:absolute;left:243.80px;top:663.60px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:282.20px;top:663.60px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:339.80px;top:663.60px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:392.60px;top:663.60px" class="cls_026"><span class="cls_026">16s</span></div>
<div style="position:absolute;left:119.00px;top:675.60px" class="cls_026"><span class="cls_026">php-helloworld-2-wq9wz</span></div>
<div style="position:absolute;left:243.80px;top:675.60px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:282.20px;top:675.60px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:339.80px;top:675.60px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:392.60px;top:675.60px" class="cls_026"><span class="cls_026">13s</span></div>
<div style="position:absolute;left:137.00px;top:702.68px" class="cls_011"><span class="cls_011">4.6.  Test that the application serves the new content:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.69px;top:751.59px" class="cls_013"><span class="cls_013">183</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:161202px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background202.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation php-helloworld]$ </span><span class="cls_027">curl -s \</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">${RHT_OCP4_DEV_USER}-helloworld-${RHT_OCP4_DEV_USER}-s2i.\</span></div>
<div style="position:absolute;left:101.00px;top:85.69px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">${RHT_OCP4_WILDCARD_DOMAIN}</span></div>
<div style="position:absolute;left:101.00px;top:97.69px" class="cls_026"><span class="cls_026">Hello, World! php version is 7.3.11</span></div>
<div style="position:absolute;left:101.00px;top:109.69px" class="cls_026"><span class="cls_026">A change is a coming!</span></div>
<div style="position:absolute;left:90.00px;top:140.03px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:161.97px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab openshift-s2i finish</span><span class="cls_011"> script to complete this lab.</span></div>
<div style="position:absolute;left:101.00px;top:189.68px" class="cls_026"><span class="cls_026">[student@workstation php-helloworld]$ </span><span class="cls_027">lab openshift-s2i finish</span></div>
<div style="position:absolute;left:90.00px;top:217.46px" class="cls_011"><span class="cls_011">This concludes the guided exercise.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">184</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:162004px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background203.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:62.06px" class="cls_014"><span class="cls_014">Creating Applications with the OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:83.06px" class="cls_014"><span class="cls_014">Web Console</span></div>
<div style="position:absolute;left:108.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:108.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to:</span></div>
<div style="position:absolute;left:108.00px;top:182.37px" class="cls_011"><span class="cls_011">• Create an application with the OpenShift web console.</span></div>
<div style="position:absolute;left:108.00px;top:205.77px" class="cls_011"><span class="cls_011">• Manage and monitor the build cycle of an application.</span></div>
<div style="position:absolute;left:108.00px;top:229.17px" class="cls_011"><span class="cls_011">• Examine resources for an application.</span></div>
<div style="position:absolute;left:108.00px;top:251.45px" class="cls_024"><span class="cls_024">Accessing the OpenShift Web Console</span></div>
<div style="position:absolute;left:108.00px;top:276.17px" class="cls_011"><span class="cls_011">The OpenShift web console allows users to execute many of the same tasks as the OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:288.17px" class="cls_011"><span class="cls_011">command-line client. You can create projects, add applications to projects, view application</span></div>
<div style="position:absolute;left:108.00px;top:300.16px" class="cls_011"><span class="cls_011">resources, and manipulate application configurations as needed. The OpenShift web console runs</span></div>
<div style="position:absolute;left:108.00px;top:312.16px" class="cls_011"><span class="cls_011">as one or more pods, each pod running on a master node.</span></div>
<div style="position:absolute;left:108.00px;top:333.66px" class="cls_011"><span class="cls_011">The web console runs in a web browser. The default URL is of the format </span><A HREF="https://console-/">https://console-</A> </span></div>
<div style="position:absolute;left:108.00px;top:345.66px" class="cls_021"><span class="cls_021">openshift-console.{wildcard DNS domain for the RHOCP cluster}/</span><span class="cls_011"> By default,</span></div>
<div style="position:absolute;left:108.00px;top:357.66px" class="cls_011"><span class="cls_011">OpenShift generates a self-signed certificate for the web console. You must trust this certificate</span></div>
<div style="position:absolute;left:108.00px;top:369.65px" class="cls_011"><span class="cls_011">in order to gain access.</span></div>
<div style="position:absolute;left:108.00px;top:391.15px" class="cls_011"><span class="cls_011">The web console uses a REST API to communicate with the OpenShift cluster. By default, the</span></div>
<div style="position:absolute;left:108.00px;top:403.15px" class="cls_011"><span class="cls_011">REST API endpoint is accessed with a different DNS name and self-signed certificate. You must</span></div>
<div style="position:absolute;left:108.00px;top:415.15px" class="cls_011"><span class="cls_011">also trust this certificate for the REST API endpoint.</span></div>
<div style="position:absolute;left:108.00px;top:436.65px" class="cls_011"><span class="cls_011">After you have trusted the two OpenShift certificates, the console requires authentication to</span></div>
<div style="position:absolute;left:108.00px;top:448.64px" class="cls_011"><span class="cls_011">proceed.</span></div>
<div style="position:absolute;left:108.00px;top:472.71px" class="cls_002"><span class="cls_002">Managing Projects</span></div>
<div style="position:absolute;left:108.00px;top:492.74px" class="cls_011"><span class="cls_011">Upon successful login, the Home</span><span class="cls_025"> → </span><span class="cls_011">Projects page displays a list of projects you can access. From</span></div>
<div style="position:absolute;left:108.00px;top:506.64px" class="cls_011"><span class="cls_011">this page you can create, edit, or delete a project.</span></div>
<div style="position:absolute;left:108.00px;top:526.24px" class="cls_011"><span class="cls_011">If you have permission to view cluster metrics, then you are instead redirected to the Home</span><span class="cls_025"> →</span></div>
<div style="position:absolute;left:108.00px;top:540.14px" class="cls_011"><span class="cls_011">Overview page. This page shows general information and metrics about the cluster. The Overview</span></div>
<div style="position:absolute;left:108.00px;top:552.13px" class="cls_011"><span class="cls_011">menu item is hidden from users without authority to view cluster metrics.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.78px;top:751.59px" class="cls_013"><span class="cls_013">185</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:162806px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background204.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:204.80px;top:328.70px" class="cls_020"><span class="cls_020">Figure 6.9: OpenShift web console home page</span></div>
<div style="position:absolute;left:90.00px;top:351.62px" class="cls_011"><span class="cls_011">The ellipsis icon at the end of each row provides a menu with project actions. Select the</span></div>
<div style="position:absolute;left:90.00px;top:363.62px" class="cls_011"><span class="cls_011">appropriate entry to edit or delete the project.</span></div>
<div style="position:absolute;left:90.00px;top:385.11px" class="cls_011"><span class="cls_011">If you click a project link in this view, you are redirected to the Project Status page which shows all</span></div>
<div style="position:absolute;left:90.00px;top:397.11px" class="cls_011"><span class="cls_011">of the applications created within that project space.</span></div>
<div style="position:absolute;left:90.00px;top:421.17px" class="cls_002"><span class="cls_002">Navigating the Web Console</span></div>
<div style="position:absolute;left:90.00px;top:443.11px" class="cls_011"><span class="cls_011">A navigation menu is located on the left side of the web console. The menu includes two</span></div>
<div style="position:absolute;left:90.00px;top:455.11px" class="cls_011"><span class="cls_011">perspectives: Administrator and Developer. Each item in the menu expands to provide access to</span></div>
<div style="position:absolute;left:90.00px;top:467.11px" class="cls_011"><span class="cls_011">a set of related management functions. When the Administrator perspective is selected, these</span></div>
<div style="position:absolute;left:90.00px;top:479.10px" class="cls_011"><span class="cls_011">items are as follows:</span></div>
<div style="position:absolute;left:90.00px;top:502.50px" class="cls_022"><span class="cls_022">Home</span></div>
<div style="position:absolute;left:108.00px;top:514.50px" class="cls_011"><span class="cls_011">The home menu allows users to quickly access projects and resources. From this menu, you</span></div>
<div style="position:absolute;left:108.00px;top:526.50px" class="cls_011"><span class="cls_011">can browse and manage projects, search or explore cluster resources, and inspect cluster</span></div>
<div style="position:absolute;left:108.00px;top:538.50px" class="cls_011"><span class="cls_011">events.</span></div>
<div style="position:absolute;left:90.00px;top:561.89px" class="cls_022"><span class="cls_022">Operators</span></div>
<div style="position:absolute;left:108.00px;top:573.89px" class="cls_011"><span class="cls_011">The OperatorHub is a catalog that allows you to discover, search and install operators in the</span></div>
<div style="position:absolute;left:108.00px;top:585.89px" class="cls_011"><span class="cls_011">cluster. After installing an operator, you can use the Installed Operators option to manage the</span></div>
<div style="position:absolute;left:108.00px;top:597.89px" class="cls_011"><span class="cls_011">operator or search for other installed operators.</span></div>
<div style="position:absolute;left:126.00px;top:630.81px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:645.19px" class="cls_011"><span class="cls_011">The latest Kubernetes versions implement many controllers as Operators. Operators</span></div>
<div style="position:absolute;left:126.00px;top:657.19px" class="cls_011"><span class="cls_011">are Kubernetes plug-in components that can react to cluster events and control the</span></div>
<div style="position:absolute;left:126.00px;top:669.18px" class="cls_011"><span class="cls_011">state of resources. Operators and the CoreOS Operator Framework are outside the</span></div>
<div style="position:absolute;left:126.00px;top:681.18px" class="cls_011"><span class="cls_011">scope of this document.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">186</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:163608px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background205.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_022"><span class="cls_022">Workloads</span></div>
<div style="position:absolute;left:126.00px;top:65.97px" class="cls_011"><span class="cls_011">These options enable management of several types of Kubernetes and OpenShift resources,</span></div>
<div style="position:absolute;left:126.00px;top:77.97px" class="cls_011"><span class="cls_011">such as pods and deployment configurations. Other advanced deployment options that are</span></div>
<div style="position:absolute;left:126.00px;top:89.97px" class="cls_011"><span class="cls_011">accessible from this menu, such as configuration maps, secrets, and cron jobs, are beyond the</span></div>
<div style="position:absolute;left:126.00px;top:101.97px" class="cls_011"><span class="cls_011">scope of the course.</span></div>
<div style="position:absolute;left:108.00px;top:123.19px" class="cls_022"><span class="cls_022">Networking</span></div>
<div style="position:absolute;left:126.00px;top:135.19px" class="cls_011"><span class="cls_011">This menu contains options to manage OpenShift resources that affect application access,</span></div>
<div style="position:absolute;left:126.00px;top:147.18px" class="cls_011"><span class="cls_011">such as services and routes, for a project. Other options for configuring an OpenShift Network</span></div>
<div style="position:absolute;left:126.00px;top:159.18px" class="cls_011"><span class="cls_011">Policy or Ingress are available, but these topics are outside the scope of this course.</span></div>
<div style="position:absolute;left:108.00px;top:180.40px" class="cls_022"><span class="cls_022">Storage</span></div>
<div style="position:absolute;left:126.00px;top:192.40px" class="cls_011"><span class="cls_011">This menu contains options to configure persistent storage for project applications. In</span></div>
<div style="position:absolute;left:126.00px;top:204.40px" class="cls_011"><span class="cls_011">particular, persistent volumes and persistent volume claims for a project are managed from</span></div>
<div style="position:absolute;left:126.00px;top:216.39px" class="cls_011"><span class="cls_011">the Storage menu.</span></div>
<div style="position:absolute;left:108.00px;top:237.61px" class="cls_022"><span class="cls_022">Builds</span></div>
<div style="position:absolute;left:126.00px;top:249.61px" class="cls_011"><span class="cls_011">The Build Configs option displays a list of project build configurations. Click a build</span></div>
<div style="position:absolute;left:126.00px;top:261.61px" class="cls_011"><span class="cls_011">configuration link in this view to access an overview page for the specified build configuration.</span></div>
<div style="position:absolute;left:126.00px;top:273.61px" class="cls_011"><span class="cls_011">From this page, you can view and edit the application's build configuration.</span></div>
<div style="position:absolute;left:126.00px;top:295.11px" class="cls_011"><span class="cls_011">The Builds option provides a list of recent build processes for application container images in</span></div>
<div style="position:absolute;left:126.00px;top:307.10px" class="cls_011"><span class="cls_011">the project. Click the link for a particular build to access the build logs for that particular build</span></div>
<div style="position:absolute;left:126.00px;top:319.10px" class="cls_011"><span class="cls_011">process.</span></div>
<div style="position:absolute;left:126.00px;top:340.60px" class="cls_011"><span class="cls_011">The Image Streams option provides a list of image streams defined in the project. Click an</span></div>
<div style="position:absolute;left:126.00px;top:352.60px" class="cls_011"><span class="cls_011">image stream entry in this list to access an overview page to view and manage that image</span></div>
<div style="position:absolute;left:126.00px;top:364.59px" class="cls_011"><span class="cls_011">stream.</span></div>
<div style="position:absolute;left:108.00px;top:385.81px" class="cls_022"><span class="cls_022">Compute</span></div>
<div style="position:absolute;left:126.00px;top:397.81px" class="cls_011"><span class="cls_011">Provides options to access and manage the compute nodes of the OpenShift cluster. From</span></div>
<div style="position:absolute;left:126.00px;top:409.81px" class="cls_011"><span class="cls_011">this page, you can also configure node health checks and autoscaling.</span></div>
<div style="position:absolute;left:108.00px;top:431.03px" class="cls_022"><span class="cls_022">User management</span></div>
<div style="position:absolute;left:126.00px;top:443.03px" class="cls_011"><span class="cls_011">From this option, you can configure authentication and authorization using users, groups,</span></div>
<div style="position:absolute;left:126.00px;top:455.02px" class="cls_011"><span class="cls_011">roles, role bindings and service accounts.</span></div>
<div style="position:absolute;left:108.00px;top:476.24px" class="cls_022"><span class="cls_022">Administration</span></div>
<div style="position:absolute;left:126.00px;top:488.24px" class="cls_011"><span class="cls_011">Provides options to manage cluster and project settings, such as resource quotas and role-</span></div>
<div style="position:absolute;left:126.00px;top:500.24px" class="cls_011"><span class="cls_011">based access controls. Functions in the Administration section are outside the scope of this</span></div>
<div style="position:absolute;left:126.00px;top:512.24px" class="cls_011"><span class="cls_011">course.</span></div>
<div style="position:absolute;left:108.00px;top:534.52px" class="cls_024"><span class="cls_024">Creating New Applications</span></div>
<div style="position:absolute;left:108.00px;top:559.24px" class="cls_011"><span class="cls_011">From the Developer perspective, use +Add to select a way to create a new application in</span></div>
<div style="position:absolute;left:108.00px;top:571.23px" class="cls_011"><span class="cls_011">an OpenShift project. You can add an application from the Developer Catalog, which offers</span></div>
<div style="position:absolute;left:108.00px;top:583.23px" class="cls_011"><span class="cls_011">a selection of Source-to-Image (S2I) templates, builder images and Helm charts to create</span></div>
<div style="position:absolute;left:108.00px;top:595.23px" class="cls_011"><span class="cls_011">technology-specific applications. Select a desired template, and provide the necessary</span></div>
<div style="position:absolute;left:108.00px;top:607.23px" class="cls_011"><span class="cls_011">information to deploy the new application.</span></div>
<div style="position:absolute;left:108.00px;top:628.73px" class="cls_011"><span class="cls_011">You are not limited to deploying an application from the catalog. You can also deploy an</span></div>
<div style="position:absolute;left:108.00px;top:640.72px" class="cls_011"><span class="cls_011">application using:</span></div>
<div style="position:absolute;left:108.00px;top:661.94px" class="cls_011"><span class="cls_011">• A container image hosted on a remote container registry.</span></div>
<div style="position:absolute;left:108.00px;top:683.16px" class="cls_011"><span class="cls_011">• A YAML file that specifies the Kubernetes and OpenShift resources to create.</span></div>
<div style="position:absolute;left:108.00px;top:704.38px" class="cls_011"><span class="cls_011">• A builder image using the source code from your own git repository.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.77px;top:751.59px" class="cls_013"><span class="cls_013">187</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:164410px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background206.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_011"><span class="cls_011">• A Dockerfile.</span></div>
<div style="position:absolute;left:90.00px;top:75.47px" class="cls_011"><span class="cls_011">To create an application with one of these methods, select the appropriate option in the Add page.</span></div>
<div style="position:absolute;left:90.00px;top:87.47px" class="cls_011"><span class="cls_011">Use the Container Image option to deploy an existing container image. Use the YAML option</span></div>
<div style="position:absolute;left:90.00px;top:99.47px" class="cls_011"><span class="cls_011">to create the resources specified in a YAML file. Use the From Git option to deploy your source</span></div>
<div style="position:absolute;left:90.00px;top:111.47px" class="cls_011"><span class="cls_011">code using a builder image. Use the From Dockerfile option to specify and build the image from a</span></div>
<div style="position:absolute;left:90.00px;top:123.47px" class="cls_011"><span class="cls_011">specific Dockerfile. The Databases, Operator Backed and Helm Chart options are shortcuts to the</span></div>
<div style="position:absolute;left:90.00px;top:135.46px" class="cls_011"><span class="cls_011">catalog.</span></div>
<div style="position:absolute;left:202.82px;top:450.99px" class="cls_020"><span class="cls_020">Figure 6.10: OpenShift Developer Catalog page</span></div>
<div style="position:absolute;left:90.00px;top:473.97px" class="cls_002"><span class="cls_002">Managing Application Builds</span></div>
<div style="position:absolute;left:90.00px;top:495.91px" class="cls_011"><span class="cls_011">From the Administrator perspective, click the Build Configs option of the Builds menu after you</span></div>
<div style="position:absolute;left:90.00px;top:507.90px" class="cls_011"><span class="cls_011">add a Source-to-Image application to a project. The new build configuration is accessible from this</span></div>
<div style="position:absolute;left:90.00px;top:519.90px" class="cls_011"><span class="cls_011">view:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">188</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:165212px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background207.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:219.81px;top:252.18px" class="cls_020"><span class="cls_020">Figure 6.11: OpenShift build configurations page</span></div>
<div style="position:absolute;left:108.00px;top:275.10px" class="cls_011"><span class="cls_011">Click a build configuration in the list to view an overview page for the selected build configuration.</span></div>
<div style="position:absolute;left:108.00px;top:287.10px" class="cls_011"><span class="cls_011">From the overview page, you can:</span></div>
<div style="position:absolute;left:108.00px;top:310.49px" class="cls_011"><span class="cls_011">• View the build configuration parameters, such as the URL for the source code's Git repository.</span></div>
<div style="position:absolute;left:108.00px;top:333.89px" class="cls_011"><span class="cls_011">• View and edit the environment variables that are set in the builder container, during an</span></div>
<div style="position:absolute;left:117.50px;top:345.89px" class="cls_011"><span class="cls_011">application build process.</span></div>
<div style="position:absolute;left:108.00px;top:369.29px" class="cls_011"><span class="cls_011">• View a list of recent application builds, and click a selected build to access logs from the build</span></div>
<div style="position:absolute;left:117.50px;top:381.29px" class="cls_011"><span class="cls_011">process.</span></div>
<div style="position:absolute;left:108.00px;top:403.57px" class="cls_024"><span class="cls_024">Managing Deployed Applications</span></div>
<div style="position:absolute;left:108.00px;top:428.28px" class="cls_011"><span class="cls_011">The Workloads menu provides access to deployment configurations in the project.</span></div>
<div style="position:absolute;left:236.46px;top:632.95px" class="cls_020"><span class="cls_020">Figure 6.12: OpenShift Workloads menu</span></div>
<div style="position:absolute;left:108.00px;top:655.87px" class="cls_011"><span class="cls_011">Click a deployment configuration entry in the list to view an overview page for the selection. From</span></div>
<div style="position:absolute;left:108.00px;top:667.87px" class="cls_011"><span class="cls_011">the overview page, you can:</span></div>
<div style="position:absolute;left:108.00px;top:691.27px" class="cls_011"><span class="cls_011">• View the deployment configuration parameters, such as the specifications of an application</span></div>
<div style="position:absolute;left:117.50px;top:703.26px" class="cls_011"><span class="cls_011">container image.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.57px;top:751.59px" class="cls_013"><span class="cls_013">189</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:166014px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background208.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_011"><span class="cls_011">• Change the desired number of application pods to manually scale the application.</span></div>
<div style="position:absolute;left:90.00px;top:75.47px" class="cls_011"><span class="cls_011">• View and edit the environment variables that are set in the deployed application container.</span></div>
<div style="position:absolute;left:90.00px;top:96.97px" class="cls_011"><span class="cls_011">• View a list of application pods, and click a selected pod to access logs for that pod.</span></div>
<div style="position:absolute;left:90.00px;top:119.25px" class="cls_024"><span class="cls_024">Other Web Console Features</span></div>
<div style="position:absolute;left:90.00px;top:143.97px" class="cls_011"><span class="cls_011">The web console allows you to:</span></div>
<div style="position:absolute;left:90.00px;top:165.47px" class="cls_011"><span class="cls_011">• Manage resources, such as project quotas, user membership, secrets, and other advanced</span></div>
<div style="position:absolute;left:99.50px;top:177.47px" class="cls_011"><span class="cls_011">resources.</span></div>
<div style="position:absolute;left:90.00px;top:198.96px" class="cls_011"><span class="cls_011">• Create persistent volume claims.</span></div>
<div style="position:absolute;left:90.00px;top:220.46px" class="cls_011"><span class="cls_011">• Monitor builds, deployments, pods, and system events.</span></div>
<div style="position:absolute;left:90.00px;top:241.96px" class="cls_011"><span class="cls_011">• Create continuous integration and deployment pipelines with Jenkins.</span></div>
<div style="position:absolute;left:90.00px;top:263.46px" class="cls_011"><span class="cls_011">Detailed usage for the above features is outside the scope of this course.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">190</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:166816px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background209.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Creating an Application with the Web</span></div>
<div style="position:absolute;left:108.00px;top:112.56px" class="cls_014"><span class="cls_014">Console</span></div>
<div style="position:absolute;left:120.00px;top:158.59px" class="cls_011"><span class="cls_011">In this exercise, you will create, build, and deploy an application to an OpenShift cluster using</span></div>
<div style="position:absolute;left:120.00px;top:170.59px" class="cls_011"><span class="cls_011">the OpenShift web console.</span></div>
<div style="position:absolute;left:120.00px;top:193.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:120.00px;top:211.59px" class="cls_011"><span class="cls_011">You should be able to create, build, and deploy an application to an OpenShift cluster using</span></div>
<div style="position:absolute;left:120.00px;top:223.58px" class="cls_011"><span class="cls_011">the web console.</span></div>
<div style="position:absolute;left:120.00px;top:246.65px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:120.00px;top:264.58px" class="cls_011"><span class="cls_011">Get the lab files by executing the lab script:</span></div>
<div style="position:absolute;left:119.00px;top:292.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab openshift-webconsole start</span></div>
<div style="position:absolute;left:120.00px;top:320.08px" class="cls_011"><span class="cls_011">The lab script verifies that the OpenShift cluster is running.</span></div>
<div style="position:absolute;left:119.41px;top:362.02px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:137.00px;top:362.08px" class="cls_011"><span class="cls_011">Inspect the PHP source code for the sample application and create and push a new branch</span></div>
<div style="position:absolute;left:137.00px;top:374.08px" class="cls_011"><span class="cls_011">named </span><span class="cls_021">console</span><span class="cls_011"> to use during this exercise.</span></div>
<div style="position:absolute;left:137.00px;top:398.48px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:161.70px;top:398.48px" class="cls_011"><span class="cls_011">Enter your local clone of the </span><span class="cls_021">DO180-apps</span><span class="cls_011"> Git repository and checkout the </span><span class="cls_021">master</span></div>
<div style="position:absolute;left:161.70px;top:410.47px" class="cls_011"><span class="cls_011">branch of the course's repository to ensure you start this exercise from a known good</span></div>
<div style="position:absolute;left:161.70px;top:422.47px" class="cls_011"><span class="cls_011">state:</span></div>
<div style="position:absolute;left:119.00px;top:450.19px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd ~/DO180-apps</span></div>
<div style="position:absolute;left:119.00px;top:462.19px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git checkout master</span></div>
<div style="position:absolute;left:119.00px;top:474.18px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:137.00px;top:504.86px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:161.70px;top:504.86px" class="cls_011"><span class="cls_011">Create a new branch to save any changes you make during this exercise:</span></div>
<div style="position:absolute;left:119.00px;top:532.58px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git checkout -b console</span></div>
<div style="position:absolute;left:119.00px;top:544.58px" class="cls_026"><span class="cls_026">Switched to a new branch 'console'</span></div>
<div style="position:absolute;left:119.00px;top:556.58px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git push -u origin console</span></div>
<div style="position:absolute;left:119.00px;top:568.58px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:128.60px;top:580.57px" class="cls_026"><span class="cls_026">* [new branch]</span></div>
<div style="position:absolute;left:224.60px;top:580.57px" class="cls_026"><span class="cls_026">console -> console</span></div>
<div style="position:absolute;left:119.00px;top:592.57px" class="cls_026"><span class="cls_026">Branch 'console' set up to track remote branch 'console' from 'origin'.</span></div>
<div style="position:absolute;left:137.00px;top:623.25px" class="cls_011"><span class="cls_011">1.3.</span></div>
<div style="position:absolute;left:161.70px;top:623.25px" class="cls_011"><span class="cls_011">Review the PHP source code of the application, inside the the </span><span class="cls_021">php-helloworld</span></div>
<div style="position:absolute;left:161.70px;top:635.25px" class="cls_011"><span class="cls_011">folder.</span></div>
<div style="position:absolute;left:161.70px;top:651.25px" class="cls_011"><span class="cls_011">Open the </span><span class="cls_021">index.php</span><span class="cls_011"> file in the </span><span class="cls_021">/home/student/DO180-apps/php-helloworld</span></div>
<div style="position:absolute;left:161.70px;top:663.24px" class="cls_011"><span class="cls_011">folder:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:506.57px;top:751.59px" class="cls_013"><span class="cls_013">191</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:167618px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background210.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">&lt;?php</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">print "Hello, World! php version is " . PHP_VERSION . "\n";</span></div>
<div style="position:absolute;left:101.00px;top:85.69px" class="cls_026"><span class="cls_026">?></span></div>
<div style="position:absolute;left:143.70px;top:107.97px" class="cls_011"><span class="cls_011">The application implements a simple response which returns the PHP version it is</span></div>
<div style="position:absolute;left:143.70px;top:119.97px" class="cls_011"><span class="cls_011">running.</span></div>
<div style="position:absolute;left:101.41px;top:143.91px" class="cls_022"><span class="cls_022">2.</span><span class="cls_011">   Open a web browser and navigate to </span><A HREF="https://console-openshift-console./">https://console-openshift-console.</A> </span></div>
<div style="position:absolute;left:119.00px;top:155.97px" class="cls_021"><span class="cls_021">${RHT_OCP4_WILDCARD_DOMAIN}</span><span class="cls_011"> to access the OpenShift web console. Log in and</span></div>
<div style="position:absolute;left:119.00px;top:167.97px" class="cls_011"><span class="cls_011">create a new project named </span><span class="cls_028">youruser</span><span class="cls_021">-console</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:192.37px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:143.70px;top:192.37px" class="cls_011"><span class="cls_011">Load your classroom environment configuration.</span></div>
<div style="position:absolute;left:143.70px;top:208.36px" class="cls_011"><span class="cls_011">Run the following command to load the environment variables created in the first</span></div>
<div style="position:absolute;left:143.70px;top:220.36px" class="cls_011"><span class="cls_011">guided exercise:</span></div>
<div style="position:absolute;left:101.00px;top:248.08px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">source /usr/local/etc/ocp4.config</span></div>
<div style="position:absolute;left:119.00px;top:278.76px" class="cls_011"><span class="cls_011">2.2.   Retrieve the value of the wildcard domain specific to your cluster, using the</span></div>
<div style="position:absolute;left:143.70px;top:290.76px" class="cls_021"><span class="cls_021">$RHT_OCP4_WILDCARD_DOMAIN</span></div>
<div style="position:absolute;left:101.00px;top:318.47px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">echo $RHT_OCP4_WILDCARD_DOMAIN</span></div>
<div style="position:absolute;left:101.00px;top:330.47px" class="cls_026"><span class="cls_026">apps.</span><span class="cls_029">cluster.lab.example.com</span></div>
<div style="position:absolute;left:119.00px;top:361.15px" class="cls_011"><span class="cls_011">2.3.   Open the Firefox browser and navigate to </span><A HREF="https://console-openshift-/">https://console-openshift-</A> </span></div>
<div style="position:absolute;left:143.70px;top:373.15px" class="cls_021"><span class="cls_021">console.${RHT_OCP4_WILDCARD_DOMAIN}</span><span class="cls_011"> to access the OpenShift web</span></div>
<div style="position:absolute;left:143.70px;top:385.15px" class="cls_011"><span class="cls_011">console. Log in to the OpenShift console using your credentials.</span></div>
<div style="position:absolute;left:119.00px;top:409.54px" class="cls_011"><span class="cls_011">2.4.  Create a new project named </span><span class="cls_041">youruser</span><span class="cls_044">-console</span><span class="cls_011">. You can type any values you</span></div>
<div style="position:absolute;left:143.70px;top:421.54px" class="cls_011"><span class="cls_011">prefer in the other fields.</span></div>
<div style="position:absolute;left:232.36px;top:648.62px" class="cls_020"><span class="cls_020">Figure 6.13: Create a new project</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">192</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:168420px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background211.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:250.12px;top:381.11px" class="cls_020"><span class="cls_020">Figure 6.14: Create a new project</span></div>
<div style="position:absolute;left:137.00px;top:404.43px" class="cls_011"><span class="cls_011">2.5.   After you have completed the required fields, click Create in the </span><span class="cls_021">Create Project</span></div>
<div style="position:absolute;left:161.70px;top:416.43px" class="cls_011"><span class="cls_011">dialog box to go to the </span><span class="cls_021">Project Status</span><span class="cls_011"> page for the </span><span class="cls_028">youruser</span><span class="cls_021">-console</span><span class="cls_011"> project:</span></div>
<div style="position:absolute;left:252.06px;top:665.94px" class="cls_020"><span class="cls_020">Figure 6.15: Project Status page</span></div>
<div style="position:absolute;left:119.41px;top:688.80px" class="cls_022"><span class="cls_022">3.</span><span class="cls_011">  Create the new php-helloworld application with a PHP template.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.65px;top:751.59px" class="cls_013"><span class="cls_013">193</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:169222px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background212.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:119.00px;top:54.98px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:143.70px;top:54.98px" class="cls_011"><span class="cls_011">Switch to the Developer perspective using the drop-down at the top of the left-hand</span></div>
<div style="position:absolute;left:143.70px;top:66.97px" class="cls_011"><span class="cls_011">menu:</span></div>
<div style="position:absolute;left:204.10px;top:285.78px" class="cls_020"><span class="cls_020">Figure 6.16: Developer perspective drop-down</span></div>
<div style="position:absolute;left:119.00px;top:309.09px" class="cls_011"><span class="cls_011">3.2.   Click From Catalog to display a list of technology templates. Uncheck the Operator</span></div>
<div style="position:absolute;left:143.70px;top:321.09px" class="cls_011"><span class="cls_011">Backed checkbox to see all of the templates.</span></div>
<div style="position:absolute;left:225.15px;top:643.64px" class="cls_020"><span class="cls_020">Figure 6.17: Developer Catalog page</span></div>
<div style="position:absolute;left:119.00px;top:666.95px" class="cls_011"><span class="cls_011">3.3.  Enter </span><span class="cls_021">php</span><span class="cls_011"> in the Filter by keyword field.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">194</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:170024px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background213.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:229.15px;top:394.49px" class="cls_020"><span class="cls_020">Figure 6.18: Finding PHP-related templates</span></div>
<div style="position:absolute;left:137.00px;top:417.81px" class="cls_011"><span class="cls_011">3.4.  After filtering, click the PHP builder image to display the PHP dialog box. Click Create</span></div>
<div style="position:absolute;left:161.70px;top:429.81px" class="cls_011"><span class="cls_011">Application  to display the Create Source-to-Image Application page.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.74px;top:751.59px" class="cls_013"><span class="cls_013">195</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:170826px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background214.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:170.65px;top:340.59px" class="cls_020"><span class="cls_020">Figure 6.19: Configuring Source-to-Image for a PHP application</span></div>
<div style="position:absolute;left:119.00px;top:363.91px" class="cls_011"><span class="cls_011">3.5.   Change the Builder Image Version to PHP version 7.3.</span></div>
<div style="position:absolute;left:143.70px;top:379.91px" class="cls_011"><span class="cls_011">Specify the location of the source code git repository: </span><A HREF="https://">https://</A> </span></div>
<div style="position:absolute;left:143.70px;top:391.90px" class="cls_021"><span class="cls_021">github.com/</span><span class="cls_028">yourgituser</span><span class="cls_021">/DO180-apps</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:143.70px;top:407.90px" class="cls_011"><span class="cls_011">Use the Advanced Git Options to set the context directory to </span><span class="cls_021">php-helloworld</span><span class="cls_011"> and</span></div>
<div style="position:absolute;left:143.70px;top:419.90px" class="cls_011"><span class="cls_011">branch </span><span class="cls_021">console</span><span class="cls_011"> for this exercise</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">196</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:171628px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background215.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:192.18px;top:364.58px" class="cls_020"><span class="cls_020">Figure 6.20: Setting Advanced Git Options for the application</span></div>
<div style="position:absolute;left:161.70px;top:387.49px" class="cls_011"><span class="cls_011">Enter </span><span class="cls_044">php-helloworld</span><span class="cls_011"> for both the application name and the name used for</span></div>
<div style="position:absolute;left:161.70px;top:399.49px" class="cls_011"><span class="cls_011">associated resources. Select Deployment Config as the resource type.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.73px;top:751.59px" class="cls_013"><span class="cls_013">197</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:172430px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background216.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:219.39px;top:394.87px" class="cls_020"><span class="cls_020">Figure 6.21: Setting application options</span></div>
<div style="position:absolute;left:143.70px;top:417.78px" class="cls_011"><span class="cls_011">Scroll to the bottom of the page, and select Create a route to the application.</span></div>
<div style="position:absolute;left:143.70px;top:429.78px" class="cls_011"><span class="cls_011">Click Create to create the required OpenShift and Kubernetes resources for the</span></div>
<div style="position:absolute;left:143.70px;top:441.78px" class="cls_011"><span class="cls_011">application.</span></div>
<div style="position:absolute;left:143.70px;top:457.78px" class="cls_011"><span class="cls_011">You are redirected to the </span><span class="cls_021">Topology</span><span class="cls_011"> page:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">198</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:173232px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background217.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:260.69px;top:375.99px" class="cls_020"><span class="cls_020">Figure 6.22: Topology page</span></div>
<div style="position:absolute;left:161.70px;top:398.90px" class="cls_011"><span class="cls_011">This page indicates that the php-helloworld application is created. The </span><span class="cls_021">DC</span><span class="cls_011"> annotation</span></div>
<div style="position:absolute;left:161.70px;top:410.90px" class="cls_011"><span class="cls_011">to the left of the </span><span class="cls_021">php-helloworld</span><span class="cls_011"> link is an acronym for </span><span class="cls_021">Deployment Config</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:161.70px;top:422.90px" class="cls_011"><span class="cls_011">This link redirects to a page containing information about the application's</span></div>
<div style="position:absolute;left:161.70px;top:434.90px" class="cls_011"><span class="cls_011">deployment configuration.</span></div>
<div style="position:absolute;left:137.00px;top:459.29px" class="cls_011"><span class="cls_011">3.6.  Switch back to the Administrator perspective for the remainder of the exercise:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.53px;top:751.59px" class="cls_013"><span class="cls_013">199</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:174034px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background218.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:195.88px;top:381.58px" class="cls_020"><span class="cls_020">Figure 6.23: Administrator perspective drop-down</span></div>
<div style="position:absolute;left:101.41px;top:404.44px" class="cls_022"><span class="cls_022">4.</span><span class="cls_011">  Use the navigation bar on the left side of the OpenShift web console to locate information</span></div>
<div style="position:absolute;left:119.00px;top:416.50px" class="cls_011"><span class="cls_011">for the application's OpenShift and Kubernetes resources:</span></div>
<div style="position:absolute;left:119.00px;top:439.84px" class="cls_022"><span class="cls_022">•</span><span class="cls_011"> DeploymentConfig</span></div>
<div style="position:absolute;left:119.00px;top:463.24px" class="cls_022"><span class="cls_022">•</span><span class="cls_011"> BuildConfig</span></div>
<div style="position:absolute;left:119.00px;top:486.64px" class="cls_022"><span class="cls_022">•</span><span class="cls_011"> Build Logs</span></div>
<div style="position:absolute;left:119.00px;top:510.04px" class="cls_022"><span class="cls_022">•</span><span class="cls_011"> Service</span></div>
<div style="position:absolute;left:119.00px;top:533.44px" class="cls_022"><span class="cls_022">•</span><span class="cls_011"> Route</span></div>
<div style="position:absolute;left:119.00px;top:557.90px" class="cls_011"><span class="cls_011">4.1.</span></div>
<div style="position:absolute;left:143.70px;top:557.90px" class="cls_011"><span class="cls_011">Examine the deployment configuration. In the navigation bar, click Workloads to</span></div>
<div style="position:absolute;left:143.70px;top:569.90px" class="cls_011"><span class="cls_011">reveal more menu choices. Click Deployment Configs to display a list of deployment</span></div>
<div style="position:absolute;left:143.70px;top:581.89px" class="cls_011"><span class="cls_011">configurations for the </span><span class="cls_028">youruser</span><span class="cls_021">-console</span><span class="cls_011"> project. Click the </span><span class="cls_021">php-helloworld</span><span class="cls_011"> link</span></div>
<div style="position:absolute;left:143.70px;top:593.89px" class="cls_011"><span class="cls_011">to display deployment configuration information.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">200</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:174836px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background219.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:188.55px;top:381.92px" class="cls_020"><span class="cls_020">Figure 6.24: Application deployment configuration details page</span></div>
<div style="position:absolute;left:161.70px;top:404.83px" class="cls_011"><span class="cls_011">Explore the available information from the Details tab. The build may still be running</span></div>
<div style="position:absolute;left:161.70px;top:416.83px" class="cls_011"><span class="cls_011">when you reach this page, so the DC might not have a value of </span><span class="cls_021">1 pod</span><span class="cls_011">, yet.</span></div>
<div style="position:absolute;left:161.70px;top:432.83px" class="cls_011"><span class="cls_011">If you click the up and down arrow icons next to the doughnut chart that indicates the</span></div>
<div style="position:absolute;left:161.70px;top:444.83px" class="cls_011"><span class="cls_011">number of pods, you can scale the application up and down horizontally.</span></div>
<div style="position:absolute;left:137.00px;top:469.22px" class="cls_011"><span class="cls_011">4.2.  Examine the build configuration. In the navigation bar, click Builds to reveal more</span></div>
<div style="position:absolute;left:161.70px;top:481.22px" class="cls_011"><span class="cls_011">menu choices. Click Build Configs to display a list of build configurations for the</span></div>
<div style="position:absolute;left:161.70px;top:493.22px" class="cls_028"><span class="cls_028">youruser</span><span class="cls_021">-console</span><span class="cls_011"> project. Click the </span><span class="cls_021">php-helloworld</span><span class="cls_011"> link to display the build</span></div>
<div style="position:absolute;left:161.70px;top:505.22px" class="cls_011"><span class="cls_011">configuration for the application.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.60px;top:751.59px" class="cls_013"><span class="cls_013">201</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:175638px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background220.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:185.31px;top:356.49px" class="cls_020"><span class="cls_020">Figure 6.25: Application build configuration details page</span></div>
<div style="position:absolute;left:143.70px;top:379.41px" class="cls_011"><span class="cls_011">Explore the available information from the Details tab. The YAML tab allows you</span></div>
<div style="position:absolute;left:143.70px;top:391.40px" class="cls_011"><span class="cls_011">to view and edit the build configuration as a YAML file. The Builds tab provides</span></div>
<div style="position:absolute;left:143.70px;top:403.40px" class="cls_011"><span class="cls_011">an historical list of builds, along with a link to more information for each build.</span></div>
<div style="position:absolute;left:143.70px;top:415.40px" class="cls_011"><span class="cls_011">The Environment tab allows you to view and edit environment variables for the</span></div>
<div style="position:absolute;left:143.70px;top:427.40px" class="cls_011"><span class="cls_011">application's build environment. The Events tab displays a list of build related events</span></div>
<div style="position:absolute;left:143.70px;top:439.40px" class="cls_011"><span class="cls_011">and metadata.</span></div>
<div style="position:absolute;left:119.00px;top:463.79px" class="cls_011"><span class="cls_011">4.3.  Examine the logs for the Source-to-Image build of the application. In the Builds</span></div>
<div style="position:absolute;left:143.70px;top:475.79px" class="cls_011"><span class="cls_011">menu, click Builds to display a list of recent builds for the </span><span class="cls_028">youruser</span><span class="cls_021">-console</span></div>
<div style="position:absolute;left:143.70px;top:487.79px" class="cls_011"><span class="cls_011">project.</span></div>
<div style="position:absolute;left:143.70px;top:503.79px" class="cls_011"><span class="cls_011">Click the </span><span class="cls_021">php-helloworld-1</span><span class="cls_011"> link to access information for the first build of the</span></div>
<div style="position:absolute;left:143.70px;top:515.79px" class="cls_021"><span class="cls_021">php-helloworld</span><span class="cls_011"> application:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">202</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:176440px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background221.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:225.49px;top:342.85px" class="cls_020"><span class="cls_020">Figure 6.26: An application build details page</span></div>
<div style="position:absolute;left:161.70px;top:365.77px" class="cls_011"><span class="cls_011">Explore the available information from the Details tab. Next, click the Logs tab. A</span></div>
<div style="position:absolute;left:161.70px;top:377.77px" class="cls_011"><span class="cls_011">scrollable text box contains output from the build process:</span></div>
<div style="position:absolute;left:234.00px;top:663.45px" class="cls_020"><span class="cls_020">Figure 6.27: Logs for an application build</span></div>
<div style="position:absolute;left:161.70px;top:686.36px" class="cls_011"><span class="cls_011">When Podman builds a container image, similar output is observed compared with the</span></div>
<div style="position:absolute;left:161.70px;top:698.36px" class="cls_011"><span class="cls_011">output shown in the browser.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:502.68px;top:751.59px" class="cls_013"><span class="cls_013">203</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:177242px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background222.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:119.00px;top:54.98px" class="cls_011"><span class="cls_011">4.4.  Locate information for the </span><span class="cls_021">php-helloworld</span><span class="cls_011"> application's service. In the navigation</span></div>
<div style="position:absolute;left:143.70px;top:66.97px" class="cls_011"><span class="cls_011">bar, click Networking to reveal more menu choices. Click Services to display a list of</span></div>
<div style="position:absolute;left:143.70px;top:78.97px" class="cls_011"><span class="cls_011">services for the </span><span class="cls_028">youruser</span><span class="cls_021">-console</span><span class="cls_011"> project. Click the </span><span class="cls_021">php-helloworld</span><span class="cls_011"> link to</span></div>
<div style="position:absolute;left:143.70px;top:90.97px" class="cls_011"><span class="cls_011">display the information associated with the application's service:</span></div>
<div style="position:absolute;left:231.95px;top:370.49px" class="cls_020"><span class="cls_020">Figure 6.28: Service details page</span></div>
<div style="position:absolute;left:143.70px;top:393.41px" class="cls_011"><span class="cls_011">Explore the available information from the Details tab. The YAML tab allows you to</span></div>
<div style="position:absolute;left:143.70px;top:405.41px" class="cls_011"><span class="cls_011">view and edit the service configuration, as a YAML file. The Pods tab displays the</span></div>
<div style="position:absolute;left:143.70px;top:417.40px" class="cls_011"><span class="cls_011">current list of pods that provide the application service.</span></div>
<div style="position:absolute;left:119.00px;top:441.80px" class="cls_011"><span class="cls_011">4.5.  Locate external route information for the application. On the navigation bar, click</span></div>
<div style="position:absolute;left:143.70px;top:451.90px" class="cls_011"><span class="cls_011">Networking</span><span class="cls_025"> → </span><span class="cls_011">Routes to display a list of configured routes for the </span><span class="cls_028">youruser</span><span class="cls_021">-</span></div>
<div style="position:absolute;left:143.70px;top:465.80px" class="cls_021"><span class="cls_021">console</span><span class="cls_011"> project. Click the </span><span class="cls_021">php-helloworld</span><span class="cls_011"> link to display information associated</span></div>
<div style="position:absolute;left:143.70px;top:477.80px" class="cls_011"><span class="cls_011">with the application's route:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">204</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:178044px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background223.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:252.95px;top:358.68px" class="cls_020"><span class="cls_020">Figure 6.29: Route details page</span></div>
<div style="position:absolute;left:161.70px;top:381.60px" class="cls_011"><span class="cls_011">Explore the available information from the Details tab. The Location field provides</span></div>
<div style="position:absolute;left:161.70px;top:393.60px" class="cls_011"><span class="cls_011">a link to the external route for the application; </span><A HREF="http://php-helloworld-/">http://php-helloworld-</A> </span></div>
<div style="position:absolute;left:161.70px;top:405.59px" class="cls_021"><span class="cls_021">${RHT_OCP4_DEV_USER}-console.${RHT_OCP4_WILDCARD_DOMAIN}</span><span class="cls_011">. Click</span></div>
<div style="position:absolute;left:161.70px;top:417.59px" class="cls_011"><span class="cls_011">the link to access the application in a new tab:</span></div>
<div style="position:absolute;left:231.62px;top:530.01px" class="cls_020"><span class="cls_020">Figure 6.30: Initial PHP application results</span></div>
<div style="position:absolute;left:119.41px;top:552.87px" class="cls_022"><span class="cls_022">5.</span><span class="cls_011">  Modify the application code, commit the change, push the code to the remote Git</span></div>
<div style="position:absolute;left:137.00px;top:564.92px" class="cls_011"><span class="cls_011">repository, and trigger a new application build.</span></div>
<div style="position:absolute;left:137.00px;top:589.32px" class="cls_011"><span class="cls_011">5.1.</span></div>
<div style="position:absolute;left:161.70px;top:589.32px" class="cls_011"><span class="cls_011">Enter the source code directory:</span></div>
<div style="position:absolute;left:119.00px;top:617.04px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">cd ~/DO180-apps/php-helloworld</span></div>
<div style="position:absolute;left:137.00px;top:647.72px" class="cls_011"><span class="cls_011">5.2.   Add the second print line statement in the </span><span class="cls_021">index.php</span><span class="cls_011"> page to read "A change is in</span></div>
<div style="position:absolute;left:161.70px;top:659.72px" class="cls_011"><span class="cls_011">the air!" and save the file. Add the change to the Git index, commit the change, and</span></div>
<div style="position:absolute;left:161.70px;top:671.72px" class="cls_011"><span class="cls_011">push the changes to the remote Git repository.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:502.77px;top:751.59px" class="cls_013"><span class="cls_013">205</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:178846px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background224.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation php-helloworld]$ </span><span class="cls_027">vim index.php</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">[student@workstation php-helloworld]$ </span><span class="cls_027">cat index.php</span></div>
<div style="position:absolute;left:101.00px;top:85.69px" class="cls_026"><span class="cls_026">&lt;?php</span></div>
<div style="position:absolute;left:101.00px;top:97.69px" class="cls_026"><span class="cls_026">print "Hello, World! php version is " . PHP_VERSION . "\n";</span></div>
<div style="position:absolute;left:101.00px;top:109.69px" class="cls_026"><span class="cls_026">print "A change is in the air!\n";</span></div>
<div style="position:absolute;left:101.00px;top:121.68px" class="cls_026"><span class="cls_026">?></span></div>
<div style="position:absolute;left:101.00px;top:133.68px" class="cls_026"><span class="cls_026">[student@workstation php-helloworld]$ </span><span class="cls_027">git add index.php</span></div>
<div style="position:absolute;left:101.00px;top:145.68px" class="cls_026"><span class="cls_026">[student@workstation php-helloworld]$ </span><span class="cls_027">git commit -m 'updated app'</span></div>
<div style="position:absolute;left:101.00px;top:157.68px" class="cls_026"><span class="cls_026">[console d198fb5] updated app</span></div>
<div style="position:absolute;left:101.00px;top:169.68px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:105.80px;top:181.68px" class="cls_026"><span class="cls_026">1 file changed, 1 insertion(+), 1 deletion(-)</span></div>
<div style="position:absolute;left:101.00px;top:193.67px" class="cls_026"><span class="cls_026">[student@workstation php-helloworld]$ </span><span class="cls_027">git push origin console</span></div>
<div style="position:absolute;left:101.00px;top:205.67px" class="cls_026"><span class="cls_026">Counting objects: 7, done.</span></div>
<div style="position:absolute;left:101.00px;top:217.67px" class="cls_026"><span class="cls_026">Delta compression using up to 2 threads.</span></div>
<div style="position:absolute;left:101.00px;top:229.67px" class="cls_026"><span class="cls_026">Compressing objects: 100% (3/3), done.</span></div>
<div style="position:absolute;left:101.00px;top:241.66px" class="cls_026"><span class="cls_026">Writing objects: 100% (4/4), 409 bytes | 0 bytes/s, done.</span></div>
<div style="position:absolute;left:101.00px;top:253.66px" class="cls_026"><span class="cls_026">Total 4 (delta 1), reused 0 (delta 0)</span></div>
<div style="position:absolute;left:101.00px;top:265.66px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:296.34px" class="cls_011"><span class="cls_011">5.3.   Trigger an application build manually from the web console.</span></div>
<div style="position:absolute;left:143.70px;top:310.44px" class="cls_011"><span class="cls_011">On the navigation bar, click Builds</span><span class="cls_025"> → </span><span class="cls_011">Build Configs and then click the </span><span class="cls_021">php-</span></div>
<div style="position:absolute;left:143.70px;top:324.34px" class="cls_021"><span class="cls_021">helloworld</span><span class="cls_011"> link to access the Build Config Details page. From the Actions menu in</span></div>
<div style="position:absolute;left:143.70px;top:336.33px" class="cls_011"><span class="cls_011">the upper right of the screen, click Start Build:</span></div>
<div style="position:absolute;left:223.48px;top:642.23px" class="cls_020"><span class="cls_020">Figure 6.31: Start an application build</span></div>
<div style="position:absolute;left:143.70px;top:665.14px" class="cls_011"><span class="cls_011">You are redirected to a Build Details page for the new build. Click the Logs tab</span></div>
<div style="position:absolute;left:143.70px;top:677.14px" class="cls_011"><span class="cls_011">to monitor progress of the build. The last line of a successful build contains </span><span class="cls_021">Push</span></div>
<div style="position:absolute;left:143.70px;top:689.14px" class="cls_021"><span class="cls_021">successful</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">206</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:179648px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background225.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:161.70px;top:52.08px" class="cls_011"><span class="cls_011">When the build completes, the deploy starts. Go to the Workloads</span><span class="cls_025"> → </span><span class="cls_011">Pods section,</span></div>
<div style="position:absolute;left:161.70px;top:65.97px" class="cls_011"><span class="cls_011">and wait for the new pod is deployed and running.</span></div>
<div style="position:absolute;left:137.00px;top:88.47px" class="cls_011"><span class="cls_011">5.4.  Reload the </span><A HREF="http://php-helloworld-${rht_ocp4_dev_user}-console./">http://php-helloworld-${RHT_OCP4_DEV_USER}-console.</A> </span></div>
<div style="position:absolute;left:161.70px;top:100.47px" class="cls_021"><span class="cls_021">${RHT_OCP4_WILDCARD_DOMAIN}</span><span class="cls_011"> URL in the browser. The application response</span></div>
<div style="position:absolute;left:161.70px;top:112.47px" class="cls_011"><span class="cls_011">corresponds to the updated source code:</span></div>
<div style="position:absolute;left:225.62px;top:224.88px" class="cls_020"><span class="cls_020">Figure 6.32: Updated web application output</span></div>
<div style="position:absolute;left:119.41px;top:245.90px" class="cls_022"><span class="cls_022">6.</span><span class="cls_011">  Delete the project. On the navigation bar, click Home</span><span class="cls_025"> → </span><span class="cls_011">Projects. Click the icon at the</span></div>
<div style="position:absolute;left:137.00px;top:259.80px" class="cls_011"><span class="cls_011">right side of the row containing an entry for the </span><span class="cls_028">youruser</span><span class="cls_021">-console</span><span class="cls_011"> project. Click Delete</span></div>
<div style="position:absolute;left:137.00px;top:271.80px" class="cls_011"><span class="cls_011">Project from the menu that appears.</span></div>
<div style="position:absolute;left:258.43px;top:478.62px" class="cls_020"><span class="cls_020">Figure 6.33: Delete a project</span></div>
<div style="position:absolute;left:137.00px;top:501.53px" class="cls_011"><span class="cls_011">Enter </span><span class="cls_028">youruser</span><span class="cls_021">-console</span><span class="cls_011"> in the confirmation dialog box, and click Delete.</span></div>
<div style="position:absolute;left:108.00px;top:525.60px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:108.00px;top:547.53px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab openshift-webconsole finish</span><span class="cls_011"> script to complete this lab.</span></div>
<div style="position:absolute;left:119.00px;top:575.25px" class="cls_026"><span class="cls_026">[student@workstation php-helloworld]$ </span><span class="cls_027">lab openshift-webconsole finish</span></div>
<div style="position:absolute;left:108.00px;top:603.03px" class="cls_011"><span class="cls_011">This concludes the guided exercise.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:502.77px;top:751.59px" class="cls_013"><span class="cls_013">207</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:180450px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background226.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_042"><span class="cls_042">Lab</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Deploying Containerized Applications on</span></div>
<div style="position:absolute;left:90.00px;top:112.56px" class="cls_014"><span class="cls_014">OpenShift</span></div>
<div style="position:absolute;left:102.00px;top:160.15px" class="cls_043"><span class="cls_043">Performance Checklist</span></div>
<div style="position:absolute;left:102.00px;top:178.09px" class="cls_011"><span class="cls_011">In this lab, you will create an application using the OpenShift Source-to-Image facility.</span></div>
<div style="position:absolute;left:102.00px;top:201.15px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:219.09px" class="cls_011"><span class="cls_011">You should be able to create an OpenShift application and access it through a web browser.</span></div>
<div style="position:absolute;left:102.00px;top:242.15px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:260.09px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:101.00px;top:287.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab openshift-review start</span></div>
<div style="position:absolute;left:90.00px;top:342.42px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:112.00px;top:342.48px" class="cls_011"><span class="cls_011">Prepare the lab environment.</span></div>
<div style="position:absolute;left:112.00px;top:366.88px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:136.70px;top:366.88px" class="cls_011"><span class="cls_011">Load your classroom environment configuration.</span></div>
<div style="position:absolute;left:136.70px;top:382.88px" class="cls_011"><span class="cls_011">Run the following command to load the environment variables created in the first</span></div>
<div style="position:absolute;left:136.70px;top:394.88px" class="cls_011"><span class="cls_011">guided exercise:</span></div>
<div style="position:absolute;left:101.00px;top:422.60px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">source /usr/local/etc/ocp4.config</span></div>
<div style="position:absolute;left:112.00px;top:453.27px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:136.70px;top:453.27px" class="cls_011"><span class="cls_011">Log in to the OpenShift cluster.</span></div>
<div style="position:absolute;left:112.00px;top:477.67px" class="cls_011"><span class="cls_011">1.3.</span></div>
<div style="position:absolute;left:136.70px;top:477.67px" class="cls_011"><span class="cls_011">Create a new project named "${RHT_OCP4_DEV_USER}-ocp" for the resources you</span></div>
<div style="position:absolute;left:136.70px;top:489.67px" class="cls_011"><span class="cls_011">create during this exercise:</span></div>
<div style="position:absolute;left:90.00px;top:513.01px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:112.00px;top:513.07px" class="cls_011"><span class="cls_011">Create a temperature converter application written in PHP using the </span><span class="cls_021">php:7.3</span><span class="cls_011"> image stream</span></div>
<div style="position:absolute;left:112.00px;top:525.07px" class="cls_011"><span class="cls_011">tag. The source code is in the Git repository at </span><A HREF="https://github.com/redhattraining/">https://github.com/RedHatTraining/</A> </span></div>
<div style="position:absolute;left:112.00px;top:537.07px" class="cls_021"><span class="cls_021">DO180-apps/</span><span class="cls_011"> in the </span><span class="cls_021">temps</span><span class="cls_011"> directory. You may use the OpenShift command-line interface</span></div>
<div style="position:absolute;left:112.00px;top:549.07px" class="cls_011"><span class="cls_011">or the web console to create the application.</span></div>
<div style="position:absolute;left:112.00px;top:565.07px" class="cls_011"><span class="cls_011">Expose the application's service to make the application accessible from a web browser.</span></div>
<div style="position:absolute;left:90.00px;top:583.01px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:112.00px;top:583.07px" class="cls_011"><span class="cls_011">Verify that you can access the application in a web browser at </span><A HREF="http://">http://</A> </span></div>
<div style="position:absolute;left:112.00px;top:595.07px" class="cls_021"><span class="cls_021">temps-</span><span class="cls_028">${RHT_OCP4_DEV_USER}</span><span class="cls_021">-ocp.</span><span class="cls_028">${RHT_OCP4_WILDCARD_DOMAIN}</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:619.13px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:90.00px;top:641.07px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab openshift-review grade</span><span class="cls_011"> command to grade your work.</span></div>
<div style="position:absolute;left:90.00px;top:653.07px" class="cls_011"><span class="cls_011">Correct any reported failures and rerun the script until successful.</span></div>
<div style="position:absolute;left:101.00px;top:680.78px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab openshift-review grade</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">208</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:181252px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background227.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:52.04px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:108.00px;top:73.98px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab openshift-review finish</span><span class="cls_011"> command to complete this lab.</span></div>
<div style="position:absolute;left:119.00px;top:101.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab openshift-review finish</span></div>
<div style="position:absolute;left:108.00px;top:129.47px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:502.56px;top:751.59px" class="cls_013"><span class="cls_013">209</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:182054px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background228.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_042"><span class="cls_042">Solution</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Deploying Containerized Applications on</span></div>
<div style="position:absolute;left:90.00px;top:112.56px" class="cls_014"><span class="cls_014">OpenShift</span></div>
<div style="position:absolute;left:102.00px;top:160.15px" class="cls_043"><span class="cls_043">Performance Checklist</span></div>
<div style="position:absolute;left:102.00px;top:178.09px" class="cls_011"><span class="cls_011">In this lab, you will create an application using the OpenShift Source-to-Image facility.</span></div>
<div style="position:absolute;left:102.00px;top:201.15px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:219.09px" class="cls_011"><span class="cls_011">You should be able to create an OpenShift application and access it through a web browser.</span></div>
<div style="position:absolute;left:102.00px;top:242.15px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:260.09px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:101.00px;top:287.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab openshift-review start</span></div>
<div style="position:absolute;left:90.00px;top:342.42px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:112.00px;top:342.48px" class="cls_011"><span class="cls_011">Prepare the lab environment.</span></div>
<div style="position:absolute;left:112.00px;top:366.88px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:136.70px;top:366.88px" class="cls_011"><span class="cls_011">Load your classroom environment configuration.</span></div>
<div style="position:absolute;left:136.70px;top:382.88px" class="cls_011"><span class="cls_011">Run the following command to load the environment variables created in the first</span></div>
<div style="position:absolute;left:136.70px;top:394.88px" class="cls_011"><span class="cls_011">guided exercise:</span></div>
<div style="position:absolute;left:101.00px;top:422.60px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">source /usr/local/etc/ocp4.config</span></div>
<div style="position:absolute;left:112.00px;top:453.27px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:136.70px;top:453.27px" class="cls_011"><span class="cls_011">Log in to the OpenShift cluster.</span></div>
<div style="position:absolute;left:101.00px;top:480.99px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc login -u ${RHT_OCP4_DEV_USER} -p \</span></div>
<div style="position:absolute;left:101.00px;top:492.99px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}</span></div>
<div style="position:absolute;left:101.00px;top:504.99px" class="cls_026"><span class="cls_026">Login successful</span></div>
<div style="position:absolute;left:101.00px;top:516.98px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:112.00px;top:547.66px" class="cls_011"><span class="cls_011">1.3.</span></div>
<div style="position:absolute;left:136.70px;top:547.66px" class="cls_011"><span class="cls_011">Create a new project named "${RHT_OCP4_DEV_USER}-ocp" for the resources you</span></div>
<div style="position:absolute;left:136.70px;top:559.66px" class="cls_011"><span class="cls_011">create during this exercise:</span></div>
<div style="position:absolute;left:101.00px;top:587.38px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc new-project ${RHT_OCP4_DEV_USER}-ocp</span></div>
<div style="position:absolute;left:90.00px;top:617.00px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:112.00px;top:617.06px" class="cls_011"><span class="cls_011">Create a temperature converter application written in PHP using the </span><span class="cls_021">php:7.3</span><span class="cls_011"> image stream</span></div>
<div style="position:absolute;left:112.00px;top:629.06px" class="cls_011"><span class="cls_011">tag. The source code is in the Git repository at </span><A HREF="https://github.com/redhattraining/">https://github.com/RedHatTraining/</A> </span></div>
<div style="position:absolute;left:112.00px;top:641.06px" class="cls_021"><span class="cls_021">DO180-apps/</span><span class="cls_011"> in the </span><span class="cls_021">temps</span><span class="cls_011"> directory. You may use the OpenShift command-line interface</span></div>
<div style="position:absolute;left:112.00px;top:653.06px" class="cls_011"><span class="cls_011">or the web console to create the application.</span></div>
<div style="position:absolute;left:112.00px;top:669.06px" class="cls_011"><span class="cls_011">Expose the application's service to make the application accessible from a web browser.</span></div>
<div style="position:absolute;left:112.00px;top:693.46px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:136.70px;top:693.46px" class="cls_011"><span class="cls_011">If using the command-line interface, run the following commands:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">210</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:182856px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background229.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc new-app --as-deployment-config \</span></div>
<div style="position:absolute;left:119.00px;top:73.69px" class="cls_026"><span class="cls_026">> </span><span class="cls_027"> php:7.3~<A HREF="https://github.com/redhattraining/do180-apps/">https://github.com/RedHatTraining/DO180-apps</A> \</span></div>
<div style="position:absolute;left:119.00px;top:85.69px" class="cls_026"><span class="cls_026">></span></div>
<div style="position:absolute;left:133.40px;top:85.69px" class="cls_027"><span class="cls_027">--context-dir temps --name temps</span></div>
<div style="position:absolute;left:119.00px;top:97.69px" class="cls_026"><span class="cls_026">--> Found image fbe3911 (2 weeks old) in image stream "openshift/php" under tag</span></div>
<div style="position:absolute;left:123.80px;top:109.69px" class="cls_026"><span class="cls_026">"7.3" for "php:7.3"</span></div>
<div style="position:absolute;left:138.20px;top:133.68px" class="cls_026"><span class="cls_026">Apache 2.4 with PHP 7.3</span></div>
<div style="position:absolute;left:138.20px;top:145.68px" class="cls_026"><span class="cls_026">-----------------------</span></div>
<div style="position:absolute;left:138.20px;top:157.68px" class="cls_026"><span class="cls_026">PHP 7.3 available as container is a base platform </span><span class="cls_029">...output omitted</span></div>
<div style="position:absolute;left:119.00px;top:181.67px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:205.67px" class="cls_026"><span class="cls_026">--> Creating resources ...</span></div>
<div style="position:absolute;left:138.20px;top:217.67px" class="cls_026"><span class="cls_026">imagestream.image.openshift.io "temps" created</span></div>
<div style="position:absolute;left:138.20px;top:229.67px" class="cls_026"><span class="cls_026">buildconfig.build.openshift.io "temps" created</span></div>
<div style="position:absolute;left:138.20px;top:241.66px" class="cls_026"><span class="cls_026">deploymentconfig.apps.openshift.io "temps" created</span></div>
<div style="position:absolute;left:138.20px;top:253.66px" class="cls_026"><span class="cls_026">service "temps" created</span></div>
<div style="position:absolute;left:119.00px;top:265.66px" class="cls_026"><span class="cls_026">--> Success</span></div>
<div style="position:absolute;left:138.20px;top:277.66px" class="cls_026"><span class="cls_026">Build scheduled, use 'oc logs -f bc/temps' to track its progress.</span></div>
<div style="position:absolute;left:138.20px;top:289.66px" class="cls_026"><span class="cls_026">Application is not exposed. You can expose services to the outside world by</span></div>
<div style="position:absolute;left:123.80px;top:301.65px" class="cls_026"><span class="cls_026">executing one or more of the commands below:</span></div>
<div style="position:absolute;left:143.00px;top:313.65px" class="cls_026"><span class="cls_026">'oc expose svc/temps'</span></div>
<div style="position:absolute;left:138.20px;top:325.65px" class="cls_026"><span class="cls_026">Run 'oc status' to view your app.</span></div>
<div style="position:absolute;left:130.00px;top:356.33px" class="cls_011"><span class="cls_011">2.2.   Monitor progress of the build.</span></div>
<div style="position:absolute;left:119.00px;top:384.05px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc logs -f bc/temps</span></div>
<div style="position:absolute;left:119.00px;top:396.05px" class="cls_026"><span class="cls_026">Cloning "</span><A HREF="https://github.com/redhattraining/do180-apps"/">https://github.com/RedHatTraining/DO180-apps"</A> ...</div>
<div style="position:absolute;left:123.80px;top:408.04px" class="cls_026"><span class="cls_026">Commit: f7cd8963ef353d9173c3a21dcccf402f3616840b (Initial commit, including all</span></div>
<div style="position:absolute;left:123.80px;top:420.04px" class="cls_026"><span class="cls_026">apps previously in course)</span></div>
<div style="position:absolute;left:119.00px;top:432.04px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:444.04px" class="cls_026"><span class="cls_026">Successfully pushed image-registry.openshift-</span></div>
<div style="position:absolute;left:119.00px;top:456.04px" class="cls_026"><span class="cls_026">image-registry.svc:5000/${RHT_OCP4_DEV_USER}-temps/</span></div>
<div style="position:absolute;left:119.00px;top:468.03px" class="cls_026"><span class="cls_026">temps@sha256:59f713adfacdbc2a3ca81c4ef4af46517dfffa3f0029372f86fbcaf571416a74</span></div>
<div style="position:absolute;left:119.00px;top:480.03px" class="cls_026"><span class="cls_026">Push successful</span></div>
<div style="position:absolute;left:130.00px;top:510.71px" class="cls_011"><span class="cls_011">2.3.   Verify that the application is deployed.</span></div>
<div style="position:absolute;left:119.00px;top:538.43px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc get pods -w</span></div>
<div style="position:absolute;left:119.00px;top:550.42px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:200.60px;top:550.42px" class="cls_026"><span class="cls_026">READY   STATUS</span></div>
<div style="position:absolute;left:296.60px;top:550.42px" class="cls_026"><span class="cls_026">RESTARTS   AGE</span></div>
<div style="position:absolute;left:119.00px;top:562.42px" class="cls_026"><span class="cls_026">temps-1-build</span></div>
<div style="position:absolute;left:200.60px;top:562.42px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:239.00px;top:562.42px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:296.60px;top:562.42px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:349.40px;top:562.42px" class="cls_026"><span class="cls_026">91s</span></div>
<div style="position:absolute;left:119.00px;top:574.42px" class="cls_026"><span class="cls_026">temps-1-deploy</span></div>
<div style="position:absolute;left:200.60px;top:574.42px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:239.00px;top:574.42px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:296.60px;top:574.42px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:349.40px;top:574.42px" class="cls_026"><span class="cls_026">60s</span></div>
<div style="position:absolute;left:119.00px;top:586.42px" class="cls_026"><span class="cls_026">temps-1-p4zjc</span></div>
<div style="position:absolute;left:200.60px;top:586.42px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:239.00px;top:586.42px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:296.60px;top:586.42px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:349.40px;top:586.42px" class="cls_026"><span class="cls_026">58s</span></div>
<div style="position:absolute;left:154.70px;top:608.70px" class="cls_011"><span class="cls_011">Press </span><span class="cls_021">Ctrl</span><span class="cls_011">+</span><span class="cls_021">C</span><span class="cls_011"> to exit the </span><span class="cls_021">oc get pods -w</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:130.00px;top:633.10px" class="cls_011"><span class="cls_011">2.4.  Expose the </span><span class="cls_021">temps</span><span class="cls_011"> service to create an external route for the application.</span></div>
<div style="position:absolute;left:119.00px;top:660.81px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc expose svc/temps</span></div>
<div style="position:absolute;left:119.00px;top:672.81px" class="cls_026"><span class="cls_026">route.route.openshift.io/temps exposed</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:507.01px;top:751.59px" class="cls_013"><span class="cls_013">211</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:183658px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background230.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:53.92px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:112.00px;top:53.98px" class="cls_011"><span class="cls_011">Verify that you can access the application in a web browser at </span><A HREF="http://">http://</A> </span></div>
<div style="position:absolute;left:112.00px;top:65.98px" class="cls_021"><span class="cls_021">temps-</span><span class="cls_028">${RHT_OCP4_DEV_USER}</span><span class="cls_021">-ocp.</span><span class="cls_028">${RHT_OCP4_WILDCARD_DOMAIN}</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:112.00px;top:88.48px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:136.70px;top:88.48px" class="cls_011"><span class="cls_011">Determine the URL for the route.</span></div>
<div style="position:absolute;left:101.00px;top:116.19px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc get route/temps</span></div>
<div style="position:absolute;left:101.00px;top:128.19px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:139.40px;top:128.19px" class="cls_026"><span class="cls_026">HOST/PORT</span></div>
<div style="position:absolute;left:101.00px;top:140.19px" class="cls_026"><span class="cls_026">temps</span></div>
<div style="position:absolute;left:139.40px;top:140.19px" class="cls_026"><span class="cls_026">temps-${RHT_OCP4_DEV_USER}-ocp.${RHT_OCP4_WILDCARD_DOMAIN}   ...</span></div>
<div style="position:absolute;left:112.00px;top:168.97px" class="cls_011"><span class="cls_011">3.2.   Verify that the temperature converter application works by opening a web browser and</span></div>
<div style="position:absolute;left:136.70px;top:180.97px" class="cls_011"><span class="cls_011">navigating to the URL displayed in the previous step.</span></div>
<div style="position:absolute;left:90.00px;top:367.59px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:90.00px;top:389.53px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab openshift-review grade</span><span class="cls_011"> command to grade your work.</span></div>
<div style="position:absolute;left:90.00px;top:401.52px" class="cls_011"><span class="cls_011">Correct any reported failures and rerun the script until successful.</span></div>
<div style="position:absolute;left:101.00px;top:429.24px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab openshift-review grade</span></div>
<div style="position:absolute;left:90.00px;top:459.58px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:481.52px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab openshift-review finish</span><span class="cls_011"> command to complete this lab.</span></div>
<div style="position:absolute;left:101.00px;top:509.24px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab openshift-review finish</span></div>
<div style="position:absolute;left:90.00px;top:537.02px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">212</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:184460px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background231.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 6 |</span><span class="cls_019"> Deploying Containerized Applications on OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:83.06px" class="cls_014"><span class="cls_014">Summary</span></div>
<div style="position:absolute;left:108.00px;top:135.98px" class="cls_011"><span class="cls_011">In this chapter, you learned:</span></div>
<div style="position:absolute;left:108.00px;top:157.47px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:117.50px;top:157.47px" class="cls_011"><span class="cls_011">OpenShift Container Platform stores definitions of each OpenShift or Kubernetes resource</span></div>
<div style="position:absolute;left:117.50px;top:169.47px" class="cls_011"><span class="cls_011">instance as an object in the cluster's distributed database service, </span><span class="cls_021">etcd</span><span class="cls_011">. Common resource</span></div>
<div style="position:absolute;left:117.50px;top:181.47px" class="cls_011"><span class="cls_011">types are: </span><span class="cls_021">Pod</span><span class="cls_011">, </span><span class="cls_021">Persistent Volume</span><span class="cls_011"> (PV), </span><span class="cls_021">Persistent Volume Claim</span><span class="cls_011"> (PVC), </span><span class="cls_021">Service</span></div>
<div style="position:absolute;left:117.50px;top:193.47px" class="cls_011"><span class="cls_011">(SVC), </span><span class="cls_021">Route</span><span class="cls_011">, </span><span class="cls_021">Deployment Configuration</span><span class="cls_011"> (DC), and </span><span class="cls_021">Build Configuration</span><span class="cls_011"> (BC).</span></div>
<div style="position:absolute;left:108.00px;top:214.97px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:117.50px;top:214.97px" class="cls_011"><span class="cls_011">Use the OpenShift command-line client </span><span class="cls_021">oc</span><span class="cls_011"> to:</span></div>
<div style="position:absolute;left:117.50px;top:236.46px" class="cls_011"><span class="cls_011">- Create, change, and delete projects.</span></div>
<div style="position:absolute;left:117.50px;top:257.96px" class="cls_011"><span class="cls_011">- Create application resources inside a project.</span></div>
<div style="position:absolute;left:117.50px;top:279.46px" class="cls_011"><span class="cls_011">- Delete, inspect, edit, and export resources inside a project.</span></div>
<div style="position:absolute;left:117.50px;top:300.96px" class="cls_011"><span class="cls_011">- Check logs from application pods, deployments, and build operations.</span></div>
<div style="position:absolute;left:108.00px;top:322.46px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:117.50px;top:322.46px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">oc new-app</span><span class="cls_011"> command can create application pods in many different ways: from an</span></div>
<div style="position:absolute;left:117.50px;top:334.45px" class="cls_011"><span class="cls_011">existing container image hosted on an image registry, from Dockerfiles, and from source code</span></div>
<div style="position:absolute;left:117.50px;top:346.45px" class="cls_011"><span class="cls_011">using the Source-to-Image (S2I) process.</span></div>
<div style="position:absolute;left:108.00px;top:367.95px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:117.50px;top:367.95px" class="cls_011"><span class="cls_011">Source-to-Image (S2I) is a tool that makes it easy to build a container image from application</span></div>
<div style="position:absolute;left:117.50px;top:379.95px" class="cls_011"><span class="cls_011">source code. This tool retrieves source code from a Git repository, injects the source code into</span></div>
<div style="position:absolute;left:117.50px;top:391.95px" class="cls_011"><span class="cls_011">a selected container image based on a desired language or technology, and produces a new</span></div>
<div style="position:absolute;left:117.50px;top:403.94px" class="cls_011"><span class="cls_011">container image that runs the assembled application.</span></div>
<div style="position:absolute;left:108.00px;top:425.44px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:117.50px;top:425.44px" class="cls_011"><span class="cls_011">A </span><span class="cls_021">Route</span><span class="cls_011"> connects a public-facing IP address and DNS host name to an internal-facing service</span></div>
<div style="position:absolute;left:117.50px;top:437.44px" class="cls_011"><span class="cls_011">IP. While services allow for network access between pods inside an OpenShift instance, routes</span></div>
<div style="position:absolute;left:117.50px;top:449.44px" class="cls_011"><span class="cls_011">allow for network access to pods from users and applications outside the OpenShift instance.</span></div>
<div style="position:absolute;left:108.00px;top:470.94px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:117.50px;top:470.94px" class="cls_011"><span class="cls_011">You can create, build, deploy and monitor applications using the OpenShift web console.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:505.09px;top:751.59px" class="cls_013"><span class="cls_013">213</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:185262px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background232.jpg" width=612 height=792></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">214</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:186064px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background233.jpg" width=612 height=792></div>
<div style="position:absolute;left:126.00px;top:69.76px" class="cls_030"><span class="cls_030">Chapter 7</span></div>
<div style="position:absolute;left:126.00px;top:148.50px" class="cls_031"><span class="cls_031">Deploying Multi-Container</span></div>
<div style="position:absolute;left:126.00px;top:175.50px" class="cls_031"><span class="cls_031">Applications</span></div>
<div style="position:absolute;left:146.00px;top:228.67px" class="cls_018"><span class="cls_018">Goal</span></div>
<div style="position:absolute;left:252.88px;top:228.01px" class="cls_008"><span class="cls_008">Deploy applications that are containerized using</span></div>
<div style="position:absolute;left:252.88px;top:240.01px" class="cls_008"><span class="cls_008">multiple container images.</span></div>
<div style="position:absolute;left:146.00px;top:268.67px" class="cls_018"><span class="cls_018">Objectives</span></div>
<div style="position:absolute;left:252.88px;top:268.01px" class="cls_008"><span class="cls_008">•  Describe considerations for containerizing</span></div>
<div style="position:absolute;left:267.88px;top:280.01px" class="cls_008"><span class="cls_008">applications with multiple container images.</span></div>
<div style="position:absolute;left:252.88px;top:296.01px" class="cls_008"><span class="cls_008">•  Deploy a multi-container application on</span></div>
<div style="position:absolute;left:267.88px;top:308.01px" class="cls_008"><span class="cls_008">OpenShift using a template.</span></div>
<div style="position:absolute;left:146.00px;top:336.67px" class="cls_018"><span class="cls_018">Sections</span></div>
<div style="position:absolute;left:252.88px;top:336.01px" class="cls_008"><span class="cls_008">•  Considerations for Multi-Container</span></div>
<div style="position:absolute;left:267.88px;top:348.01px" class="cls_008"><span class="cls_008">Applications (and Guided Exercise)</span></div>
<div style="position:absolute;left:252.88px;top:364.01px" class="cls_008"><span class="cls_008">•  Deploying a Multi-Container Application on</span></div>
<div style="position:absolute;left:267.88px;top:376.01px" class="cls_008"><span class="cls_008">OpenShift (and Guided Exercise)</span></div>
<div style="position:absolute;left:146.00px;top:404.67px" class="cls_018"><span class="cls_018">Lab</span></div>
<div style="position:absolute;left:252.88px;top:404.01px" class="cls_008"><span class="cls_008">•  Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:505.18px;top:751.59px" class="cls_013"><span class="cls_013">215</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:186866px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background234.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:90.00px;top:62.06px" class="cls_014"><span class="cls_014">Considerations for Multi-Container</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Applications</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to:</span></div>
<div style="position:absolute;left:90.00px;top:182.37px" class="cls_011"><span class="cls_011">• Describe considerations for containerizing applications with multiple container images.</span></div>
<div style="position:absolute;left:90.00px;top:205.77px" class="cls_011"><span class="cls_011">• Leverage networking concepts in containers.</span></div>
<div style="position:absolute;left:90.00px;top:229.17px" class="cls_011"><span class="cls_011">• Create a multi-container application with Podman.</span></div>
<div style="position:absolute;left:90.00px;top:252.57px" class="cls_011"><span class="cls_011">• Describe the architecture of the To Do List application.</span></div>
<div style="position:absolute;left:90.00px;top:274.85px" class="cls_024"><span class="cls_024">Leveraging Multi-Container Applications</span></div>
<div style="position:absolute;left:90.00px;top:299.57px" class="cls_011"><span class="cls_011">The examples shown so far throughout this course have worked fine with a single container. A</span></div>
<div style="position:absolute;left:90.00px;top:311.56px" class="cls_011"><span class="cls_011">more complex application, however, can get the benefits of deploying different components</span></div>
<div style="position:absolute;left:90.00px;top:323.56px" class="cls_011"><span class="cls_011">into different containers. Consider an application composed of a front-end web application, a</span></div>
<div style="position:absolute;left:90.00px;top:335.56px" class="cls_011"><span class="cls_011">REST back end, and a database server. Those components may have different dependencies,</span></div>
<div style="position:absolute;left:90.00px;top:347.56px" class="cls_011"><span class="cls_011">requirements and life cycles.</span></div>
<div style="position:absolute;left:90.00px;top:369.06px" class="cls_011"><span class="cls_011">Although it is possible to orchestrate multi-container applications' containers manually,</span></div>
<div style="position:absolute;left:90.00px;top:381.05px" class="cls_011"><span class="cls_011">Kubernetes and OpenShift provide tools to facilitate orchestration. Attempting to manually</span></div>
<div style="position:absolute;left:90.00px;top:393.05px" class="cls_011"><span class="cls_011">manage dozens or hundreds of containers quickly becomes complicated. In this section, we are</span></div>
<div style="position:absolute;left:90.00px;top:405.05px" class="cls_011"><span class="cls_011">going to return to using Podman to create a simple multi-container application to demonstrate the</span></div>
<div style="position:absolute;left:90.00px;top:417.05px" class="cls_011"><span class="cls_011">underlying manual steps for container orchestration. In later sections, you will use Kubernetes and</span></div>
<div style="position:absolute;left:90.00px;top:429.05px" class="cls_011"><span class="cls_011">OpenShift to orchestrate these same application containers.</span></div>
<div style="position:absolute;left:90.00px;top:451.33px" class="cls_024"><span class="cls_024">Discovering Services in a Multi-Container Application</span></div>
<div style="position:absolute;left:90.00px;top:476.04px" class="cls_011"><span class="cls_011">Podman uses Container Network Interface (CNI) to create a software-defined network (SDN)</span></div>
<div style="position:absolute;left:90.00px;top:488.04px" class="cls_011"><span class="cls_011">between all containers in the host. Unless stated otherwise, CNI assigns a new IP address to a</span></div>
<div style="position:absolute;left:90.00px;top:500.04px" class="cls_011"><span class="cls_011">container when it starts.</span></div>
<div style="position:absolute;left:90.00px;top:521.54px" class="cls_011"><span class="cls_011">Each container exposes all ports to other containers in the same SDN. As such, services are readily</span></div>
<div style="position:absolute;left:90.00px;top:533.54px" class="cls_011"><span class="cls_011">accessible within the same network. The containers expose ports to external networks only by</span></div>
<div style="position:absolute;left:90.00px;top:545.53px" class="cls_011"><span class="cls_011">explicit configuration.</span></div>
<div style="position:absolute;left:90.00px;top:567.03px" class="cls_011"><span class="cls_011">Due to the dynamic nature of container IP addresses, applications cannot rely on either fixed</span></div>
<div style="position:absolute;left:90.00px;top:579.03px" class="cls_011"><span class="cls_011">IP addresses or fixed DNS host names to communicate with middleware services and other</span></div>
<div style="position:absolute;left:90.00px;top:591.03px" class="cls_011"><span class="cls_011">application services. Containers with dynamic IP addresses can become a problem when working</span></div>
<div style="position:absolute;left:90.00px;top:603.03px" class="cls_011"><span class="cls_011">with multi-container applications because each container must be able to communicate with</span></div>
<div style="position:absolute;left:90.00px;top:615.02px" class="cls_011"><span class="cls_011">others to use services upon which it depends.</span></div>
<div style="position:absolute;left:90.00px;top:636.52px" class="cls_011"><span class="cls_011">For example, consider an application composed of a front-end container, a back-end container,</span></div>
<div style="position:absolute;left:90.00px;top:648.52px" class="cls_011"><span class="cls_011">and a database. The front-end container needs to retrieve the IP address of the back-end</span></div>
<div style="position:absolute;left:90.00px;top:660.52px" class="cls_011"><span class="cls_011">container. Similarly, the back-end container needs to retrieve the IP address of the database</span></div>
<div style="position:absolute;left:90.00px;top:672.52px" class="cls_011"><span class="cls_011">container. Additionally, the IP address could change if a container restarts, so a process is needed</span></div>
<div style="position:absolute;left:90.00px;top:684.51px" class="cls_011"><span class="cls_011">to ensure any change in IP triggers an update to existing containers.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">216</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:187668px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background235.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:203.64px;top:289.22px" class="cls_020"><span class="cls_020">Figure 7.1: A restart breaks three-tiered application links</span></div>
<div style="position:absolute;left:108.00px;top:312.14px" class="cls_011"><span class="cls_011">Both Kubernetes and OpenShift provide potential solutions to the issue of service discoverability</span></div>
<div style="position:absolute;left:108.00px;top:324.14px" class="cls_011"><span class="cls_011">and the dynamic nature of container networking. Some of these solutions are covered later in the</span></div>
<div style="position:absolute;left:108.00px;top:336.14px" class="cls_011"><span class="cls_011">chapter.</span></div>
<div style="position:absolute;left:108.00px;top:358.42px" class="cls_024"><span class="cls_024">Comparing Podman and Kubernetes</span></div>
<div style="position:absolute;left:108.00px;top:383.13px" class="cls_011"><span class="cls_011">Using environment variables allows you to share information between containers with Podman.</span></div>
<div style="position:absolute;left:108.00px;top:395.13px" class="cls_011"><span class="cls_011">However, there are still some limitations and some manual work involved in ensuring that all</span></div>
<div style="position:absolute;left:108.00px;top:407.13px" class="cls_011"><span class="cls_011">environment variables stay in sync, especially when working with many containers. Kubernetes</span></div>
<div style="position:absolute;left:108.00px;top:419.13px" class="cls_011"><span class="cls_011">provides an approach to solve this problem by creating services for your containers, as covered in</span></div>
<div style="position:absolute;left:108.00px;top:431.13px" class="cls_011"><span class="cls_011">previous chapters.</span></div>
<div style="position:absolute;left:108.00px;top:452.62px" class="cls_011"><span class="cls_011">Pods are attached to a Kubernetes namespace, which OpenShift calls a project. When a pod starts,</span></div>
<div style="position:absolute;left:108.00px;top:464.62px" class="cls_011"><span class="cls_011">Kubernetes automatically adds a set of environment variables for each service defined on the</span></div>
<div style="position:absolute;left:108.00px;top:476.62px" class="cls_011"><span class="cls_011">same namespace.</span></div>
<div style="position:absolute;left:108.00px;top:498.12px" class="cls_011"><span class="cls_011">Any service defined on Kubernetes generates environment variables for the IP address and</span></div>
<div style="position:absolute;left:108.00px;top:510.12px" class="cls_011"><span class="cls_011">port number where the service is available. Kubernetes automatically injects these environment</span></div>
<div style="position:absolute;left:108.00px;top:522.11px" class="cls_011"><span class="cls_011">variables into the containers from pods in the same namespace. These environment variables</span></div>
<div style="position:absolute;left:108.00px;top:534.11px" class="cls_011"><span class="cls_011">usually follow a convention:</span></div>
<div style="position:absolute;left:108.00px;top:556.67px" class="cls_011"><span class="cls_011">• Uppercase: All environment variables are set using uppercase names.</span></div>
<div style="position:absolute;left:108.00px;top:579.22px" class="cls_011"><span class="cls_011">• Snakecase: Any environment variable created by a service is usually composed of multiple words</span></div>
<div style="position:absolute;left:117.50px;top:591.22px" class="cls_011"><span class="cls_011">separated with an underscore (_).</span></div>
<div style="position:absolute;left:108.00px;top:613.77px" class="cls_011"><span class="cls_011">• Service name first: The first word for an environment variable created by a service is the service</span></div>
<div style="position:absolute;left:117.50px;top:625.77px" class="cls_011"><span class="cls_011">name.</span></div>
<div style="position:absolute;left:108.00px;top:648.32px" class="cls_011"><span class="cls_011">• Protocol type: Most network environment variables include the protocol type (TCP or UDP).</span></div>
<div style="position:absolute;left:108.00px;top:669.82px" class="cls_011"><span class="cls_011">These are the environment variables generated by Kubernetes for a service:</span></div>
<div style="position:absolute;left:108.00px;top:692.38px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:117.50px;top:692.38px" class="cls_021"><span class="cls_021">&lt;SERVICE_NAME>_SERVICE_HOST</span><span class="cls_011">: Represents the IP address enabled by a service to access</span></div>
<div style="position:absolute;left:117.50px;top:704.37px" class="cls_011"><span class="cls_011">a pod.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:505.17px;top:751.59px" class="cls_013"><span class="cls_013">217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:188470px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background236.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:90.00px;top:53.98px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:53.98px" class="cls_021"><span class="cls_021">&lt;SERVICE_NAME>_SERVICE_PORT</span><span class="cls_011">: Represents the port where the server port is listed.</span></div>
<div style="position:absolute;left:90.00px;top:76.42px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:76.42px" class="cls_021"><span class="cls_021">&lt;SERVICE_NAME>_PORT</span><span class="cls_011">: Represents the address, port, and protocol provided by the service</span></div>
<div style="position:absolute;left:99.50px;top:88.42px" class="cls_011"><span class="cls_011">for external access.</span></div>
<div style="position:absolute;left:90.00px;top:110.86px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:110.86px" class="cls_021"><span class="cls_021">&lt;SERVICE_NAME>_PORT_&lt;PORT_NUMBER>_&lt;PROTOCOL></span><span class="cls_011">: Defines an alias for the</span></div>
<div style="position:absolute;left:99.50px;top:122.86px" class="cls_021"><span class="cls_021">&lt;SERVICE_NAME>_PORT</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:145.31px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:145.31px" class="cls_021"><span class="cls_021">&lt;SERVICE_NAME>_PORT_&lt;PORT_NUMBER>_&lt;PROTOCOL>_PROTO</span><span class="cls_011">: Identifies the protocol type</span></div>
<div style="position:absolute;left:99.50px;top:157.31px" class="cls_011"><span class="cls_011">(TCP or UDP).</span></div>
<div style="position:absolute;left:90.00px;top:179.75px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:179.75px" class="cls_021"><span class="cls_021">&lt;SERVICE_NAME>_PORT_&lt;PORT_NUMBER>_&lt;PROTOCOL>_PORT</span><span class="cls_011">: Defines an alias for</span></div>
<div style="position:absolute;left:99.50px;top:191.75px" class="cls_021"><span class="cls_021">&lt;SERVICE_NAME>_SERVICE_PORT</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:214.19px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:214.19px" class="cls_021"><span class="cls_021">&lt;SERVICE_NAME>_PORT_&lt;PORT_NUMBER>_&lt;PROTOCOL>_ADDR</span><span class="cls_011">: Defines an alias for</span></div>
<div style="position:absolute;left:99.50px;top:226.19px" class="cls_021"><span class="cls_021">&lt;SERVICE_NAME>_SERVICE_HOST</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:247.69px" class="cls_011"><span class="cls_011">For instance, given the following service:</span></div>
<div style="position:absolute;left:101.00px;top:275.41px" class="cls_026"><span class="cls_026">apiVersion: v1</span></div>
<div style="position:absolute;left:101.00px;top:287.40px" class="cls_026"><span class="cls_026">kind: Service</span></div>
<div style="position:absolute;left:101.00px;top:299.40px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:110.60px;top:311.40px" class="cls_026"><span class="cls_026">labels:</span></div>
<div style="position:absolute;left:120.20px;top:323.40px" class="cls_026"><span class="cls_026">name: mysql</span></div>
<div style="position:absolute;left:110.60px;top:335.40px" class="cls_026"><span class="cls_026">name: mysql</span></div>
<div style="position:absolute;left:101.00px;top:347.39px" class="cls_026"><span class="cls_026">spec:</span></div>
<div style="position:absolute;left:110.60px;top:359.39px" class="cls_026"><span class="cls_026">ports:</span></div>
<div style="position:absolute;left:120.20px;top:371.39px" class="cls_026"><span class="cls_026">- protocol: TCP</span></div>
<div style="position:absolute;left:120.20px;top:383.39px" class="cls_026"><span class="cls_026">- port: 3306</span></div>
<div style="position:absolute;left:110.60px;top:395.39px" class="cls_026"><span class="cls_026">selector:</span></div>
<div style="position:absolute;left:120.20px;top:407.38px" class="cls_026"><span class="cls_026">name: mysql</span></div>
<div style="position:absolute;left:90.00px;top:435.16px" class="cls_011"><span class="cls_011">The following environment variables are available for each pod created after the service, on the</span></div>
<div style="position:absolute;left:90.00px;top:447.16px" class="cls_011"><span class="cls_011">same namespace:</span></div>
<div style="position:absolute;left:101.00px;top:474.88px" class="cls_026"><span class="cls_026">MYSQL_SERVICE_HOST=10.0.0.11</span></div>
<div style="position:absolute;left:101.00px;top:486.88px" class="cls_026"><span class="cls_026">MYSQL_SERVICE_PORT=3306</span></div>
<div style="position:absolute;left:101.00px;top:498.87px" class="cls_026"><span class="cls_026">MYSQL_PORT=tcp://10.0.0.11:3306</span></div>
<div style="position:absolute;left:101.00px;top:510.87px" class="cls_026"><span class="cls_026">MYSQL_PORT_3306_TCP=tcp://10.0.0.11:3306</span></div>
<div style="position:absolute;left:101.00px;top:522.87px" class="cls_026"><span class="cls_026">MYSQL_PORT_3306_TCP_PROTO=tcp</span></div>
<div style="position:absolute;left:101.00px;top:534.87px" class="cls_026"><span class="cls_026">MYSQL_PORT_3306_TCP_PORT=3306</span></div>
<div style="position:absolute;left:101.00px;top:546.87px" class="cls_026"><span class="cls_026">MYSQL_PORT_3306_TCP_ADDR=10.0.0.11</span></div>
<div style="position:absolute;left:126.00px;top:585.12px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:599.49px" class="cls_011"><span class="cls_011">Other relevant </span><span class="cls_021">&lt;SERVICE_NAME>_PORT_*</span><span class="cls_011"> environment variable names</span></div>
<div style="position:absolute;left:126.00px;top:611.49px" class="cls_011"><span class="cls_011">are set on the basis of the protocol. IP address and port number are</span></div>
<div style="position:absolute;left:126.00px;top:623.49px" class="cls_011"><span class="cls_011">set in the </span><span class="cls_021">&lt;SERVICE_NAME>_PORT</span><span class="cls_011"> environment variable. For example,</span></div>
<div style="position:absolute;left:126.00px;top:635.49px" class="cls_021"><span class="cls_021">MYSQL_PORT=tcp://10.0.0.11:3306</span><span class="cls_011"> entry leads to the creation</span></div>
<div style="position:absolute;left:126.00px;top:647.48px" class="cls_011"><span class="cls_011">of environment variables with names such as </span><span class="cls_021">MYSQL_PORT_3306_TCP</span><span class="cls_011">,</span></div>
<div style="position:absolute;left:126.00px;top:659.48px" class="cls_021"><span class="cls_021">MYSQL_PORT_3306_TCP_PROTO</span><span class="cls_011">, </span><span class="cls_021">MYSQL_PORT_3306_TCP_PORT</span><span class="cls_011">, and</span></div>
<div style="position:absolute;left:126.00px;top:671.48px" class="cls_021"><span class="cls_021">MYSQL_PORT_3306_TCP_ADDR</span><span class="cls_011">. If the protocol component of an environment</span></div>
<div style="position:absolute;left:126.00px;top:683.48px" class="cls_011"><span class="cls_011">variable is undefined, Kubernetes uses the TCP protocol and assigns the variable</span></div>
<div style="position:absolute;left:126.00px;top:695.48px" class="cls_011"><span class="cls_011">names accordingly.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">218</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:189272px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background237.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:108.00px;top:52.26px" class="cls_024"><span class="cls_024">Describing the To Do List Application</span></div>
<div style="position:absolute;left:108.00px;top:76.98px" class="cls_011"><span class="cls_011">Many labs from this course make use of a To Do List application. This application is divided into</span></div>
<div style="position:absolute;left:108.00px;top:88.97px" class="cls_011"><span class="cls_011">three tiers, as illustrated by the following figure:</span></div>
<div style="position:absolute;left:211.18px;top:403.57px" class="cls_020"><span class="cls_020">Figure 7.2: To Do List application logical architecture</span></div>
<div style="position:absolute;left:108.00px;top:426.48px" class="cls_011"><span class="cls_011">• The presentation tier is built as a single-page HTML5 front-end using AngularJS.</span></div>
<div style="position:absolute;left:108.00px;top:449.88px" class="cls_011"><span class="cls_011">• The business tier is composed by an HTTP API back-end, with Node.js.</span></div>
<div style="position:absolute;left:108.00px;top:473.28px" class="cls_011"><span class="cls_011">• The persistence tier based on a MySQL database server.</span></div>
<div style="position:absolute;left:108.00px;top:494.78px" class="cls_011"><span class="cls_011">The following figure is a screen capture of the application web interface:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.97px;top:751.59px" class="cls_013"><span class="cls_013">219</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:190074px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background238.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:223.94px;top:307.70px" class="cls_020"><span class="cls_020">Figure 7.3: The To Do List application</span></div>
<div style="position:absolute;left:90.00px;top:330.62px" class="cls_011"><span class="cls_011">On the left is a table with items to complete, and on the right is a form to add a new item.</span></div>
<div style="position:absolute;left:90.00px;top:352.11px" class="cls_011"><span class="cls_011">The classroom private registry server, </span><span class="cls_021">services.lab.example.com</span><span class="cls_011">, provides the application in</span></div>
<div style="position:absolute;left:90.00px;top:364.11px" class="cls_011"><span class="cls_011">two versions:</span></div>
<div style="position:absolute;left:90.00px;top:385.61px" class="cls_022"><span class="cls_022">nodejs</span></div>
<div style="position:absolute;left:108.00px;top:397.61px" class="cls_011"><span class="cls_011">Represents the way a typical developer would create the application as a single unit, without</span></div>
<div style="position:absolute;left:108.00px;top:409.61px" class="cls_011"><span class="cls_011">caring to break it into tiers or services.</span></div>
<div style="position:absolute;left:90.00px;top:431.11px" class="cls_022"><span class="cls_022">nodejs_api</span></div>
<div style="position:absolute;left:108.00px;top:443.10px" class="cls_011"><span class="cls_011">Shows the changes needed to break the application into presentation and business tiers. Each</span></div>
<div style="position:absolute;left:108.00px;top:455.10px" class="cls_011"><span class="cls_011">tier corresponds to an isolated container image.</span></div>
<div style="position:absolute;left:90.00px;top:476.60px" class="cls_011"><span class="cls_011">The sources of both of these application versions are available from the </span><span class="cls_021">todoapp/nodejs</span><span class="cls_011"> folder</span></div>
<div style="position:absolute;left:90.00px;top:488.60px" class="cls_011"><span class="cls_011">in the Git repository at: </span><span class="cls_021">https://github.com/RedHatTraining/DO180-apps.git</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">220</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:190876px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background239.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Deploying the Web Application and</span></div>
<div style="position:absolute;left:108.00px;top:112.56px" class="cls_014"><span class="cls_014">MySQL Containers</span></div>
<div style="position:absolute;left:120.00px;top:158.59px" class="cls_011"><span class="cls_011">In this lab, you will create a script that runs and networks a Node.js application container and</span></div>
<div style="position:absolute;left:120.00px;top:170.59px" class="cls_011"><span class="cls_011">the MySQL container.</span></div>
<div style="position:absolute;left:120.00px;top:193.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:120.00px;top:211.59px" class="cls_011"><span class="cls_011">You should be able to network containers to create a multi-tiered application.</span></div>
<div style="position:absolute;left:120.00px;top:234.65px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:120.00px;top:252.58px" class="cls_011"><span class="cls_011">You must have the To Do List application source code and lab files on </span><span class="cls_021">workstation</span><span class="cls_011">. To set</span></div>
<div style="position:absolute;left:120.00px;top:264.58px" class="cls_011"><span class="cls_011">up the environment for the exercise, run the following command:</span></div>
<div style="position:absolute;left:119.00px;top:292.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab multicontainer-design start</span></div>
<div style="position:absolute;left:119.41px;top:346.40px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:137.00px;top:346.46px" class="cls_011"><span class="cls_011">Build the MySQL image.</span></div>
<div style="position:absolute;left:137.00px;top:362.46px" class="cls_011"><span class="cls_011">A custom MySQL 5.7 image is used for this exercise. It is configured to automatically run</span></div>
<div style="position:absolute;left:137.00px;top:374.46px" class="cls_011"><span class="cls_011">any scripts in the </span><span class="cls_021">/var/lib/mysql/init</span><span class="cls_011"> directory. The scripts load the schema and</span></div>
<div style="position:absolute;left:137.00px;top:386.46px" class="cls_011"><span class="cls_011">some sample data into the database for the To Do List application when a container starts.</span></div>
<div style="position:absolute;left:137.00px;top:410.44px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:161.70px;top:410.44px" class="cls_011"><span class="cls_011">Review the Dockerfile.</span></div>
<div style="position:absolute;left:161.70px;top:426.44px" class="cls_011"><span class="cls_011">Using your preferred editor, open and examine the completed Dockerfile located at</span></div>
<div style="position:absolute;left:161.70px;top:438.44px" class="cls_021"><span class="cls_021">/home/student/DO180/labs/multicontainer-design/images/mysql/</span></div>
<div style="position:absolute;left:161.70px;top:450.44px" class="cls_021"><span class="cls_021">Dockerfile</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:137.00px;top:474.42px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:161.70px;top:474.42px" class="cls_011"><span class="cls_011">Build the MySQL database image.</span></div>
<div style="position:absolute;left:161.70px;top:490.42px" class="cls_011"><span class="cls_011">To build the base image, run the following </span><span class="cls_021">podman build</span><span class="cls_011"> script.</span></div>
<div style="position:absolute;left:119.00px;top:518.14px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd ~/DO180/labs/multicontainer-design/images/mysql</span></div>
<div style="position:absolute;left:119.00px;top:530.14px" class="cls_026"><span class="cls_026">[student@workstation mysql]$ </span><span class="cls_027">sudo podman build -t do180/mysql-57-rhel7 \</span></div>
<div style="position:absolute;left:119.00px;top:542.13px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--layers=false .</span></div>
<div style="position:absolute;left:119.00px;top:554.13px" class="cls_026"><span class="cls_026">STEP 1: FROM rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:119.00px;top:566.13px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:119.00px;top:578.13px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:590.12px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:119.00px;top:602.12px" class="cls_026"><span class="cls_026">STEP 2: ADD root /</span></div>
<div style="position:absolute;left:119.00px;top:614.12px" class="cls_026"><span class="cls_026">STEP 3: COMMIT do180/mysql-57-rhel7</span></div>
<div style="position:absolute;left:119.00px;top:626.12px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:638.12px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:119.00px;top:650.11px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:119.00px;top:662.11px" class="cls_026"><span class="cls_026">8dc1...6933</span></div>
<div style="position:absolute;left:137.00px;top:692.38px" class="cls_011"><span class="cls_011">1.3.</span></div>
<div style="position:absolute;left:161.70px;top:692.38px" class="cls_011"><span class="cls_011">This command builds a dedicated MySQL container image based on the </span><span class="cls_021">/home/</span></div>
<div style="position:absolute;left:161.70px;top:704.38px" class="cls_021"><span class="cls_021">student/DO180/labs/multicontainer-design/images/mysql</span><span class="cls_011"> context</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:505.41px;top:751.59px" class="cls_013"><span class="cls_013">221</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:191678px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background240.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:143.70px;top:53.98px" class="cls_011"><span class="cls_011">folder and the </span><span class="cls_021">Dockerfile</span><span class="cls_011"> file in it. Wait for the build to complete, and then run the</span></div>
<div style="position:absolute;left:143.70px;top:65.97px" class="cls_011"><span class="cls_011">following command to verify that the image is built successfully:</span></div>
<div style="position:absolute;left:101.00px;top:93.69px" class="cls_026"><span class="cls_026">[student@workstation mysql]$ </span><span class="cls_027">sudo podman images</span></div>
<div style="position:absolute;left:101.00px;top:105.69px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:278.60px;top:105.69px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:317.00px;top:105.69px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:384.20px;top:105.69px" class="cls_026"><span class="cls_026">CREATED</span></div>
<div style="position:absolute;left:461.00px;top:105.69px" class="cls_026"><span class="cls_026">SIZE</span></div>
<div style="position:absolute;left:101.00px;top:117.69px" class="cls_026"><span class="cls_026">localhost/do180/mysql-57-rhel7</span></div>
<div style="position:absolute;left:278.60px;top:117.69px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:317.00px;top:117.69px" class="cls_026"><span class="cls_026">8dc111531fce</span></div>
<div style="position:absolute;left:384.20px;top:117.69px" class="cls_026"><span class="cls_026">21 seconds ago</span></div>
<div style="position:absolute;left:461.00px;top:117.69px" class="cls_026"><span class="cls_026">444MB</span></div>
<div style="position:absolute;left:101.00px;top:129.68px" class="cls_026"><span class="cls_026">registry.[...]/rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:278.60px;top:129.68px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:317.00px;top:129.68px" class="cls_026"><span class="cls_026">c07bf25398f4</span></div>
<div style="position:absolute;left:384.20px;top:129.68px" class="cls_026"><span class="cls_026">4 weeks ago</span></div>
<div style="position:absolute;left:461.00px;top:129.68px" class="cls_026"><span class="cls_026">444MB</span></div>
<div style="position:absolute;left:101.41px;top:159.91px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:119.00px;top:159.97px" class="cls_011"><span class="cls_011">Build the Node.js parent image using the provided Dockerfile.</span></div>
<div style="position:absolute;left:119.00px;top:184.36px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:143.70px;top:184.36px" class="cls_011"><span class="cls_011">Review the Dockerfile.</span></div>
<div style="position:absolute;left:143.70px;top:200.36px" class="cls_011"><span class="cls_011">Using your preferred editor, open and examine the completed Dockerfile located at</span></div>
<div style="position:absolute;left:143.70px;top:212.36px" class="cls_021"><span class="cls_021">/home/student/DO180/labs/multicontainer-design/images/nodejs/</span></div>
<div style="position:absolute;left:143.70px;top:224.36px" class="cls_021"><span class="cls_021">Dockerfile</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:143.70px;top:240.36px" class="cls_011"><span class="cls_011">Notice the following instructions defined in the Dockerfile:</span></div>
<div style="position:absolute;left:143.70px;top:263.75px" class="cls_011"><span class="cls_011">• Two environment variables, </span><span class="cls_021">NODEJS_VERSION</span><span class="cls_011"> and </span><span class="cls_021">HOME</span><span class="cls_011">, are defined using the</span></div>
<div style="position:absolute;left:153.20px;top:275.75px" class="cls_021"><span class="cls_021">ENV</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:143.70px;top:299.15px" class="cls_011"><span class="cls_011">• Packages necessary for Node.js are installed with </span><span class="cls_021">yum</span><span class="cls_011"> using the </span><span class="cls_021">RUN</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:143.70px;top:322.55px" class="cls_011"><span class="cls_011">• A new user and group are created to run the Node.js application along with the</span></div>
<div style="position:absolute;left:153.20px;top:334.55px" class="cls_021"><span class="cls_021">app-root</span><span class="cls_011"> directory using the </span><span class="cls_021">RUN</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:143.70px;top:357.94px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">enable-rh-nodejs8.sh</span><span class="cls_011"> script, to run automatically at login, is added to </span><span class="cls_021">/</span></div>
<div style="position:absolute;left:153.20px;top:369.94px" class="cls_021"><span class="cls_021">etc/profile.d/</span><span class="cls_011"> with the </span><span class="cls_021">ADD</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:143.70px;top:393.34px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">USER</span><span class="cls_011"> command is used to switch to the newly created </span><span class="cls_021">appuser</span><span class="cls_011"> account.</span></div>
<div style="position:absolute;left:143.70px;top:416.74px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">WORKDIR</span><span class="cls_011"> command is used to switch to the </span><span class="cls_021">$HOME</span><span class="cls_011"> directory for application</span></div>
<div style="position:absolute;left:153.20px;top:428.74px" class="cls_011"><span class="cls_011">execution.</span></div>
<div style="position:absolute;left:119.00px;top:453.13px" class="cls_011"><span class="cls_011">2.2.   Build the parent image.</span></div>
<div style="position:absolute;left:143.70px;top:469.13px" class="cls_011"><span class="cls_011">To build the base image, run the </span><span class="cls_021">podman build</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:101.00px;top:496.85px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd ~/DO180/labs/multicontainer-design/images/nodejs</span></div>
<div style="position:absolute;left:101.00px;top:508.85px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">sudo podman build -t do180/nodejs \</span></div>
<div style="position:absolute;left:101.00px;top:520.84px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--layers=false .</span></div>
<div style="position:absolute;left:101.00px;top:532.84px" class="cls_026"><span class="cls_026">STEP 1: FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:101.00px;top:544.84px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:101.00px;top:556.84px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:568.84px" class="cls_026"><span class="cls_026">--> Finished Dependency Resolution</span></div>
<div style="position:absolute;left:101.00px;top:592.83px" class="cls_026"><span class="cls_026">Dependencies Resolved</span></div>
<div style="position:absolute;left:101.00px;top:616.83px" class="cls_026"><span class="cls_026">================================================================================</span></div>
<div style="position:absolute;left:105.80px;top:628.83px" class="cls_026"><span class="cls_026">Package</span></div>
<div style="position:absolute;left:201.80px;top:628.83px" class="cls_026"><span class="cls_026">Arch   Version</span></div>
<div style="position:absolute;left:336.20px;top:628.83px" class="cls_026"><span class="cls_026">Repository</span></div>
<div style="position:absolute;left:461.00px;top:628.83px" class="cls_026"><span class="cls_026">Size</span></div>
<div style="position:absolute;left:101.00px;top:640.82px" class="cls_026"><span class="cls_026">================================================================================</span></div>
<div style="position:absolute;left:101.00px;top:652.82px" class="cls_026"><span class="cls_026">Installing:</span></div>
<div style="position:absolute;left:110.60px;top:664.82px" class="cls_026"><span class="cls_026">make</span></div>
<div style="position:absolute;left:201.80px;top:664.82px" class="cls_026"><span class="cls_026">x86_64 1:3.82-24.el7</span></div>
<div style="position:absolute;left:336.20px;top:664.82px" class="cls_026"><span class="cls_026">ubi-7</span></div>
<div style="position:absolute;left:461.00px;top:664.82px" class="cls_026"><span class="cls_026">421 k</span></div>
<div style="position:absolute;left:110.60px;top:676.82px" class="cls_026"><span class="cls_026">rh-nodejs8</span></div>
<div style="position:absolute;left:201.80px;top:676.82px" class="cls_026"><span class="cls_026">x86_64 3.0-5.el7</span></div>
<div style="position:absolute;left:336.20px;top:676.82px" class="cls_026"><span class="cls_026">ubi-server-rhscl-7-rpms</span></div>
<div style="position:absolute;left:461.00px;top:676.82px" class="cls_026"><span class="cls_026">7.3 k</span></div>
<div style="position:absolute;left:101.00px;top:688.82px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">222</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:192480px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background241.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:119.00px;top:53.69px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:119.00px;top:65.69px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:119.00px;top:77.69px" class="cls_026"><span class="cls_026">5e61...30de</span></div>
<div style="position:absolute;left:137.00px;top:108.37px" class="cls_011"><span class="cls_011">2.3.   Wait for the build to complete, and then run the following command to verify that the</span></div>
<div style="position:absolute;left:161.70px;top:120.37px" class="cls_011"><span class="cls_011">image has been built successfully. Several columns of the </span><span class="cls_021">podman images</span><span class="cls_011"> column</span></div>
<div style="position:absolute;left:161.70px;top:132.37px" class="cls_011"><span class="cls_011">are not relevant, so you can use the </span><span class="cls_021">--format</span><span class="cls_011"> option to format the output.</span></div>
<div style="position:absolute;left:119.00px;top:160.08px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">sudo podman images \</span></div>
<div style="position:absolute;left:119.00px;top:172.08px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--format "table {{.ID}} {{.Repository}} {{.Tag}}"</span></div>
<div style="position:absolute;left:119.00px;top:184.08px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:191.00px;top:184.08px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:431.00px;top:184.08px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:119.00px;top:196.08px" class="cls_026"><span class="cls_026">5e610ea8d94a</span></div>
<div style="position:absolute;left:191.00px;top:196.08px" class="cls_026"><span class="cls_026">localhost/do180/nodejs</span></div>
<div style="position:absolute;left:431.00px;top:196.08px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:119.00px;top:208.07px" class="cls_026"><span class="cls_026">78c2e6304f23</span></div>
<div style="position:absolute;left:191.00px;top:208.07px" class="cls_026"><span class="cls_026">localhost/do180/mysql-57-rhel7</span></div>
<div style="position:absolute;left:431.00px;top:208.07px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:119.00px;top:220.07px" class="cls_026"><span class="cls_026">22ba71124135</span></div>
<div style="position:absolute;left:191.00px;top:220.07px" class="cls_026"><span class="cls_026">registry.access.redhat.com/ubi7/ubi</span></div>
<div style="position:absolute;left:431.00px;top:220.07px" class="cls_026"><span class="cls_026">7.7</span></div>
<div style="position:absolute;left:119.00px;top:232.07px" class="cls_026"><span class="cls_026">c07bf25398f4</span></div>
<div style="position:absolute;left:191.00px;top:232.07px" class="cls_026"><span class="cls_026">registry.access.redhat.com/rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:431.00px;top:232.07px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:119.41px;top:262.29px" class="cls_022"><span class="cls_022">3.</span><span class="cls_011">  Build the To Do List application child image using the provided Dockerfile.</span></div>
<div style="position:absolute;left:137.00px;top:286.75px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:161.70px;top:286.75px" class="cls_011"><span class="cls_011">Review the Dockerfile.</span></div>
<div style="position:absolute;left:161.70px;top:302.75px" class="cls_011"><span class="cls_011">Using your preferred editor, open and examine the completed Dockerfile located at</span></div>
<div style="position:absolute;left:161.70px;top:314.75px" class="cls_021"><span class="cls_021">/home/student/DO180/labs/multicontainer-design/deploy/nodejs/</span></div>
<div style="position:absolute;left:161.70px;top:326.74px" class="cls_021"><span class="cls_021">Dockerfile</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:137.00px;top:351.14px" class="cls_011"><span class="cls_011">3.2.   Explore the Environment Variables.</span></div>
<div style="position:absolute;left:161.70px;top:367.14px" class="cls_011"><span class="cls_011">Inspect the environment variables that allow the Node.js REST API container to</span></div>
<div style="position:absolute;left:161.70px;top:379.14px" class="cls_011"><span class="cls_011">communicate with the MySQL container.</span></div>
<div style="position:absolute;left:161.70px;top:402.54px" class="cls_011"><span class="cls_011">3.2.1.  View the file </span><span class="cls_021">/home/student/DO180/labs/multicontainer-design/</span></div>
<div style="position:absolute;left:186.40px;top:414.53px" class="cls_021"><span class="cls_021">deploy/nodejs/nodejs-source/models/db.js</span><span class="cls_011">, containing the database</span></div>
<div style="position:absolute;left:186.40px;top:426.53px" class="cls_011"><span class="cls_011">configuration provided below:</span></div>
<div style="position:absolute;left:119.00px;top:454.25px" class="cls_026"><span class="cls_026">module.exports.params = {</span></div>
<div style="position:absolute;left:128.60px;top:466.25px" class="cls_026"><span class="cls_026">dbname: process.env.MYSQL_DATABASE,</span></div>
<div style="position:absolute;left:128.60px;top:478.24px" class="cls_026"><span class="cls_026">username: process.env.MYSQL_USER,</span></div>
<div style="position:absolute;left:128.60px;top:490.24px" class="cls_026"><span class="cls_026">password: process.env.MYSQL_PASSWORD,</span></div>
<div style="position:absolute;left:128.60px;top:502.24px" class="cls_026"><span class="cls_026">params: {</span></div>
<div style="position:absolute;left:138.20px;top:514.24px" class="cls_026"><span class="cls_026">host: "10.88.100.101",</span></div>
<div style="position:absolute;left:138.20px;top:526.24px" class="cls_026"><span class="cls_026">port: "3306",</span></div>
<div style="position:absolute;left:138.20px;top:538.23px" class="cls_026"><span class="cls_026">dialect: 'mysql'</span></div>
<div style="position:absolute;left:128.60px;top:550.23px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:119.00px;top:562.23px" class="cls_026"><span class="cls_026">};</span></div>
<div style="position:absolute;left:161.70px;top:591.91px" class="cls_011"><span class="cls_011">3.2.2. Notice the environment variables used by the REST API. These variables are</span></div>
<div style="position:absolute;left:186.40px;top:603.91px" class="cls_011"><span class="cls_011">exposed to the container using </span><span class="cls_021">-e</span><span class="cls_011"> options with the </span><span class="cls_021">podman run</span><span class="cls_011"> command in</span></div>
<div style="position:absolute;left:186.40px;top:615.91px" class="cls_011"><span class="cls_011">this guided exercise. Those environment variables are described below.</span></div>
<div style="position:absolute;left:186.40px;top:639.30px" class="cls_022"><span class="cls_022">MYSQL_DATABASE</span></div>
<div style="position:absolute;left:204.40px;top:651.30px" class="cls_011"><span class="cls_011">The name of the MySQL database in the </span><span class="cls_021">mysql</span><span class="cls_011"> container.</span></div>
<div style="position:absolute;left:186.40px;top:674.70px" class="cls_022"><span class="cls_022">MYSQL_USER</span></div>
<div style="position:absolute;left:204.40px;top:686.70px" class="cls_011"><span class="cls_011">The name of the database user used by the </span><span class="cls_021">todoapi</span><span class="cls_011"> container to run</span></div>
<div style="position:absolute;left:204.40px;top:698.70px" class="cls_011"><span class="cls_011">MySQL commands.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.49px;top:751.59px" class="cls_013"><span class="cls_013">223</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:193282px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background242.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:168.40px;top:53.98px" class="cls_022"><span class="cls_022">MYSQL_PASSWORD</span></div>
<div style="position:absolute;left:186.40px;top:65.97px" class="cls_011"><span class="cls_011">The password of the database user that the </span><span class="cls_021">todoapi</span><span class="cls_011"> container uses to</span></div>
<div style="position:absolute;left:186.40px;top:77.97px" class="cls_011"><span class="cls_011">authenticate to the </span><span class="cls_021">mysql</span><span class="cls_011"> container.</span></div>
<div style="position:absolute;left:126.00px;top:110.89px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:125.27px" class="cls_011"><span class="cls_011">The host and port details of the MySQL container are embedded with the REST</span></div>
<div style="position:absolute;left:126.00px;top:137.27px" class="cls_011"><span class="cls_011">API application. The host, as shown above in the </span><span class="cls_021">db.js</span><span class="cls_011"> file, is the IP address of the</span></div>
<div style="position:absolute;left:126.00px;top:149.27px" class="cls_021"><span class="cls_021">mysql</span><span class="cls_011"> container.</span></div>
<div style="position:absolute;left:119.00px;top:182.56px" class="cls_011"><span class="cls_011">3.3.  Build the child image.</span></div>
<div style="position:absolute;left:143.70px;top:198.56px" class="cls_011"><span class="cls_011">Examine the </span><span class="cls_021">/home/student/DO180/labs/multicontainer-design/</span></div>
<div style="position:absolute;left:143.70px;top:210.56px" class="cls_021"><span class="cls_021">deploy/nodejs/build.sh</span><span class="cls_011"> script to see how the image is built. Run the following</span></div>
<div style="position:absolute;left:143.70px;top:222.56px" class="cls_011"><span class="cls_011">commands to build the child image.</span></div>
<div style="position:absolute;left:101.00px;top:250.27px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">cd ~/DO180/labs/multicontainer-design/deploy/nodejs</span></div>
<div style="position:absolute;left:101.00px;top:262.27px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">./build.sh</span></div>
<div style="position:absolute;left:101.00px;top:274.27px" class="cls_026"><span class="cls_026">Preparing build folder</span></div>
<div style="position:absolute;left:101.00px;top:286.27px" class="cls_026"><span class="cls_026">STEP 1: FROM do180/nodejs</span></div>
<div style="position:absolute;left:101.00px;top:298.27px" class="cls_026"><span class="cls_026">STEP 2: ARG NEXUS_BASE_URL</span></div>
<div style="position:absolute;left:101.00px;top:310.27px" class="cls_026"><span class="cls_026">STEP 3: MAINTAINER username &lt;username@example.com></span></div>
<div style="position:absolute;left:101.00px;top:322.26px" class="cls_026"><span class="cls_026">STEP 4: COPY run.sh build ${HOME}/</span></div>
<div style="position:absolute;left:101.00px;top:334.26px" class="cls_026"><span class="cls_026">STEP 5: RUN scl enable rh-nodejs8 'npm install --registry=</span><A HREF="http://$nexus_base_url/">http://$NEXUS_BASE_URL/</A> </div>
<div style="position:absolute;left:101.00px;top:346.26px" class="cls_026"><span class="cls_026">repository/nodejs/'</span></div>
<div style="position:absolute;left:101.00px;top:358.26px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:370.26px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:101.00px;top:382.25px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:101.00px;top:394.25px" class="cls_026"><span class="cls_026">2b12...6463</span></div>
<div style="position:absolute;left:126.00px;top:433.45px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:447.83px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">build.sh</span><span class="cls_011"> script lowers restrictions for write access to the build directory,</span></div>
<div style="position:absolute;left:126.00px;top:459.83px" class="cls_011"><span class="cls_011">allowing non-root users to install dependencies.</span></div>
<div style="position:absolute;left:119.00px;top:493.13px" class="cls_011"><span class="cls_011">3.4.  Wait for the build to complete and then run the following command to verify that the</span></div>
<div style="position:absolute;left:143.70px;top:505.12px" class="cls_011"><span class="cls_011">image has been built successfully:</span></div>
<div style="position:absolute;left:101.00px;top:532.84px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">sudo podman images \</span></div>
<div style="position:absolute;left:101.00px;top:544.84px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--format "table {{.ID}} {{.Repository}} {{.Tag}}"</span></div>
<div style="position:absolute;left:101.00px;top:556.84px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:173.00px;top:556.84px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:413.00px;top:556.84px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:101.00px;top:568.84px" class="cls_026"><span class="cls_026">2b127523c28e</span></div>
<div style="position:absolute;left:173.00px;top:568.84px" class="cls_026"><span class="cls_026">localhost/do180/todonodejs</span></div>
<div style="position:absolute;left:413.00px;top:568.84px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:101.00px;top:580.83px" class="cls_026"><span class="cls_026">6bf46c84a3c5</span></div>
<div style="position:absolute;left:173.00px;top:580.83px" class="cls_026"><span class="cls_026">localhost/do180/nodejs</span></div>
<div style="position:absolute;left:413.00px;top:580.83px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:101.00px;top:592.83px" class="cls_026"><span class="cls_026">fa0084527d05</span></div>
<div style="position:absolute;left:173.00px;top:592.83px" class="cls_026"><span class="cls_026">localhost/do180/mysql-57-rhel7</span></div>
<div style="position:absolute;left:413.00px;top:592.83px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:101.00px;top:604.83px" class="cls_026"><span class="cls_026">22ba71124135</span></div>
<div style="position:absolute;left:173.00px;top:604.83px" class="cls_026"><span class="cls_026">registry.access.redhat.com/ubi7/ubi</span></div>
<div style="position:absolute;left:413.00px;top:604.83px" class="cls_026"><span class="cls_026">7.7</span></div>
<div style="position:absolute;left:101.00px;top:616.83px" class="cls_026"><span class="cls_026">c07bf25398f4</span></div>
<div style="position:absolute;left:173.00px;top:616.83px" class="cls_026"><span class="cls_026">registry.access.redhat.com/rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:413.00px;top:616.83px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:101.41px;top:647.05px" class="cls_022"><span class="cls_022">4.</span><span class="cls_011">  Modify the existing script to create containers with the appropriate IP, as defined in</span></div>
<div style="position:absolute;left:119.00px;top:659.11px" class="cls_011"><span class="cls_011">the previous step. In this script, the order of commands is given such that it starts the</span></div>
<div style="position:absolute;left:119.00px;top:671.11px" class="cls_021"><span class="cls_021">mysql</span><span class="cls_011"> container and then starts the </span><span class="cls_021">todoapi</span><span class="cls_011"> container before connecting it to the</span></div>
<div style="position:absolute;left:119.00px;top:683.11px" class="cls_021"><span class="cls_021">mysql</span><span class="cls_011"> container. After invoking every container, there is a wait time of 9 seconds, so each</span></div>
<div style="position:absolute;left:119.00px;top:695.11px" class="cls_011"><span class="cls_011">container has time to start.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">224</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:194084px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background243.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:137.00px;top:54.98px" class="cls_011"><span class="cls_011">4.1.</span></div>
<div style="position:absolute;left:161.70px;top:54.98px" class="cls_011"><span class="cls_011">Edit the </span><span class="cls_021">run.sh</span><span class="cls_011"> file located at </span><span class="cls_021">/home/student/DO180/labs/multicontainer-</span></div>
<div style="position:absolute;left:161.70px;top:66.97px" class="cls_021"><span class="cls_021">design/deploy/nodejs/networked</span><span class="cls_011"> to insert the </span><span class="cls_021">podman run</span><span class="cls_011"> command at the</span></div>
<div style="position:absolute;left:161.70px;top:78.97px" class="cls_011"><span class="cls_011">appropriate line for invoking </span><span class="cls_021">mysql</span><span class="cls_011"> container. The following screen shows the exact</span></div>
<div style="position:absolute;left:161.70px;top:90.97px" class="cls_021"><span class="cls_021">podman</span><span class="cls_011"> command to insert into the file.</span></div>
<div style="position:absolute;left:119.00px;top:118.69px" class="cls_026"><span class="cls_026">sudo podman run -d --name mysql -e MYSQL_DATABASE=items -e MYSQL_USER=user1 \</span></div>
<div style="position:absolute;left:119.00px;top:130.68px" class="cls_026"><span class="cls_026">-e MYSQL_PASSWORD=mypa55 -e MYSQL_ROOT_PASSWORD=r00tpa55 \</span></div>
<div style="position:absolute;left:119.00px;top:142.68px" class="cls_026"><span class="cls_026">-v $PWD/work/data:/var/lib/mysql/data \</span></div>
<div style="position:absolute;left:119.00px;top:154.68px" class="cls_026"><span class="cls_026">-v $PWD/work/init:/var/lib/mysql/init -p 30306:3306 \</span></div>
<div style="position:absolute;left:119.00px;top:166.68px" class="cls_026"><span class="cls_026">--ip 10.88.100.101 do180/mysql-57-rhel7</span></div>
<div style="position:absolute;left:161.70px;top:188.96px" class="cls_011"><span class="cls_011">In the previous command, the </span><span class="cls_021">MYSQL_DATABASE</span><span class="cls_011">, </span><span class="cls_021">MYSQL_USER</span><span class="cls_011">, and</span></div>
<div style="position:absolute;left:161.70px;top:200.96px" class="cls_021"><span class="cls_021">MYSQL_PASSWORD</span><span class="cls_011"> are populated with the credentials to access the MySQL</span></div>
<div style="position:absolute;left:161.70px;top:212.95px" class="cls_011"><span class="cls_011">database. These environment variables are required for the </span><span class="cls_021">mysql</span><span class="cls_011"> container to run.</span></div>
<div style="position:absolute;left:161.70px;top:224.95px" class="cls_011"><span class="cls_011">Also, the </span><span class="cls_021">$PWD/work/data</span><span class="cls_011"> and </span><span class="cls_021">$PWD/work/init</span><span class="cls_011"> local folders are mounted as</span></div>
<div style="position:absolute;left:161.70px;top:236.95px" class="cls_011"><span class="cls_011">volumes into the container's file system.</span></div>
<div style="position:absolute;left:161.70px;top:252.95px" class="cls_011"><span class="cls_011">Note the IP assigned to the container. This IP should be the same as the one provided</span></div>
<div style="position:absolute;left:161.70px;top:264.95px" class="cls_011"><span class="cls_011">in the </span><span class="cls_021">/home/student/DO180/labs/multicontainer-design/deploy/</span></div>
<div style="position:absolute;left:161.70px;top:276.94px" class="cls_021"><span class="cls_021">nodejs/nodejs-source/models/db.js</span><span class="cls_011"> file.</span></div>
<div style="position:absolute;left:137.00px;top:301.34px" class="cls_011"><span class="cls_011">4.2.  In the same </span><span class="cls_021">run.sh</span><span class="cls_011"> file, insert another </span><span class="cls_021">podman run</span><span class="cls_011"> command at the appropriate</span></div>
<div style="position:absolute;left:161.70px;top:313.34px" class="cls_011"><span class="cls_011">line to run the </span><span class="cls_021">todoapi</span><span class="cls_011"> container. The following screen shows the </span><span class="cls_021">docker</span><span class="cls_011"> command</span></div>
<div style="position:absolute;left:161.70px;top:325.34px" class="cls_011"><span class="cls_011">to insert into the file.</span></div>
<div style="position:absolute;left:119.00px;top:353.05px" class="cls_026"><span class="cls_026">sudo podman run -d --name todoapi -e MYSQL_DATABASE=items -e MYSQL_USER=user1 \</span></div>
<div style="position:absolute;left:119.00px;top:365.05px" class="cls_026"><span class="cls_026">-e MYSQL_PASSWORD=mypa55 -p 30080:30080 \</span></div>
<div style="position:absolute;left:119.00px;top:377.05px" class="cls_026"><span class="cls_026">do180/todonodejs</span></div>
<div style="position:absolute;left:144.00px;top:416.25px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:430.63px" class="cls_011"><span class="cls_011">After each </span><span class="cls_021">podman run</span><span class="cls_011"> command inserted into the </span><span class="cls_021">run.sh</span><span class="cls_011"> script, ensure that</span></div>
<div style="position:absolute;left:144.00px;top:442.63px" class="cls_011"><span class="cls_011">there is also a </span><span class="cls_021">sleep 9</span><span class="cls_011"> command. If you need to repeat this step, the </span><span class="cls_021">work</span></div>
<div style="position:absolute;left:144.00px;top:454.63px" class="cls_011"><span class="cls_011">directory and its contents must be deleted before re-running the </span><span class="cls_021">run.sh</span><span class="cls_011"> script.</span></div>
<div style="position:absolute;left:137.00px;top:487.92px" class="cls_011"><span class="cls_011">4.3.  Verify that your </span><span class="cls_021">run.sh</span><span class="cls_011"> script matches the solution script located at </span><span class="cls_021">/home/</span></div>
<div style="position:absolute;left:161.70px;top:499.92px" class="cls_021"><span class="cls_021">student/DO180/solutions/multicontainer-design/deploy/nodejs/</span></div>
<div style="position:absolute;left:161.70px;top:511.92px" class="cls_021"><span class="cls_021">networked/run.sh</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:137.00px;top:536.32px" class="cls_011"><span class="cls_011">4.4.  Save the file and exit the editor.</span></div>
<div style="position:absolute;left:119.41px;top:560.26px" class="cls_022"><span class="cls_022">5.</span><span class="cls_011">  Run the containers.</span></div>
<div style="position:absolute;left:137.00px;top:584.72px" class="cls_011"><span class="cls_011">5.1.</span></div>
<div style="position:absolute;left:161.70px;top:584.72px" class="cls_011"><span class="cls_011">Use the following command to execute the script that you updated to run the </span><span class="cls_021">mysql</span></div>
<div style="position:absolute;left:161.70px;top:596.71px" class="cls_011"><span class="cls_011">and </span><span class="cls_021">todoapi</span><span class="cls_011"> containers.</span></div>
<div style="position:absolute;left:119.00px;top:624.43px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">cd \</span></div>
<div style="position:absolute;left:119.00px;top:636.43px" class="cls_027"><span class="cls_027">/home/student/DO180/labs/multicontainer-design/deploy/nodejs/networked</span></div>
<div style="position:absolute;left:119.00px;top:648.43px" class="cls_026"><span class="cls_026">[student@workstation networked]$ </span><span class="cls_027">./run.sh</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.58px;top:751.59px" class="cls_013"><span class="cls_013">225</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:194886px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background244.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:126.00px;top:63.50px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:77.88px" class="cls_011"><span class="cls_011">It is possible that the IP selected for the container (10.88.100.101) is already reserved</span></div>
<div style="position:absolute;left:126.00px;top:89.87px" class="cls_011"><span class="cls_011">for another container, even if that container was already deleted. In this case,</span></div>
<div style="position:absolute;left:126.00px;top:101.87px" class="cls_011"><span class="cls_011">delete the </span><span class="cls_021">todonodejs</span><span class="cls_011"> image and container before creating an updated one with</span></div>
<div style="position:absolute;left:126.00px;top:113.87px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">sudo podman rmi -f todonodejs</span><span class="cls_011"> command. Then delete the MySQL</span></div>
<div style="position:absolute;left:126.00px;top:125.87px" class="cls_011"><span class="cls_011">container with the </span><span class="cls_021">sudo podman rm -f mysql</span><span class="cls_011"> command. Afterwards, return to</span></div>
<div style="position:absolute;left:126.00px;top:137.87px" class="cls_011"><span class="cls_011">step 3, and update both </span><span class="cls_021">db.js</span><span class="cls_011"> and </span><span class="cls_021">run.sh</span><span class="cls_011"> with another available IP.</span></div>
<div style="position:absolute;left:119.00px;top:171.16px" class="cls_011"><span class="cls_011">5.2.   Verify that the containers started successfully.</span></div>
<div style="position:absolute;left:101.00px;top:198.88px" class="cls_026"><span class="cls_026">[student@workstation networked]$ </span><span class="cls_027">sudo podman ps \</span></div>
<div style="position:absolute;left:101.00px;top:210.88px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--format="table {{.ID}} {{.Names}} {{.Image}} {{.Status}}"</span></div>
<div style="position:absolute;left:101.00px;top:222.88px" class="cls_026"><span class="cls_026">ID</span></div>
<div style="position:absolute;left:168.20px;top:222.88px" class="cls_026"><span class="cls_026">Names</span></div>
<div style="position:absolute;left:211.40px;top:222.88px" class="cls_026"><span class="cls_026">Image</span></div>
<div style="position:absolute;left:398.60px;top:222.88px" class="cls_026"><span class="cls_026">Status</span></div>
<div style="position:absolute;left:101.00px;top:234.88px" class="cls_026"><span class="cls_026">c74b4709e3ae</span></div>
<div style="position:absolute;left:168.20px;top:234.88px" class="cls_026"><span class="cls_026">todoapi</span></div>
<div style="position:absolute;left:211.40px;top:234.88px" class="cls_026"><span class="cls_026">localhost/do180/todonodejs:latest</span></div>
<div style="position:absolute;left:398.60px;top:234.88px" class="cls_026"><span class="cls_026">Up 3 minutes ago</span></div>
<div style="position:absolute;left:101.00px;top:246.87px" class="cls_026"><span class="cls_026">3bc19f74254c</span></div>
<div style="position:absolute;left:168.20px;top:246.87px" class="cls_026"><span class="cls_026">mysql</span></div>
<div style="position:absolute;left:211.40px;top:246.87px" class="cls_026"><span class="cls_026">localhost/do180/mysql-57-rhel7:latest</span></div>
<div style="position:absolute;left:398.60px;top:246.87px" class="cls_026"><span class="cls_026">Up 3 minutes ago</span></div>
<div style="position:absolute;left:101.41px;top:277.10px" class="cls_022"><span class="cls_022">6.</span><span class="cls_011">  Examine the environment variables of the API container.</span></div>
<div style="position:absolute;left:119.00px;top:293.15px" class="cls_011"><span class="cls_011">Run the following command to explore the environment variables exposed in the API</span></div>
<div style="position:absolute;left:119.00px;top:305.15px" class="cls_011"><span class="cls_011">container.</span></div>
<div style="position:absolute;left:101.00px;top:332.87px" class="cls_026"><span class="cls_026">[student@workstation networked]$ </span><span class="cls_027">sudo podman exec -it todoapi env</span></div>
<div style="position:absolute;left:101.00px;top:344.87px" class="cls_026"><span class="cls_026">PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</span></div>
<div style="position:absolute;left:101.00px;top:356.87px" class="cls_026"><span class="cls_026">TERM=xterm</span></div>
<div style="position:absolute;left:101.00px;top:368.87px" class="cls_026"><span class="cls_026">HOSTNAME=</span></div>
<div style="position:absolute;left:101.00px;top:380.87px" class="cls_026"><span class="cls_026">container=oci</span></div>
<div style="position:absolute;left:101.00px;top:392.87px" class="cls_026"><span class="cls_026">NODEJS_VERSION=8.0</span></div>
<div style="position:absolute;left:101.00px;top:404.87px" class="cls_026"><span class="cls_026">HOME=/opt/app-root/src</span></div>
<div style="position:absolute;left:101.00px;top:416.87px" class="cls_026"><span class="cls_026">MYSQL_DATABASE=items</span></div>
<div style="position:absolute;left:101.00px;top:428.87px" class="cls_026"><span class="cls_026">MYSQL_USER=user1</span></div>
<div style="position:absolute;left:101.00px;top:440.87px" class="cls_026"><span class="cls_026">MYSQL_PASSWORD=mypa55</span></div>
<div style="position:absolute;left:101.41px;top:471.10px" class="cls_022"><span class="cls_022">7.</span><span class="cls_011">   Test the application.</span></div>
<div style="position:absolute;left:119.00px;top:495.55px" class="cls_011"><span class="cls_011">7.1.</span></div>
<div style="position:absolute;left:143.70px;top:495.55px" class="cls_011"><span class="cls_011">Run a </span><span class="cls_021">curl</span><span class="cls_011"> command to test the REST API for the To Do List application.</span></div>
<div style="position:absolute;left:101.00px;top:523.27px" class="cls_026"><span class="cls_026">[student@workstation networked]$ </span><span class="cls_027">curl -w "\n" \</span></div>
<div style="position:absolute;left:101.00px;top:535.27px" class="cls_026"><span class="cls_026">> </span><A HREF="http://127.0.0.1:30080/todo/api/items/1/">http://127.0.0.1:30080/todo/api/items/1</A> </span></div>
<div style="position:absolute;left:101.00px;top:547.26px" class="cls_026"><span class="cls_026">{"id":1,"description":"Pick up newspaper","done":false}</span></div>
<div style="position:absolute;left:143.70px;top:569.54px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">-w "\n"</span><span class="cls_011"> option with </span><span class="cls_021">curl</span><span class="cls_011"> command lets the shell prompt appear at the next</span></div>
<div style="position:absolute;left:143.70px;top:581.54px" class="cls_011"><span class="cls_011">line rather than merging with the output in the same line.</span></div>
<div style="position:absolute;left:119.00px;top:605.94px" class="cls_011"><span class="cls_011">7.2.   Open Firefox on </span><span class="cls_021">workstation</span><span class="cls_011"> and point your browser to</span></div>
<div style="position:absolute;left:143.70px;top:617.94px" class="cls_021"><span class="cls_021">http://127.0.0.1:30080/todo/</span><span class="cls_011">. You should see the To Do List application.</span></div>
<div style="position:absolute;left:126.00px;top:650.86px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:665.24px" class="cls_011"><span class="cls_011">Make sure to append the trailing slash (/).</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">226</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:195688px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background245.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:108.00px;top:52.04px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:108.00px;top:73.98px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab multicontainer-design finish</span><span class="cls_011"> script to complete this</span></div>
<div style="position:absolute;left:108.00px;top:85.97px" class="cls_011"><span class="cls_011">exercise.</span></div>
<div style="position:absolute;left:119.00px;top:113.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab multicontainer-design finish</span></div>
<div style="position:absolute;left:108.00px;top:141.47px" class="cls_011"><span class="cls_011">This concludes the guided exercise.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.58px;top:751.59px" class="cls_013"><span class="cls_013">227</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:196490px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background246.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:90.00px;top:62.06px" class="cls_014"><span class="cls_014">Deploying a Multi-Container Application</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">on OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, students should be able to deploy a multicontainer application on</span></div>
<div style="position:absolute;left:90.00px;top:170.97px" class="cls_011"><span class="cls_011">OpenShift using a template.</span></div>
<div style="position:absolute;left:90.00px;top:193.26px" class="cls_024"><span class="cls_024">Examining the Skeleton of a Template</span></div>
<div style="position:absolute;left:90.00px;top:217.97px" class="cls_011"><span class="cls_011">Deploying an application on OpenShift Container Platform often requires creating several</span></div>
<div style="position:absolute;left:90.00px;top:229.97px" class="cls_011"><span class="cls_011">related resources within a Project. For example, a web application may require a </span><span class="cls_021">BuildConfig</span><span class="cls_011">,</span></div>
<div style="position:absolute;left:90.00px;top:241.97px" class="cls_021"><span class="cls_021">DeploymentConfig</span><span class="cls_011">, </span><span class="cls_021">Service</span><span class="cls_011">, and </span><span class="cls_021">Route</span><span class="cls_011"> resource to run in an OpenShift project. Often the</span></div>
<div style="position:absolute;left:90.00px;top:253.97px" class="cls_011"><span class="cls_011">attributes of these resources have the same value, such as a resource's name attribute.</span></div>
<div style="position:absolute;left:90.00px;top:275.46px" class="cls_011"><span class="cls_011">OpenShift templates provide a way to simplify the creation of resources that an application</span></div>
<div style="position:absolute;left:90.00px;top:287.46px" class="cls_011"><span class="cls_011">requires. A template defines a set of related resources to be created together, as well as a set of</span></div>
<div style="position:absolute;left:90.00px;top:299.46px" class="cls_011"><span class="cls_011">application parameters. The attributes of template resources are typically defined in terms of the</span></div>
<div style="position:absolute;left:90.00px;top:311.46px" class="cls_011"><span class="cls_011">template parameters, such as a resource's name attribute.</span></div>
<div style="position:absolute;left:90.00px;top:332.96px" class="cls_011"><span class="cls_011">For example, an application might consist of a front-end web application and a database server.</span></div>
<div style="position:absolute;left:90.00px;top:344.95px" class="cls_011"><span class="cls_011">Each consists of a service resource and a deployment configuration resource. They share a set</span></div>
<div style="position:absolute;left:90.00px;top:356.95px" class="cls_011"><span class="cls_011">of credentials (parameters) for the front end to authenticate to the back end. The template</span></div>
<div style="position:absolute;left:90.00px;top:368.95px" class="cls_011"><span class="cls_011">can be processed by specifying parameters or by allowing them to be automatically generated</span></div>
<div style="position:absolute;left:90.00px;top:380.95px" class="cls_011"><span class="cls_011">(for example, for a unique database password) in order to instantiate the list of resources in the</span></div>
<div style="position:absolute;left:90.00px;top:392.95px" class="cls_011"><span class="cls_011">template as a cohesive application.</span></div>
<div style="position:absolute;left:90.00px;top:414.44px" class="cls_011"><span class="cls_011">The OpenShift installer creates several templates by default in the </span><span class="cls_021">openshift</span><span class="cls_011"> namespace. Run</span></div>
<div style="position:absolute;left:90.00px;top:426.44px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">oc get templates</span><span class="cls_011"> command with the </span><span class="cls_021">-n openshift</span><span class="cls_011"> option to list these preinstalled</span></div>
<div style="position:absolute;left:90.00px;top:438.44px" class="cls_011"><span class="cls_011">templates:</span></div>
<div style="position:absolute;left:101.00px;top:466.16px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc get templates -n openshift</span></div>
<div style="position:absolute;left:101.00px;top:478.15px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:225.80px;top:478.15px" class="cls_026"><span class="cls_026">DESCRIPTION</span></div>
<div style="position:absolute;left:101.00px;top:490.15px" class="cls_026"><span class="cls_026">cakephp-mysql-example</span></div>
<div style="position:absolute;left:225.80px;top:490.15px" class="cls_026"><span class="cls_026">An example CakePHP application ...</span></div>
<div style="position:absolute;left:101.00px;top:502.15px" class="cls_026"><span class="cls_026">cakephp-mysql-persistent</span></div>
<div style="position:absolute;left:225.80px;top:502.15px" class="cls_026"><span class="cls_026">An example CakePHP application ...</span></div>
<div style="position:absolute;left:101.00px;top:514.15px" class="cls_026"><span class="cls_026">dancer-mysql-example</span></div>
<div style="position:absolute;left:225.80px;top:514.15px" class="cls_026"><span class="cls_026">An example Dancer application with a MySQL ...</span></div>
<div style="position:absolute;left:101.00px;top:526.15px" class="cls_026"><span class="cls_026">dancer-mysql-persistent</span></div>
<div style="position:absolute;left:225.80px;top:526.15px" class="cls_026"><span class="cls_026">An example Dancer application with a MySQL ...</span></div>
<div style="position:absolute;left:101.00px;top:538.15px" class="cls_026"><span class="cls_026">django-psql-example</span></div>
<div style="position:absolute;left:225.80px;top:538.15px" class="cls_026"><span class="cls_026">An example Django application with a PostgreSQL ...</span></div>
<div style="position:absolute;left:101.00px;top:550.14px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:562.14px" class="cls_026"><span class="cls_026">rails-pgsql-persistent</span></div>
<div style="position:absolute;left:225.80px;top:562.14px" class="cls_026"><span class="cls_026">An example Rails application with a PostgreSQL ...</span></div>
<div style="position:absolute;left:101.00px;top:574.14px" class="cls_026"><span class="cls_026">rails-postgresql-example</span></div>
<div style="position:absolute;left:225.80px;top:574.14px" class="cls_026"><span class="cls_026">An example Rails application with a PostgreSQL ...</span></div>
<div style="position:absolute;left:101.00px;top:586.14px" class="cls_026"><span class="cls_026">redis-ephemeral</span></div>
<div style="position:absolute;left:225.80px;top:586.14px" class="cls_026"><span class="cls_026">Redis in-memory data structure store, ...</span></div>
<div style="position:absolute;left:101.00px;top:598.14px" class="cls_026"><span class="cls_026">redis-persistent</span></div>
<div style="position:absolute;left:225.80px;top:598.14px" class="cls_026"><span class="cls_026">Redis in-memory data structure store, ...</span></div>
<div style="position:absolute;left:90.00px;top:625.91px" class="cls_011"><span class="cls_011">The following shows a YAML template definition:</span></div>
<div style="position:absolute;left:101.00px;top:653.63px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc get template mysql-persistent -n openshift -o yaml</span></div>
<div style="position:absolute;left:101.00px;top:665.63px" class="cls_026"><span class="cls_026">apiVersion: template.openshift.io/v1</span></div>
<div style="position:absolute;left:101.00px;top:677.63px" class="cls_026"><span class="cls_026">kind: Template</span></div>
<div style="position:absolute;left:101.00px;top:689.63px" class="cls_026"><span class="cls_026">labels: </span><span class="cls_029">...value omitted...</span></div>
<div style="position:absolute;left:101.00px;top:701.62px" class="cls_026"><span class="cls_026">message: </span><span class="cls_029">...message omitted ...</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">228</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:197292px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background247.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:119.00px;top:53.69px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:128.60px;top:65.69px" class="cls_026"><span class="cls_026">annotations:</span></div>
<div style="position:absolute;left:138.20px;top:77.69px" class="cls_026"><span class="cls_026">description: </span><span class="cls_029">...description omitted...</span></div>
<div style="position:absolute;left:138.20px;top:89.69px" class="cls_026"><span class="cls_026">iconClass: icon-mysql-database</span></div>
<div style="position:absolute;left:138.20px;top:101.69px" class="cls_026"><span class="cls_026">openshift.io/display-name: MySQL</span></div>
<div style="position:absolute;left:138.20px;top:113.68px" class="cls_026"><span class="cls_026">openshift.io/documentation-url: </span><span class="cls_029">...value omitted...</span></div>
<div style="position:absolute;left:138.20px;top:125.68px" class="cls_026"><span class="cls_026">openshift.io/long-description: </span><span class="cls_029">...value omitted...</span></div>
<div style="position:absolute;left:138.20px;top:137.68px" class="cls_026"><span class="cls_026">openshift.io/provider-display-name: Red Hat, Inc.</span></div>
<div style="position:absolute;left:138.20px;top:149.68px" class="cls_026"><span class="cls_026">openshift.io/support-url: </span><A HREF="https://access.redhat.com/">https://access.redhat.com</A> </div>
<div style="position:absolute;left:138.20px;top:161.68px" class="cls_026"><span class="cls_026">tags: database,mysql</span></div>
<div style="position:absolute;left:128.60px;top:173.68px" class="cls_026"><span class="cls_026">labels: </span><span class="cls_029">...value omitted...</span></div>
<div style="position:absolute;left:128.60px;top:185.67px" class="cls_026"><span class="cls_026">name: mysql-persistent</span></div>
<div style="position:absolute;left:119.00px;top:197.67px" class="cls_026"><span class="cls_026">objects:</span></div>
<div style="position:absolute;left:119.00px;top:209.67px" class="cls_026"><span class="cls_026">- apiVersion: v1</span></div>
<div style="position:absolute;left:128.60px;top:221.67px" class="cls_026"><span class="cls_026">kind: Secret</span></div>
<div style="position:absolute;left:128.60px;top:233.66px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:138.20px;top:245.66px" class="cls_026"><span class="cls_026">annotations: </span><span class="cls_029">...annotations omitted...</span></div>
<div style="position:absolute;left:138.20px;top:257.66px" class="cls_026"><span class="cls_026">name: ${DATABASE_SERVICE_NAME}</span></div>
<div style="position:absolute;left:128.60px;top:269.66px" class="cls_026"><span class="cls_026">stringData: </span><span class="cls_029">...stringData omitted...</span></div>
<div style="position:absolute;left:119.00px;top:281.66px" class="cls_026"><span class="cls_026">- apiVersion: v1</span></div>
<div style="position:absolute;left:128.60px;top:293.65px" class="cls_026"><span class="cls_026">kind: Service</span></div>
<div style="position:absolute;left:128.60px;top:305.65px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:138.20px;top:317.65px" class="cls_026"><span class="cls_026">annotations: </span><span class="cls_029">...annotations omitted...</span></div>
<div style="position:absolute;left:138.20px;top:329.65px" class="cls_026"><span class="cls_026">name: ${DATABASE_SERVICE_NAME}</span></div>
<div style="position:absolute;left:128.60px;top:341.65px" class="cls_026"><span class="cls_026">spec: </span><span class="cls_029">...spec omitted...</span></div>
<div style="position:absolute;left:119.00px;top:353.64px" class="cls_026"><span class="cls_026">- apiVersion: v1</span></div>
<div style="position:absolute;left:128.60px;top:365.64px" class="cls_026"><span class="cls_026">kind: PersistentVolumeClaim</span></div>
<div style="position:absolute;left:128.60px;top:377.64px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:138.20px;top:389.64px" class="cls_026"><span class="cls_026">name: ${DATABASE_SERVICE_NAME}</span></div>
<div style="position:absolute;left:128.60px;top:401.64px" class="cls_026"><span class="cls_026">spec: </span><span class="cls_029">...spec omitted...</span></div>
<div style="position:absolute;left:119.00px;top:413.64px" class="cls_026"><span class="cls_026">- apiVersion: v1</span></div>
<div style="position:absolute;left:128.60px;top:425.63px" class="cls_026"><span class="cls_026">kind: DeploymentConfig</span></div>
<div style="position:absolute;left:128.60px;top:437.63px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:138.20px;top:449.63px" class="cls_026"><span class="cls_026">annotations: </span><span class="cls_029">...annotations omitted...</span></div>
<div style="position:absolute;left:138.20px;top:461.63px" class="cls_026"><span class="cls_026">name: ${DATABASE_SERVICE_NAME}</span></div>
<div style="position:absolute;left:128.60px;top:473.63px" class="cls_026"><span class="cls_026">spec: </span><span class="cls_029">...spec omitted...</span></div>
<div style="position:absolute;left:119.00px;top:485.62px" class="cls_026"><span class="cls_026">parameters:</span></div>
<div style="position:absolute;left:119.00px;top:497.62px" class="cls_026"><span class="cls_026">- </span><span class="cls_029">...MEMORY_LIMIT parameter omitted...</span></div>
<div style="position:absolute;left:119.00px;top:509.62px" class="cls_026"><span class="cls_026">- </span><span class="cls_029">...NAMESPACE parameter omitted...</span></div>
<div style="position:absolute;left:119.00px;top:521.62px" class="cls_026"><span class="cls_026">- description: The name of the OpenShift Service exposed for the database.</span></div>
<div style="position:absolute;left:128.60px;top:533.61px" class="cls_026"><span class="cls_026">displayName: Database Service Name</span></div>
<div style="position:absolute;left:128.60px;top:545.61px" class="cls_026"><span class="cls_026">name: DATABASE_SERVICE_NAME</span></div>
<div style="position:absolute;left:128.60px;top:557.61px" class="cls_026"><span class="cls_026">required: true</span></div>
<div style="position:absolute;left:128.60px;top:569.61px" class="cls_026"><span class="cls_026">value: mysql</span></div>
<div style="position:absolute;left:119.00px;top:581.61px" class="cls_026"><span class="cls_026">- </span><span class="cls_029">...MYSQL_USER parameter omitted...</span></div>
<div style="position:absolute;left:119.00px;top:593.60px" class="cls_026"><span class="cls_026">- description: Password for the MySQL connection user.</span></div>
<div style="position:absolute;left:128.60px;top:605.60px" class="cls_026"><span class="cls_026">displayName: MySQL Connection Password</span></div>
<div style="position:absolute;left:128.60px;top:617.60px" class="cls_026"><span class="cls_026">from: '[a-zA-Z0-9]{16}'</span></div>
<div style="position:absolute;left:128.60px;top:629.60px" class="cls_026"><span class="cls_026">generate: expression</span></div>
<div style="position:absolute;left:128.60px;top:641.60px" class="cls_026"><span class="cls_026">name: MYSQL_PASSWORD</span></div>
<div style="position:absolute;left:128.60px;top:653.59px" class="cls_026"><span class="cls_026">required: true</span></div>
<div style="position:absolute;left:119.00px;top:665.59px" class="cls_026"><span class="cls_026">- </span><span class="cls_029">...MYSQL_ROOT_PASSWORD parameter omitted...</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.37px;top:751.59px" class="cls_013"><span class="cls_013">229</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:198094px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background248.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:101.00px;top:53.69px" class="cls_026"><span class="cls_026">- </span><span class="cls_029">...MYSQL_DATABASE parameter omitted...</span></div>
<div style="position:absolute;left:101.00px;top:65.69px" class="cls_026"><span class="cls_026">- </span><span class="cls_029">...VOLUME_CAPACITY parameter omitted...</span></div>
<div style="position:absolute;left:101.00px;top:77.69px" class="cls_026"><span class="cls_026">- </span><span class="cls_029">...MYSQL_VERSION parameter omitted...</span></div>
<div style="position:absolute;left:110.90px;top:107.37px" class="cls_011"><span class="cls_011">Defines a list of arbitrary tags to associate with this template. Enter any of these tags in the</span></div>
<div style="position:absolute;left:110.90px;top:119.37px" class="cls_011"><span class="cls_011">UI to find this template.</span></div>
<div style="position:absolute;left:110.90px;top:131.37px" class="cls_011"><span class="cls_011">Defines the template name.</span></div>
<div style="position:absolute;left:110.90px;top:143.81px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">objects</span><span class="cls_011"> section defines the list of OpenShift resources for this template. This</span></div>
<div style="position:absolute;left:110.90px;top:155.80px" class="cls_011"><span class="cls_011">template creates four resources: a </span><span class="cls_021">Secret</span><span class="cls_011">, a </span><span class="cls_021">Service</span><span class="cls_011">, a </span><span class="cls_021">PersistentVolumeClaim</span><span class="cls_011">, and a</span></div>
<div style="position:absolute;left:110.90px;top:167.80px" class="cls_021"><span class="cls_021">DeploymentConfig</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:110.90px;top:179.80px" class="cls_011"><span class="cls_011">All four resource objects have their names set to the value of the</span></div>
<div style="position:absolute;left:110.90px;top:191.80px" class="cls_021"><span class="cls_021">DATABASE_SERVICE_NAME</span><span class="cls_011"> parameter.</span></div>
<div style="position:absolute;left:110.90px;top:203.80px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">parameters</span><span class="cls_011"> section contains a list of nine parameters. Template resources often</span></div>
<div style="position:absolute;left:110.90px;top:215.79px" class="cls_011"><span class="cls_011">define their attributes using the values of these parameters, as demonstrated with the</span></div>
<div style="position:absolute;left:110.90px;top:227.79px" class="cls_021"><span class="cls_021">DATABASE_SERVICE_NAME</span><span class="cls_011"> parameter.</span></div>
<div style="position:absolute;left:110.90px;top:239.79px" class="cls_011"><span class="cls_011">If you do not specify a value for the </span><span class="cls_021">MYSQL_PASSWORD</span><span class="cls_011"> parameter when you create an</span></div>
<div style="position:absolute;left:110.90px;top:251.79px" class="cls_011"><span class="cls_011">application with this template, OpenShift generates a password that matches this regular</span></div>
<div style="position:absolute;left:110.90px;top:263.79px" class="cls_011"><span class="cls_011">expression.</span></div>
<div style="position:absolute;left:90.00px;top:285.29px" class="cls_011"><span class="cls_011">You can publish a new template to the OpenShift cluster so that other developers can build an</span></div>
<div style="position:absolute;left:90.00px;top:297.28px" class="cls_011"><span class="cls_011">application from the template.</span></div>
<div style="position:absolute;left:90.00px;top:318.78px" class="cls_011"><span class="cls_011">Assume you have an task list application named </span><span class="cls_021">todo</span><span class="cls_011"> that requires an OpenShift</span></div>
<div style="position:absolute;left:90.00px;top:330.78px" class="cls_021"><span class="cls_021">DeploymentConfig</span><span class="cls_011">, </span><span class="cls_021">Service</span><span class="cls_011">, and </span><span class="cls_021">Route</span><span class="cls_011"> object for deployment. You create a YAML template</span></div>
<div style="position:absolute;left:90.00px;top:342.78px" class="cls_011"><span class="cls_011">definition file that defines attributes for these OpenShift resources, along with definitions for any</span></div>
<div style="position:absolute;left:90.00px;top:354.77px" class="cls_011"><span class="cls_011">required parameters. Assuming the template is defined in the </span><span class="cls_021">todo-template.yaml</span><span class="cls_011"> file, use the</span></div>
<div style="position:absolute;left:90.00px;top:366.77px" class="cls_021"><span class="cls_021">oc create</span><span class="cls_011"> command to publish the application template:</span></div>
<div style="position:absolute;left:101.00px;top:394.49px" class="cls_026"><span class="cls_026">[student@workstation deploy-multicontainer]$ </span><span class="cls_027">oc create -f todo-template.yaml</span></div>
<div style="position:absolute;left:101.00px;top:406.49px" class="cls_026"><span class="cls_026">template.template.openshift.io/todonodejs-persistent created</span></div>
<div style="position:absolute;left:90.00px;top:434.27px" class="cls_011"><span class="cls_011">By default, the template is created under the current project unless you specify a different one</span></div>
<div style="position:absolute;left:90.00px;top:446.26px" class="cls_011"><span class="cls_011">using the </span><span class="cls_021">-n</span><span class="cls_011"> option, as shown in the following example:</span></div>
<div style="position:absolute;left:101.00px;top:473.98px" class="cls_026"><span class="cls_026">[student@workstation deploy-multicontainer]$ </span><span class="cls_027">oc create -f todo-template.yaml \</span></div>
<div style="position:absolute;left:101.00px;top:485.98px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-n openshift</span></div>
<div style="position:absolute;left:126.00px;top:525.18px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:126.00px;top:539.56px" class="cls_011"><span class="cls_011">Any template created under the </span><span class="cls_021">openshift</span><span class="cls_011"> namespace (OpenShift project) is</span></div>
<div style="position:absolute;left:126.00px;top:549.66px" class="cls_011"><span class="cls_011">available in the web console under the dialog box accessible in the Catalog</span><span class="cls_025"> →</span></div>
<div style="position:absolute;left:126.00px;top:563.56px" class="cls_011"><span class="cls_011">Developer Catalog menu item. Moreover, any template created under the current</span></div>
<div style="position:absolute;left:126.00px;top:575.55px" class="cls_011"><span class="cls_011">project is accessible from that project.</span></div>
<div style="position:absolute;left:90.00px;top:611.51px" class="cls_002"><span class="cls_002">Parameters</span></div>
<div style="position:absolute;left:90.00px;top:633.45px" class="cls_011"><span class="cls_011">Templates define a set of parameters, which are assigned values. OpenShift resources defined in</span></div>
<div style="position:absolute;left:90.00px;top:645.45px" class="cls_011"><span class="cls_011">the template can get their configuration values by referencing named parameters. Parameters in</span></div>
<div style="position:absolute;left:90.00px;top:657.45px" class="cls_011"><span class="cls_011">a template can have default values, but they are optional. Any default value can be replaced when</span></div>
<div style="position:absolute;left:90.00px;top:669.44px" class="cls_011"><span class="cls_011">processing the template.</span></div>
<div style="position:absolute;left:90.00px;top:690.94px" class="cls_011"><span class="cls_011">Each parameter value can be set either explicitly by using the </span><span class="cls_021">oc process</span><span class="cls_011"> command, or</span></div>
<div style="position:absolute;left:90.00px;top:702.94px" class="cls_011"><span class="cls_011">generated by OpenShift according to the parameter configuration.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">230</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:198896px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background249.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">There are two ways to list available parameters from a template. The first one is using the </span><span class="cls_021">oc</span></div>
<div style="position:absolute;left:108.00px;top:65.97px" class="cls_021"><span class="cls_021">describe</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:119.00px;top:93.69px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc describe template mysql-persistent -n openshift</span></div>
<div style="position:absolute;left:119.00px;top:105.69px" class="cls_026"><span class="cls_026">Name:   mysql-persistent</span></div>
<div style="position:absolute;left:119.00px;top:117.69px" class="cls_026"><span class="cls_026">Namespace:  openshift</span></div>
<div style="position:absolute;left:119.00px;top:129.68px" class="cls_026"><span class="cls_026">Created:</span></div>
<div style="position:absolute;left:167.00px;top:129.68px" class="cls_026"><span class="cls_026">12 days ago</span></div>
<div style="position:absolute;left:119.00px;top:141.68px" class="cls_026"><span class="cls_026">Labels:</span></div>
<div style="position:absolute;left:167.00px;top:141.68px" class="cls_026"><span class="cls_026">samplesoperator.config.openshift.io/managed=true</span></div>
<div style="position:absolute;left:119.00px;top:153.68px" class="cls_026"><span class="cls_026">Description:  MySQL database service, with  </span><span class="cls_029">...description omitted...</span></div>
<div style="position:absolute;left:119.00px;top:165.68px" class="cls_026"><span class="cls_026">Annotations:  iconClass=icon-mysql-database</span></div>
<div style="position:absolute;left:138.20px;top:177.68px" class="cls_026"><span class="cls_026">openshift.io/display-name=MySQL</span></div>
<div style="position:absolute;left:138.20px;top:189.68px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:138.20px;top:201.67px" class="cls_026"><span class="cls_026">tags=database,mysql</span></div>
<div style="position:absolute;left:119.00px;top:225.67px" class="cls_026"><span class="cls_026">Parameters:</span></div>
<div style="position:absolute;left:138.20px;top:237.67px" class="cls_026"><span class="cls_026">Name:   MEMORY_LIMIT</span></div>
<div style="position:absolute;left:138.20px;top:249.66px" class="cls_026"><span class="cls_026">Display Name: Memory Limit</span></div>
<div style="position:absolute;left:138.20px;top:261.66px" class="cls_026"><span class="cls_026">Description:  Maximum amount of memory the container can use.</span></div>
<div style="position:absolute;left:138.20px;top:273.66px" class="cls_026"><span class="cls_026">Required:   true</span></div>
<div style="position:absolute;left:138.20px;top:285.66px" class="cls_026"><span class="cls_026">Value:</span></div>
<div style="position:absolute;left:186.20px;top:285.66px" class="cls_026"><span class="cls_026">512Mi</span></div>
<div style="position:absolute;left:138.20px;top:309.65px" class="cls_026"><span class="cls_026">Name:   NAMESPACE</span></div>
<div style="position:absolute;left:138.20px;top:321.65px" class="cls_026"><span class="cls_026">Display Name: Namespace</span></div>
<div style="position:absolute;left:138.20px;top:333.65px" class="cls_026"><span class="cls_026">Description:  The OpenShift Namespace where the ImageStream resides.</span></div>
<div style="position:absolute;left:138.20px;top:345.65px" class="cls_026"><span class="cls_026">Required:   false</span></div>
<div style="position:absolute;left:138.20px;top:357.65px" class="cls_026"><span class="cls_026">Value:</span></div>
<div style="position:absolute;left:186.20px;top:357.65px" class="cls_026"><span class="cls_026">openshift</span></div>
<div style="position:absolute;left:138.20px;top:381.64px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:138.20px;top:405.64px" class="cls_026"><span class="cls_026">Name:   MYSQL_VERSION</span></div>
<div style="position:absolute;left:138.20px;top:417.64px" class="cls_026"><span class="cls_026">Display Name: Version of MySQL Image</span></div>
<div style="position:absolute;left:138.20px;top:429.63px" class="cls_026"><span class="cls_026">Description:  Version of MySQL image to be used (5.7, or latest).</span></div>
<div style="position:absolute;left:138.20px;top:441.63px" class="cls_026"><span class="cls_026">Required:   true</span></div>
<div style="position:absolute;left:138.20px;top:453.63px" class="cls_026"><span class="cls_026">Value:</span></div>
<div style="position:absolute;left:186.20px;top:453.63px" class="cls_026"><span class="cls_026">5.7</span></div>
<div style="position:absolute;left:119.00px;top:489.62px" class="cls_026"><span class="cls_026">Object Labels:  template=mysql-persistent-template</span></div>
<div style="position:absolute;left:119.00px;top:513.62px" class="cls_026"><span class="cls_026">Message: </span><span class="cls_029">...output omitted...</span><span class="cls_026">  in your project: ${DATABASE_SERVICE_NAME}.</span></div>
<div style="position:absolute;left:171.80px;top:537.62px" class="cls_026"><span class="cls_026">Username: ${MYSQL_USER}</span></div>
<div style="position:absolute;left:171.80px;top:549.61px" class="cls_026"><span class="cls_026">Password: ${MYSQL_PASSWORD}</span></div>
<div style="position:absolute;left:147.80px;top:561.61px" class="cls_026"><span class="cls_026">Database Name: ${MYSQL_DATABASE}</span></div>
<div style="position:absolute;left:143.00px;top:573.61px" class="cls_026"><span class="cls_026">Connection URL: mysql://${DATABASE_SERVICE_NAME}:3306/</span></div>
<div style="position:absolute;left:138.20px;top:597.61px" class="cls_026"><span class="cls_026">For more information about using this template, </span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:621.60px" class="cls_026"><span class="cls_026">Objects:</span></div>
<div style="position:absolute;left:138.20px;top:633.60px" class="cls_026"><span class="cls_026">Secret</span></div>
<div style="position:absolute;left:195.80px;top:633.60px" class="cls_026"><span class="cls_026">${DATABASE_SERVICE_NAME}</span></div>
<div style="position:absolute;left:138.20px;top:645.60px" class="cls_026"><span class="cls_026">Service</span></div>
<div style="position:absolute;left:195.80px;top:645.60px" class="cls_026"><span class="cls_026">${DATABASE_SERVICE_NAME}</span></div>
<div style="position:absolute;left:138.20px;top:657.60px" class="cls_026"><span class="cls_026">PersistentVolumeClaim ${DATABASE_SERVICE_NAME}</span></div>
<div style="position:absolute;left:138.20px;top:669.59px" class="cls_026"><span class="cls_026">DeploymentConfig</span></div>
<div style="position:absolute;left:234.20px;top:669.59px" class="cls_026"><span class="cls_026">${DATABASE_SERVICE_NAME}</span></div>
<div style="position:absolute;left:108.00px;top:697.37px" class="cls_011"><span class="cls_011">The second way is by using the </span><span class="cls_021">oc process</span><span class="cls_011"> with the </span><span class="cls_021">--parameters</span><span class="cls_011"> option:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:505.09px;top:751.59px" class="cls_013"><span class="cls_013">231</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:199698px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background250.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc process --parameters mysql-persistent -n openshift</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:216.20px;top:73.69px" class="cls_026"><span class="cls_026">DESCRIPTION</span></div>
<div style="position:absolute;left:293.00px;top:73.69px" class="cls_026"><span class="cls_026">GENERATOR</span></div>
<div style="position:absolute;left:389.00px;top:73.69px" class="cls_026"><span class="cls_026">VALUE</span></div>
<div style="position:absolute;left:101.00px;top:85.69px" class="cls_026"><span class="cls_026">MEMORY_LIMIT</span></div>
<div style="position:absolute;left:216.20px;top:85.69px" class="cls_026"><span class="cls_026">Maximum a...</span></div>
<div style="position:absolute;left:389.00px;top:85.69px" class="cls_026"><span class="cls_026">512Mi</span></div>
<div style="position:absolute;left:101.00px;top:97.69px" class="cls_026"><span class="cls_026">NAMESPACE</span></div>
<div style="position:absolute;left:216.20px;top:97.69px" class="cls_026"><span class="cls_026">The OpenS...</span></div>
<div style="position:absolute;left:389.00px;top:97.69px" class="cls_026"><span class="cls_026">openshift</span></div>
<div style="position:absolute;left:101.00px;top:109.69px" class="cls_026"><span class="cls_026">DATABASE_SERVICE_NAME</span></div>
<div style="position:absolute;left:216.20px;top:109.69px" class="cls_026"><span class="cls_026">The name ...</span></div>
<div style="position:absolute;left:389.00px;top:109.69px" class="cls_026"><span class="cls_026">mysql</span></div>
<div style="position:absolute;left:101.00px;top:121.68px" class="cls_026"><span class="cls_026">MYSQL_USER</span></div>
<div style="position:absolute;left:216.20px;top:121.68px" class="cls_026"><span class="cls_026">Username ...</span></div>
<div style="position:absolute;left:293.00px;top:121.68px" class="cls_026"><span class="cls_026">expression</span></div>
<div style="position:absolute;left:389.00px;top:121.68px" class="cls_026"><span class="cls_026">user[A-Z0-9]{3}</span></div>
<div style="position:absolute;left:101.00px;top:133.68px" class="cls_026"><span class="cls_026">MYSQL_PASSWORD</span></div>
<div style="position:absolute;left:216.20px;top:133.68px" class="cls_026"><span class="cls_026">Password ...</span></div>
<div style="position:absolute;left:293.00px;top:133.68px" class="cls_026"><span class="cls_026">expression</span></div>
<div style="position:absolute;left:389.00px;top:133.68px" class="cls_026"><span class="cls_026">[a-zA-Z0-9]{16}</span></div>
<div style="position:absolute;left:101.00px;top:145.68px" class="cls_026"><span class="cls_026">MYSQL_ROOT_PASSWORD</span></div>
<div style="position:absolute;left:216.20px;top:145.68px" class="cls_026"><span class="cls_026">Password ...</span></div>
<div style="position:absolute;left:293.00px;top:145.68px" class="cls_026"><span class="cls_026">expression</span></div>
<div style="position:absolute;left:389.00px;top:145.68px" class="cls_026"><span class="cls_026">[a-zA-Z0-9]{16}</span></div>
<div style="position:absolute;left:101.00px;top:157.68px" class="cls_026"><span class="cls_026">MYSQL_DATABASE</span></div>
<div style="position:absolute;left:216.20px;top:157.68px" class="cls_026"><span class="cls_026">Name of t...</span></div>
<div style="position:absolute;left:389.00px;top:157.68px" class="cls_026"><span class="cls_026">sampledb</span></div>
<div style="position:absolute;left:101.00px;top:169.68px" class="cls_026"><span class="cls_026">VOLUME_CAPACITY</span></div>
<div style="position:absolute;left:216.20px;top:169.68px" class="cls_026"><span class="cls_026">Volume sp...</span></div>
<div style="position:absolute;left:389.00px;top:169.68px" class="cls_026"><span class="cls_026">1Gi</span></div>
<div style="position:absolute;left:101.00px;top:181.68px" class="cls_026"><span class="cls_026">MYSQL_VERSION</span></div>
<div style="position:absolute;left:216.20px;top:181.68px" class="cls_026"><span class="cls_026">Version o...</span></div>
<div style="position:absolute;left:389.00px;top:181.68px" class="cls_026"><span class="cls_026">5.7</span></div>
<div style="position:absolute;left:90.00px;top:210.24px" class="cls_024"><span class="cls_024">Processing a Template Using the CLI</span></div>
<div style="position:absolute;left:90.00px;top:234.95px" class="cls_011"><span class="cls_011">When you process a template, you generate a list of resources to create a new application. To</span></div>
<div style="position:absolute;left:90.00px;top:246.95px" class="cls_011"><span class="cls_011">process a template, use the </span><span class="cls_021">oc process</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:101.00px;top:274.67px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc process -f </span><span class="cls_040">&lt;filename></span></div>
<div style="position:absolute;left:90.00px;top:302.45px" class="cls_011"><span class="cls_011">The previous command processes a template file, in either JSON or YAML format, and returns the</span></div>
<div style="position:absolute;left:90.00px;top:314.45px" class="cls_011"><span class="cls_011">list of resources to standard output. The format of the output resource list is JSON. To output the</span></div>
<div style="position:absolute;left:90.00px;top:326.44px" class="cls_011"><span class="cls_011">resource list in YAML format, use the </span><span class="cls_021">-o yaml</span><span class="cls_011"> with the </span><span class="cls_021">oc process</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:101.00px;top:354.16px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc process -o yaml -f </span><span class="cls_040">&lt;filename></span></div>
<div style="position:absolute;left:90.00px;top:381.94px" class="cls_011"><span class="cls_011">Another option is to process a template from the current project or the </span><span class="cls_021">openshift</span><span class="cls_011"> project:</span></div>
<div style="position:absolute;left:101.00px;top:409.66px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc process </span><span class="cls_040">&lt;uploaded-template-name></span></div>
<div style="position:absolute;left:126.00px;top:447.12px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:461.50px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">oc process</span><span class="cls_011"> command returns a list of resources to standard output. This</span></div>
<div style="position:absolute;left:126.00px;top:473.50px" class="cls_011"><span class="cls_011">output can be redirected to a file:</span></div>
<div style="position:absolute;left:110.72px;top:501.21px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc process -o yaml -f filename</span></div>
<div style="position:absolute;left:273.92px;top:501.21px" class="cls_027"><span class="cls_027">> myapp.yaml</span></div>
<div style="position:absolute;left:90.00px;top:545.39px" class="cls_011"><span class="cls_011">Templates often generate resources with configurable attributes that are based on the template</span></div>
<div style="position:absolute;left:90.00px;top:557.39px" class="cls_011"><span class="cls_011">parameters. To override a parameter, use the </span><span class="cls_021">-p</span><span class="cls_011"> option followed by a </span><span class="cls_021">&lt;name>=&lt;value></span><span class="cls_011"> pair.</span></div>
<div style="position:absolute;left:101.00px;top:585.11px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc process -o yaml -f mysql.yaml \</span></div>
<div style="position:absolute;left:101.00px;top:597.11px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p MYSQL_USER=dev -p MYSQL_PASSWORD=$P4SSD -p MYSQL_DATABASE=bank \</span></div>
<div style="position:absolute;left:101.00px;top:609.10px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p VOLUME_CAPACITY=10Gi > mysqlProcessed.yaml</span></div>
<div style="position:absolute;left:90.00px;top:636.88px" class="cls_011"><span class="cls_011">To create the application, use the generated YAML resource definition file:</span></div>
<div style="position:absolute;left:101.00px;top:664.60px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc create -f mysqlProcessed.yaml</span></div>
<div style="position:absolute;left:90.00px;top:692.38px" class="cls_011"><span class="cls_011">Alternatively, it is possible to process the template and create the application without saving a</span></div>
<div style="position:absolute;left:90.00px;top:704.38px" class="cls_011"><span class="cls_011">resource definition file by using a UNIX pipe:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">232</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:200500px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background251.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc process -f mysql.yaml -p MYSQL_USER=dev \</span></div>
<div style="position:absolute;left:119.00px;top:73.69px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p MYSQL_PASSWORD=$P4SSD -p MYSQL_DATABASE=bank \</span></div>
<div style="position:absolute;left:119.00px;top:85.69px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p VOLUME_CAPACITY=10Gi | oc create -f -</span></div>
<div style="position:absolute;left:108.00px;top:113.47px" class="cls_011"><span class="cls_011">To use a template in the </span><span class="cls_021">openshift</span><span class="cls_011"> project to create an application in your project, first export</span></div>
<div style="position:absolute;left:108.00px;top:125.47px" class="cls_011"><span class="cls_011">the template:</span></div>
<div style="position:absolute;left:119.00px;top:153.18px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc get template mysql-persistent -o yaml \</span></div>
<div style="position:absolute;left:119.00px;top:165.18px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-n openshift > mysql-persistent-template.yaml</span></div>
<div style="position:absolute;left:108.00px;top:192.96px" class="cls_011"><span class="cls_011">Next, identify appropriate values for the template parameters and process the template:</span></div>
<div style="position:absolute;left:119.00px;top:220.68px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc process -f mysql-persistent-template.yaml \</span></div>
<div style="position:absolute;left:119.00px;top:232.68px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p MYSQL_USER=dev -p MYSQL_PASSWORD=$P4SSD -p MYSQL_DATABASE=bank \</span></div>
<div style="position:absolute;left:119.00px;top:244.68px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p VOLUME_CAPACITY=10Gi | oc create -f -</span></div>
<div style="position:absolute;left:108.00px;top:272.45px" class="cls_011"><span class="cls_011">You can also use two slashes (</span><span class="cls_021">//</span><span class="cls_011">) to provide the namespace as part of the template name:</span></div>
<div style="position:absolute;left:119.00px;top:300.17px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc process openshift//mysql-persistent \</span></div>
<div style="position:absolute;left:119.00px;top:312.17px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p MYSQL_USER=dev -p MYSQL_PASSWORD=$P4SSD -p MYSQL_DATABASE=bank \</span></div>
<div style="position:absolute;left:119.00px;top:324.17px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p VOLUME_CAPACITY=10Gi | oc create -f -</span></div>
<div style="position:absolute;left:108.00px;top:351.95px" class="cls_011"><span class="cls_011">Alternatively, it is possible to create an application using the </span><span class="cls_021">oc new-app</span><span class="cls_011"> command passing the</span></div>
<div style="position:absolute;left:108.00px;top:363.94px" class="cls_011"><span class="cls_011">template name as the </span><span class="cls_021">--template</span><span class="cls_011"> option argument:</span></div>
<div style="position:absolute;left:119.00px;top:391.66px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc new-app --template=mysql-persistent \</span></div>
<div style="position:absolute;left:119.00px;top:403.66px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p MYSQL_USER=dev -p MYSQL_PASSWORD=$P4SSD -p MYSQL_DATABASE=bank \</span></div>
<div style="position:absolute;left:119.00px;top:415.66px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p VOLUME_CAPACITY=10Gi \</span></div>
<div style="position:absolute;left:119.00px;top:427.65px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--as-deployment-config</span></div>
<div style="position:absolute;left:108.00px;top:456.22px" class="cls_024"><span class="cls_024">Configuring Persistent Storage for OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:473.22px" class="cls_024"><span class="cls_024">Applications</span></div>
<div style="position:absolute;left:108.00px;top:497.93px" class="cls_011"><span class="cls_011">OpenShift Container Platform manages persistent storage as a set of pooled, cluster-wide</span></div>
<div style="position:absolute;left:108.00px;top:509.93px" class="cls_011"><span class="cls_011">resources. To add a storage resource to the cluster, an OpenShift administrator creates a</span></div>
<div style="position:absolute;left:108.00px;top:521.93px" class="cls_021"><span class="cls_021">PersistentVolume</span><span class="cls_011"> object that defines the necessary metadata for the storage resource. The</span></div>
<div style="position:absolute;left:108.00px;top:533.93px" class="cls_011"><span class="cls_011">metadata describes how the cluster accesses the storage, as well as other storage attributes such</span></div>
<div style="position:absolute;left:108.00px;top:545.93px" class="cls_011"><span class="cls_011">as capacity or throughput.</span></div>
<div style="position:absolute;left:108.00px;top:567.42px" class="cls_011"><span class="cls_011">To list the </span><span class="cls_021">PersistentVolume</span><span class="cls_011"> objects in a cluster, use the </span><span class="cls_021">oc get pv</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:119.00px;top:595.14px" class="cls_026"><span class="cls_026">[admin@host ~]$ </span><span class="cls_027">oc get pv</span></div>
<div style="position:absolute;left:119.00px;top:607.14px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:162.20px;top:607.14px" class="cls_026"><span class="cls_026">CAPACITY  ACCESS MODES  RECLAIM POLICY   STATUS</span></div>
<div style="position:absolute;left:416.60px;top:607.14px" class="cls_026"><span class="cls_026">CLAIM   ...</span></div>
<div style="position:absolute;left:119.00px;top:619.14px" class="cls_026"><span class="cls_026">pv0001</span></div>
<div style="position:absolute;left:162.20px;top:619.14px" class="cls_026"><span class="cls_026">1Mi</span></div>
<div style="position:absolute;left:210.20px;top:619.14px" class="cls_026"><span class="cls_026">RWO</span></div>
<div style="position:absolute;left:277.40px;top:619.14px" class="cls_026"><span class="cls_026">Retain</span></div>
<div style="position:absolute;left:359.00px;top:619.14px" class="cls_026"><span class="cls_026">Available</span></div>
<div style="position:absolute;left:119.00px;top:631.14px" class="cls_026"><span class="cls_026">pv0002</span></div>
<div style="position:absolute;left:162.20px;top:631.14px" class="cls_026"><span class="cls_026">10Mi</span></div>
<div style="position:absolute;left:210.20px;top:631.14px" class="cls_026"><span class="cls_026">RWX</span></div>
<div style="position:absolute;left:277.40px;top:631.14px" class="cls_026"><span class="cls_026">Recycle</span></div>
<div style="position:absolute;left:359.00px;top:631.14px" class="cls_026"><span class="cls_026">Available</span></div>
<div style="position:absolute;left:119.00px;top:643.13px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:108.00px;top:670.91px" class="cls_011"><span class="cls_011">To see the YAML definition for a given </span><span class="cls_021">PersistentVolume</span><span class="cls_011">, use the </span><span class="cls_021">oc get</span><span class="cls_011"> command with the</span></div>
<div style="position:absolute;left:108.00px;top:682.91px" class="cls_021"><span class="cls_021">-o yaml</span><span class="cls_011"> option:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.17px;top:751.59px" class="cls_013"><span class="cls_013">233</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:201302px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background252.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">[admin@host ~]$ </span><span class="cls_027">oc get pv pv0001 -o yaml</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">apiVersion: v1</span></div>
<div style="position:absolute;left:101.00px;top:85.69px" class="cls_026"><span class="cls_026">kind: PersistentVolume</span></div>
<div style="position:absolute;left:101.00px;top:97.69px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:110.60px;top:109.69px" class="cls_026"><span class="cls_026">creationTimestamp: </span><span class="cls_029">...value omitted...</span></div>
<div style="position:absolute;left:110.60px;top:121.68px" class="cls_026"><span class="cls_026">finalizers:</span></div>
<div style="position:absolute;left:110.60px;top:133.68px" class="cls_026"><span class="cls_026">- kubernetes.io/pv-protection</span></div>
<div style="position:absolute;left:110.60px;top:145.68px" class="cls_026"><span class="cls_026">labels:</span></div>
<div style="position:absolute;left:120.20px;top:157.68px" class="cls_026"><span class="cls_026">type: local</span></div>
<div style="position:absolute;left:110.60px;top:169.68px" class="cls_026"><span class="cls_026">name: pv0001</span></div>
<div style="position:absolute;left:110.60px;top:181.68px" class="cls_026"><span class="cls_026">resourceVersion: </span><span class="cls_029">...value omitted...</span></div>
<div style="position:absolute;left:110.60px;top:193.67px" class="cls_026"><span class="cls_026">selfLink: /api/v1/persistentvolumes/pv0001</span></div>
<div style="position:absolute;left:110.60px;top:205.67px" class="cls_026"><span class="cls_026">uid: </span><span class="cls_029">...value omitted...</span></div>
<div style="position:absolute;left:101.00px;top:217.67px" class="cls_026"><span class="cls_026">spec:</span></div>
<div style="position:absolute;left:110.60px;top:229.67px" class="cls_026"><span class="cls_026">accessModes:</span></div>
<div style="position:absolute;left:110.60px;top:241.66px" class="cls_026"><span class="cls_026">- ReadWriteOnce</span></div>
<div style="position:absolute;left:110.60px;top:253.66px" class="cls_026"><span class="cls_026">capacity:</span></div>
<div style="position:absolute;left:120.20px;top:265.66px" class="cls_026"><span class="cls_026">storage: 1Mi</span></div>
<div style="position:absolute;left:110.60px;top:277.66px" class="cls_026"><span class="cls_026">hostPath:</span></div>
<div style="position:absolute;left:120.20px;top:289.66px" class="cls_026"><span class="cls_026">path: /data/pv0001</span></div>
<div style="position:absolute;left:120.20px;top:301.65px" class="cls_026"><span class="cls_026">type: ""</span></div>
<div style="position:absolute;left:110.60px;top:313.65px" class="cls_026"><span class="cls_026">persistentVolumeReclaimPolicy: Retain</span></div>
<div style="position:absolute;left:101.00px;top:325.65px" class="cls_026"><span class="cls_026">status:</span></div>
<div style="position:absolute;left:110.60px;top:337.65px" class="cls_026"><span class="cls_026">phase: Available</span></div>
<div style="position:absolute;left:90.00px;top:365.43px" class="cls_011"><span class="cls_011">To add more </span><span class="cls_021">PersistentVolume</span><span class="cls_011"> objects to a cluster, use the </span><span class="cls_021">oc create</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:101.00px;top:393.14px" class="cls_026"><span class="cls_026">[admin@host ~]$ </span><span class="cls_027">oc create -f pv1001.yaml</span></div>
<div style="position:absolute;left:126.00px;top:432.35px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:446.72px" class="cls_011"><span class="cls_011">The above </span><span class="cls_021">pv1001.yaml</span><span class="cls_011"> file must contain a persistent volume definition, similar in</span></div>
<div style="position:absolute;left:126.00px;top:458.72px" class="cls_011"><span class="cls_011">structure to the output of the </span><span class="cls_021">oc get pv </span><span class="cls_028">pv-name</span><span class="cls_021"> -o yaml</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:90.00px;top:494.68px" class="cls_002"><span class="cls_002">Requesting Persistent Volumes</span></div>
<div style="position:absolute;left:90.00px;top:516.62px" class="cls_011"><span class="cls_011">When an application requires storage, you create a </span><span class="cls_021">PersistentVolumeClaim</span><span class="cls_011"> (PVC) object</span></div>
<div style="position:absolute;left:90.00px;top:528.62px" class="cls_011"><span class="cls_011">to request a dedicated storage resource from the cluster pool. The following content from a file</span></div>
<div style="position:absolute;left:90.00px;top:540.62px" class="cls_011"><span class="cls_011">named </span><span class="cls_021">pvc.yaml</span><span class="cls_011"> is an example definition for a PVC:</span></div>
<div style="position:absolute;left:101.00px;top:568.33px" class="cls_026"><span class="cls_026">apiVersion: v1</span></div>
<div style="position:absolute;left:101.00px;top:580.33px" class="cls_026"><span class="cls_026">kind: PersistentVolumeClaim</span></div>
<div style="position:absolute;left:101.00px;top:592.33px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:110.60px;top:604.33px" class="cls_026"><span class="cls_026">name: myapp</span></div>
<div style="position:absolute;left:101.00px;top:616.33px" class="cls_026"><span class="cls_026">spec:</span></div>
<div style="position:absolute;left:110.60px;top:628.32px" class="cls_026"><span class="cls_026">accessModes:</span></div>
<div style="position:absolute;left:110.60px;top:640.32px" class="cls_026"><span class="cls_026">- ReadWriteOnce</span></div>
<div style="position:absolute;left:110.60px;top:652.32px" class="cls_026"><span class="cls_026">resources:</span></div>
<div style="position:absolute;left:120.20px;top:664.32px" class="cls_026"><span class="cls_026">requests:</span></div>
<div style="position:absolute;left:129.80px;top:676.32px" class="cls_026"><span class="cls_026">storage: 1Gi</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">234</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:202104px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background253.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">The PVC defines storage requirements for the application, such as capacity or throughput. To</span></div>
<div style="position:absolute;left:108.00px;top:65.97px" class="cls_011"><span class="cls_011">create the PVC, use the </span><span class="cls_021">oc create</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:119.00px;top:93.69px" class="cls_026"><span class="cls_026">[admin@host ~]$ </span><span class="cls_027">oc create -f pvc.yaml</span></div>
<div style="position:absolute;left:108.00px;top:121.47px" class="cls_011"><span class="cls_011">After you create a PVC, OpenShift attempts to find an available </span><span class="cls_021">PersistentVolume</span><span class="cls_011"> resource</span></div>
<div style="position:absolute;left:108.00px;top:133.47px" class="cls_011"><span class="cls_011">that satisfies the PVC's requirements. If OpenShift finds a match, it binds the PersistentVolume</span></div>
<div style="position:absolute;left:108.00px;top:145.47px" class="cls_011"><span class="cls_011">object to the PersistentVolumeClaim object. To list the PVCs in a project, use the </span><span class="cls_021">oc get pvc</span></div>
<div style="position:absolute;left:108.00px;top:157.46px" class="cls_011"><span class="cls_011">command:</span></div>
<div style="position:absolute;left:119.00px;top:185.18px" class="cls_026"><span class="cls_026">[admin@host ~]$ </span><span class="cls_027">oc get pvc</span></div>
<div style="position:absolute;left:119.00px;top:197.18px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:167.00px;top:197.18px" class="cls_026"><span class="cls_026">STATUS   VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   AGE</span></div>
<div style="position:absolute;left:119.00px;top:209.18px" class="cls_026"><span class="cls_026">myapp</span></div>
<div style="position:absolute;left:167.00px;top:209.18px" class="cls_026"><span class="cls_026">Bound</span></div>
<div style="position:absolute;left:210.20px;top:209.18px" class="cls_026"><span class="cls_026">pv0001</span></div>
<div style="position:absolute;left:253.40px;top:209.18px" class="cls_026"><span class="cls_026">1Gi</span></div>
<div style="position:absolute;left:306.20px;top:209.18px" class="cls_026"><span class="cls_026">RWO</span></div>
<div style="position:absolute;left:450.20px;top:209.18px" class="cls_026"><span class="cls_026">6s</span></div>
<div style="position:absolute;left:108.00px;top:236.96px" class="cls_011"><span class="cls_011">The output indicates whether a persistent volume is bound to the PVC, along with attributes of the</span></div>
<div style="position:absolute;left:108.00px;top:248.95px" class="cls_011"><span class="cls_011">PVC (such as capacity).</span></div>
<div style="position:absolute;left:108.00px;top:270.45px" class="cls_011"><span class="cls_011">To use the persistent volume in an application pod, define a volume mount for a container</span></div>
<div style="position:absolute;left:108.00px;top:282.45px" class="cls_011"><span class="cls_011">that references the </span><span class="cls_021">PersistentVolumeClaim</span><span class="cls_011"> object. The application pod definition below</span></div>
<div style="position:absolute;left:108.00px;top:294.45px" class="cls_011"><span class="cls_011">references a </span><span class="cls_021">PersistentVolumeClaim</span><span class="cls_011"> object to define a volume mount for the application:</span></div>
<div style="position:absolute;left:119.00px;top:322.17px" class="cls_026"><span class="cls_026">apiVersion: "v1"</span></div>
<div style="position:absolute;left:119.00px;top:334.16px" class="cls_026"><span class="cls_026">kind: "Pod"</span></div>
<div style="position:absolute;left:119.00px;top:346.16px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:128.60px;top:358.16px" class="cls_026"><span class="cls_026">name: "myapp"</span></div>
<div style="position:absolute;left:128.60px;top:370.16px" class="cls_026"><span class="cls_026">labels:</span></div>
<div style="position:absolute;left:138.20px;top:382.15px" class="cls_026"><span class="cls_026">name: "myapp"</span></div>
<div style="position:absolute;left:119.00px;top:394.15px" class="cls_026"><span class="cls_026">spec:</span></div>
<div style="position:absolute;left:128.60px;top:406.15px" class="cls_026"><span class="cls_026">containers:</span></div>
<div style="position:absolute;left:138.20px;top:418.15px" class="cls_026"><span class="cls_026">- name: "myapp"</span></div>
<div style="position:absolute;left:147.80px;top:430.15px" class="cls_026"><span class="cls_026">image: openshift/myapp</span></div>
<div style="position:absolute;left:147.80px;top:442.14px" class="cls_026"><span class="cls_026">ports:</span></div>
<div style="position:absolute;left:157.40px;top:454.14px" class="cls_026"><span class="cls_026">- containerPort: 80</span></div>
<div style="position:absolute;left:167.00px;top:466.14px" class="cls_026"><span class="cls_026">name: "http-server"</span></div>
<div style="position:absolute;left:147.80px;top:478.14px" class="cls_026"><span class="cls_026">volumeMounts:</span></div>
<div style="position:absolute;left:157.40px;top:490.14px" class="cls_026"><span class="cls_026">- mountPath: "/var/www/html"</span></div>
<div style="position:absolute;left:167.00px;top:502.14px" class="cls_026"><span class="cls_026">name: "pvol"</span></div>
<div style="position:absolute;left:128.60px;top:514.13px" class="cls_026"><span class="cls_026">volumes:</span></div>
<div style="position:absolute;left:138.20px;top:526.13px" class="cls_026"><span class="cls_026">- name: "pvol"</span></div>
<div style="position:absolute;left:147.80px;top:538.13px" class="cls_026"><span class="cls_026">persistentVolumeClaim:</span></div>
<div style="position:absolute;left:157.40px;top:550.13px" class="cls_026"><span class="cls_026">claimName: "myapp"</span></div>
<div style="position:absolute;left:128.90px;top:579.81px" class="cls_011"><span class="cls_011">This section declares that the </span><span class="cls_021">pvol</span><span class="cls_011"> volume mounts at </span><span class="cls_021">/var/www/html</span><span class="cls_011"> in the container file</span></div>
<div style="position:absolute;left:128.90px;top:591.80px" class="cls_011"><span class="cls_011">system.</span></div>
<div style="position:absolute;left:128.90px;top:603.80px" class="cls_011"><span class="cls_011">This section defines the </span><span class="cls_021">pvol</span><span class="cls_011"> volume.</span></div>
<div style="position:absolute;left:128.90px;top:616.24px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">pvol</span><span class="cls_011"> volume references the </span><span class="cls_021">myapp</span><span class="cls_011"> PVC. If OpenShift associates an available persistent</span></div>
<div style="position:absolute;left:128.90px;top:628.24px" class="cls_011"><span class="cls_011">volume to the </span><span class="cls_021">myapp</span><span class="cls_011"> PVC, then the </span><span class="cls_021">pvol</span><span class="cls_011"> volume refers to this associated volume.</span></div>
<div style="position:absolute;left:108.00px;top:652.30px" class="cls_002"><span class="cls_002">Configuring Persistent Storage with Templates</span></div>
<div style="position:absolute;left:108.00px;top:674.24px" class="cls_011"><span class="cls_011">Templates are often used to simplify the creation of applications requiring persistent storage.</span></div>
<div style="position:absolute;left:108.00px;top:686.24px" class="cls_011"><span class="cls_011">Many of these templates have a suffix of </span><span class="cls_021">-persistent</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.26px;top:751.59px" class="cls_013"><span class="cls_013">235</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:202906px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background254.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc get templates -n openshift | grep persistent</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">cakephp-mysql-persistent   An example CakePHP application with a MySQL data...</span></div>
<div style="position:absolute;left:101.00px;top:85.69px" class="cls_026"><span class="cls_026">dancer-mysql-persistent</span></div>
<div style="position:absolute;left:230.60px;top:85.69px" class="cls_026"><span class="cls_026">An example Dancer application with a MySQL datab...</span></div>
<div style="position:absolute;left:101.00px;top:97.69px" class="cls_026"><span class="cls_026">django-psql-persistent</span></div>
<div style="position:absolute;left:230.60px;top:97.69px" class="cls_026"><span class="cls_026">An example Django application with a PostgreSQL ...</span></div>
<div style="position:absolute;left:101.00px;top:109.69px" class="cls_026"><span class="cls_026">dotnet-pgsql-persistent</span></div>
<div style="position:absolute;left:230.60px;top:109.69px" class="cls_026"><span class="cls_026">An example .NET Core application with a PostgreS...</span></div>
<div style="position:absolute;left:101.00px;top:121.68px" class="cls_026"><span class="cls_026">jenkins-persistent</span></div>
<div style="position:absolute;left:230.60px;top:121.68px" class="cls_026"><span class="cls_026">Jenkins service, with persistent storage</span></div>
<div style="position:absolute;left:101.00px;top:133.68px" class="cls_026"><span class="cls_026">mariadb-persistent</span></div>
<div style="position:absolute;left:230.60px;top:133.68px" class="cls_026"><span class="cls_026">MariaDB database service, with persistent storag...</span></div>
<div style="position:absolute;left:101.00px;top:145.68px" class="cls_026"><span class="cls_026">mongodb-persistent</span></div>
<div style="position:absolute;left:230.60px;top:145.68px" class="cls_026"><span class="cls_026">MongoDB database service, with persistent storag...</span></div>
<div style="position:absolute;left:101.00px;top:157.68px" class="cls_026"><span class="cls_026">mysql-persistent</span></div>
<div style="position:absolute;left:230.60px;top:157.68px" class="cls_026"><span class="cls_026">MySQL database service, with persistent storage</span></div>
<div style="position:absolute;left:101.00px;top:169.68px" class="cls_026"><span class="cls_026">nodejs-mongo-persistent</span></div>
<div style="position:absolute;left:230.60px;top:169.68px" class="cls_026"><span class="cls_026">An example Node.js application with a MongoDB da...</span></div>
<div style="position:absolute;left:101.00px;top:181.68px" class="cls_026"><span class="cls_026">postgresql-persistent</span></div>
<div style="position:absolute;left:230.60px;top:181.68px" class="cls_026"><span class="cls_026">PostgreSQL database service, with persistent sto...</span></div>
<div style="position:absolute;left:101.00px;top:193.67px" class="cls_026"><span class="cls_026">rails-pgsql-persistent</span></div>
<div style="position:absolute;left:230.60px;top:193.67px" class="cls_026"><span class="cls_026">An example Rails application with a PostgreSQL d...</span></div>
<div style="position:absolute;left:101.00px;top:205.67px" class="cls_026"><span class="cls_026">redis-persistent</span></div>
<div style="position:absolute;left:230.60px;top:205.67px" class="cls_026"><span class="cls_026">Redis in-memory data structure store, with persi...</span></div>
<div style="position:absolute;left:90.00px;top:233.45px" class="cls_011"><span class="cls_011">The following example template defines a </span><span class="cls_021">PersistentVolumeClaim</span><span class="cls_011"> object along with a</span></div>
<div style="position:absolute;left:90.00px;top:245.45px" class="cls_021"><span class="cls_021">DeploymentConfig</span><span class="cls_011"> object:</span></div>
<div style="position:absolute;left:101.00px;top:273.17px" class="cls_026"><span class="cls_026">apiVersion: template.openshift.io/v1</span></div>
<div style="position:absolute;left:101.00px;top:285.16px" class="cls_026"><span class="cls_026">kind: Template</span></div>
<div style="position:absolute;left:101.00px;top:297.16px" class="cls_026"><span class="cls_026">labels:</span></div>
<div style="position:absolute;left:110.60px;top:309.16px" class="cls_026"><span class="cls_026">template: myapp-persistent-template</span></div>
<div style="position:absolute;left:101.00px;top:321.16px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:110.60px;top:333.15px" class="cls_026"><span class="cls_026">name: myapp-persistent</span></div>
<div style="position:absolute;left:110.60px;top:345.15px" class="cls_026"><span class="cls_026">namespace: openshift</span></div>
<div style="position:absolute;left:101.00px;top:357.15px" class="cls_026"><span class="cls_026">objects:</span></div>
<div style="position:absolute;left:101.00px;top:369.15px" class="cls_026"><span class="cls_026">- apiVersion: v1</span></div>
<div style="position:absolute;left:110.60px;top:381.15px" class="cls_026"><span class="cls_026">kind: PersistentVolumeClaim</span></div>
<div style="position:absolute;left:110.60px;top:393.14px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:120.20px;top:405.14px" class="cls_026"><span class="cls_026">name: ${APP_NAME}</span></div>
<div style="position:absolute;left:110.60px;top:417.14px" class="cls_026"><span class="cls_026">spec:</span></div>
<div style="position:absolute;left:120.20px;top:429.14px" class="cls_026"><span class="cls_026">accessModes:</span></div>
<div style="position:absolute;left:120.20px;top:441.14px" class="cls_026"><span class="cls_026">- ReadWriteOnce</span></div>
<div style="position:absolute;left:120.20px;top:453.14px" class="cls_026"><span class="cls_026">resources:</span></div>
<div style="position:absolute;left:129.80px;top:465.13px" class="cls_026"><span class="cls_026">requests:</span></div>
<div style="position:absolute;left:139.40px;top:477.13px" class="cls_026"><span class="cls_026">storage: ${VOLUME_CAPACITY}</span></div>
<div style="position:absolute;left:101.00px;top:489.13px" class="cls_026"><span class="cls_026">- apiVersion: v1</span></div>
<div style="position:absolute;left:110.60px;top:501.13px" class="cls_026"><span class="cls_026">kind: DeploymentConfig</span></div>
<div style="position:absolute;left:110.60px;top:513.13px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:120.20px;top:525.12px" class="cls_026"><span class="cls_026">name: ${APP_NAME}</span></div>
<div style="position:absolute;left:110.60px;top:537.12px" class="cls_026"><span class="cls_026">spec:</span></div>
<div style="position:absolute;left:120.20px;top:549.12px" class="cls_026"><span class="cls_026">replicas: 1</span></div>
<div style="position:absolute;left:120.20px;top:561.12px" class="cls_026"><span class="cls_026">selector:</span></div>
<div style="position:absolute;left:129.80px;top:573.11px" class="cls_026"><span class="cls_026">name: ${APP_NAME}</span></div>
<div style="position:absolute;left:120.20px;top:585.11px" class="cls_026"><span class="cls_026">strategy:</span></div>
<div style="position:absolute;left:129.80px;top:597.11px" class="cls_026"><span class="cls_026">type: Recreate</span></div>
<div style="position:absolute;left:120.20px;top:609.11px" class="cls_026"><span class="cls_026">template:</span></div>
<div style="position:absolute;left:129.80px;top:621.11px" class="cls_026"><span class="cls_026">metadata:</span></div>
<div style="position:absolute;left:139.40px;top:633.10px" class="cls_026"><span class="cls_026">labels:</span></div>
<div style="position:absolute;left:149.00px;top:645.10px" class="cls_026"><span class="cls_026">name: ${APP_NAME}</span></div>
<div style="position:absolute;left:129.80px;top:657.10px" class="cls_026"><span class="cls_026">spec:</span></div>
<div style="position:absolute;left:139.40px;top:669.10px" class="cls_026"><span class="cls_026">containers:</span></div>
<div style="position:absolute;left:139.40px;top:681.10px" class="cls_026"><span class="cls_026">- image: 'openshift/myapp'</span></div>
<div style="position:absolute;left:149.00px;top:693.09px" class="cls_026"><span class="cls_026">name: myapp</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">236</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:203708px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background255.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:167.00px;top:53.69px" class="cls_026"><span class="cls_026">volumeMounts:</span></div>
<div style="position:absolute;left:167.00px;top:65.69px" class="cls_026"><span class="cls_026">- mountPath: /var/lib/myapp/data</span></div>
<div style="position:absolute;left:176.60px;top:77.69px" class="cls_026"><span class="cls_026">name: ${APP_NAME}-data</span></div>
<div style="position:absolute;left:157.40px;top:89.69px" class="cls_026"><span class="cls_026">volumes:</span></div>
<div style="position:absolute;left:157.40px;top:101.69px" class="cls_026"><span class="cls_026">- name: ${APP_NAME}-data</span></div>
<div style="position:absolute;left:167.00px;top:113.68px" class="cls_026"><span class="cls_026">persistentVolumeClaim:</span></div>
<div style="position:absolute;left:176.60px;top:125.68px" class="cls_026"><span class="cls_026">claimName: ${APP_NAME}</span></div>
<div style="position:absolute;left:119.00px;top:137.68px" class="cls_026"><span class="cls_026">parameters:</span></div>
<div style="position:absolute;left:119.00px;top:149.68px" class="cls_026"><span class="cls_026">- description: The name for the myapp application.</span></div>
<div style="position:absolute;left:128.60px;top:161.68px" class="cls_026"><span class="cls_026">displayName: Application Name</span></div>
<div style="position:absolute;left:128.60px;top:173.67px" class="cls_026"><span class="cls_026">name: APP_NAME</span></div>
<div style="position:absolute;left:128.60px;top:185.67px" class="cls_026"><span class="cls_026">required: true</span></div>
<div style="position:absolute;left:128.60px;top:197.67px" class="cls_026"><span class="cls_026">value: myapp</span></div>
<div style="position:absolute;left:119.00px;top:209.67px" class="cls_026"><span class="cls_026">- description: Volume space available for data, e.g. 512Mi, 2Gi.</span></div>
<div style="position:absolute;left:128.60px;top:221.67px" class="cls_026"><span class="cls_026">displayName: Volume Capacity</span></div>
<div style="position:absolute;left:128.60px;top:233.66px" class="cls_026"><span class="cls_026">name: VOLUME_CAPACITY</span></div>
<div style="position:absolute;left:128.60px;top:245.66px" class="cls_026"><span class="cls_026">required: true</span></div>
<div style="position:absolute;left:128.60px;top:257.66px" class="cls_026"><span class="cls_026">value: 1Gi</span></div>
<div style="position:absolute;left:128.90px;top:285.44px" class="cls_011"><span class="cls_011">The template defines a </span><span class="cls_021">PersistentVolumeClaim</span><span class="cls_011"> and </span><span class="cls_021">DeploymentConfig</span><span class="cls_011"> object. Both</span></div>
<div style="position:absolute;left:128.90px;top:297.44px" class="cls_011"><span class="cls_011">objects have names matching the value of the </span><span class="cls_021">APP_NAME</span><span class="cls_011"> parameter. The persistent volume</span></div>
<div style="position:absolute;left:128.90px;top:309.44px" class="cls_011"><span class="cls_011">claim defines a capacity corresponding the value of the </span><span class="cls_021">VOLUME_CAPCITY</span><span class="cls_011"> parameter.</span></div>
<div style="position:absolute;left:128.90px;top:321.43px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">DeploymentConfig</span><span class="cls_011"> object defines a volume mount referencing the</span></div>
<div style="position:absolute;left:128.90px;top:333.43px" class="cls_021"><span class="cls_021">PersistentVolumeClaim</span><span class="cls_011"> created by the template.</span></div>
<div style="position:absolute;left:128.90px;top:345.43px" class="cls_011"><span class="cls_011">The template defines two parameters: </span><span class="cls_021">APP_NAME</span><span class="cls_011"> and </span><span class="cls_021">VOLUME_CAPACITY</span><span class="cls_011">. The template</span></div>
<div style="position:absolute;left:128.90px;top:357.43px" class="cls_011"><span class="cls_011">uses these parameters to specify the value of attributes for the </span><span class="cls_021">PersistentVolumeClaim</span></div>
<div style="position:absolute;left:128.90px;top:369.43px" class="cls_011"><span class="cls_011">and </span><span class="cls_021">DeploymentConfig</span><span class="cls_011"> objects.</span></div>
<div style="position:absolute;left:108.00px;top:390.92px" class="cls_011"><span class="cls_011">With this template, you only need to specify the </span><span class="cls_021">APP_NAME</span><span class="cls_011"> and </span><span class="cls_021">VOLUME_CAPACITY</span><span class="cls_011"> parameters</span></div>
<div style="position:absolute;left:108.00px;top:402.92px" class="cls_011"><span class="cls_011">to deploy the </span><span class="cls_021">myapp</span><span class="cls_011"> application with persistent storage:</span></div>
<div style="position:absolute;left:119.00px;top:430.64px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc create myapp-template.yaml</span></div>
<div style="position:absolute;left:119.00px;top:442.64px" class="cls_026"><span class="cls_026">template.template.openshift.io/myapp-persistent created</span></div>
<div style="position:absolute;left:119.00px;top:454.64px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc process myapp-persistent \</span></div>
<div style="position:absolute;left:119.00px;top:466.63px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p APP_NAME=myapp-dev -p VOLUME_CAPACITY=1Gi \</span></div>
<div style="position:absolute;left:119.00px;top:478.63px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">| oc create -f -</span></div>
<div style="position:absolute;left:119.00px;top:490.63px" class="cls_026"><span class="cls_026">deploymentconfig/myapp created</span></div>
<div style="position:absolute;left:119.00px;top:502.63px" class="cls_026"><span class="cls_026">persistentvolumeclaim/myapp created</span></div>
<div style="position:absolute;left:144.00px;top:539.93px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:144.00px;top:554.31px" class="cls_011"><span class="cls_011">Developer information about templates can be found in the Using Templates</span></div>
<div style="position:absolute;left:144.00px;top:566.30px" class="cls_011"><span class="cls_011">section of the OpenShift Container Platform documentation:</span></div>
<div style="position:absolute;left:144.00px;top:578.24px" class="cls_022"><span class="cls_022">Developer Guide</span></div>
<div style="position:absolute;left:144.00px;top:590.30px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.5/html-single/images/index#using-templates">https://access.redhat.com/documentation/en-us/</A> </div>
<div style="position:absolute;left:144.00px;top:602.30px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.5/html-single/images/index#using-templates">openshift_container_platform/4.5/html-single/images/index#using-templates</A> </div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.25px;top:751.59px" class="cls_013"><span class="cls_013">237</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:204510px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background256.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Creating an Application with a Template</span></div>
<div style="position:absolute;left:102.00px;top:137.59px" class="cls_011"><span class="cls_011">In this exercise, you will deploy the To Do List application in OpenShift Container Platform</span></div>
<div style="position:absolute;left:102.00px;top:149.59px" class="cls_011"><span class="cls_011">using a template to define resources your application needs to run.</span></div>
<div style="position:absolute;left:102.00px;top:172.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:190.59px" class="cls_011"><span class="cls_011">You should be able to build and deploy an application in OpenShift Container Platform using</span></div>
<div style="position:absolute;left:102.00px;top:202.58px" class="cls_011"><span class="cls_011">a provided JSON template.</span></div>
<div style="position:absolute;left:102.00px;top:225.65px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:243.58px" class="cls_011"><span class="cls_011">You must have the To Do List application source code and lab files on </span><span class="cls_021">workstation</span><span class="cls_011">. To</span></div>
<div style="position:absolute;left:102.00px;top:255.58px" class="cls_011"><span class="cls_011">download the lab files and verify the status of the OpenShift cluster, run the following</span></div>
<div style="position:absolute;left:102.00px;top:267.58px" class="cls_011"><span class="cls_011">command in a new terminal window.</span></div>
<div style="position:absolute;left:101.00px;top:295.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab multicontainer-openshift start</span></div>
<div style="position:absolute;left:101.41px;top:346.88px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:119.00px;top:346.94px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">Dockerfile</span><span class="cls_011"> in the </span><span class="cls_021">images/mysql</span><span class="cls_011"> subdirectory to build the database container.</span></div>
<div style="position:absolute;left:119.00px;top:358.94px" class="cls_011"><span class="cls_011">Publish the container image to </span><span class="cls_021">quay.io</span><span class="cls_011"> with a tag of </span><span class="cls_021">do180-mysql-57-rhel7</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:380.68px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:143.70px;top:380.68px" class="cls_011"><span class="cls_011">Build the MySQL database image.</span></div>
<div style="position:absolute;left:101.00px;top:408.40px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd ~/DO180/labs/multicontainer-openshift/images/mysql</span></div>
<div style="position:absolute;left:101.00px;top:420.40px" class="cls_026"><span class="cls_026">[student@workstation mysql]$ </span><span class="cls_027">sudo podman build -t do180-mysql-57-rhel7 .</span></div>
<div style="position:absolute;left:101.00px;top:432.39px" class="cls_026"><span class="cls_026">STEP 1: FROM rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:101.00px;top:444.39px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:101.00px;top:456.39px" class="cls_026"><span class="cls_026">Copying blob sha256:e373541</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:105.80px;top:468.39px" class="cls_026"><span class="cls_026">69.66 MB / 69.66 MB [====================================================] 6s</span></div>
<div style="position:absolute;left:101.00px;top:480.39px" class="cls_026"><span class="cls_026">Copying blob sha256:c5d2e94</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:105.80px;top:492.38px" class="cls_026"><span class="cls_026">1.20 KB / 1.20 KB [======================================================] 0s</span></div>
<div style="position:absolute;left:101.00px;top:504.38px" class="cls_026"><span class="cls_026">Copying blob sha256:b3949ae</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:105.80px;top:516.38px" class="cls_026"><span class="cls_026">62.03 MB / 62.03 MB [====================================================] 5s</span></div>
<div style="position:absolute;left:101.00px;top:528.38px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:101.00px;top:540.37px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:101.00px;top:552.37px" class="cls_026"><span class="cls_026">STEP 2: ADD root /</span></div>
<div style="position:absolute;left:101.00px;top:564.37px" class="cls_026"><span class="cls_026">STEP 3: COMMIT do180-mysql-57-rhel7</span></div>
<div style="position:absolute;left:101.00px;top:576.37px" class="cls_026"><span class="cls_026">efab36a2d63c2cbad0fee4a8e4858f1655e27ed2d6900748c87dee00bef8d18f</span></div>
<div style="position:absolute;left:119.00px;top:604.39px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:143.70px;top:604.39px" class="cls_011"><span class="cls_011">To make the image available for OpenShift, tag it and push it up to </span><span class="cls_021">quay.io</span><span class="cls_011">. To do</span></div>
<div style="position:absolute;left:143.70px;top:616.39px" class="cls_011"><span class="cls_011">so, run the following commands in the terminal window.</span></div>
<div style="position:absolute;left:101.00px;top:644.11px" class="cls_026"><span class="cls_026">[student@workstation mysql]$ </span><span class="cls_027">source /usr/local/etc/ocp4.config</span></div>
<div style="position:absolute;left:101.00px;top:656.11px" class="cls_026"><span class="cls_026">[student@workstation mysql]$ </span><span class="cls_027">sudo podman login quay.io -u ${RHT_OCP4_QUAY_USER}</span></div>
<div style="position:absolute;left:101.00px;top:668.10px" class="cls_026"><span class="cls_026">Password: </span><span class="cls_029">your_quay_password</span></div>
<div style="position:absolute;left:101.00px;top:680.10px" class="cls_026"><span class="cls_026">Login Succeeded!</span></div>
<div style="position:absolute;left:101.00px;top:692.10px" class="cls_026"><span class="cls_026">[student@workstation mysql]$ </span><span class="cls_027">sudo podman tag \</span></div>
<div style="position:absolute;left:101.00px;top:704.10px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">do180-mysql-57-rhel7 quay.io/${RHT_OCP4_QUAY_USER}/do180-mysql-57-rhel7</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">238</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:205312px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background257.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:119.00px;top:53.69px" class="cls_026"><span class="cls_026">[student@workstation mysql]$ </span><span class="cls_027">sudo podman push \</span></div>
<div style="position:absolute;left:119.00px;top:65.69px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">quay.io/${RHT_OCP4_QUAY_USER}/do180-mysql-57-rhel7</span></div>
<div style="position:absolute;left:119.00px;top:77.69px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:119.00px;top:89.69px" class="cls_026"><span class="cls_026">Copying blob ssha256:04dbae...b21619</span></div>
<div style="position:absolute;left:119.00px;top:101.69px" class="cls_026"><span class="cls_026">205.17 MB / 205.17 MB [=================================================] 1m19s</span></div>
<div style="position:absolute;left:119.00px;top:113.68px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:125.68px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:119.00px;top:137.68px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:144.00px;top:176.88px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:191.26px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">config sha256:</span><span class="cls_011"> value in the above output may differ from your output.</span></div>
<div style="position:absolute;left:144.00px;top:244.13px" class="cls_015"><span class="cls_015">Warning</span></div>
<div style="position:absolute;left:144.00px;top:258.50px" class="cls_011"><span class="cls_011">Make sure the repository is public in </span><span class="cls_021">quay.io</span><span class="cls_011"> so OpenShift can get the image from</span></div>
<div style="position:absolute;left:144.00px;top:270.50px" class="cls_011"><span class="cls_011">it. Refer to the </span><span class="cls_021">Repositories Visibility</span><span class="cls_011"> section of the Appendix C to read</span></div>
<div style="position:absolute;left:144.00px;top:282.50px" class="cls_011"><span class="cls_011">details about how to change repository visibility.</span></div>
<div style="position:absolute;left:119.41px;top:315.34px" class="cls_022"><span class="cls_022">2.</span><span class="cls_011">   Build the base image for the To Do List application using the Node.js Dockerfile, located</span></div>
<div style="position:absolute;left:137.00px;top:327.40px" class="cls_011"><span class="cls_011">in the exercise subdirectory </span><span class="cls_021">images/nodejs</span><span class="cls_011">. Tag the image as </span><span class="cls_021">do180-nodejs</span><span class="cls_011">. Do not</span></div>
<div style="position:absolute;left:137.00px;top:339.40px" class="cls_011"><span class="cls_011">publish this image to the registry.</span></div>
<div style="position:absolute;left:119.00px;top:367.11px" class="cls_026"><span class="cls_026">[student@workstation mysql]$ </span><span class="cls_027">cd ~/DO180/labs/multicontainer-openshift</span></div>
<div style="position:absolute;left:119.00px;top:379.11px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-openshift]$ </span><span class="cls_027">cd images/nodejs</span></div>
<div style="position:absolute;left:119.00px;top:391.11px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">sudo podman build --layers=false -t do180-nodejs .</span></div>
<div style="position:absolute;left:119.00px;top:403.11px" class="cls_026"><span class="cls_026">STEP 1: ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:119.00px;top:415.11px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:119.00px;top:427.11px" class="cls_026"><span class="cls_026">Copying blob sha256:5d92fc...1ce84e</span></div>
<div style="position:absolute;left:119.00px;top:439.11px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:451.11px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:119.00px;top:463.11px" class="cls_026"><span class="cls_026">STEP 2: MAINTAINER username &lt;username@example.com></span></div>
<div style="position:absolute;left:119.00px;top:475.11px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:487.11px" class="cls_026"><span class="cls_026">STEP 8: CMD</span></div>
<div style="position:absolute;left:181.40px;top:487.11px" class="cls_026"><span class="cls_026">["echo", "You must create your own container from this one."]</span></div>
<div style="position:absolute;left:119.00px;top:499.11px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:511.11px" class="cls_026"><span class="cls_026">STEP 9: COMMIT </span><span class="cls_029">...output omitted...</span><span class="cls_026">localhost/do180-nodejs:latest</span></div>
<div style="position:absolute;left:119.00px;top:523.11px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.41px;top:553.34px" class="cls_022"><span class="cls_022">3.</span><span class="cls_011">  Use the </span><span class="cls_021">build.sh</span><span class="cls_011"> script in the </span><span class="cls_021">deploy/nodejs</span><span class="cls_011"> subdirectory to build the To Do List</span></div>
<div style="position:absolute;left:137.00px;top:565.40px" class="cls_011"><span class="cls_011">application. Publish the application image to </span><span class="cls_021">quay.io</span><span class="cls_011"> with an image tag of </span><span class="cls_021">do180-</span></div>
<div style="position:absolute;left:137.00px;top:577.40px" class="cls_021"><span class="cls_021">todonodejs</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:137.00px;top:601.79px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:161.70px;top:601.79px" class="cls_011"><span class="cls_011">Go to the </span><span class="cls_021">~/DO180/labs/multicontainer-openshift/deploy/nodejs</span></div>
<div style="position:absolute;left:161.70px;top:613.79px" class="cls_011"><span class="cls_011">directory and run the </span><span class="cls_021">build.sh</span><span class="cls_011"> command to build the child image.</span></div>
<div style="position:absolute;left:119.00px;top:641.51px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">cd ~/DO180/labs/multicontainer-openshift</span></div>
<div style="position:absolute;left:119.00px;top:653.51px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-openshift]$ </span><span class="cls_027">cd deploy/nodejs</span></div>
<div style="position:absolute;left:119.00px;top:665.51px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">./build.sh</span></div>
<div style="position:absolute;left:119.00px;top:677.50px" class="cls_026"><span class="cls_026">Preparing build folder</span></div>
<div style="position:absolute;left:119.00px;top:689.50px" class="cls_026"><span class="cls_026">STEP 1: FROM do180-nodejs</span></div>
<div style="position:absolute;left:119.00px;top:701.50px" class="cls_026"><span class="cls_026">STEP 2: ARG NEXUS_BASE_URL</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.05px;top:751.59px" class="cls_013"><span class="cls_013">239</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:206114px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background258.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:101.00px;top:53.69px" class="cls_026"><span class="cls_026">STEP 3: MAINTAINER username &lt;username@example.com></span></div>
<div style="position:absolute;left:101.00px;top:65.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:77.69px" class="cls_026"><span class="cls_026">STEP 7: CMD</span></div>
<div style="position:absolute;left:163.40px;top:77.69px" class="cls_026"><span class="cls_026">["scl","enable","rh-nodejs8","./run.sh"]</span></div>
<div style="position:absolute;left:101.00px;top:89.69px" class="cls_026"><span class="cls_026">STEP 8: COMMIT do180/todonodejs</span></div>
<div style="position:absolute;left:101.00px;top:101.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:132.37px" class="cls_011"><span class="cls_011">3.2.   Push the image to </span><span class="cls_021">quay.io</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:143.70px;top:148.36px" class="cls_011"><span class="cls_011">In order to make the image available for OpenShift to use in the template, tag it and</span></div>
<div style="position:absolute;left:143.70px;top:160.36px" class="cls_011"><span class="cls_011">push it to the private registry. To do so, run the following commands in the terminal</span></div>
<div style="position:absolute;left:143.70px;top:172.36px" class="cls_011"><span class="cls_011">window.</span></div>
<div style="position:absolute;left:101.00px;top:200.08px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">sudo podman tag do180/todonodejs \</span></div>
<div style="position:absolute;left:101.00px;top:212.07px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">quay.io/${RHT_OCP4_QUAY_USER}/do180-todonodejs</span></div>
<div style="position:absolute;left:101.00px;top:224.07px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">sudo podman push \</span></div>
<div style="position:absolute;left:101.00px;top:236.07px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">quay.io/${RHT_OCP4_QUAY_USER}/do180-todonodejs</span></div>
<div style="position:absolute;left:101.00px;top:248.07px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:101.00px;top:260.07px" class="cls_026"><span class="cls_026">Copying blob sha256:24a5c62</span><span class="cls_029">...output omitted</span></div>
<div style="position:absolute;left:101.00px;top:272.06px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:284.06px" class="cls_026"><span class="cls_026">Copying blob sha256:5f70bf1</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:105.80px;top:296.06px" class="cls_026"><span class="cls_026">1024 B / 1024 B [=======================================================] 0s</span></div>
<div style="position:absolute;left:101.00px;top:308.06px" class="cls_026"><span class="cls_026">Copying config sha256:c43306d</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:105.80px;top:320.06px" class="cls_026"><span class="cls_026">7.26 KB / 7.26 KB [=====================================================] 0s</span></div>
<div style="position:absolute;left:101.00px;top:332.05px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:101.00px;top:344.05px" class="cls_026"><span class="cls_026">Copying config sha256:c43306d</span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:105.80px;top:356.05px" class="cls_026"><span class="cls_026">0 B / 7.26 KB [---------------------------------------------------------] 0s</span></div>
<div style="position:absolute;left:101.00px;top:368.05px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:101.00px;top:380.04px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:126.00px;top:419.25px" class="cls_015"><span class="cls_015">Warning</span></div>
<div style="position:absolute;left:126.00px;top:433.63px" class="cls_011"><span class="cls_011">Make sure the repository is public in </span><span class="cls_021">quay.io</span><span class="cls_011"> so OpenShift can get the image from</span></div>
<div style="position:absolute;left:126.00px;top:445.62px" class="cls_011"><span class="cls_011">it. Refer to the </span><span class="cls_021">Repositories Visibility</span><span class="cls_011"> section of the Appendix C to read</span></div>
<div style="position:absolute;left:126.00px;top:457.62px" class="cls_011"><span class="cls_011">details about how to change repository visibility.</span></div>
<div style="position:absolute;left:101.41px;top:490.46px" class="cls_022"><span class="cls_022">4.</span><span class="cls_011">  Create the To Do List application from the provided JSON template.</span></div>
<div style="position:absolute;left:119.00px;top:514.92px" class="cls_011"><span class="cls_011">4.1.</span></div>
<div style="position:absolute;left:143.70px;top:514.92px" class="cls_011"><span class="cls_011">Log in to OpenShift Container Platform.</span></div>
<div style="position:absolute;left:101.00px;top:542.64px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">oc login -u ${RHT_OCP4_DEV_USER} \</span></div>
<div style="position:absolute;left:101.00px;top:554.64px" class="cls_026"><span class="cls_026">></span></div>
<div style="position:absolute;left:115.40px;top:554.64px" class="cls_027"><span class="cls_027">-p ${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}</span></div>
<div style="position:absolute;left:101.00px;top:566.63px" class="cls_026"><span class="cls_026">Login successful.</span></div>
<div style="position:absolute;left:101.00px;top:590.63px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:614.62px" class="cls_026"><span class="cls_026">Using project "default".</span></div>
<div style="position:absolute;left:143.70px;top:636.90px" class="cls_011"><span class="cls_011">If the </span><span class="cls_021">oc login</span><span class="cls_011"> command prompts about using insecure connections, answer </span><span class="cls_044">y</span></div>
<div style="position:absolute;left:143.70px;top:648.90px" class="cls_011"><span class="cls_011">(yes).</span></div>
<div style="position:absolute;left:119.00px;top:673.30px" class="cls_011"><span class="cls_011">4.2.  Create a new project template in OpenShift to use for this exercise. Run the following</span></div>
<div style="position:absolute;left:143.70px;top:685.30px" class="cls_011"><span class="cls_011">command to create the </span><span class="cls_021">template</span><span class="cls_011"> project.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">240</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:206916px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background259.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">oc new-project ${RHT_OCP4_DEV_USER}-template</span></div>
<div style="position:absolute;left:119.00px;top:73.69px" class="cls_026"><span class="cls_026">Now using project </span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:137.00px;top:101.13px" class="cls_011"><span class="cls_011">4.3.  Review the template.</span></div>
<div style="position:absolute;left:161.70px;top:117.13px" class="cls_011"><span class="cls_011">Using your preferred editor, open and examine the template located at </span><span class="cls_021">/</span></div>
<div style="position:absolute;left:161.70px;top:129.13px" class="cls_021"><span class="cls_021">home/student/DO180/labs/multicontainer-openshift/todo-</span></div>
<div style="position:absolute;left:161.70px;top:141.13px" class="cls_021"><span class="cls_021">template.json</span><span class="cls_011">. Notice the following resources defined in the template and review</span></div>
<div style="position:absolute;left:161.70px;top:153.12px" class="cls_011"><span class="cls_011">their configurations.</span></div>
<div style="position:absolute;left:161.70px;top:173.28px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">todoapi</span><span class="cls_011"> pod definition defines the Node.js application.</span></div>
<div style="position:absolute;left:161.70px;top:193.44px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">mysql</span><span class="cls_011"> pod definition defines the MySQL database.</span></div>
<div style="position:absolute;left:161.70px;top:213.60px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">todoapi</span><span class="cls_011"> service provides connectivity to the Node.js application pod.</span></div>
<div style="position:absolute;left:161.70px;top:233.76px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">mysql</span><span class="cls_011"> service provides connectivity to the MySQL database pod.</span></div>
<div style="position:absolute;left:161.70px;top:253.92px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">dbinit</span><span class="cls_011"> persistent volume claim definition defines the MySQL </span><span class="cls_021">/var/lib/</span></div>
<div style="position:absolute;left:171.20px;top:265.92px" class="cls_021"><span class="cls_021">mysql/init</span><span class="cls_011"> volume.</span></div>
<div style="position:absolute;left:161.70px;top:286.08px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">dbclaim</span><span class="cls_011"> persistent volume claim definition defines the MySQL </span><span class="cls_021">/var/lib/</span></div>
<div style="position:absolute;left:171.20px;top:298.07px" class="cls_021"><span class="cls_021">mysql/data</span><span class="cls_011"> volume.</span></div>
<div style="position:absolute;left:137.00px;top:319.23px" class="cls_011"><span class="cls_011">4.4.  Process the template and create the application resources.</span></div>
<div style="position:absolute;left:161.70px;top:335.23px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">oc process</span><span class="cls_011"> command to process the template file. This template</span></div>
<div style="position:absolute;left:161.70px;top:347.23px" class="cls_011"><span class="cls_011">requires the Quay.io namespace to retrieve the container images, as the</span></div>
<div style="position:absolute;left:161.70px;top:359.23px" class="cls_021"><span class="cls_021">RHT_OCP4_QUAY_USER</span><span class="cls_011"> parameter. Use the </span><span class="cls_021">pipe</span><span class="cls_011"> command to send the result to the</span></div>
<div style="position:absolute;left:161.70px;top:371.23px" class="cls_021"><span class="cls_021">oc create</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:161.70px;top:387.22px" class="cls_011"><span class="cls_011">Run the following command in the terminal window:</span></div>
<div style="position:absolute;left:119.00px;top:414.94px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">cd /home/student/DO180/labs/multicontainer-openshift</span></div>
<div style="position:absolute;left:119.00px;top:426.94px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-openshift]$ </span><span class="cls_027">oc process \</span></div>
<div style="position:absolute;left:119.00px;top:438.94px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-f todo-template.json -p RHT_OCP4_QUAY_USER=${RHT_OCP4_QUAY_USER} \</span></div>
<div style="position:absolute;left:119.00px;top:450.93px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">| oc create -f -</span></div>
<div style="position:absolute;left:119.00px;top:462.93px" class="cls_026"><span class="cls_026">pod/mysql created</span></div>
<div style="position:absolute;left:119.00px;top:474.93px" class="cls_026"><span class="cls_026">pod/todoapi created</span></div>
<div style="position:absolute;left:119.00px;top:486.93px" class="cls_026"><span class="cls_026">service/todoapi created</span></div>
<div style="position:absolute;left:119.00px;top:498.93px" class="cls_026"><span class="cls_026">service/mysql created</span></div>
<div style="position:absolute;left:119.00px;top:510.92px" class="cls_026"><span class="cls_026">persistentvolumeclaim/dbinit created</span></div>
<div style="position:absolute;left:119.00px;top:522.92px" class="cls_026"><span class="cls_026">persistentvolumeclaim/dbclaim created</span></div>
<div style="position:absolute;left:137.00px;top:550.36px" class="cls_011"><span class="cls_011">4.5.  Review the deployment.</span></div>
<div style="position:absolute;left:161.70px;top:566.36px" class="cls_011"><span class="cls_011">Review the status of the deployment using the </span><span class="cls_021">oc get pods</span><span class="cls_011"> command with the</span></div>
<div style="position:absolute;left:161.70px;top:578.36px" class="cls_021"><span class="cls_021">-w</span><span class="cls_011"> option to continue to monitor the pod status. Wait until both the containers are</span></div>
<div style="position:absolute;left:161.70px;top:590.36px" class="cls_011"><span class="cls_011">running. It may take some time for both pods to start.</span></div>
<div style="position:absolute;left:119.00px;top:618.07px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-openshift]$ </span><span class="cls_027">oc get pods -w</span></div>
<div style="position:absolute;left:119.00px;top:630.07px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:167.00px;top:630.07px" class="cls_026"><span class="cls_026">READY</span></div>
<div style="position:absolute;left:215.00px;top:630.07px" class="cls_026"><span class="cls_026">STATUS</span></div>
<div style="position:absolute;left:311.00px;top:630.07px" class="cls_026"><span class="cls_026">RESTARTS   AGE</span></div>
<div style="position:absolute;left:119.00px;top:642.07px" class="cls_026"><span class="cls_026">mysql</span></div>
<div style="position:absolute;left:167.00px;top:642.07px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:215.00px;top:642.07px" class="cls_026"><span class="cls_026">ContainerCreating</span></div>
<div style="position:absolute;left:311.00px;top:642.07px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:363.80px;top:642.07px" class="cls_026"><span class="cls_026">27s</span></div>
<div style="position:absolute;left:119.00px;top:654.07px" class="cls_026"><span class="cls_026">todoapi</span></div>
<div style="position:absolute;left:167.00px;top:654.07px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:215.00px;top:654.07px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:311.00px;top:654.07px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:363.80px;top:654.07px" class="cls_026"><span class="cls_026">27s</span></div>
<div style="position:absolute;left:119.00px;top:666.07px" class="cls_026"><span class="cls_026">mysql</span></div>
<div style="position:absolute;left:167.00px;top:666.07px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:215.00px;top:666.07px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:311.00px;top:666.07px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:363.80px;top:666.07px" class="cls_026"><span class="cls_026">27s</span></div>
<div style="position:absolute;left:161.70px;top:688.34px" class="cls_011"><span class="cls_011">Press </span><span class="cls_021">Ctrl</span><span class="cls_011">+</span><span class="cls_021">C</span><span class="cls_011"> to exit the command.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.60px;top:751.59px" class="cls_013"><span class="cls_013">241</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:207718px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background260.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:101.41px;top:53.92px" class="cls_022"><span class="cls_022">5.</span><span class="cls_011">  Expose the Service.</span></div>
<div style="position:absolute;left:119.00px;top:69.98px" class="cls_011"><span class="cls_011">To allow the To Do List application to be accessible through the OpenShift router and to be</span></div>
<div style="position:absolute;left:119.00px;top:81.98px" class="cls_011"><span class="cls_011">available as a public FQDN, use the </span><span class="cls_021">oc expose</span><span class="cls_011"> command to expose the </span><span class="cls_021">todoapi</span><span class="cls_011"> service.</span></div>
<div style="position:absolute;left:119.00px;top:97.98px" class="cls_011"><span class="cls_011">Run the following command in the terminal window.</span></div>
<div style="position:absolute;left:101.00px;top:125.70px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-openshift]$ </span><span class="cls_027">oc expose service todoapi</span></div>
<div style="position:absolute;left:101.00px;top:137.70px" class="cls_026"><span class="cls_026">route.route.openshift.io/todoapi exposed</span></div>
<div style="position:absolute;left:101.41px;top:167.92px" class="cls_022"><span class="cls_022">6.</span><span class="cls_011">  Test the application.</span></div>
<div style="position:absolute;left:119.00px;top:192.38px" class="cls_011"><span class="cls_011">6.1.</span></div>
<div style="position:absolute;left:143.70px;top:192.38px" class="cls_011"><span class="cls_011">Find the FQDN of the application by running the </span><span class="cls_021">oc status</span><span class="cls_011"> command and note the</span></div>
<div style="position:absolute;left:143.70px;top:204.37px" class="cls_011"><span class="cls_011">FQDN for the app.</span></div>
<div style="position:absolute;left:143.70px;top:220.37px" class="cls_011"><span class="cls_011">Run the following command in the terminal window.</span></div>
<div style="position:absolute;left:101.00px;top:248.09px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-openshift]$ </span><span class="cls_027">oc status | grep -o "<A HREF="http:.*com"/">http:.*com"</A> </span></div>
<div style="position:absolute;left:101.00px;top:260.09px" class="cls_026"><span class="cls_026"> </span><A HREF="http://todoapi-${rht_ocp4_quay_user}-template.${rht_ocp4_wildcard_domain}/">http://todoapi-${RHT_OCP4_QUAY_USER}-template.${RHT_OCP4_WILDCARD_DOMAIN}</A> </div>
<div style="position:absolute;left:119.00px;top:290.77px" class="cls_011"><span class="cls_011">6.2.  Use </span><span class="cls_021">curl</span><span class="cls_011"> to test the REST API for the To Do List application.</span></div>
<div style="position:absolute;left:101.00px;top:318.48px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-openshift]$ </span><span class="cls_027">curl -w "\n" \</span></div>
<div style="position:absolute;left:101.00px;top:330.48px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">$(oc status | grep -o "<A HREF="http:.*com"/">http:.*com"</A>)/todo/api/items/1</span></div>
<div style="position:absolute;left:101.00px;top:342.48px" class="cls_026"><span class="cls_026">{"id":1,"description":"Pick up newspaper","done":false}</span></div>
<div style="position:absolute;left:143.70px;top:364.76px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">-w "\n"</span><span class="cls_011"> option with </span><span class="cls_021">curl</span><span class="cls_011"> command lets the shell prompt appear at the next</span></div>
<div style="position:absolute;left:143.70px;top:376.76px" class="cls_011"><span class="cls_011">line rather than merging with the output in the same line.</span></div>
<div style="position:absolute;left:119.00px;top:401.15px" class="cls_011"><span class="cls_011">6.3.  Open Firefox on </span><span class="cls_021">workstation</span><span class="cls_011"> and point your browser</span></div>
<div style="position:absolute;left:143.70px;top:413.15px" class="cls_011"><span class="cls_011">to </span><span class="cls_021">http://todoapi-</span><span class="cls_028">${RHT_OCP4_QUAY_USER}</span><span class="cls_021">-</span></div>
<div style="position:absolute;left:143.70px;top:425.15px" class="cls_021"><span class="cls_021">template.</span><span class="cls_028">${RHT_OCP4_WILDCARD_DOMAIN}</span><span class="cls_021">/todo/</span><span class="cls_011"> and you should see the To</span></div>
<div style="position:absolute;left:143.70px;top:437.15px" class="cls_011"><span class="cls_011">Do List application.</span></div>
<div style="position:absolute;left:126.00px;top:470.07px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:484.45px" class="cls_011"><span class="cls_011">The trailing slash in the URL mentioned above is necessary. If you do not include</span></div>
<div style="position:absolute;left:126.00px;top:496.44px" class="cls_011"><span class="cls_011">that in the URL, you may encounter issues with the application.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">242</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:208520px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background261.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:250.39px;top:254.11px" class="cls_020"><span class="cls_020">Figure 7.4: To Do List application</span></div>
<div style="position:absolute;left:108.00px;top:277.09px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:108.00px;top:299.02px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab multicontainer-openshift finish</span><span class="cls_011"> script to complete this</span></div>
<div style="position:absolute;left:108.00px;top:311.02px" class="cls_011"><span class="cls_011">lab.</span></div>
<div style="position:absolute;left:119.00px;top:338.74px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab multicontainer-openshift finish</span></div>
<div style="position:absolute;left:108.00px;top:366.52px" class="cls_011"><span class="cls_011">This concludes the guided exercise.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:502.68px;top:751.59px" class="cls_013"><span class="cls_013">243</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:209322px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background262.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_042"><span class="cls_042">Lab</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:102.00px;top:139.15px" class="cls_043"><span class="cls_043">Performance Checklist</span></div>
<div style="position:absolute;left:102.00px;top:157.09px" class="cls_011"><span class="cls_011">In this lab, you will deploy a PHP Application with a MySQL database using an OpenShift</span></div>
<div style="position:absolute;left:102.00px;top:169.09px" class="cls_011"><span class="cls_011">template to define the resources needed by the application.</span></div>
<div style="position:absolute;left:102.00px;top:192.15px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:210.09px" class="cls_011"><span class="cls_011">You should be able to create an OpenShift application comprised of multiple containers and</span></div>
<div style="position:absolute;left:102.00px;top:222.08px" class="cls_011"><span class="cls_011">access it through a web browser.</span></div>
<div style="position:absolute;left:102.00px;top:245.15px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:263.08px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following commands:</span></div>
<div style="position:absolute;left:101.00px;top:290.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab multicontainer-review start</span></div>
<div style="position:absolute;left:101.00px;top:302.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd ~/DO180/labs/multicontainer-review</span></div>
<div style="position:absolute;left:90.00px;top:357.42px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:112.00px;top:357.48px" class="cls_011"><span class="cls_011">Log in to OpenShift cluster and create a new project for this exercise.</span></div>
<div style="position:absolute;left:90.00px;top:375.42px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:112.00px;top:375.48px" class="cls_011"><span class="cls_011">Build the Database container image located in the </span><span class="cls_021">images/mysql</span><span class="cls_011"> directory and publish it to</span></div>
<div style="position:absolute;left:112.00px;top:387.48px" class="cls_011"><span class="cls_011">your Quay.io repository.</span></div>
<div style="position:absolute;left:90.00px;top:405.42px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:112.00px;top:405.48px" class="cls_011"><span class="cls_011">Build the PHP container image located in the </span><span class="cls_021">images/quote-php</span><span class="cls_011"> and publish it to your</span></div>
<div style="position:absolute;left:112.00px;top:417.48px" class="cls_011"><span class="cls_011">Quay.io repository.</span></div>
<div style="position:absolute;left:126.00px;top:450.40px" class="cls_015"><span class="cls_015">Warning</span></div>
<div style="position:absolute;left:126.00px;top:464.78px" class="cls_011"><span class="cls_011">Make sure both repositories are public in </span><span class="cls_021">quay.io</span><span class="cls_011"> so OpenShift can get the images</span></div>
<div style="position:absolute;left:126.00px;top:476.78px" class="cls_011"><span class="cls_011">from it. Refer to the </span><span class="cls_021">Repositories Visibility</span><span class="cls_011"> section of the Appendix C to</span></div>
<div style="position:absolute;left:126.00px;top:488.78px" class="cls_011"><span class="cls_011">read details about how change repository visibility.</span></div>
<div style="position:absolute;left:90.00px;top:515.62px" class="cls_022"><span class="cls_022">4.</span></div>
<div style="position:absolute;left:112.00px;top:515.68px" class="cls_011"><span class="cls_011">Go to the </span><span class="cls_021">/home/student/DO180/labs/multicontainer-review/</span><span class="cls_011"> directory and</span></div>
<div style="position:absolute;left:112.00px;top:527.68px" class="cls_011"><span class="cls_011">review the provided template </span><span class="cls_021">quote-php-template.json</span><span class="cls_011"> file.</span></div>
<div style="position:absolute;left:112.00px;top:543.68px" class="cls_011"><span class="cls_011">Note the definitions and configuration of the pods, services, and persistent volume claims</span></div>
<div style="position:absolute;left:112.00px;top:555.68px" class="cls_011"><span class="cls_011">defined in the template.</span></div>
<div style="position:absolute;left:90.00px;top:573.62px" class="cls_022"><span class="cls_022">5.</span></div>
<div style="position:absolute;left:112.00px;top:573.68px" class="cls_011"><span class="cls_011">Upload the PHP application template so that any developer with access to your project can</span></div>
<div style="position:absolute;left:112.00px;top:585.68px" class="cls_011"><span class="cls_011">use it.</span></div>
<div style="position:absolute;left:90.00px;top:603.62px" class="cls_022"><span class="cls_022">6.</span></div>
<div style="position:absolute;left:112.00px;top:603.68px" class="cls_011"><span class="cls_011">Process the uploaded template and create the application resources.</span></div>
<div style="position:absolute;left:90.00px;top:621.62px" class="cls_022"><span class="cls_022">7.</span></div>
<div style="position:absolute;left:112.00px;top:621.68px" class="cls_011"><span class="cls_011">Expose the service.</span></div>
<div style="position:absolute;left:90.00px;top:639.62px" class="cls_022"><span class="cls_022">8.</span></div>
<div style="position:absolute;left:112.00px;top:639.68px" class="cls_011"><span class="cls_011">Test the application and verify that it outputs an inspiring message.</span></div>
<div style="position:absolute;left:90.00px;top:663.74px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:90.00px;top:685.68px" class="cls_011"><span class="cls_011">Grade your work by running the </span><span class="cls_021">lab multicontainer-review grade</span><span class="cls_011"> command from your</span></div>
<div style="position:absolute;left:90.00px;top:697.67px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011"> machine. Correct any reported failures and rerun the script until successful.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">244</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:210124px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background263.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab multicontainer-review grade</span></div>
<div style="position:absolute;left:108.00px;top:92.04px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:108.00px;top:113.97px" class="cls_011"><span class="cls_011">To complete this lab, run the </span><span class="cls_021">lab multicontainer-review finish</span><span class="cls_011"> command on</span></div>
<div style="position:absolute;left:108.00px;top:125.97px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:153.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab multicontainer-review finish</span></div>
<div style="position:absolute;left:108.00px;top:181.47px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:502.77px;top:751.59px" class="cls_013"><span class="cls_013">245</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:210926px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background264.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_042"><span class="cls_042">Solution</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:102.00px;top:139.15px" class="cls_043"><span class="cls_043">Performance Checklist</span></div>
<div style="position:absolute;left:102.00px;top:157.09px" class="cls_011"><span class="cls_011">In this lab, you will deploy a PHP Application with a MySQL database using an OpenShift</span></div>
<div style="position:absolute;left:102.00px;top:169.09px" class="cls_011"><span class="cls_011">template to define the resources needed by the application.</span></div>
<div style="position:absolute;left:102.00px;top:192.15px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:210.09px" class="cls_011"><span class="cls_011">You should be able to create an OpenShift application comprised of multiple containers and</span></div>
<div style="position:absolute;left:102.00px;top:222.08px" class="cls_011"><span class="cls_011">access it through a web browser.</span></div>
<div style="position:absolute;left:102.00px;top:245.15px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:263.08px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following commands:</span></div>
<div style="position:absolute;left:101.00px;top:290.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab multicontainer-review start</span></div>
<div style="position:absolute;left:101.00px;top:302.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd ~/DO180/labs/multicontainer-review</span></div>
<div style="position:absolute;left:90.00px;top:357.42px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:112.00px;top:357.48px" class="cls_011"><span class="cls_011">Log in to OpenShift cluster and create a new project for this exercise.</span></div>
<div style="position:absolute;left:112.00px;top:381.88px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:136.70px;top:381.88px" class="cls_011"><span class="cls_011">From </span><span class="cls_021">workstation</span><span class="cls_011">, log in as the user provided at the first exercise.</span></div>
<div style="position:absolute;left:101.00px;top:409.59px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-review]$ </span><span class="cls_027">source /usr/local/etc/ocp4.config</span></div>
<div style="position:absolute;left:101.00px;top:421.59px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-review]$ </span><span class="cls_027">oc login -u ${RHT_OCP4_DEV_USER} \</span></div>
<div style="position:absolute;left:101.00px;top:433.59px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p ${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}</span></div>
<div style="position:absolute;left:101.00px;top:445.59px" class="cls_026"><span class="cls_026">Login successful.</span></div>
<div style="position:absolute;left:101.00px;top:469.58px" class="cls_026"><span class="cls_026">You don't have any projects. You can try to create a new project, by running</span></div>
<div style="position:absolute;left:120.20px;top:493.58px" class="cls_026"><span class="cls_026">oc new-project &lt;projectname></span></div>
<div style="position:absolute;left:136.70px;top:515.86px" class="cls_011"><span class="cls_011">If the </span><span class="cls_021">oc login</span><span class="cls_011"> command prompts about using insecure connections, answer </span><span class="cls_044">y</span><span class="cls_011"> (yes).</span></div>
<div style="position:absolute;left:112.00px;top:540.26px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:136.70px;top:540.26px" class="cls_011"><span class="cls_011">Create a new project in OpenShift named </span><span class="cls_021">deploy</span><span class="cls_011"> and prefixed by your OpenShift</span></div>
<div style="position:absolute;left:136.70px;top:552.25px" class="cls_011"><span class="cls_011">username:</span></div>
<div style="position:absolute;left:101.00px;top:579.97px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-review]$ </span><span class="cls_027">oc new-project \</span></div>
<div style="position:absolute;left:101.00px;top:591.97px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">${RHT_OCP4_DEV_USER}-deploy</span></div>
<div style="position:absolute;left:101.00px;top:603.97px" class="cls_026"><span class="cls_026">Now using project </span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:90.00px;top:633.59px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:112.00px;top:633.65px" class="cls_011"><span class="cls_011">Build the Database container image located in the </span><span class="cls_021">images/mysql</span><span class="cls_011"> directory and publish it to</span></div>
<div style="position:absolute;left:112.00px;top:645.65px" class="cls_011"><span class="cls_011">your Quay.io repository.</span></div>
<div style="position:absolute;left:112.00px;top:670.05px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:136.70px;top:670.05px" class="cls_011"><span class="cls_011">Build the MySQL Database image using the provided Dockerfile in the </span><span class="cls_021">images/mysql</span></div>
<div style="position:absolute;left:136.70px;top:682.04px" class="cls_011"><span class="cls_011">directory.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">246</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:211728px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background265.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-review]$ </span><span class="cls_027">cd images/mysql</span></div>
<div style="position:absolute;left:119.00px;top:73.69px" class="cls_026"><span class="cls_026">[student@workstation mysql]$ </span><span class="cls_027">sudo podman build -t do180-mysql-57-rhel7 .</span></div>
<div style="position:absolute;left:119.00px;top:85.69px" class="cls_026"><span class="cls_026">STEP 1: FROM rhscl/mysql-57-rhel7</span></div>
<div style="position:absolute;left:119.00px;top:97.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:109.69px" class="cls_026"><span class="cls_026">STEP 4: COMMIT do180-mysql-57-rhel7</span></div>
<div style="position:absolute;left:119.00px;top:121.68px" class="cls_026"><span class="cls_026">397a...5cfb</span></div>
<div style="position:absolute;left:130.00px;top:152.36px" class="cls_011"><span class="cls_011">2.2.   Push the MySQL image to the your Quay.io repository.</span></div>
<div style="position:absolute;left:154.70px;top:168.36px" class="cls_011"><span class="cls_011">In order to make the image available for OpenShift to use in the template, give it the</span></div>
<div style="position:absolute;left:154.70px;top:180.36px" class="cls_011"><span class="cls_011">tag </span><span class="cls_021">quay.io/${RHT_OCP4_QUAY_USER}/do180-mysql-57-rhel7</span><span class="cls_011"> and push it to</span></div>
<div style="position:absolute;left:154.70px;top:192.36px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">quay.io</span><span class="cls_011"> registry. In order to push images to </span><span class="cls_021">quay.io</span><span class="cls_011"> you first need to log in with</span></div>
<div style="position:absolute;left:154.70px;top:204.36px" class="cls_011"><span class="cls_011">your own credentials.</span></div>
<div style="position:absolute;left:119.00px;top:232.07px" class="cls_026"><span class="cls_026">[student@workstation mysql]$ </span><span class="cls_027">sudo podman login quay.io -u ${RHT_OCP4_QUAY_USER}</span></div>
<div style="position:absolute;left:119.00px;top:244.07px" class="cls_026"><span class="cls_026">Password: </span><span class="cls_029">your_quay_password</span></div>
<div style="position:absolute;left:119.00px;top:256.07px" class="cls_026"><span class="cls_026">Login Succeeded!</span></div>
<div style="position:absolute;left:154.70px;top:278.35px" class="cls_011"><span class="cls_011">To tag and push the image run the following commands in the terminal window.</span></div>
<div style="position:absolute;left:119.00px;top:306.07px" class="cls_026"><span class="cls_026">[student@workstation mysql]$ </span><span class="cls_027">sudo podman tag do180-mysql-57-rhel7 \</span></div>
<div style="position:absolute;left:119.00px;top:318.06px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">quay.io/${RHT_OCP4_QUAY_USER}/do180-mysql-57-rhel7</span></div>
<div style="position:absolute;left:119.00px;top:330.06px" class="cls_026"><span class="cls_026">[student@workstation mysql]$ </span><span class="cls_027">sudo podman push \</span></div>
<div style="position:absolute;left:119.00px;top:342.06px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">quay.io/${RHT_OCP4_QUAY_USER}/do180-mysql-57-rhel7</span></div>
<div style="position:absolute;left:119.00px;top:354.06px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:119.00px;top:366.05px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:378.05px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:119.00px;top:390.05px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:154.70px;top:412.33px" class="cls_011"><span class="cls_011">Return to the previous directory.</span></div>
<div style="position:absolute;left:119.00px;top:440.05px" class="cls_026"><span class="cls_026">[student@workstation mysql]$ </span><span class="cls_027">cd ~/DO180/labs/multicontainer-review</span></div>
<div style="position:absolute;left:108.00px;top:469.67px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:130.00px;top:469.73px" class="cls_011"><span class="cls_011">Build the PHP container image located in the </span><span class="cls_021">images/quote-php</span><span class="cls_011"> and publish it to your</span></div>
<div style="position:absolute;left:130.00px;top:481.73px" class="cls_011"><span class="cls_011">Quay.io repository.</span></div>
<div style="position:absolute;left:144.00px;top:514.65px" class="cls_015"><span class="cls_015">Warning</span></div>
<div style="position:absolute;left:144.00px;top:529.03px" class="cls_011"><span class="cls_011">Make sure both repositories are public in </span><span class="cls_021">quay.io</span><span class="cls_011"> so OpenShift can get the images</span></div>
<div style="position:absolute;left:144.00px;top:541.03px" class="cls_011"><span class="cls_011">from it. Refer to the </span><span class="cls_021">Repositories Visibility</span><span class="cls_011"> section of the Appendix C to</span></div>
<div style="position:absolute;left:144.00px;top:553.03px" class="cls_011"><span class="cls_011">read details about how change repository visibility.</span></div>
<div style="position:absolute;left:130.00px;top:586.33px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:154.70px;top:586.33px" class="cls_011"><span class="cls_011">Build the PHP image using the provided Dockerfile in the </span><span class="cls_021">images/quote-php</span></div>
<div style="position:absolute;left:154.70px;top:598.32px" class="cls_011"><span class="cls_011">directory.</span></div>
<div style="position:absolute;left:119.00px;top:626.04px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-review]$ </span><span class="cls_027">cd images/quote-php</span></div>
<div style="position:absolute;left:119.00px;top:638.04px" class="cls_026"><span class="cls_026">[student@workstation quote-php]$ </span><span class="cls_027">sudo podman build -t do180-quote-php .</span></div>
<div style="position:absolute;left:119.00px;top:650.04px" class="cls_026"><span class="cls_026">STEP 1: FROM registry.access.redhat.com/ubi8/ubi</span></div>
<div style="position:absolute;left:119.00px;top:662.03px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:674.03px" class="cls_026"><span class="cls_026">STEP 8: COMMIT do180-quote-php</span></div>
<div style="position:absolute;left:119.00px;top:686.03px" class="cls_026"><span class="cls_026">271f...525d</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:502.77px;top:751.59px" class="cls_013"><span class="cls_013">247</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:212530px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background266.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:112.00px;top:54.98px" class="cls_011"><span class="cls_011">3.2.   Tag and push the PHP image to your Quay.io registry.</span></div>
<div style="position:absolute;left:136.70px;top:70.97px" class="cls_011"><span class="cls_011">In order to make the image available for OpenShift to use in the template, give it the</span></div>
<div style="position:absolute;left:136.70px;top:82.97px" class="cls_011"><span class="cls_011">tag of </span><span class="cls_021">quay.io/${RHT_OCP4_QUAY_USER/do180-quote-php</span><span class="cls_011"> and push it to</span></div>
<div style="position:absolute;left:136.70px;top:94.97px" class="cls_011"><span class="cls_011">Quay.io.</span></div>
<div style="position:absolute;left:101.00px;top:122.69px" class="cls_026"><span class="cls_026">[student@workstation quote-php]$ </span><span class="cls_027">sudo podman tag do180-quote-php \</span></div>
<div style="position:absolute;left:101.00px;top:134.68px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">quay.io/${RHT_OCP4_QUAY_USER}/do180-quote-php</span></div>
<div style="position:absolute;left:101.00px;top:146.68px" class="cls_026"><span class="cls_026">[student@workstation quote-php]$ </span><span class="cls_027">sudo podman push \</span></div>
<div style="position:absolute;left:101.00px;top:158.68px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">quay.io/${RHT_OCP4_QUAY_USER}/do180-quote-php</span></div>
<div style="position:absolute;left:101.00px;top:170.68px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:101.00px;top:182.68px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:194.67px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:101.00px;top:206.67px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:90.00px;top:236.29px" class="cls_022"><span class="cls_022">4.</span></div>
<div style="position:absolute;left:112.00px;top:236.35px" class="cls_011"><span class="cls_011">Go to the </span><span class="cls_021">/home/student/DO180/labs/multicontainer-review/</span><span class="cls_011"> directory and</span></div>
<div style="position:absolute;left:112.00px;top:248.35px" class="cls_011"><span class="cls_011">review the provided template </span><span class="cls_021">quote-php-template.json</span><span class="cls_011"> file.</span></div>
<div style="position:absolute;left:112.00px;top:264.35px" class="cls_011"><span class="cls_011">Note the definitions and configuration of the pods, services, and persistent volume claims</span></div>
<div style="position:absolute;left:112.00px;top:276.35px" class="cls_011"><span class="cls_011">defined in the template.</span></div>
<div style="position:absolute;left:101.00px;top:304.07px" class="cls_026"><span class="cls_026">[student@workstation quote-php]$ </span><span class="cls_027">cd ~/DO180/labs/multicontainer-review</span></div>
<div style="position:absolute;left:90.00px;top:328.30px" class="cls_022"><span class="cls_022">5.</span></div>
<div style="position:absolute;left:112.00px;top:328.35px" class="cls_011"><span class="cls_011">Upload the PHP application template so that any developer with access to your project can</span></div>
<div style="position:absolute;left:112.00px;top:340.35px" class="cls_011"><span class="cls_011">use it.</span></div>
<div style="position:absolute;left:112.00px;top:356.35px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">oc create -f</span><span class="cls_011"> command to upload the template file to the project.</span></div>
<div style="position:absolute;left:101.00px;top:384.07px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-review]$ </span><span class="cls_027">oc create -f quote-php-template.json</span></div>
<div style="position:absolute;left:101.00px;top:396.07px" class="cls_026"><span class="cls_026">template.template.openshift.io/quote-php-persistent created</span></div>
<div style="position:absolute;left:90.00px;top:420.30px" class="cls_022"><span class="cls_022">6.</span></div>
<div style="position:absolute;left:112.00px;top:420.35px" class="cls_011"><span class="cls_011">Process the uploaded template and create the application resources.</span></div>
<div style="position:absolute;left:112.00px;top:444.75px" class="cls_011"><span class="cls_011">6.1.</span></div>
<div style="position:absolute;left:136.70px;top:444.75px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">oc process</span><span class="cls_011"> command to process the template file. Make sure providing the</span></div>
<div style="position:absolute;left:136.70px;top:456.75px" class="cls_021"><span class="cls_021">RHT_OCP4_QUAY_USER</span><span class="cls_011"> parameter with the </span><span class="cls_021">quay.io</span><span class="cls_011"> namespace where images are</span></div>
<div style="position:absolute;left:136.70px;top:468.75px" class="cls_011"><span class="cls_011">located. Use the </span><span class="cls_021">pipe</span><span class="cls_011"> command to send the result to the </span><span class="cls_021">oc create</span><span class="cls_011"> command to</span></div>
<div style="position:absolute;left:136.70px;top:480.75px" class="cls_011"><span class="cls_011">create an application from the template.</span></div>
<div style="position:absolute;left:101.00px;top:508.46px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-review]$ </span><span class="cls_027">oc process quote-php-persistent \</span></div>
<div style="position:absolute;left:101.00px;top:520.46px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p RHT_OCP4_QUAY_USER=${RHT_OCP4_QUAY_USER} \</span></div>
<div style="position:absolute;left:101.00px;top:532.46px" class="cls_026"><span class="cls_026">></span></div>
<div style="position:absolute;left:115.40px;top:532.46px" class="cls_027"><span class="cls_027">| oc create -f -</span></div>
<div style="position:absolute;left:101.00px;top:544.46px" class="cls_026"><span class="cls_026">pod/mysql created</span></div>
<div style="position:absolute;left:101.00px;top:556.46px" class="cls_026"><span class="cls_026">pod/quote-php created</span></div>
<div style="position:absolute;left:101.00px;top:568.45px" class="cls_026"><span class="cls_026">service/quote-php created</span></div>
<div style="position:absolute;left:101.00px;top:580.45px" class="cls_026"><span class="cls_026">service/mysql created</span></div>
<div style="position:absolute;left:101.00px;top:592.45px" class="cls_026"><span class="cls_026">persistentvolumeclaim/dbinit created</span></div>
<div style="position:absolute;left:101.00px;top:604.45px" class="cls_026"><span class="cls_026">persistentvolumeclaim/dbclaim created</span></div>
<div style="position:absolute;left:112.00px;top:635.13px" class="cls_011"><span class="cls_011">6.2.  Verify the status of the deployment using the </span><span class="cls_021">oc get pods</span><span class="cls_011"> command with the </span><span class="cls_021">-w</span></div>
<div style="position:absolute;left:136.70px;top:647.12px" class="cls_011"><span class="cls_011">option to monitor the deployment status. Wait until both pods are running. It may take</span></div>
<div style="position:absolute;left:136.70px;top:659.12px" class="cls_011"><span class="cls_011">some time for both pods to start up.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">248</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:213332px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background267.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-review]$ </span><span class="cls_027">oc get pods -w</span></div>
<div style="position:absolute;left:119.00px;top:73.69px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:176.60px;top:73.69px" class="cls_026"><span class="cls_026">READY   STATUS</span></div>
<div style="position:absolute;left:311.00px;top:73.69px" class="cls_026"><span class="cls_026">RESTARTS   AGE</span></div>
<div style="position:absolute;left:119.00px;top:85.69px" class="cls_026"><span class="cls_026">mysql</span></div>
<div style="position:absolute;left:176.60px;top:85.69px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:215.00px;top:85.69px" class="cls_026"><span class="cls_026">ContainerCreating</span></div>
<div style="position:absolute;left:311.00px;top:85.69px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:363.80px;top:85.69px" class="cls_026"><span class="cls_026">21s</span></div>
<div style="position:absolute;left:119.00px;top:97.69px" class="cls_026"><span class="cls_026">quote-php</span></div>
<div style="position:absolute;left:176.60px;top:97.69px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:215.00px;top:97.69px" class="cls_026"><span class="cls_026">ContainerCreating</span></div>
<div style="position:absolute;left:311.00px;top:97.69px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:363.80px;top:97.69px" class="cls_026"><span class="cls_026">20s</span></div>
<div style="position:absolute;left:119.00px;top:109.69px" class="cls_026"><span class="cls_026">quote-php</span></div>
<div style="position:absolute;left:176.60px;top:109.69px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:215.00px;top:109.69px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:311.00px;top:109.69px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:363.80px;top:109.69px" class="cls_026"><span class="cls_026">35s</span></div>
<div style="position:absolute;left:119.00px;top:121.68px" class="cls_026"><span class="cls_026">mysql</span></div>
<div style="position:absolute;left:176.60px;top:121.68px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:215.00px;top:121.68px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:311.00px;top:121.68px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:363.80px;top:121.68px" class="cls_026"><span class="cls_026">49s</span></div>
<div style="position:absolute;left:119.00px;top:133.68px" class="cls_027"><span class="cls_027">^C</span></div>
<div style="position:absolute;left:154.70px;top:155.96px" class="cls_011"><span class="cls_011">Press </span><span class="cls_021">Ctrl</span><span class="cls_011">+</span><span class="cls_021">C</span><span class="cls_011"> to exit the command.</span></div>
<div style="position:absolute;left:108.00px;top:179.30px" class="cls_022"><span class="cls_022">7.</span></div>
<div style="position:absolute;left:130.00px;top:179.36px" class="cls_011"><span class="cls_011">Expose the service.</span></div>
<div style="position:absolute;left:130.00px;top:195.36px" class="cls_011"><span class="cls_011">To allow the PHP Quote application to be accessible through the OpenShift router and</span></div>
<div style="position:absolute;left:130.00px;top:207.36px" class="cls_011"><span class="cls_011">reachable from an external network, use the </span><span class="cls_021">oc expose</span><span class="cls_011"> command to expose the </span><span class="cls_021">quote-</span></div>
<div style="position:absolute;left:130.00px;top:219.36px" class="cls_021"><span class="cls_021">php</span><span class="cls_011"> service.</span></div>
<div style="position:absolute;left:130.00px;top:235.36px" class="cls_011"><span class="cls_011">Run the following command in the terminal window.</span></div>
<div style="position:absolute;left:119.00px;top:263.08px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-review]$ </span><span class="cls_027">oc expose svc quote-php</span></div>
<div style="position:absolute;left:119.00px;top:275.08px" class="cls_026"><span class="cls_026">route.route.openshift.io/quote-php exposed</span></div>
<div style="position:absolute;left:108.00px;top:299.30px" class="cls_022"><span class="cls_022">8.</span></div>
<div style="position:absolute;left:130.00px;top:299.36px" class="cls_011"><span class="cls_011">Test the application and verify that it outputs an inspiring message.</span></div>
<div style="position:absolute;left:130.00px;top:323.76px" class="cls_011"><span class="cls_011">8.1.</span></div>
<div style="position:absolute;left:154.70px;top:323.76px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">oc get route</span><span class="cls_011"> command to find the FQDN where the application is available.</span></div>
<div style="position:absolute;left:154.70px;top:335.76px" class="cls_011"><span class="cls_011">Note the FQDN for the app.</span></div>
<div style="position:absolute;left:154.70px;top:351.76px" class="cls_011"><span class="cls_011">Run the following command in the terminal window.</span></div>
<div style="position:absolute;left:119.00px;top:379.47px" class="cls_026"><span class="cls_026">[student@workstation multicontainer-review]$ </span><span class="cls_027">oc get route</span></div>
<div style="position:absolute;left:119.00px;top:391.47px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:171.80px;top:391.47px" class="cls_026"><span class="cls_026">HOST/PORT</span></div>
<div style="position:absolute;left:407.00px;top:391.47px" class="cls_026"><span class="cls_026">PATH  SERVICES   ...</span></div>
<div style="position:absolute;left:119.00px;top:403.47px" class="cls_026"><span class="cls_026">quote-php</span></div>
<div style="position:absolute;left:171.80px;top:403.47px" class="cls_026"><span class="cls_026">quote-php-</span><span class="cls_029">your_dev_user</span><span class="cls_026">-deploy.</span><span class="cls_029">wildcard_domain</span></div>
<div style="position:absolute;left:435.80px;top:403.47px" class="cls_026"><span class="cls_026">quote-php  ...</span></div>
<div style="position:absolute;left:130.00px;top:434.15px" class="cls_011"><span class="cls_011">8.2.  Use the </span><span class="cls_021">curl</span><span class="cls_011"> command to test the REST API for the PHP Quote application.</span></div>
<div style="position:absolute;left:119.00px;top:461.86px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl -w "\n" \</span></div>
<div style="position:absolute;left:119.00px;top:473.86px" class="cls_026"><span class="cls_026">> </span><A HREF="http://quote-php-${rht_ocp4_dev_user}-deploy.${rht_ocp4_wildcard_domain}/">http://quote-php-${RHT_OCP4_DEV_USER}-deploy.${RHT_OCP4_WILDCARD_DOMAIN}</A> </span></div>
<div style="position:absolute;left:119.00px;top:485.86px" class="cls_026"><span class="cls_026">Always remember that you are absolutely unique. Just like everyone else.</span></div>
<div style="position:absolute;left:144.00px;top:525.06px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:539.44px" class="cls_011"><span class="cls_011">The text displayed in the output above may differ, but the </span><span class="cls_021">curl</span><span class="cls_011"> command should</span></div>
<div style="position:absolute;left:144.00px;top:551.44px" class="cls_011"><span class="cls_011">run successfully.</span></div>
<div style="position:absolute;left:108.00px;top:584.40px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:108.00px;top:606.34px" class="cls_011"><span class="cls_011">Grade your work by running the </span><span class="cls_021">lab multicontainer-review grade</span><span class="cls_011"> command from your</span></div>
<div style="position:absolute;left:108.00px;top:618.33px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011"> machine. Correct any reported failures and rerun the script until successful.</span></div>
<div style="position:absolute;left:119.00px;top:646.05px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab multicontainer-review grade</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:502.56px;top:751.59px" class="cls_013"><span class="cls_013">249</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:214134px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background268.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:90.00px;top:52.04px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:73.98px" class="cls_011"><span class="cls_011">To complete this lab, run the </span><span class="cls_021">lab multicontainer-review finish</span><span class="cls_011"> command on</span></div>
<div style="position:absolute;left:90.00px;top:85.97px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:101.00px;top:113.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab multicontainer-review finish</span></div>
<div style="position:absolute;left:90.00px;top:141.47px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">250</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:214936px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background269.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 7 |</span><span class="cls_019"> Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:108.00px;top:83.06px" class="cls_014"><span class="cls_014">Summary</span></div>
<div style="position:absolute;left:108.00px;top:135.98px" class="cls_011"><span class="cls_011">In this chapter, you learned:</span></div>
<div style="position:absolute;left:108.00px;top:157.47px" class="cls_011"><span class="cls_011">• Software defined networks enable communication between containers. Containers must be</span></div>
<div style="position:absolute;left:117.50px;top:169.47px" class="cls_011"><span class="cls_011">attached to the same software-defined network to communicate.</span></div>
<div style="position:absolute;left:108.00px;top:190.97px" class="cls_011"><span class="cls_011">• Containerized applications cannot rely on fixed IP addresses or host names to find services.</span></div>
<div style="position:absolute;left:108.00px;top:212.47px" class="cls_011"><span class="cls_011">• Podman uses Container Network Interface (CNI) to create a software-defined network and</span></div>
<div style="position:absolute;left:117.50px;top:224.47px" class="cls_011"><span class="cls_011">attaches all containers on the host to that network. Kubernetes and OpenShift create a</span></div>
<div style="position:absolute;left:117.50px;top:236.46px" class="cls_011"><span class="cls_011">software-defined network between all containers in a pod.</span></div>
<div style="position:absolute;left:108.00px;top:257.96px" class="cls_011"><span class="cls_011">• Within the same project, Kubernetes injects a set of variables for each service into all pods.</span></div>
<div style="position:absolute;left:108.00px;top:279.46px" class="cls_011"><span class="cls_011">• Kubernetes templates automate creating applications consisting of multiple resources.</span></div>
<div style="position:absolute;left:117.50px;top:291.46px" class="cls_011"><span class="cls_011">Template parameters allow using the same values when creating multiple resources.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:505.18px;top:751.59px" class="cls_013"><span class="cls_013">251</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:215738px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background270.jpg" width=612 height=792></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">252</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:216540px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background271.jpg" width=612 height=792></div>
<div style="position:absolute;left:126.00px;top:69.76px" class="cls_030"><span class="cls_030">Chapter 8</span></div>
<div style="position:absolute;left:126.00px;top:148.50px" class="cls_031"><span class="cls_031">Troubleshooting Containerized</span></div>
<div style="position:absolute;left:126.00px;top:175.50px" class="cls_031"><span class="cls_031">Applications</span></div>
<div style="position:absolute;left:146.00px;top:228.67px" class="cls_018"><span class="cls_018">Goal</span></div>
<div style="position:absolute;left:252.88px;top:228.01px" class="cls_008"><span class="cls_008">Troubleshoot a containerized application deployed</span></div>
<div style="position:absolute;left:252.88px;top:240.01px" class="cls_008"><span class="cls_008">on OpenShift.</span></div>
<div style="position:absolute;left:146.00px;top:268.67px" class="cls_018"><span class="cls_018">Objectives</span></div>
<div style="position:absolute;left:252.88px;top:268.01px" class="cls_008"><span class="cls_008">•  Troubleshoot an application build and</span></div>
<div style="position:absolute;left:267.88px;top:280.01px" class="cls_008"><span class="cls_008">deployment on OpenShift.</span></div>
<div style="position:absolute;left:252.88px;top:296.01px" class="cls_008"><span class="cls_008">•  Implement techniques for troubleshooting and</span></div>
<div style="position:absolute;left:267.88px;top:308.01px" class="cls_008"><span class="cls_008">debugging containerized applications.</span></div>
<div style="position:absolute;left:146.00px;top:336.67px" class="cls_018"><span class="cls_018">Sections</span></div>
<div style="position:absolute;left:252.88px;top:336.01px" class="cls_008"><span class="cls_008">•  Troubleshooting S2I Builds and Deployments</span></div>
<div style="position:absolute;left:267.88px;top:348.01px" class="cls_008"><span class="cls_008">(and Guided Exercise)</span></div>
<div style="position:absolute;left:252.88px;top:364.01px" class="cls_008"><span class="cls_008">•  Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:267.88px;top:376.01px" class="cls_008"><span class="cls_008">(and Guided Exercise)</span></div>
<div style="position:absolute;left:146.00px;top:404.67px" class="cls_018"><span class="cls_018">Lab</span></div>
<div style="position:absolute;left:252.88px;top:404.01px" class="cls_008"><span class="cls_008">•  Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.26px;top:751.59px" class="cls_013"><span class="cls_013">253</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:217342px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background272.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:90.00px;top:62.06px" class="cls_014"><span class="cls_014">Troubleshooting S2I Builds and</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Deployments</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, you should be able to:</span></div>
<div style="position:absolute;left:90.00px;top:182.37px" class="cls_011"><span class="cls_011">• Troubleshoot an application build and deployment steps on OpenShift.</span></div>
<div style="position:absolute;left:90.00px;top:205.77px" class="cls_011"><span class="cls_011">• Analyze OpenShift logs to identify problems during the build and deploy process.</span></div>
<div style="position:absolute;left:90.00px;top:228.05px" class="cls_024"><span class="cls_024">Introduction to the S2I Process</span></div>
<div style="position:absolute;left:90.00px;top:252.77px" class="cls_011"><span class="cls_011">The Source-to-Image (S2I) process is a simple way to automatically create images based on the</span></div>
<div style="position:absolute;left:90.00px;top:264.77px" class="cls_011"><span class="cls_011">programming language of the application source code in OpenShift. While this process is often a</span></div>
<div style="position:absolute;left:90.00px;top:276.77px" class="cls_011"><span class="cls_011">convenient way to quickly deploy applications, problems can arise during the S2I image creation</span></div>
<div style="position:absolute;left:90.00px;top:288.76px" class="cls_011"><span class="cls_011">process, either by the programming language characteristics or the runtime environment that</span></div>
<div style="position:absolute;left:90.00px;top:300.76px" class="cls_011"><span class="cls_011">require both developers and administrators to work together.</span></div>
<div style="position:absolute;left:90.00px;top:322.26px" class="cls_011"><span class="cls_011">It is important to understand the basic workflow for most of the programming languages</span></div>
<div style="position:absolute;left:90.00px;top:334.26px" class="cls_011"><span class="cls_011">supported by OpenShift. The S2I image creation process is composed of two major steps:</span></div>
<div style="position:absolute;left:90.00px;top:357.66px" class="cls_011"><span class="cls_011">• Build step: Responsible for compiling source code, downloading library dependencies, and</span></div>
<div style="position:absolute;left:99.50px;top:369.65px" class="cls_011"><span class="cls_011">packaging the application as a container image. Furthermore, the build step pushes the image to</span></div>
<div style="position:absolute;left:99.50px;top:381.65px" class="cls_011"><span class="cls_011">the OpenShift registry for the deployment step. The </span><span class="cls_021">BuildConfig</span><span class="cls_011"> (</span><span class="cls_021">BC</span><span class="cls_011">) OpenShift resources</span></div>
<div style="position:absolute;left:99.50px;top:393.65px" class="cls_011"><span class="cls_011">drive the build step.</span></div>
<div style="position:absolute;left:90.00px;top:417.05px" class="cls_011"><span class="cls_011">• Deployment step: Responsible for starting a pod and making the application available for</span></div>
<div style="position:absolute;left:99.50px;top:429.05px" class="cls_011"><span class="cls_011">OpenShift. This step executes after the build step, but only if the build step succeeded. The</span></div>
<div style="position:absolute;left:99.50px;top:441.04px" class="cls_021"><span class="cls_021">DeploymentConfig</span><span class="cls_011"> (</span><span class="cls_021">DC</span><span class="cls_011">) OpenShift resources drive the deployment step.</span></div>
<div style="position:absolute;left:90.00px;top:462.54px" class="cls_011"><span class="cls_011">For the S2I process, each application uses its own </span><span class="cls_021">BuildConfig</span><span class="cls_011"> and </span><span class="cls_021">DeploymentConfig</span></div>
<div style="position:absolute;left:90.00px;top:474.54px" class="cls_011"><span class="cls_011">objects, the name of which matches the application name. The deployment process aborts if the</span></div>
<div style="position:absolute;left:90.00px;top:486.54px" class="cls_011"><span class="cls_011">build fails.</span></div>
<div style="position:absolute;left:90.00px;top:508.04px" class="cls_011"><span class="cls_011">The S2I process starts each step in a separate pod. The build process creates a pod named</span></div>
<div style="position:absolute;left:90.00px;top:520.03px" class="cls_021"><span class="cls_021">&lt;application-name>-build-&lt;number>-&lt;string></span><span class="cls_011">. For each build attempt, the entire build</span></div>
<div style="position:absolute;left:90.00px;top:532.03px" class="cls_011"><span class="cls_011">step executes and saves a log. Upon a successful build, the application starts on a separate pod</span></div>
<div style="position:absolute;left:90.00px;top:544.03px" class="cls_011"><span class="cls_011">named as </span><span class="cls_021">&lt;application-name>-&lt;string></span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:565.53px" class="cls_011"><span class="cls_011">The OpenShift web console can be used to access the details for each step. To identify any build</span></div>
<div style="position:absolute;left:90.00px;top:577.53px" class="cls_011"><span class="cls_011">issues, the logs for a build can be evaluated and analyzed by clicking the Builds link from the left</span></div>
<div style="position:absolute;left:90.00px;top:589.52px" class="cls_011"><span class="cls_011">panel, depicted as follows.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">254</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:218144px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background273.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:240.55px;top:236.05px" class="cls_020"><span class="cls_020">Figure 8.1: Build instances of a project</span></div>
<div style="position:absolute;left:108.00px;top:258.97px" class="cls_011"><span class="cls_011">For each build attempt, a history of the build, tagged with a number, is provided for evaluation.</span></div>
<div style="position:absolute;left:108.00px;top:270.97px" class="cls_011"><span class="cls_011">Clicking on the build name leads to the details page of the build.</span></div>
<div style="position:absolute;left:229.13px;top:484.25px" class="cls_020"><span class="cls_020">Figure 8.2: Detailed view of a build instance</span></div>
<div style="position:absolute;left:108.00px;top:507.16px" class="cls_011"><span class="cls_011">The Logs tab of the build details page shows the output generated by the build execution. Those</span></div>
<div style="position:absolute;left:108.00px;top:519.16px" class="cls_011"><span class="cls_011">logs are handy to identify build issues.</span></div>
<div style="position:absolute;left:108.00px;top:540.66px" class="cls_011"><span class="cls_011">Use the Deployment Configs link under Workloads section from the left panel to identify issues</span></div>
<div style="position:absolute;left:108.00px;top:552.66px" class="cls_011"><span class="cls_011">during the deployment step.</span></div>
<div style="position:absolute;left:108.00px;top:574.16px" class="cls_011"><span class="cls_011">After selecting the appropriate deployment configuration, details show in the Details section.</span></div>
<div style="position:absolute;left:108.00px;top:595.65px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">oc</span><span class="cls_011"> command-line interface has several subcommands for managing the logs. Likewise in the</span></div>
<div style="position:absolute;left:108.00px;top:607.65px" class="cls_011"><span class="cls_011">web interface, it has a set of commands which provides information about each step. For example,</span></div>
<div style="position:absolute;left:108.00px;top:619.65px" class="cls_011"><span class="cls_011">to retrieve the logs from a build configuration, run the following command.</span></div>
<div style="position:absolute;left:119.00px;top:647.37px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc logs bc/&lt;application-name></span></div>
<div style="position:absolute;left:108.00px;top:675.15px" class="cls_011"><span class="cls_011">If a build fails, after finding and fixing the issues, run the following command to request a new</span></div>
<div style="position:absolute;left:108.00px;top:687.14px" class="cls_011"><span class="cls_011">build:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.35px;top:751.59px" class="cls_013"><span class="cls_013">255</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:218946px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background274.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc start-build &lt;application-name></span></div>
<div style="position:absolute;left:90.00px;top:89.47px" class="cls_011"><span class="cls_011">By issuing that command, OpenShift automatically spawns a new pod with the build process.</span></div>
<div style="position:absolute;left:90.00px;top:110.97px" class="cls_011"><span class="cls_011">Deployment logs can be checked with the </span><span class="cls_021">oc</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:101.00px;top:138.69px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc logs dc/&lt;application-name></span></div>
<div style="position:absolute;left:90.00px;top:166.47px" class="cls_011"><span class="cls_011">If the deployment is running or has failed, the command returns the logs of the process</span></div>
<div style="position:absolute;left:90.00px;top:178.47px" class="cls_011"><span class="cls_011">deployment process. Otherwise, the command returns the logs from the application's pod.</span></div>
<div style="position:absolute;left:90.00px;top:200.75px" class="cls_024"><span class="cls_024">Describing Common Problems</span></div>
<div style="position:absolute;left:90.00px;top:225.46px" class="cls_011"><span class="cls_011">Sometimes, the source code requires some customization that may not be available in</span></div>
<div style="position:absolute;left:90.00px;top:237.46px" class="cls_011"><span class="cls_011">containerized environments, such as database credentials, file system access, or message queue</span></div>
<div style="position:absolute;left:90.00px;top:249.46px" class="cls_011"><span class="cls_011">information. Those values usually take the form of internal environment variables. Developers</span></div>
<div style="position:absolute;left:90.00px;top:261.46px" class="cls_011"><span class="cls_011">using the S2I process may need to access this information.</span></div>
<div style="position:absolute;left:90.00px;top:282.96px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">oc logs</span><span class="cls_011"> command provides important information about the build, deploy, and run</span></div>
<div style="position:absolute;left:90.00px;top:294.95px" class="cls_011"><span class="cls_011">processes of an application during the execution of a pod. The logs may indicate missing values or</span></div>
<div style="position:absolute;left:90.00px;top:306.95px" class="cls_011"><span class="cls_011">options that must be enabled, incorrect parameters or flags, or environment incompatibilities.</span></div>
<div style="position:absolute;left:126.00px;top:339.87px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:354.25px" class="cls_011"><span class="cls_011">Application logs must be clearly labelled to identify problems quickly without the</span></div>
<div style="position:absolute;left:126.00px;top:366.25px" class="cls_011"><span class="cls_011">need to learn the container internals.</span></div>
<div style="position:absolute;left:90.00px;top:402.21px" class="cls_002"><span class="cls_002">Troubleshooting Permission Issues</span></div>
<div style="position:absolute;left:90.00px;top:424.15px" class="cls_011"><span class="cls_011">OpenShift runs S2I containers using Red Hat Enterprise Linux as the base image, and any runtime</span></div>
<div style="position:absolute;left:90.00px;top:436.14px" class="cls_011"><span class="cls_011">difference may cause the S2I process to fail. Sometimes, the developer runs into permission</span></div>
<div style="position:absolute;left:90.00px;top:448.14px" class="cls_011"><span class="cls_011">issues, such as access denied due to the wrong permissions, or incorrect environment permissions</span></div>
<div style="position:absolute;left:90.00px;top:460.14px" class="cls_011"><span class="cls_011">set by administrators. S2I images enforce the use of a different user than the </span><span class="cls_021">root</span><span class="cls_011"> user to access</span></div>
<div style="position:absolute;left:90.00px;top:472.14px" class="cls_011"><span class="cls_011">file systems and external resources. Also, Red Hat Enterprise Linux 7 enforces SELinux policies</span></div>
<div style="position:absolute;left:90.00px;top:484.14px" class="cls_011"><span class="cls_011">that restrict access to some file system resources, network ports, or process.</span></div>
<div style="position:absolute;left:90.00px;top:505.63px" class="cls_011"><span class="cls_011">Some containers may require a specific user ID, whereas S2I is designed to run containers using a</span></div>
<div style="position:absolute;left:90.00px;top:517.63px" class="cls_011"><span class="cls_011">random user as per the default OpenShift security policy.</span></div>
<div style="position:absolute;left:90.00px;top:539.13px" class="cls_011"><span class="cls_011">The following Dockerfile creates a Nexus container. Note the </span><span class="cls_021">USER</span><span class="cls_011"> instruction indicating the</span></div>
<div style="position:absolute;left:90.00px;top:551.13px" class="cls_021"><span class="cls_021">nexus</span><span class="cls_011"> user should be used:</span></div>
<div style="position:absolute;left:101.00px;top:578.84px" class="cls_026"><span class="cls_026">FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:101.00px;top:590.84px" class="cls_029"><span class="cls_029">...contents omitted...</span></div>
<div style="position:absolute;left:101.00px;top:602.84px" class="cls_026"><span class="cls_026">RUN chown -R nexus:nexus ${NEXUS_HOME}</span></div>
<div style="position:absolute;left:101.00px;top:626.84px" class="cls_026"><span class="cls_026">USER nexus</span></div>
<div style="position:absolute;left:101.00px;top:638.84px" class="cls_026"><span class="cls_026">WORKDIR ${NEXUS_HOME}</span></div>
<div style="position:absolute;left:101.00px;top:662.83px" class="cls_026"><span class="cls_026">VOLUME ["/opt/nexus/sonatype-work"]</span></div>
<div style="position:absolute;left:101.00px;top:674.83px" class="cls_029"><span class="cls_029">...contents omitted...</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">256</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:219748px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background275.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">Trying to use the image generated by this Dockerfile without addressing volume permissions</span></div>
<div style="position:absolute;left:108.00px;top:65.97px" class="cls_011"><span class="cls_011">drives to errors when the container starts:</span></div>
<div style="position:absolute;left:119.00px;top:93.69px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc logs </span><span class="cls_040">nexus-1-wzjrn</span></div>
<div style="position:absolute;left:119.00px;top:105.69px" class="cls_029"><span class="cls_029">...output omitted</span></div>
<div style="position:absolute;left:119.00px;top:117.69px" class="cls_026"><span class="cls_026">... org.sonatype.nexus.util.LockFile - Failed to write lock file</span></div>
<div style="position:absolute;left:119.00px;top:129.68px" class="cls_026"><span class="cls_026">...FileNotFoundException: /opt/nexus/sonatype-work/nexus.lock (Permission denied)</span></div>
<div style="position:absolute;left:119.00px;top:141.68px" class="cls_029"><span class="cls_029">...output omitted</span></div>
<div style="position:absolute;left:119.00px;top:153.68px" class="cls_026"><span class="cls_026">... org.sonatype.nexus.webapp.WebappBootstrap - Failed to initialize</span></div>
<div style="position:absolute;left:119.00px;top:165.68px" class="cls_026"><span class="cls_026">...lStateException: Nexus work directory already in use: /opt/nexus/sonatype-work</span></div>
<div style="position:absolute;left:119.00px;top:177.68px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:108.00px;top:205.46px" class="cls_011"><span class="cls_011">To solve this issue, relax the OpenShift project security with the command </span><span class="cls_021">oc adm policy</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:233.17px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc adm policy add-scc-to-user anyuid -z default</span></div>
<div style="position:absolute;left:108.00px;top:260.95px" class="cls_011"><span class="cls_011">This </span><span class="cls_021">oc adm policy</span><span class="cls_011"> command enables OpenShift executing container processes with non-root</span></div>
<div style="position:absolute;left:108.00px;top:272.95px" class="cls_011"><span class="cls_011">users. But the file systems used in the container must also be available for the running user. This is</span></div>
<div style="position:absolute;left:108.00px;top:284.95px" class="cls_011"><span class="cls_011">specially important when the container contains volume mounts.</span></div>
<div style="position:absolute;left:108.00px;top:306.45px" class="cls_011"><span class="cls_011">To avoid file system permission issues, local folders used for container volume mounts must satisfy</span></div>
<div style="position:absolute;left:108.00px;top:318.44px" class="cls_011"><span class="cls_011">the following:</span></div>
<div style="position:absolute;left:108.00px;top:341.84px" class="cls_011"><span class="cls_011">• The user executing the container processes must be the owner of the folder, or have the</span></div>
<div style="position:absolute;left:117.50px;top:353.84px" class="cls_011"><span class="cls_011">necessary rights. Use the </span><span class="cls_021">chown</span><span class="cls_011"> command to update folder ownership.</span></div>
<div style="position:absolute;left:108.00px;top:377.24px" class="cls_011"><span class="cls_011">• The local folder must satisfy the SELinux requirements to be used as a container volume.</span></div>
<div style="position:absolute;left:117.50px;top:389.24px" class="cls_011"><span class="cls_011">Assign the </span><span class="cls_021">container_file_t</span><span class="cls_011"> group to the folder by using the </span><span class="cls_021">semanage fcontext -</span></div>
<div style="position:absolute;left:117.50px;top:401.23px" class="cls_021"><span class="cls_021">a -t container_file_t &lt;folder></span><span class="cls_011"> command, then refresh the permissions with the</span></div>
<div style="position:absolute;left:117.50px;top:413.23px" class="cls_021"><span class="cls_021">restorecon -R &lt;folder></span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:108.00px;top:437.29px" class="cls_002"><span class="cls_002">Troubleshooting Invalid Parameters</span></div>
<div style="position:absolute;left:108.00px;top:459.23px" class="cls_011"><span class="cls_011">Multi-container applications may share parameters, such as login credentials. Ensure that the</span></div>
<div style="position:absolute;left:108.00px;top:471.23px" class="cls_011"><span class="cls_011">same values for parameters reach all containers in the application. For example, for a Python</span></div>
<div style="position:absolute;left:108.00px;top:483.23px" class="cls_011"><span class="cls_011">application that runs in one container, connected with another container running a database, make</span></div>
<div style="position:absolute;left:108.00px;top:495.22px" class="cls_011"><span class="cls_011">sure that the two containers use the same user name and password for the database. Usually, logs</span></div>
<div style="position:absolute;left:108.00px;top:507.22px" class="cls_011"><span class="cls_011">from the application pod provide a clear idea of these problems and how to solve them.</span></div>
<div style="position:absolute;left:108.00px;top:528.72px" class="cls_011"><span class="cls_011">A good practice to centralize shared parameters is to store them in </span><span class="cls_021">ConfigMaps</span><span class="cls_011">. Those</span></div>
<div style="position:absolute;left:108.00px;top:540.72px" class="cls_021"><span class="cls_021">ConfigMaps</span><span class="cls_011"> can be injected through the </span><span class="cls_021">Deployment Config</span><span class="cls_011"> into containers as environment</span></div>
<div style="position:absolute;left:108.00px;top:552.72px" class="cls_011"><span class="cls_011">variables. Injecting the same </span><span class="cls_021">ConfigMap</span><span class="cls_011"> into different containers ensures that not only the same</span></div>
<div style="position:absolute;left:108.00px;top:564.71px" class="cls_011"><span class="cls_011">environment variables are available, but also the same values. See the following pod resource</span></div>
<div style="position:absolute;left:108.00px;top:576.71px" class="cls_011"><span class="cls_011">definition:</span></div>
<div style="position:absolute;left:119.00px;top:604.43px" class="cls_026"><span class="cls_026">apiVersion: v1</span></div>
<div style="position:absolute;left:119.00px;top:616.43px" class="cls_026"><span class="cls_026">kind: Pod</span></div>
<div style="position:absolute;left:119.00px;top:628.42px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:640.42px" class="cls_026"><span class="cls_026">spec:</span></div>
<div style="position:absolute;left:128.60px;top:652.42px" class="cls_026"><span class="cls_026">containers:</span></div>
<div style="position:absolute;left:138.20px;top:664.42px" class="cls_026"><span class="cls_026">- name: test-container</span></div>
<div style="position:absolute;left:119.00px;top:676.42px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:128.60px;top:688.41px" class="cls_026"><span class="cls_026">env:</span></div>
<div style="position:absolute;left:157.40px;top:700.41px" class="cls_026"><span class="cls_026">- name: ENV_1</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.34px;top:751.59px" class="cls_013"><span class="cls_013">257</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:220550px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background276.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:149.00px;top:53.69px" class="cls_026"><span class="cls_026">valueFrom:</span></div>
<div style="position:absolute;left:158.60px;top:65.69px" class="cls_026"><span class="cls_026">configMapKeyRef:</span></div>
<div style="position:absolute;left:168.20px;top:77.69px" class="cls_026"><span class="cls_026">name: configMap_name1</span></div>
<div style="position:absolute;left:168.20px;top:89.69px" class="cls_026"><span class="cls_026">key: configMap_key_1</span></div>
<div style="position:absolute;left:101.00px;top:101.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:110.60px;top:113.68px" class="cls_026"><span class="cls_026">envFrom:</span></div>
<div style="position:absolute;left:139.40px;top:125.68px" class="cls_026"><span class="cls_026">- configMapRef:</span></div>
<div style="position:absolute;left:158.60px;top:137.68px" class="cls_026"><span class="cls_026">name: configMap_name_2</span></div>
<div style="position:absolute;left:101.00px;top:149.68px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:110.90px;top:177.46px" class="cls_011"><span class="cls_011">An </span><span class="cls_021">ENV_1</span><span class="cls_011"> environment variable is injected into the container. Its value is the value for the</span></div>
<div style="position:absolute;left:110.90px;top:189.46px" class="cls_021"><span class="cls_021">configMap_key_1</span><span class="cls_011"> entry in the </span><span class="cls_021">configMap_name1</span><span class="cls_011"> configMap.</span></div>
<div style="position:absolute;left:110.90px;top:201.45px" class="cls_011"><span class="cls_011">All entries in </span><span class="cls_021">configMap_name_2</span><span class="cls_011"> are injected into the container as environment variables</span></div>
<div style="position:absolute;left:110.90px;top:213.45px" class="cls_011"><span class="cls_011">with the same name and values.</span></div>
<div style="position:absolute;left:90.00px;top:237.51px" class="cls_002"><span class="cls_002">Troubleshooting Volume Mount Errors</span></div>
<div style="position:absolute;left:90.00px;top:259.45px" class="cls_011"><span class="cls_011">When redeploying an application that uses a persistent volume on a local file system, a pod might</span></div>
<div style="position:absolute;left:90.00px;top:271.45px" class="cls_011"><span class="cls_011">not be able to allocate a persistent volume claim even though the persistent volume indicates</span></div>
<div style="position:absolute;left:90.00px;top:283.45px" class="cls_011"><span class="cls_011">that the claim is released. To resolve the issue, delete the persistent volume claim and then the</span></div>
<div style="position:absolute;left:90.00px;top:295.44px" class="cls_011"><span class="cls_011">persistent volume. Then recreate the persistent volume.</span></div>
<div style="position:absolute;left:101.00px;top:323.16px" class="cls_026"><span class="cls_026">oc delete pv &lt;pv_name></span></div>
<div style="position:absolute;left:101.00px;top:335.16px" class="cls_026"><span class="cls_026">oc create -f &lt;pv_resource_file></span></div>
<div style="position:absolute;left:90.00px;top:365.50px" class="cls_002"><span class="cls_002">Troubleshooting Obsolete Images</span></div>
<div style="position:absolute;left:90.00px;top:387.44px" class="cls_011"><span class="cls_011">OpenShift pulls images from the source indicated in an image stream unless it locates a locally-</span></div>
<div style="position:absolute;left:90.00px;top:399.44px" class="cls_011"><span class="cls_011">cached image on the node where the pod is scheduled to run. If you push a new image to the</span></div>
<div style="position:absolute;left:90.00px;top:411.43px" class="cls_011"><span class="cls_011">registry with the same name and tag, you must remove the image from each node the pod is</span></div>
<div style="position:absolute;left:90.00px;top:423.43px" class="cls_011"><span class="cls_011">scheduled on with the command </span><span class="cls_021">podman rmi</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:444.93px" class="cls_011"><span class="cls_011">Run the </span><span class="cls_021">oc adm prune</span><span class="cls_011"> command for an automated way to remove obsolete images and other</span></div>
<div style="position:absolute;left:90.00px;top:456.93px" class="cls_011"><span class="cls_011">resources.</span></div>
<div style="position:absolute;left:126.00px;top:487.95px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:126.00px;top:502.33px" class="cls_011"><span class="cls_011">More information about troubleshooting images is available in the Images section of</span></div>
<div style="position:absolute;left:126.00px;top:514.32px" class="cls_011"><span class="cls_011">the OpenShift Container Platform documentation accessible at:</span></div>
<div style="position:absolute;left:126.00px;top:526.26px" class="cls_022"><span class="cls_022">Creating Images</span></div>
<div style="position:absolute;left:126.00px;top:538.32px" class="cls_033"><span class="cls_033"> </span><A HREF="https://docs.openshift.com/container-platform/4.5/openshift_images/create-images.html">https://docs.openshift.com/container-platform/4.5/openshift_images/create-</A> </div>
<div style="position:absolute;left:126.00px;top:550.32px" class="cls_033"><span class="cls_033"> </span><A HREF="https://docs.openshift.com/container-platform/4.5/openshift_images/create-images.html">images.html</A> </div>
<div style="position:absolute;left:126.00px;top:571.82px" class="cls_011"><span class="cls_011">Documentation about how to consume ConfigMap to create container environment</span></div>
<div style="position:absolute;left:126.00px;top:583.81px" class="cls_011"><span class="cls_011">variables can be found in the Consuming in Environment Variables of the</span></div>
<div style="position:absolute;left:126.00px;top:595.76px" class="cls_022"><span class="cls_022">Configure a Pod to use ConfigMaps</span></div>
<div style="position:absolute;left:126.00px;top:607.81px" class="cls_033"><span class="cls_033"> </span><A HREF="https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#define-container-environment-variables-using-configmap-data">https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-</A> </div>
<div style="position:absolute;left:126.00px;top:619.81px" class="cls_033"><span class="cls_033"> </span><A HREF="https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#define-container-environment-variables-using-configmap-data">configmap/#define-container-environment-variables-using-configmap-data</A> </div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">258</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:221352px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background277.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Troubleshooting an OpenShift Build</span></div>
<div style="position:absolute;left:120.00px;top:137.59px" class="cls_011"><span class="cls_011">In this exercise, you will troubleshoot an OpenShift build and deployment process.</span></div>
<div style="position:absolute;left:120.00px;top:160.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:120.00px;top:178.59px" class="cls_011"><span class="cls_011">You should be able to identify and solve the problems raised during the build and</span></div>
<div style="position:absolute;left:120.00px;top:190.59px" class="cls_011"><span class="cls_011">deployment process of a Node.js application.</span></div>
<div style="position:absolute;left:120.00px;top:213.65px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:120.00px;top:231.58px" class="cls_011"><span class="cls_011">A running OpenShift cluster.</span></div>
<div style="position:absolute;left:120.00px;top:253.08px" class="cls_011"><span class="cls_011">Retrieve the lab files and verify that Docker and the OpenShift cluster are running by running</span></div>
<div style="position:absolute;left:120.00px;top:265.08px" class="cls_011"><span class="cls_011">the following command.</span></div>
<div style="position:absolute;left:119.00px;top:292.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab troubleshoot-s2i start</span></div>
<div style="position:absolute;left:119.41px;top:347.42px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:137.00px;top:347.48px" class="cls_011"><span class="cls_011">Load the configuration of your classroom environment. Run the following command to load</span></div>
<div style="position:absolute;left:137.00px;top:359.48px" class="cls_011"><span class="cls_011">the environment variables created in the first guided exercise:</span></div>
<div style="position:absolute;left:119.00px;top:387.20px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">source /usr/local/etc/ocp4.config</span></div>
<div style="position:absolute;left:119.41px;top:417.42px" class="cls_022"><span class="cls_022">2.</span><span class="cls_011">   Enter your local clone of the </span><span class="cls_021">DO180-apps</span><span class="cls_011"> Git repository and checkout the </span><span class="cls_021">master</span><span class="cls_011"> branch</span></div>
<div style="position:absolute;left:137.00px;top:429.48px" class="cls_011"><span class="cls_011">of the course's repository to ensure you start this exercise from a known good state:</span></div>
<div style="position:absolute;left:119.00px;top:457.20px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd ~/DO180-apps</span></div>
<div style="position:absolute;left:119.00px;top:469.20px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git checkout master</span></div>
<div style="position:absolute;left:119.00px;top:481.20px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.41px;top:511.42px" class="cls_022"><span class="cls_022">3.</span><span class="cls_011">  Create a new branch to save any changes you make during this exercise:</span></div>
<div style="position:absolute;left:119.00px;top:539.20px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git checkout -b troubleshoot-s2i</span></div>
<div style="position:absolute;left:119.00px;top:551.20px" class="cls_026"><span class="cls_026">Switched to a new branch 'troubleshoot-s2i'</span></div>
<div style="position:absolute;left:119.00px;top:563.20px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git push -u origin troubleshoot-s2i</span></div>
<div style="position:absolute;left:119.00px;top:575.20px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:587.20px" class="cls_026"><span class="cls_026">* [new branch]</span></div>
<div style="position:absolute;left:215.00px;top:587.20px" class="cls_026"><span class="cls_026">troubleshoot-s2i -> s2i</span></div>
<div style="position:absolute;left:119.00px;top:599.20px" class="cls_026"><span class="cls_026">Branch 'troubleshoot-s2i' set up to track remote branch 'troubleshoot-s2i' from</span></div>
<div style="position:absolute;left:123.80px;top:611.20px" class="cls_026"><span class="cls_026">'origin'.</span></div>
<div style="position:absolute;left:119.41px;top:641.42px" class="cls_022"><span class="cls_022">4.</span><span class="cls_011">  Log in to OpenShift using the configured user, password and Master API URL.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.14px;top:751.59px" class="cls_013"><span class="cls_013">259</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:222154px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background278.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:101.00px;top:61.70px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc login -u "${RHT_OCP4_DEV_USER}" \</span></div>
<div style="position:absolute;left:101.00px;top:73.70px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p "${RHT_OCP4_DEV_PASSWORD}"</span></div>
<div style="position:absolute;left:101.00px;top:85.70px" class="cls_026"><span class="cls_026">Login successful.</span></div>
<div style="position:absolute;left:101.00px;top:97.70px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:119.98px" class="cls_011"><span class="cls_011">Create a new project named </span><span class="cls_028">youruser</span><span class="cls_021">-nodejs</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:101.00px;top:147.70px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc new-project ${RHT_OCP4_DEV_USER}-nodejs</span></div>
<div style="position:absolute;left:101.00px;top:159.70px" class="cls_026"><span class="cls_026">Now using project "</span><span class="cls_029">youruser</span><span class="cls_026">-nodejs" on server "<A HREF="https://">https://</A> </span></div>
<div style="position:absolute;left:101.00px;top:171.70px" class="cls_026"><span class="cls_026">api.cluster.lab.example.com"</span></div>
<div style="position:absolute;left:101.00px;top:183.70px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.41px;top:213.92px" class="cls_022"><span class="cls_022">5.</span><span class="cls_011">  Build a new Node.js application using the </span><span class="cls_021">Hello World</span><span class="cls_011"> image located at </span><A HREF="https://">https://</A> </span></div>
<div style="position:absolute;left:119.00px;top:225.98px" class="cls_021"><span class="cls_021">github.com/</span><span class="cls_028">yourgituser</span><span class="cls_021">/DO180-apps/</span><span class="cls_011"> in the </span><span class="cls_021">nodejs-helloworld</span><span class="cls_011"> directory.</span></div>
<div style="position:absolute;left:119.00px;top:250.38px" class="cls_011"><span class="cls_011">5.1.</span></div>
<div style="position:absolute;left:143.70px;top:250.38px" class="cls_011"><span class="cls_011">Run the </span><span class="cls_021">oc new-app</span><span class="cls_011"> command to create the Node.js application. The command is</span></div>
<div style="position:absolute;left:143.70px;top:262.37px" class="cls_011"><span class="cls_011">provided in the </span><span class="cls_021">~/DO180/labs/troubleshoot-s2i/command.txt</span><span class="cls_011"> file.</span></div>
<div style="position:absolute;left:101.00px;top:290.09px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc new-app --as-deployment-config \</span></div>
<div style="position:absolute;left:101.00px;top:302.09px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--context-dir=nodejs-helloworld \</span></div>
<div style="position:absolute;left:101.00px;top:314.09px" class="cls_026"><span class="cls_026">> </span><A HREF="https://github.com/${rht_ocp4_github_user}/do180-apps#troubleshoot-s2i/">https://github.com/${RHT_OCP4_GITHUB_USER}/DO180-apps#troubleshoot-s2i</A> \</span></div>
<div style="position:absolute;left:101.00px;top:326.08px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-i nodejs:12 --name nodejs-hello --build-env \</span></div>
<div style="position:absolute;left:101.00px;top:338.08px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">npm_config_registry=<A HREF="http://${rht_ocp4_nexus_server}/repository/npm-proxy/">http://${RHT_OCP4_NEXUS_SERVER}/repository/npm-proxy</A> </span></div>
<div style="position:absolute;left:101.00px;top:350.08px" class="cls_026"><span class="cls_026">--> Found image a2b5ec2 </span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:120.20px;top:374.08px" class="cls_026"><span class="cls_026">Node.js 12</span></div>
<div style="position:absolute;left:101.00px;top:386.07px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:398.07px" class="cls_026"><span class="cls_026">--> Creating resources ...</span></div>
<div style="position:absolute;left:120.20px;top:410.07px" class="cls_026"><span class="cls_026">imagestream.image.openshift.io "nodejs-hello" created</span></div>
<div style="position:absolute;left:120.20px;top:422.07px" class="cls_026"><span class="cls_026">buildconfig.build.openshift.io "nodejs-hello" created</span></div>
<div style="position:absolute;left:120.20px;top:434.07px" class="cls_026"><span class="cls_026">deploymentconfig.apps.openshift.io "nodejs-hello" created</span></div>
<div style="position:absolute;left:120.20px;top:446.06px" class="cls_026"><span class="cls_026">service "nodejs-hello" created</span></div>
<div style="position:absolute;left:101.00px;top:458.06px" class="cls_026"><span class="cls_026">--> Success</span></div>
<div style="position:absolute;left:120.20px;top:470.06px" class="cls_026"><span class="cls_026">Build scheduled, use 'oc logs -f bc/nodejs-hello' to track its progress.</span></div>
<div style="position:absolute;left:120.20px;top:482.06px" class="cls_026"><span class="cls_026">Application is not exposed. You can expose services to the outside world by</span></div>
<div style="position:absolute;left:105.80px;top:494.06px" class="cls_026"><span class="cls_026">executing one or more of the commands below:</span></div>
<div style="position:absolute;left:125.00px;top:506.05px" class="cls_026"><span class="cls_026">'oc expose svc/nodejs-hello'</span></div>
<div style="position:absolute;left:120.20px;top:518.05px" class="cls_026"><span class="cls_026">Run 'oc status' to view your app.</span></div>
<div style="position:absolute;left:143.70px;top:540.33px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">-i</span><span class="cls_011"> indicates the builder image to use, </span><span class="cls_021">nodejs:12</span><span class="cls_011"> in this case.</span></div>
<div style="position:absolute;left:143.70px;top:556.33px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">--context-dir</span><span class="cls_011"> option defines which folder inside the project contains the</span></div>
<div style="position:absolute;left:143.70px;top:568.33px" class="cls_011"><span class="cls_011">source code of the application to build.</span></div>
<div style="position:absolute;left:143.70px;top:584.33px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">--build-env</span><span class="cls_011"> option defines an environment variable to the builder pod. In this</span></div>
<div style="position:absolute;left:143.70px;top:596.32px" class="cls_011"><span class="cls_011">case, it provides the </span><span class="cls_021">npm_config_registry</span><span class="cls_011"> environment variable to the builder</span></div>
<div style="position:absolute;left:143.70px;top:608.32px" class="cls_011"><span class="cls_011">pod, so it can reach the NPM registry.</span></div>
<div style="position:absolute;left:126.00px;top:641.24px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:126.00px;top:655.62px" class="cls_011"><span class="cls_011">In the previous command, there must be no spaces between </span><span class="cls_021">registry=</span><span class="cls_011"> and the</span></div>
<div style="position:absolute;left:126.00px;top:667.62px" class="cls_011"><span class="cls_011">URL of the Nexus server.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">260</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:222956px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background279.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:137.00px;top:54.98px" class="cls_011"><span class="cls_011">5.2.   Wait until the application finishes building by monitoring the progress with the </span><span class="cls_021">oc</span></div>
<div style="position:absolute;left:161.70px;top:66.97px" class="cls_021"><span class="cls_021">get pods -w</span><span class="cls_011"> command. The pod transitions from a status of </span><span class="cls_021">running</span><span class="cls_011"> to </span><span class="cls_021">Error</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:119.00px;top:94.69px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc get pods -w</span></div>
<div style="position:absolute;left:119.00px;top:106.69px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:229.40px;top:106.69px" class="cls_026"><span class="cls_026">READY   STATUS</span></div>
<div style="position:absolute;left:315.80px;top:106.69px" class="cls_026"><span class="cls_026">RESTARTS   AGE</span></div>
<div style="position:absolute;left:119.00px;top:118.69px" class="cls_026"><span class="cls_026">nodejs-hello-1-build</span></div>
<div style="position:absolute;left:229.40px;top:118.69px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:267.80px;top:118.69px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:315.80px;top:118.69px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:368.60px;top:118.69px" class="cls_026"><span class="cls_026">15s</span></div>
<div style="position:absolute;left:119.00px;top:130.68px" class="cls_026"><span class="cls_026">nodejs-hello-1-build</span></div>
<div style="position:absolute;left:229.40px;top:130.68px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:267.80px;top:130.68px" class="cls_026"><span class="cls_026">Error</span></div>
<div style="position:absolute;left:315.80px;top:130.68px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:368.60px;top:130.68px" class="cls_026"><span class="cls_026">73s</span></div>
<div style="position:absolute;left:119.00px;top:142.68px" class="cls_027"><span class="cls_027">^C</span></div>
<div style="position:absolute;left:161.70px;top:164.96px" class="cls_011"><span class="cls_011">The build process fails, and therefore no application is running. Build failures are</span></div>
<div style="position:absolute;left:161.70px;top:176.96px" class="cls_011"><span class="cls_011">usually consequences of syntax errors in the source code or missing dependencies.</span></div>
<div style="position:absolute;left:161.70px;top:188.96px" class="cls_011"><span class="cls_011">The next step investigates the specific causes for this failure.</span></div>
<div style="position:absolute;left:137.00px;top:209.70px" class="cls_011"><span class="cls_011">5.3.   Evaluate the errors raised during the build process.</span></div>
<div style="position:absolute;left:161.70px;top:225.70px" class="cls_011"><span class="cls_011">The build is triggered by the build configuration (</span><span class="cls_021">bc</span><span class="cls_011">) created by OpenShift when the</span></div>
<div style="position:absolute;left:161.70px;top:237.69px" class="cls_011"><span class="cls_011">S2I process starts. By default, the OpenShift S2I process creates a build configuration</span></div>
<div style="position:absolute;left:161.70px;top:249.69px" class="cls_011"><span class="cls_011">named as the name given: </span><span class="cls_021">nodejs-hello</span><span class="cls_011">, which is responsible for triggering the</span></div>
<div style="position:absolute;left:161.70px;top:261.69px" class="cls_011"><span class="cls_011">build process.</span></div>
<div style="position:absolute;left:161.70px;top:277.69px" class="cls_011"><span class="cls_011">Run the </span><span class="cls_021">oc</span><span class="cls_011"> command with the </span><span class="cls_021">logs</span><span class="cls_011"> subcommand in a terminal window to review the</span></div>
<div style="position:absolute;left:161.70px;top:289.69px" class="cls_011"><span class="cls_011">output of the build process:</span></div>
<div style="position:absolute;left:119.00px;top:317.40px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc logs bc/nodejs-hello</span></div>
<div style="position:absolute;left:128.60px;top:329.40px" class="cls_026"><span class="cls_026">Cloning "https://github.com/</span><span class="cls_029">yourgituser</span><span class="cls_026">/DO180-apps" ...</span></div>
<div style="position:absolute;left:128.60px;top:341.40px" class="cls_026"><span class="cls_026">Commit: f7cd8963ef353d9173c3a21dcccf402f3616840b ( Initial commit</span></div>
<div style="position:absolute;left:119.00px;top:353.40px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:365.39px" class="cls_026"><span class="cls_026">STEP 8: RUN /usr/libexec/s2i/assemble</span></div>
<div style="position:absolute;left:119.00px;top:377.39px" class="cls_026"><span class="cls_026">---> Installing application source ...</span></div>
<div style="position:absolute;left:119.00px;top:389.39px" class="cls_026"><span class="cls_026">---> Installing all dependencies</span></div>
<div style="position:absolute;left:119.00px;top:401.39px" class="cls_026"><span class="cls_026">npm ERR! code ETARGET</span></div>
<div style="position:absolute;left:119.00px;top:413.39px" class="cls_026"><span class="cls_026">npm ERR! notarget No matching version found for express@~4.14.2.</span></div>
<div style="position:absolute;left:119.00px;top:425.38px" class="cls_026"><span class="cls_026">npm ERR! notarget In most cases you or one of your dependencies are requesting</span></div>
<div style="position:absolute;left:119.00px;top:437.38px" class="cls_026"><span class="cls_026">npm ERR! notarget a package version that doesn't exist.</span></div>
<div style="position:absolute;left:119.00px;top:449.38px" class="cls_026"><span class="cls_026">npm ERR! notarget</span></div>
<div style="position:absolute;left:119.00px;top:461.38px" class="cls_026"><span class="cls_026">npm ERR! notarget It was specified as a dependency of 'src'</span></div>
<div style="position:absolute;left:119.00px;top:473.38px" class="cls_026"><span class="cls_026">npm ERR! notarget</span></div>
<div style="position:absolute;left:119.00px;top:497.37px" class="cls_026"><span class="cls_026">npm ERR! A complete log of this run can be found in:</span></div>
<div style="position:absolute;left:119.00px;top:509.37px" class="cls_026"><span class="cls_026">npm ERR!</span></div>
<div style="position:absolute;left:181.40px;top:509.37px" class="cls_026"><span class="cls_026">/opt/app-root/src/.npm/_logs/2019-10-25T12_37_56_853Z-debug.log</span></div>
<div style="position:absolute;left:119.00px;top:521.37px" class="cls_026"><span class="cls_026">subprocess exited with status 1</span></div>
<div style="position:absolute;left:119.00px;top:533.37px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:161.70px;top:555.65px" class="cls_011"><span class="cls_011">The log shows an error occurred during the build process. This output indicates that</span></div>
<div style="position:absolute;left:161.70px;top:567.64px" class="cls_011"><span class="cls_011">there is no compatible version for the </span><span class="cls_021">express</span><span class="cls_011"> dependency. But the reason is that</span></div>
<div style="position:absolute;left:161.70px;top:579.64px" class="cls_011"><span class="cls_011">the format used by the express dependency is not valid.</span></div>
<div style="position:absolute;left:119.41px;top:603.58px" class="cls_022"><span class="cls_022">6.</span><span class="cls_011">  Update the build process for the project.</span></div>
<div style="position:absolute;left:137.00px;top:619.64px" class="cls_011"><span class="cls_011">The developer uses a nonstandard version of the Express framework that is available</span></div>
<div style="position:absolute;left:137.00px;top:631.64px" class="cls_011"><span class="cls_011">locally on each developer's workstation. Due to the company's standards, the version</span></div>
<div style="position:absolute;left:137.00px;top:643.64px" class="cls_011"><span class="cls_011">must be downloaded from the Node.js official registry and, from the developer's input, it is</span></div>
<div style="position:absolute;left:137.00px;top:655.64px" class="cls_011"><span class="cls_011">compatible with the 4.14.x version.</span></div>
<div style="position:absolute;left:137.00px;top:676.38px" class="cls_011"><span class="cls_011">6.1.</span></div>
<div style="position:absolute;left:161.70px;top:676.38px" class="cls_011"><span class="cls_011">Fix the </span><span class="cls_021">package.json</span><span class="cls_011"> file.</span></div>
<div style="position:absolute;left:161.70px;top:692.38px" class="cls_011"><span class="cls_011">Use your preferred editor to open the </span><span class="cls_021">~/DO180-apps/nodejs-helloworld/</span></div>
<div style="position:absolute;left:161.70px;top:704.38px" class="cls_021"><span class="cls_021">package.json</span><span class="cls_011"> file. Review the dependencies versions provided by the developers.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.97px;top:751.59px" class="cls_013"><span class="cls_013">261</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:223758px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background280.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:143.70px;top:53.98px" class="cls_011"><span class="cls_011">It uses an incorrect version of the Express dependency, which is incompatible with</span></div>
<div style="position:absolute;left:143.70px;top:65.97px" class="cls_011"><span class="cls_011">the supported version provided by the company (</span><span class="cls_021">~4.14.2</span><span class="cls_011">). Update the dependency</span></div>
<div style="position:absolute;left:143.70px;top:77.97px" class="cls_011"><span class="cls_011">version as follows.</span></div>
<div style="position:absolute;left:101.00px;top:105.69px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:110.60px;top:117.69px" class="cls_026"><span class="cls_026">"name": "nodejs-helloworld",</span></div>
<div style="position:absolute;left:105.80px;top:129.68px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:110.60px;top:141.68px" class="cls_026"><span class="cls_026">"dependencies": {</span></div>
<div style="position:absolute;left:120.20px;top:153.68px" class="cls_026"><span class="cls_026">"express": "4.14.x"</span></div>
<div style="position:absolute;left:110.60px;top:165.68px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:101.00px;top:177.68px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:126.00px;top:216.88px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:231.26px" class="cls_011"><span class="cls_011">Notice the </span><span class="cls_021">x</span><span class="cls_011"> in the version. It indicates that the highest version should be used, but</span></div>
<div style="position:absolute;left:126.00px;top:243.25px" class="cls_011"><span class="cls_011">the version must begin with </span><span class="cls_021">4.14.</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:276.55px" class="cls_011"><span class="cls_011">6.2.  Commit and push the changes made to the project.</span></div>
<div style="position:absolute;left:143.70px;top:292.55px" class="cls_011"><span class="cls_011">From the terminal window, run the following command to commit and push the</span></div>
<div style="position:absolute;left:143.70px;top:304.55px" class="cls_011"><span class="cls_011">changes:</span></div>
<div style="position:absolute;left:101.00px;top:332.27px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git commit -am "Fixed Express release"</span></div>
<div style="position:absolute;left:101.00px;top:344.26px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:105.80px;top:356.26px" class="cls_026"><span class="cls_026">1 file changed, 1 insertion(+), 1 deletion(-)</span></div>
<div style="position:absolute;left:101.00px;top:368.26px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git push</span></div>
<div style="position:absolute;left:101.00px;top:380.26px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:392.26px" class="cls_026"><span class="cls_026">To https://github.com/</span><span class="cls_029">yourgituser</span><span class="cls_026">/DO180-apps</span></div>
<div style="position:absolute;left:115.40px;top:404.25px" class="cls_026"><span class="cls_026">ef6557d..73a82cd  troubleshoot-s2i -> troubleshoot-s2i</span></div>
<div style="position:absolute;left:101.41px;top:434.48px" class="cls_022"><span class="cls_022">7.</span><span class="cls_011">   Relaunch the S2I process.</span></div>
<div style="position:absolute;left:119.00px;top:458.93px" class="cls_011"><span class="cls_011">7.1.</span></div>
<div style="position:absolute;left:143.70px;top:458.93px" class="cls_011"><span class="cls_011">To restart the build step, execute the following command:</span></div>
<div style="position:absolute;left:101.00px;top:486.65px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc start-build bc/nodejs-hello</span></div>
<div style="position:absolute;left:101.00px;top:498.65px" class="cls_026"><span class="cls_026">build.build.openshift.io/nodejs-hello-2 started</span></div>
<div style="position:absolute;left:143.70px;top:520.93px" class="cls_011"><span class="cls_011">The build step is restarted, and a new build pod is created. Check the log by running</span></div>
<div style="position:absolute;left:143.70px;top:532.92px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">oc logs</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:101.00px;top:560.64px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc logs -f bc/nodejs-hello</span></div>
<div style="position:absolute;left:101.00px;top:572.64px" class="cls_026"><span class="cls_026">Cloning "https://github.com/</span><span class="cls_029">yougituser</span><span class="cls_026">/DO180-apps" ...</span></div>
<div style="position:absolute;left:101.00px;top:584.64px" class="cls_026"><span class="cls_026">Commit: ea2125c1bf4681dd9b79ddf920d8d8be38cfcf3b (Fixed Express release)</span></div>
<div style="position:absolute;left:101.00px;top:596.64px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:608.63px" class="cls_026"><span class="cls_026">Pushing image ...image-registry.svc:5000/nodejs/nodejs-hello:latest</span></div>
<div style="position:absolute;left:101.00px;top:620.63px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:632.63px" class="cls_026"><span class="cls_026">Push successful</span></div>
<div style="position:absolute;left:143.70px;top:654.91px" class="cls_011"><span class="cls_011">The build is successful, however, this does not indicate that the application is started.</span></div>
<div style="position:absolute;left:119.00px;top:679.31px" class="cls_011"><span class="cls_011">7.2.   Evaluate the status of the current build process. Run the </span><span class="cls_021">oc get pods</span><span class="cls_011"> command to</span></div>
<div style="position:absolute;left:143.70px;top:691.30px" class="cls_011"><span class="cls_011">check the status of the Node.js application.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">262</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:224560px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background281.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc get pods</span></div>
<div style="position:absolute;left:161.70px;top:83.97px" class="cls_011"><span class="cls_011">According to the following output, the second build completed, but the application is</span></div>
<div style="position:absolute;left:161.70px;top:95.97px" class="cls_011"><span class="cls_011">in error state.</span></div>
<div style="position:absolute;left:119.00px;top:123.69px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:234.20px;top:123.69px" class="cls_026"><span class="cls_026">READY   STATUS</span></div>
<div style="position:absolute;left:363.80px;top:123.69px" class="cls_026"><span class="cls_026">RESTARTS   AGE</span></div>
<div style="position:absolute;left:119.00px;top:135.69px" class="cls_026"><span class="cls_026">nodejs-hello-1-build</span></div>
<div style="position:absolute;left:234.20px;top:135.69px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:272.60px;top:135.69px" class="cls_026"><span class="cls_026">Error</span></div>
<div style="position:absolute;left:363.80px;top:135.69px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:416.60px;top:135.69px" class="cls_026"><span class="cls_026">7m11s</span></div>
<div style="position:absolute;left:119.00px;top:147.68px" class="cls_026"><span class="cls_026">nodejs-hello-1-deploy</span></div>
<div style="position:absolute;left:234.20px;top:147.68px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:272.60px;top:147.68px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:363.80px;top:147.68px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:416.60px;top:147.68px" class="cls_026"><span class="cls_026">53s</span></div>
<div style="position:absolute;left:119.00px;top:159.68px" class="cls_026"><span class="cls_026">nodejs-hello-1-nksdq</span></div>
<div style="position:absolute;left:234.20px;top:159.68px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:272.60px;top:159.68px" class="cls_026"><span class="cls_026">CrashLoopBackOff</span></div>
<div style="position:absolute;left:363.80px;top:159.68px" class="cls_026"><span class="cls_026">3</span></div>
<div style="position:absolute;left:416.60px;top:159.68px" class="cls_026"><span class="cls_026">51s</span></div>
<div style="position:absolute;left:119.00px;top:171.68px" class="cls_026"><span class="cls_026">nodejs-hello-2-build</span></div>
<div style="position:absolute;left:234.20px;top:171.68px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:272.60px;top:171.68px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:363.80px;top:171.68px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:416.60px;top:171.68px" class="cls_026"><span class="cls_026">88s</span></div>
<div style="position:absolute;left:161.70px;top:193.96px" class="cls_011"><span class="cls_011">The name of the application pod (</span><span class="cls_021">nodejs-hello-1-rpx1d</span><span class="cls_011">) is generated randomly,</span></div>
<div style="position:absolute;left:161.70px;top:205.96px" class="cls_011"><span class="cls_011">and may differ from yours.</span></div>
<div style="position:absolute;left:137.00px;top:230.36px" class="cls_011"><span class="cls_011">7.3.   Review the logs generated by the application pod.</span></div>
<div style="position:absolute;left:119.00px;top:258.07px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc logs dc/nodejs-hello</span></div>
<div style="position:absolute;left:119.00px;top:270.07px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:282.07px" class="cls_026"><span class="cls_026">npm info using npm@6.14.5</span></div>
<div style="position:absolute;left:119.00px;top:294.07px" class="cls_026"><span class="cls_026">npm info using node@v12.18.2</span></div>
<div style="position:absolute;left:119.00px;top:306.07px" class="cls_026"><span class="cls_026">npm ERR! missing script: start</span></div>
<div style="position:absolute;left:119.00px;top:318.06px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:144.00px;top:357.27px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:371.64px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">oc logs dc/nodejs-hello</span><span class="cls_011"> command dumps the logs from the deployment</span></div>
<div style="position:absolute;left:144.00px;top:383.64px" class="cls_011"><span class="cls_011">pod. In the case of a successful deployment, that command dumps the logs from</span></div>
<div style="position:absolute;left:144.00px;top:395.64px" class="cls_011"><span class="cls_011">the application pod, as previously shown.</span></div>
<div style="position:absolute;left:144.00px;top:417.14px" class="cls_011"><span class="cls_011">If the deployment logs do not display the error, then check the logs of the</span></div>
<div style="position:absolute;left:144.00px;top:429.13px" class="cls_011"><span class="cls_011">application pod by running the </span><span class="cls_021">oc logs POD</span><span class="cls_011"> command replacing POD with the</span></div>
<div style="position:absolute;left:144.00px;top:441.13px" class="cls_011"><span class="cls_011">name of the pod that has a stuatus of </span><span class="cls_021">CrashLoopBackOff</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:161.70px;top:479.03px" class="cls_011"><span class="cls_011">The application fails to start because the start script declaration is missing.</span></div>
<div style="position:absolute;left:119.41px;top:502.97px" class="cls_022"><span class="cls_022">8.</span><span class="cls_011">  Fix the problem by updating the application code.</span></div>
<div style="position:absolute;left:137.00px;top:527.43px" class="cls_011"><span class="cls_011">8.1.</span></div>
<div style="position:absolute;left:161.70px;top:527.43px" class="cls_011"><span class="cls_011">Update the </span><span class="cls_021">package.json</span><span class="cls_011"> file to define a startup command.</span></div>
<div style="position:absolute;left:161.70px;top:543.43px" class="cls_011"><span class="cls_011">The previous output indicates that the </span><span class="cls_021">~/DO180-apps/nodejs-helloworld/</span></div>
<div style="position:absolute;left:161.70px;top:555.42px" class="cls_021"><span class="cls_021">package.json</span><span class="cls_011"> file is missing the </span><span class="cls_021">start</span><span class="cls_011"> attribute in the </span><span class="cls_021">scripts</span><span class="cls_011"> field. The </span><span class="cls_021">start</span></div>
<div style="position:absolute;left:161.70px;top:567.42px" class="cls_011"><span class="cls_011">attribute defines a command to run when the application starts. It invokes the </span><span class="cls_021">node</span></div>
<div style="position:absolute;left:161.70px;top:579.42px" class="cls_011"><span class="cls_011">binary, which runs the app.js application.</span></div>
<div style="position:absolute;left:161.70px;top:595.42px" class="cls_011"><span class="cls_011">To fix the problem, add to the </span><span class="cls_021">package.json</span><span class="cls_011"> file the following attribute. Do not</span></div>
<div style="position:absolute;left:161.70px;top:607.42px" class="cls_011"><span class="cls_011">forget the comma after the bracket.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.05px;top:751.59px" class="cls_013"><span class="cls_013">263</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:225362px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background282.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:110.60px;top:73.69px" class="cls_026"><span class="cls_026">"description": "Hello World!",</span></div>
<div style="position:absolute;left:110.60px;top:85.69px" class="cls_026"><span class="cls_026">"main": "app.js",</span></div>
<div style="position:absolute;left:110.60px;top:97.69px" class="cls_026"><span class="cls_026">"scripts": {</span></div>
<div style="position:absolute;left:120.20px;top:109.69px" class="cls_026"><span class="cls_026">"start": "node app.js"</span></div>
<div style="position:absolute;left:110.60px;top:121.68px" class="cls_026"><span class="cls_026">},</span></div>
<div style="position:absolute;left:110.60px;top:133.68px" class="cls_026"><span class="cls_026">"author": "Red Hat Training",</span></div>
<div style="position:absolute;left:119.00px;top:176.36px" class="cls_011"><span class="cls_011">8.2.  Commit and push the changes made to the project:</span></div>
<div style="position:absolute;left:101.00px;top:204.08px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git commit -am "Added start up script"</span></div>
<div style="position:absolute;left:101.00px;top:216.07px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:228.07px" class="cls_026"><span class="cls_026">1 file changed, 3 insertions(+)</span></div>
<div style="position:absolute;left:101.00px;top:240.07px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git push</span></div>
<div style="position:absolute;left:101.00px;top:252.07px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:264.07px" class="cls_026"><span class="cls_026">To https://github.com/</span><span class="cls_029">yourgituser</span><span class="cls_026">/DO180-apps</span></div>
<div style="position:absolute;left:115.40px;top:276.07px" class="cls_026"><span class="cls_026">73a82cd..a5a0411  troubleshoot-s2i -> troubleshoot-s2i</span></div>
<div style="position:absolute;left:143.70px;top:298.34px" class="cls_011"><span class="cls_011">Continue the deploy step from the S2I process.</span></div>
<div style="position:absolute;left:119.00px;top:322.74px" class="cls_011"><span class="cls_011">8.3.  Restart the build step.</span></div>
<div style="position:absolute;left:101.00px;top:350.46px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc start-build bc/nodejs-hello</span></div>
<div style="position:absolute;left:101.00px;top:362.46px" class="cls_026"><span class="cls_026">build.build.openshift.io/nodejs-hello-3 started</span></div>
<div style="position:absolute;left:119.00px;top:393.14px" class="cls_011"><span class="cls_011">8.4.  Evaluate the status of the current build process. Run the command to retrieve the</span></div>
<div style="position:absolute;left:143.70px;top:405.13px" class="cls_011"><span class="cls_011">status of the Node.js application. Wait for the latest build to finish.</span></div>
<div style="position:absolute;left:101.00px;top:432.85px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc get pods -w</span></div>
<div style="position:absolute;left:101.00px;top:444.85px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:235.40px;top:444.85px" class="cls_026"><span class="cls_026">READY   STATUS</span></div>
<div style="position:absolute;left:365.00px;top:444.85px" class="cls_026"><span class="cls_026">RESTARTS   AGE</span></div>
<div style="position:absolute;left:101.00px;top:456.85px" class="cls_026"><span class="cls_026">nodejs-hello-1-build</span></div>
<div style="position:absolute;left:211.40px;top:456.85px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:249.80px;top:456.85px" class="cls_026"><span class="cls_026">Error</span></div>
<div style="position:absolute;left:341.00px;top:456.85px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:393.80px;top:456.85px" class="cls_026"><span class="cls_026">66m</span></div>
<div style="position:absolute;left:101.00px;top:468.84px" class="cls_026"><span class="cls_026">nodejs-hello-1-mtxsh</span></div>
<div style="position:absolute;left:211.40px;top:468.84px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:249.80px;top:468.84px" class="cls_026"><span class="cls_026">CrashLoopBackOff</span></div>
<div style="position:absolute;left:341.00px;top:468.84px" class="cls_026"><span class="cls_026">9</span></div>
<div style="position:absolute;left:393.80px;top:468.84px" class="cls_026"><span class="cls_026">23m</span></div>
<div style="position:absolute;left:101.00px;top:480.84px" class="cls_026"><span class="cls_026">nodejs-hello-2-build</span></div>
<div style="position:absolute;left:211.40px;top:480.84px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:249.80px;top:480.84px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:341.00px;top:480.84px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:393.80px;top:480.84px" class="cls_026"><span class="cls_026">28m</span></div>
<div style="position:absolute;left:101.00px;top:492.84px" class="cls_026"><span class="cls_026">nodejs-hello-3-build</span></div>
<div style="position:absolute;left:211.40px;top:492.84px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:249.80px;top:492.84px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:341.00px;top:492.84px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:393.80px;top:492.84px" class="cls_026"><span class="cls_026">2m3s</span></div>
<div style="position:absolute;left:101.00px;top:504.84px" class="cls_026"><span class="cls_026">nodejs-hello-2-deploy</span></div>
<div style="position:absolute;left:216.20px;top:504.84px" class="cls_026"><span class="cls_026">0/1   Pending</span></div>
<div style="position:absolute;left:293.00px;top:504.84px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:321.80px;top:504.84px" class="cls_026"><span class="cls_026">0s</span></div>
<div style="position:absolute;left:101.00px;top:516.84px" class="cls_026"><span class="cls_026">nodejs-hello-2-deploy</span></div>
<div style="position:absolute;left:216.20px;top:516.84px" class="cls_026"><span class="cls_026">0/1   Pending</span></div>
<div style="position:absolute;left:293.00px;top:516.84px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:321.80px;top:516.84px" class="cls_026"><span class="cls_026">0s</span></div>
<div style="position:absolute;left:101.00px;top:528.83px" class="cls_026"><span class="cls_026">nodejs-hello-2-deploy</span></div>
<div style="position:absolute;left:216.20px;top:528.83px" class="cls_026"><span class="cls_026">0/1   ContainerCreating</span></div>
<div style="position:absolute;left:341.00px;top:528.83px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:369.80px;top:528.83px" class="cls_026"><span class="cls_026">0s</span></div>
<div style="position:absolute;left:101.00px;top:540.83px" class="cls_026"><span class="cls_026">nodejs-hello-3-build 0/1 Completed 0 3m9s</span></div>
<div style="position:absolute;left:101.00px;top:552.83px" class="cls_026"><span class="cls_026">nodejs-hello-2-deploy</span></div>
<div style="position:absolute;left:216.20px;top:552.83px" class="cls_026"><span class="cls_026">1/1   Running</span></div>
<div style="position:absolute;left:293.00px;top:552.83px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:321.80px;top:552.83px" class="cls_026"><span class="cls_026">4s</span></div>
<div style="position:absolute;left:101.00px;top:564.83px" class="cls_026"><span class="cls_026">nodejs-hello-2-8tsl4</span></div>
<div style="position:absolute;left:211.40px;top:564.83px" class="cls_026"><span class="cls_026">0/1   Pending</span></div>
<div style="position:absolute;left:288.20px;top:564.83px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:317.00px;top:564.83px" class="cls_026"><span class="cls_026">0s</span></div>
<div style="position:absolute;left:101.00px;top:576.83px" class="cls_026"><span class="cls_026">nodejs-hello-2-8tsl4</span></div>
<div style="position:absolute;left:211.40px;top:576.83px" class="cls_026"><span class="cls_026">0/1   Pending</span></div>
<div style="position:absolute;left:288.20px;top:576.83px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:317.00px;top:576.83px" class="cls_026"><span class="cls_026">1s</span></div>
<div style="position:absolute;left:101.00px;top:588.82px" class="cls_026"><span class="cls_026">nodejs-hello-2-8tsl4</span></div>
<div style="position:absolute;left:211.40px;top:588.82px" class="cls_026"><span class="cls_026">0/1   ContainerCreating</span></div>
<div style="position:absolute;left:336.20px;top:588.82px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:365.00px;top:588.82px" class="cls_026"><span class="cls_026">1s</span></div>
<div style="position:absolute;left:101.00px;top:600.82px" class="cls_026"><span class="cls_026">nodejs-hello-2-8tsl4 1/1 Running 0 50s</span></div>
<div style="position:absolute;left:101.00px;top:612.82px" class="cls_026"><span class="cls_026">nodejs-hello-1-mtxsh</span></div>
<div style="position:absolute;left:211.40px;top:612.82px" class="cls_026"><span class="cls_026">0/1   Terminating</span></div>
<div style="position:absolute;left:307.40px;top:612.82px" class="cls_026"><span class="cls_026">9</span></div>
<div style="position:absolute;left:336.20px;top:612.82px" class="cls_026"><span class="cls_026">25m</span></div>
<div style="position:absolute;left:101.00px;top:624.82px" class="cls_026"><span class="cls_026">nodejs-hello-1-mtxsh</span></div>
<div style="position:absolute;left:211.40px;top:624.82px" class="cls_026"><span class="cls_026">0/1   Terminating</span></div>
<div style="position:absolute;left:307.40px;top:624.82px" class="cls_026"><span class="cls_026">9</span></div>
<div style="position:absolute;left:336.20px;top:624.82px" class="cls_026"><span class="cls_026">25m</span></div>
<div style="position:absolute;left:101.00px;top:636.82px" class="cls_026"><span class="cls_026">nodejs-hello-2-deploy 0/1 Completed 0 61s</span></div>
<div style="position:absolute;left:101.00px;top:648.81px" class="cls_026"><span class="cls_026">nodejs-hello-2-deploy</span></div>
<div style="position:absolute;left:216.20px;top:648.81px" class="cls_026"><span class="cls_026">0/1   Terminating</span></div>
<div style="position:absolute;left:312.20px;top:648.81px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:341.00px;top:648.81px" class="cls_026"><span class="cls_026">61s</span></div>
<div style="position:absolute;left:101.00px;top:660.81px" class="cls_026"><span class="cls_026">nodejs-hello-2-deploy</span></div>
<div style="position:absolute;left:216.20px;top:660.81px" class="cls_026"><span class="cls_026">0/1   Terminating</span></div>
<div style="position:absolute;left:312.20px;top:660.81px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:341.00px;top:660.81px" class="cls_026"><span class="cls_026">61s</span></div>
<div style="position:absolute;left:101.00px;top:672.81px" class="cls_026"><span class="cls_026">nodejs-hello-1-mtxsh</span></div>
<div style="position:absolute;left:211.40px;top:672.81px" class="cls_026"><span class="cls_026">0/1   Terminating</span></div>
<div style="position:absolute;left:307.40px;top:672.81px" class="cls_026"><span class="cls_026">9</span></div>
<div style="position:absolute;left:336.20px;top:672.81px" class="cls_026"><span class="cls_026">25m</span></div>
<div style="position:absolute;left:101.00px;top:684.81px" class="cls_026"><span class="cls_026">nodejs-hello-1-mtxsh</span></div>
<div style="position:absolute;left:211.40px;top:684.81px" class="cls_026"><span class="cls_026">0/1   Terminating</span></div>
<div style="position:absolute;left:307.40px;top:684.81px" class="cls_026"><span class="cls_026">9</span></div>
<div style="position:absolute;left:336.20px;top:684.81px" class="cls_026"><span class="cls_026">25m</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">264</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:226164px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background283.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:161.70px;top:53.98px" class="cls_011"><span class="cls_011">According to the output, the build is successful, and the application is able to start</span></div>
<div style="position:absolute;left:161.70px;top:65.97px" class="cls_011"><span class="cls_011">with no errors. The output also provides insight into how the deployment pod</span></div>
<div style="position:absolute;left:161.70px;top:77.97px" class="cls_011"><span class="cls_011">(</span><span class="cls_021">nodejs-hello-2-deploy</span><span class="cls_011">) was created, and that it completed successfully and</span></div>
<div style="position:absolute;left:161.70px;top:89.97px" class="cls_011"><span class="cls_011">terminated. As the new application pod is available (</span><span class="cls_021">nodejs-hello-2-8tsl4</span><span class="cls_011">), the</span></div>
<div style="position:absolute;left:161.70px;top:101.97px" class="cls_011"><span class="cls_011">old one (</span><span class="cls_021">nodejs-hello-1-mtxsh</span><span class="cls_011">) is rolled out.</span></div>
<div style="position:absolute;left:137.00px;top:126.37px" class="cls_011"><span class="cls_011">8.5.  Review the logs generated by the </span><span class="cls_021">nodejs-hello</span><span class="cls_011"> application pod.</span></div>
<div style="position:absolute;left:119.00px;top:154.08px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc logs dc/nodejs-hello</span></div>
<div style="position:absolute;left:119.00px;top:166.08px" class="cls_026"><span class="cls_026">Environment:</span></div>
<div style="position:absolute;left:123.80px;top:178.08px" class="cls_026"><span class="cls_026">DEV_MODE=false</span></div>
<div style="position:absolute;left:123.80px;top:190.08px" class="cls_026"><span class="cls_026">NODE_ENV=production</span></div>
<div style="position:absolute;left:123.80px;top:202.07px" class="cls_026"><span class="cls_026">DEBUG_PORT=5858</span></div>
<div style="position:absolute;left:119.00px;top:214.07px" class="cls_026"><span class="cls_026">Launching via npm...</span></div>
<div style="position:absolute;left:119.00px;top:226.07px" class="cls_026"><span class="cls_026">npm info it worked if it ends with ok</span></div>
<div style="position:absolute;left:119.00px;top:238.07px" class="cls_026"><span class="cls_026">npm info using npm@6.14.5</span></div>
<div style="position:absolute;left:119.00px;top:250.07px" class="cls_026"><span class="cls_026">npm info using node@v12.18.2</span></div>
<div style="position:absolute;left:119.00px;top:262.07px" class="cls_026"><span class="cls_026">npm info lifecycle nodejs-helloworld@1.0.0~prestart: nodejs-helloworld@1.0.0</span></div>
<div style="position:absolute;left:119.00px;top:274.06px" class="cls_026"><span class="cls_026">npm info lifecycle nodejs-helloworld@1.0.0~start: nodejs-helloworld@1.0.0</span></div>
<div style="position:absolute;left:119.00px;top:298.06px" class="cls_026"><span class="cls_026">> nodejs-helloworld@1.0.0 start /opt/app-root/src</span></div>
<div style="position:absolute;left:119.00px;top:310.06px" class="cls_026"><span class="cls_026">> node app.js</span></div>
<div style="position:absolute;left:119.00px;top:334.05px" class="cls_026"><span class="cls_026">Example app listening on port 8080!</span></div>
<div style="position:absolute;left:161.70px;top:356.33px" class="cls_011"><span class="cls_011">The application is now running on port 8080.</span></div>
<div style="position:absolute;left:119.41px;top:380.27px" class="cls_022"><span class="cls_022">9.</span><span class="cls_011">  Test the application.</span></div>
<div style="position:absolute;left:137.00px;top:404.73px" class="cls_011"><span class="cls_011">9.1.</span></div>
<div style="position:absolute;left:161.70px;top:404.73px" class="cls_011"><span class="cls_011">Run the </span><span class="cls_021">oc</span><span class="cls_011"> command with the </span><span class="cls_021">expose</span><span class="cls_011"> subcommand to expose the application:</span></div>
<div style="position:absolute;left:119.00px;top:432.45px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc expose svc/nodejs-hello</span></div>
<div style="position:absolute;left:119.00px;top:444.45px" class="cls_026"><span class="cls_026">route.route.openshift.io/nodejs-hello exposed</span></div>
<div style="position:absolute;left:137.00px;top:475.12px" class="cls_011"><span class="cls_011">9.2.  Retrieve the address associated with the application.</span></div>
<div style="position:absolute;left:119.00px;top:502.84px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc get route -o yaml</span></div>
<div style="position:absolute;left:119.00px;top:514.84px" class="cls_026"><span class="cls_026">apiVersion: v1</span></div>
<div style="position:absolute;left:119.00px;top:526.84px" class="cls_026"><span class="cls_026">items:</span></div>
<div style="position:absolute;left:119.00px;top:538.84px" class="cls_026"><span class="cls_026">- apiVersion: route.openshift.io/v1</span></div>
<div style="position:absolute;left:128.60px;top:550.83px" class="cls_026"><span class="cls_026">kind: Route</span></div>
<div style="position:absolute;left:119.00px;top:562.83px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:128.60px;top:574.83px" class="cls_026"><span class="cls_026">spec:</span></div>
<div style="position:absolute;left:138.20px;top:586.83px" class="cls_026"><span class="cls_026">host: nodejs-hello-${RHT_OCP4_DEV_USER}-nodejs.${RHT_OCP4_WILDCARD_DOMAIN}</span></div>
<div style="position:absolute;left:138.20px;top:598.83px" class="cls_026"><span class="cls_026">port:</span></div>
<div style="position:absolute;left:147.80px;top:610.82px" class="cls_026"><span class="cls_026">targetPort: 8080-tcp</span></div>
<div style="position:absolute;left:138.20px;top:622.82px" class="cls_026"><span class="cls_026">to:</span></div>
<div style="position:absolute;left:147.80px;top:634.82px" class="cls_026"><span class="cls_026">kind: Service</span></div>
<div style="position:absolute;left:147.80px;top:646.82px" class="cls_026"><span class="cls_026">name: nodejs-hello</span></div>
<div style="position:absolute;left:119.00px;top:658.82px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:137.00px;top:689.49px" class="cls_011"><span class="cls_011">9.3.  Access the application from the </span><span class="cls_021">workstation</span><span class="cls_011"> VM by using the </span><span class="cls_021">curl</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.14px;top:751.59px" class="cls_013"><span class="cls_013">265</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:226966px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background284.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">curl -w "\n" \</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">> </span><A HREF="http://nodejs-hello-${rht_ocp4_dev_user}-nodejs.${rht_ocp4_wildcard_domain}/">http://nodejs-hello-${RHT_OCP4_DEV_USER}-nodejs.${RHT_OCP4_WILDCARD_DOMAIN}</A> </span></div>
<div style="position:absolute;left:101.00px;top:85.69px" class="cls_026"><span class="cls_026">Hello world!</span></div>
<div style="position:absolute;left:143.70px;top:107.97px" class="cls_011"><span class="cls_011">The output demonstrates the application is up and running.</span></div>
<div style="position:absolute;left:90.00px;top:132.03px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:153.97px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab troubleshoot-s2i finish</span><span class="cls_011"> script to complete this exercise.</span></div>
<div style="position:absolute;left:101.00px;top:181.68px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">lab troubleshoot-s2i finish</span></div>
<div style="position:absolute;left:90.00px;top:209.46px" class="cls_011"><span class="cls_011">This concludes the exercise.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">266</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:227768px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background285.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:108.00px;top:62.06px" class="cls_014"><span class="cls_014">Troubleshooting Containerized</span></div>
<div style="position:absolute;left:108.00px;top:83.06px" class="cls_014"><span class="cls_014">Applications</span></div>
<div style="position:absolute;left:108.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:108.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, you should be able to:</span></div>
<div style="position:absolute;left:108.00px;top:182.37px" class="cls_011"><span class="cls_011">• Implement techniques for troubleshooting and debugging containerized applications.</span></div>
<div style="position:absolute;left:108.00px;top:205.77px" class="cls_011"><span class="cls_011">• Use the port-forwarding feature of the OpenShift client tool.</span></div>
<div style="position:absolute;left:108.00px;top:229.17px" class="cls_011"><span class="cls_011">• View container logs.</span></div>
<div style="position:absolute;left:108.00px;top:252.57px" class="cls_011"><span class="cls_011">• View OpenShift cluster events.</span></div>
<div style="position:absolute;left:108.00px;top:274.85px" class="cls_024"><span class="cls_024">Forwarding Ports for Troubleshooting</span></div>
<div style="position:absolute;left:108.00px;top:299.57px" class="cls_011"><span class="cls_011">Occasionally developers and system administrators need special network access to a container</span></div>
<div style="position:absolute;left:108.00px;top:311.56px" class="cls_011"><span class="cls_011">that would not be needed by application users. For example, developers may need to use the</span></div>
<div style="position:absolute;left:108.00px;top:323.56px" class="cls_011"><span class="cls_011">administration console for a database or messaging service, or system administrators may make</span></div>
<div style="position:absolute;left:108.00px;top:335.56px" class="cls_011"><span class="cls_011">use of SSH access to a container to restart a terminated service. Such network access, in the form</span></div>
<div style="position:absolute;left:108.00px;top:347.56px" class="cls_011"><span class="cls_011">of network ports, are usually not exposed by the default container configurations, and tend to</span></div>
<div style="position:absolute;left:108.00px;top:359.56px" class="cls_011"><span class="cls_011">require specialized clients used by developers and system administrators.</span></div>
<div style="position:absolute;left:108.00px;top:381.05px" class="cls_011"><span class="cls_011">Podman provides port forwarding features by using the </span><span class="cls_021">-p</span><span class="cls_011"> option along with the </span><span class="cls_021">run</span></div>
<div style="position:absolute;left:108.00px;top:393.05px" class="cls_011"><span class="cls_011">subcommand. In this case, there is no distinction between network access for regular application</span></div>
<div style="position:absolute;left:108.00px;top:405.05px" class="cls_011"><span class="cls_011">access and for troubleshooting. As a refresher, the following is an example of configuring port</span></div>
<div style="position:absolute;left:108.00px;top:417.05px" class="cls_011"><span class="cls_011">forwarding by mapping the port from the host to a database server running inside a container:</span></div>
<div style="position:absolute;left:119.00px;top:444.77px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">sudo podman run --name db -p 30306:3306 mysql</span></div>
<div style="position:absolute;left:108.00px;top:472.54px" class="cls_011"><span class="cls_011">The previous command maps the host port 30306 to the port 3306 on the </span><span class="cls_021">db</span><span class="cls_011"> container. This</span></div>
<div style="position:absolute;left:108.00px;top:484.54px" class="cls_011"><span class="cls_011">container is created from the </span><span class="cls_021">mysql</span><span class="cls_011"> image, which starts a MySQL server that listens on port</span></div>
<div style="position:absolute;left:108.00px;top:496.54px" class="cls_011"><span class="cls_011">3306.</span></div>
<div style="position:absolute;left:108.00px;top:518.04px" class="cls_011"><span class="cls_011">OpenShift provides the </span><span class="cls_021">oc port-forward</span><span class="cls_011"> command for forwarding a local port to a pod port.</span></div>
<div style="position:absolute;left:108.00px;top:530.04px" class="cls_011"><span class="cls_011">This is different than having access to a pod through a service resource:</span></div>
<div style="position:absolute;left:108.00px;top:553.43px" class="cls_011"><span class="cls_011">• The port-forwarding mapping exists only in the workstation where the </span><span class="cls_021">oc</span><span class="cls_011"> client runs, while a</span></div>
<div style="position:absolute;left:117.50px;top:565.43px" class="cls_011"><span class="cls_011">service maps a port for all network users.</span></div>
<div style="position:absolute;left:108.00px;top:588.83px" class="cls_011"><span class="cls_011">• A service load-balances connections to potentially multiple pods, whereas a port-forwarding</span></div>
<div style="position:absolute;left:117.50px;top:600.83px" class="cls_011"><span class="cls_011">mapping forwards connections to a single pod.</span></div>
<div style="position:absolute;left:108.00px;top:622.33px" class="cls_011"><span class="cls_011">Here is an example of the </span><span class="cls_021">oc port-forward</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:119.00px;top:650.04px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc port-forward db 30306 3306</span></div>
<div style="position:absolute;left:108.00px;top:677.82px" class="cls_011"><span class="cls_011">The previous command forwards port 30306 from the developer machine to port 3306 on the </span><span class="cls_021">db</span></div>
<div style="position:absolute;left:108.00px;top:689.82px" class="cls_011"><span class="cls_011">pod, where a MySQL server (inside a container) accepts network connections.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.13px;top:751.59px" class="cls_013"><span class="cls_013">267</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:228570px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background286.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:126.00px;top:63.50px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:77.88px" class="cls_011"><span class="cls_011">When running this command, be sure to leave the terminal window running. Closing</span></div>
<div style="position:absolute;left:126.00px;top:89.87px" class="cls_011"><span class="cls_011">the window or canceling the process stops the port mapping.</span></div>
<div style="position:absolute;left:90.00px;top:127.77px" class="cls_011"><span class="cls_011">While the </span><span class="cls_021">podman run -p</span><span class="cls_011"> method of mapping (port-forwarding) can only be configured when</span></div>
<div style="position:absolute;left:90.00px;top:139.77px" class="cls_011"><span class="cls_011">the container is started, the mapping with the </span><span class="cls_021">oc port-forward</span><span class="cls_011"> command can be created and</span></div>
<div style="position:absolute;left:90.00px;top:151.77px" class="cls_011"><span class="cls_011">destroyed at any time after a pod was created.</span></div>
<div style="position:absolute;left:126.00px;top:184.69px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:199.07px" class="cls_011"><span class="cls_011">Creating a service of </span><span class="cls_021">NodePort</span><span class="cls_011"> type for a database pod would be similar to running</span></div>
<div style="position:absolute;left:126.00px;top:211.06px" class="cls_021"><span class="cls_021">podman run -p</span><span class="cls_011">. However, Red Hat discourages the usage of the </span><span class="cls_021">NodePort</span></div>
<div style="position:absolute;left:126.00px;top:223.06px" class="cls_011"><span class="cls_011">approach to avoid exposing the service to direct connections. Mapping with port-</span></div>
<div style="position:absolute;left:126.00px;top:235.06px" class="cls_011"><span class="cls_011">forwarding in OpenShift is considered a more secure alternative.</span></div>
<div style="position:absolute;left:90.00px;top:271.24px" class="cls_024"><span class="cls_024">Enabling Remote Debugging with Port Forwarding</span></div>
<div style="position:absolute;left:90.00px;top:295.96px" class="cls_011"><span class="cls_011">Another use for the port forwarding feature is enabling remote debugging. Many integrated</span></div>
<div style="position:absolute;left:90.00px;top:307.96px" class="cls_011"><span class="cls_011">development environments (IDEs) provide the capability to remotely debug an application.</span></div>
<div style="position:absolute;left:90.00px;top:329.45px" class="cls_011"><span class="cls_011">For example, JBoss Developer Studio (JBDS) allows users to utilize the Java Debug Wire Protocol</span></div>
<div style="position:absolute;left:90.00px;top:341.45px" class="cls_011"><span class="cls_011">(JDWP) to communicate between a debugger (JBDS) and the Java Virtual Machine. When</span></div>
<div style="position:absolute;left:90.00px;top:353.45px" class="cls_011"><span class="cls_011">enabled, developers can step through each line of code as it is being executed in real time.</span></div>
<div style="position:absolute;left:90.00px;top:374.95px" class="cls_011"><span class="cls_011">For JDWP to work, the Java Virtual Machine (JVM) where the application runs must be</span></div>
<div style="position:absolute;left:90.00px;top:386.95px" class="cls_011"><span class="cls_011">started with options enabling remote debugging. For example, WildFly and JBoss EAP</span></div>
<div style="position:absolute;left:90.00px;top:398.94px" class="cls_011"><span class="cls_011">users must configure these options on application server startup. The following line in the</span></div>
<div style="position:absolute;left:90.00px;top:410.94px" class="cls_021"><span class="cls_021">standalone.conf</span><span class="cls_011"> file enables remote debugging by opening the JDWP TCP port 8787, for a</span></div>
<div style="position:absolute;left:90.00px;top:422.94px" class="cls_011"><span class="cls_011">WildFly or EAP instance running in standalone mode:</span></div>
<div style="position:absolute;left:101.00px;top:450.66px" class="cls_026"><span class="cls_026">JAVA_OPTS="$JAVA_OPTS \</span></div>
<div style="position:absolute;left:101.00px;top:462.65px" class="cls_026"><span class="cls_026">> -agentlib:jdwp=transport=dt_socket,address=8787,server=y,suspend=n"</span></div>
<div style="position:absolute;left:90.00px;top:490.43px" class="cls_011"><span class="cls_011">When the server starts with the debugger listening on port 8787, a port forwarding mapping needs</span></div>
<div style="position:absolute;left:90.00px;top:502.43px" class="cls_011"><span class="cls_011">to be created to forward connections from a local unused TCP port to port 8787 in the EAP pod.</span></div>
<div style="position:absolute;left:90.00px;top:514.43px" class="cls_011"><span class="cls_011">If the developer workstation has no local JVM running with remote debugging enabled, the local</span></div>
<div style="position:absolute;left:90.00px;top:526.43px" class="cls_011"><span class="cls_011">port can also be 8787.</span></div>
<div style="position:absolute;left:90.00px;top:547.93px" class="cls_011"><span class="cls_011">The following command assumes a WildFly pod named </span><span class="cls_021">jappserver</span><span class="cls_011"> running a container from an</span></div>
<div style="position:absolute;left:90.00px;top:559.92px" class="cls_011"><span class="cls_011">image previously configured to enable remote debugging:</span></div>
<div style="position:absolute;left:101.00px;top:587.64px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc port-forward jappserver 8787:8787</span></div>
<div style="position:absolute;left:90.00px;top:615.42px" class="cls_011"><span class="cls_011">Once the debugger is enabled and the port forwarding mapping is created, users can set</span></div>
<div style="position:absolute;left:90.00px;top:627.42px" class="cls_011"><span class="cls_011">breakpoints in their IDE of choice and run the debugger by pointing to the application's host name</span></div>
<div style="position:absolute;left:90.00px;top:639.42px" class="cls_011"><span class="cls_011">and debug port (in this instance, 8787).</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">268</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:229372px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background287.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:108.00px;top:52.26px" class="cls_024"><span class="cls_024">Accessing Container Logs</span></div>
<div style="position:absolute;left:108.00px;top:76.98px" class="cls_011"><span class="cls_011">Podman and OpenShift provide the ability to view logs in running containers and pods to facilitate</span></div>
<div style="position:absolute;left:108.00px;top:88.97px" class="cls_011"><span class="cls_011">troubleshooting. But neither of them is aware of application specific logs. Both expect the</span></div>
<div style="position:absolute;left:108.00px;top:100.97px" class="cls_011"><span class="cls_011">application to be configured to send all logging output to the standard output.</span></div>
<div style="position:absolute;left:108.00px;top:122.47px" class="cls_011"><span class="cls_011">A container is simply a process tree from the host OS perspective. When Podman starts a</span></div>
<div style="position:absolute;left:108.00px;top:134.47px" class="cls_011"><span class="cls_011">container either directly or on the RHOCP cluster, it redirects the container standard output and</span></div>
<div style="position:absolute;left:108.00px;top:146.47px" class="cls_011"><span class="cls_011">standard error, saving them on disk as part of the container's ephemeral storage. This way, the</span></div>
<div style="position:absolute;left:108.00px;top:158.46px" class="cls_011"><span class="cls_011">container logs can be viewed using </span><span class="cls_021">podman</span><span class="cls_011"> and </span><span class="cls_021">oc</span><span class="cls_011"> commands, even after the container was</span></div>
<div style="position:absolute;left:108.00px;top:170.46px" class="cls_011"><span class="cls_011">stopped, but not removed.</span></div>
<div style="position:absolute;left:108.00px;top:191.96px" class="cls_011"><span class="cls_011">To retrieve the output of a running container, use the following </span><span class="cls_021">podman</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:119.00px;top:219.68px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">podman logs </span><span class="cls_040">&lt;containerName></span></div>
<div style="position:absolute;left:108.00px;top:247.46px" class="cls_011"><span class="cls_011">In OpenShift, the following command returns the output for a container within a pod:</span></div>
<div style="position:absolute;left:119.00px;top:275.17px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc logs </span><span class="cls_040">&lt;podName></span><span class="cls_027"> </span><span class="cls_040">[-c &lt;containerName>]</span></div>
<div style="position:absolute;left:144.00px;top:314.38px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:328.75px" class="cls_011"><span class="cls_011">The container name is optional if there is only one container, as </span><span class="cls_021">oc</span><span class="cls_011"> defaults to the</span></div>
<div style="position:absolute;left:144.00px;top:340.75px" class="cls_011"><span class="cls_011">only running container and returns the output.</span></div>
<div style="position:absolute;left:108.00px;top:376.93px" class="cls_024"><span class="cls_024">OpenShift Events</span></div>
<div style="position:absolute;left:108.00px;top:401.65px" class="cls_011"><span class="cls_011">Some developers consider Podman and OpenShift logs to be too low-level, making</span></div>
<div style="position:absolute;left:108.00px;top:413.65px" class="cls_011"><span class="cls_011">troubleshooting difficult. Fortunately, OpenShift provides a high-level logging and auditing facility</span></div>
<div style="position:absolute;left:108.00px;top:425.64px" class="cls_011"><span class="cls_011">called events.</span></div>
<div style="position:absolute;left:108.00px;top:447.14px" class="cls_011"><span class="cls_011">OpenShift events signal significant actions like starting a container or destroying a pod.</span></div>
<div style="position:absolute;left:108.00px;top:468.64px" class="cls_011"><span class="cls_011">To read OpenShift events, use the </span><span class="cls_021">get</span><span class="cls_011"> subcommand with the </span><span class="cls_021">events</span><span class="cls_011"> resource type for the </span><span class="cls_021">oc</span></div>
<div style="position:absolute;left:108.00px;top:480.64px" class="cls_011"><span class="cls_011">command, as follows.</span></div>
<div style="position:absolute;left:119.00px;top:508.35px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc get events</span></div>
<div style="position:absolute;left:108.00px;top:536.13px" class="cls_011"><span class="cls_011">Events listed by the </span><span class="cls_021">oc</span><span class="cls_011"> command this way are not filtered and span the whole RHOCP cluster.</span></div>
<div style="position:absolute;left:108.00px;top:548.13px" class="cls_011"><span class="cls_011">Using a pipe to standard UNIX filters such as </span><span class="cls_021">grep</span><span class="cls_011"> can help, but OpenShift offers an alternative in</span></div>
<div style="position:absolute;left:108.00px;top:560.13px" class="cls_011"><span class="cls_011">order to consult cluster events. The approach is provided by the </span><span class="cls_021">describe</span><span class="cls_011"> subcommand.</span></div>
<div style="position:absolute;left:108.00px;top:581.63px" class="cls_011"><span class="cls_011">For example, to only retrieve the events that relate to a </span><span class="cls_021">mysql</span><span class="cls_011"> pod, refer </span><span class="cls_021">Events</span><span class="cls_011"> field from the</span></div>
<div style="position:absolute;left:108.00px;top:593.63px" class="cls_011"><span class="cls_011">output of </span><span class="cls_021">oc describe pod </span><span class="cls_028">mysql</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:119.00px;top:621.34px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc describe pod mysql</span></div>
<div style="position:absolute;left:119.00px;top:633.34px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:645.34px" class="cls_026"><span class="cls_026">Events:</span></div>
<div style="position:absolute;left:128.60px;top:657.34px" class="cls_026"><span class="cls_026">FirstSeen   LastSeen</span></div>
<div style="position:absolute;left:243.80px;top:657.34px" class="cls_026"><span class="cls_026">Count From</span></div>
<div style="position:absolute;left:335.00px;top:657.34px" class="cls_026"><span class="cls_026">Reason</span></div>
<div style="position:absolute;left:411.80px;top:657.34px" class="cls_026"><span class="cls_026">Message</span></div>
<div style="position:absolute;left:128.60px;top:669.34px" class="cls_026"><span class="cls_026">Wed, 10 ... Wed, 10 ... 1</span></div>
<div style="position:absolute;left:272.60px;top:669.34px" class="cls_026"><span class="cls_026">{scheduler } scheduled</span></div>
<div style="position:absolute;left:411.80px;top:669.34px" class="cls_026"><span class="cls_026">Successfully as...</span></div>
<div style="position:absolute;left:119.00px;top:681.33px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:502.93px;top:751.59px" class="cls_013"><span class="cls_013">269</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:230174px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background288.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:90.00px;top:52.26px" class="cls_024"><span class="cls_024">Accessing Running Containers</span></div>
<div style="position:absolute;left:90.00px;top:76.98px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">podman logs</span><span class="cls_011"> and </span><span class="cls_021">oc logs</span><span class="cls_011"> commands can be useful for viewing output sent by any</span></div>
<div style="position:absolute;left:90.00px;top:88.97px" class="cls_011"><span class="cls_011">container. However, the output does not necessarily display all of the available information if</span></div>
<div style="position:absolute;left:90.00px;top:100.97px" class="cls_011"><span class="cls_011">the application is configured to send logs to a file. Other troubleshooting scenarios may require</span></div>
<div style="position:absolute;left:90.00px;top:112.97px" class="cls_011"><span class="cls_011">inspecting the container environment as seen by processes inside the container, such as verifying</span></div>
<div style="position:absolute;left:90.00px;top:124.97px" class="cls_011"><span class="cls_011">external connectivity.</span></div>
<div style="position:absolute;left:90.00px;top:146.47px" class="cls_011"><span class="cls_011">As a solution, Podman and OpenShift provide the </span><span class="cls_021">exec</span><span class="cls_011"> subcommand, allowing the creation of</span></div>
<div style="position:absolute;left:90.00px;top:158.46px" class="cls_011"><span class="cls_011">new processes inside a running container, with the standard output and input of these processes</span></div>
<div style="position:absolute;left:90.00px;top:170.46px" class="cls_011"><span class="cls_011">redirected to the user terminal. The following screen display the usage of the </span><span class="cls_021">podman exec</span></div>
<div style="position:absolute;left:90.00px;top:182.46px" class="cls_011"><span class="cls_011">command:</span></div>
<div style="position:absolute;left:101.00px;top:210.18px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">sudo podman exec </span><span class="cls_040">[options]</span><span class="cls_027"> </span><span class="cls_040">container</span><span class="cls_027"> </span><span class="cls_040">command</span><span class="cls_027"> </span><span class="cls_040">[arguments]</span></div>
<div style="position:absolute;left:90.00px;top:237.96px" class="cls_011"><span class="cls_011">The general syntax for the </span><span class="cls_021">oc exec</span><span class="cls_011"> command is:</span></div>
<div style="position:absolute;left:101.00px;top:265.67px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc exec </span><span class="cls_040">[options]</span><span class="cls_027"> </span><span class="cls_040">pod</span><span class="cls_027"> </span><span class="cls_040">[-c container]</span><span class="cls_027"> -- </span><span class="cls_040">command</span><span class="cls_027"> </span><span class="cls_040">[arguments]</span></div>
<div style="position:absolute;left:90.00px;top:293.45px" class="cls_011"><span class="cls_011">To execute a single interactive command or start a shell, add the </span><span class="cls_021">-it</span><span class="cls_011"> options. The following</span></div>
<div style="position:absolute;left:90.00px;top:305.45px" class="cls_011"><span class="cls_011">example starts a Bash shell for the </span><span class="cls_021">myhttpdpod</span><span class="cls_011"> pod:</span></div>
<div style="position:absolute;left:101.00px;top:333.17px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">oc exec -it myhttpdpod /bin/bash</span></div>
<div style="position:absolute;left:90.00px;top:360.95px" class="cls_011"><span class="cls_011">You can use this command to access application logs saved to disk (as part of the container</span></div>
<div style="position:absolute;left:90.00px;top:372.94px" class="cls_011"><span class="cls_011">ephemeral storage). For example, to display the Apache error log from a container, run the</span></div>
<div style="position:absolute;left:90.00px;top:384.94px" class="cls_011"><span class="cls_011">following command:</span></div>
<div style="position:absolute;left:101.00px;top:412.66px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">sudo podman exec </span><span class="cls_040">apache-container</span><span class="cls_027"> cat /var/log/httpd/error_log</span></div>
<div style="position:absolute;left:90.00px;top:441.22px" class="cls_024"><span class="cls_024">Overriding Container Binaries</span></div>
<div style="position:absolute;left:90.00px;top:465.94px" class="cls_011"><span class="cls_011">Many container images do not contain all of the troubleshooting commands users expect to find in</span></div>
<div style="position:absolute;left:90.00px;top:477.94px" class="cls_011"><span class="cls_011">regular OS installations, such as </span><span class="cls_021">telnet</span><span class="cls_011">, </span><span class="cls_021">netcat</span><span class="cls_011">, </span><span class="cls_021">ip</span><span class="cls_011">, or </span><span class="cls_021">traceroute</span><span class="cls_011">. Stripping the image from</span></div>
<div style="position:absolute;left:90.00px;top:489.93px" class="cls_011"><span class="cls_011">basic utilities or binaries allows the image to remain slim, thus, running many containers per host.</span></div>
<div style="position:absolute;left:90.00px;top:511.43px" class="cls_011"><span class="cls_011">One way to temporarily access some of these missing commands is mounting the host binaries</span></div>
<div style="position:absolute;left:90.00px;top:523.43px" class="cls_011"><span class="cls_011">folders, such as </span><span class="cls_021">/bin</span><span class="cls_011">, </span><span class="cls_021">/sbin</span><span class="cls_011">, and </span><span class="cls_021">/lib</span><span class="cls_011">, as volumes inside the container. This is possible because</span></div>
<div style="position:absolute;left:90.00px;top:535.43px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">-v</span><span class="cls_011"> option from </span><span class="cls_021">podman run</span><span class="cls_011"> command does not require matching </span><span class="cls_021">VOLUME</span><span class="cls_011"> instructions to be</span></div>
<div style="position:absolute;left:90.00px;top:547.43px" class="cls_011"><span class="cls_011">present in the </span><span class="cls_021">Dockerfile</span><span class="cls_011"> of the container image.</span></div>
<div style="position:absolute;left:126.00px;top:580.35px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:594.72px" class="cls_011"><span class="cls_011">To access these commands in OpenShift, you need to change the pod resource</span></div>
<div style="position:absolute;left:126.00px;top:606.72px" class="cls_011"><span class="cls_011">definition in order to define </span><span class="cls_021">volumeMounts</span><span class="cls_011"> and </span><span class="cls_021">volumeClaims</span><span class="cls_011"> objects. You also</span></div>
<div style="position:absolute;left:126.00px;top:618.72px" class="cls_011"><span class="cls_011">need to create a </span><span class="cls_021">hostPath</span><span class="cls_011"> persistent volume.</span></div>
<div style="position:absolute;left:90.00px;top:656.62px" class="cls_011"><span class="cls_011">The following command starts a container, and overrides the image's </span><span class="cls_021">/bin</span><span class="cls_011"> folder with the one</span></div>
<div style="position:absolute;left:90.00px;top:668.62px" class="cls_011"><span class="cls_011">from the host. It also starts an interactive shell inside the container.</span></div>
<div style="position:absolute;left:101.00px;top:696.33px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">sudo podman run -it -v /bin:/bin </span><span class="cls_040">image</span><span class="cls_027"> /bin/bash</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">270</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:230976px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background289.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:144.00px;top:63.50px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:144.00px;top:77.88px" class="cls_011"><span class="cls_011">The directory of binaries to override depends on the base OS image. For example,</span></div>
<div style="position:absolute;left:144.00px;top:89.87px" class="cls_011"><span class="cls_011">some commands require shared libraries from the </span><span class="cls_021">/lib</span><span class="cls_011"> directory. Some Linux</span></div>
<div style="position:absolute;left:144.00px;top:101.87px" class="cls_011"><span class="cls_011">distributions have different contents in </span><span class="cls_021">/bin</span><span class="cls_011">, </span><span class="cls_021">/usr/bin</span><span class="cls_011">, </span><span class="cls_021">/lib</span><span class="cls_011">, or </span><span class="cls_021">/usr/lib</span><span class="cls_011">,</span></div>
<div style="position:absolute;left:144.00px;top:113.87px" class="cls_011"><span class="cls_011">which would require to use the </span><span class="cls_021">-v</span><span class="cls_011"> option for each directory.</span></div>
<div style="position:absolute;left:108.00px;top:151.77px" class="cls_011"><span class="cls_011">As an alternative, you can include these utilities in the base image. To do so, add instructions in a</span></div>
<div style="position:absolute;left:108.00px;top:163.77px" class="cls_021"><span class="cls_021">Dockerfile</span><span class="cls_011"> build definition. For example, examine the following excerpt from a </span><span class="cls_021">Dockerfile</span></div>
<div style="position:absolute;left:108.00px;top:175.76px" class="cls_011"><span class="cls_011">definition, which is a child of the </span><span class="cls_021">rhel7.5</span><span class="cls_011"> image used throughout this course. The </span><span class="cls_021">RUN</span><span class="cls_011"> instruction</span></div>
<div style="position:absolute;left:108.00px;top:187.76px" class="cls_011"><span class="cls_011">installs the tools that are commonly used for network troubleshooting.</span></div>
<div style="position:absolute;left:119.00px;top:215.48px" class="cls_026"><span class="cls_026">FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:119.00px;top:239.48px" class="cls_026"><span class="cls_026">RUN yum install -y \</span></div>
<div style="position:absolute;left:147.80px;top:251.47px" class="cls_026"><span class="cls_026">less \</span></div>
<div style="position:absolute;left:147.80px;top:263.47px" class="cls_026"><span class="cls_026">dig \</span></div>
<div style="position:absolute;left:147.80px;top:275.47px" class="cls_026"><span class="cls_026">ping \</span></div>
<div style="position:absolute;left:147.80px;top:287.47px" class="cls_026"><span class="cls_026">iputils && \</span></div>
<div style="position:absolute;left:138.20px;top:299.47px" class="cls_026"><span class="cls_026">yum clean all</span></div>
<div style="position:absolute;left:108.00px;top:327.24px" class="cls_011"><span class="cls_011">When the image is built and the container is created, it will be identical to a </span><span class="cls_021">rhel7.5</span><span class="cls_011"> container</span></div>
<div style="position:absolute;left:108.00px;top:339.24px" class="cls_011"><span class="cls_011">image, plus the extra available tools.</span></div>
<div style="position:absolute;left:108.00px;top:361.52px" class="cls_024"><span class="cls_024">Transferring Files To and Out of Containers</span></div>
<div style="position:absolute;left:108.00px;top:386.24px" class="cls_011"><span class="cls_011">When troubleshooting or managing an application, you may need to retrieve or transfer files to</span></div>
<div style="position:absolute;left:108.00px;top:398.24px" class="cls_011"><span class="cls_011">and from running containers, such as configuration files or log files. There are several ways to move</span></div>
<div style="position:absolute;left:108.00px;top:410.24px" class="cls_011"><span class="cls_011">files into and out of containers, as described in the following list.</span></div>
<div style="position:absolute;left:108.00px;top:433.63px" class="cls_022"><span class="cls_022">Volume mounts</span></div>
<div style="position:absolute;left:126.00px;top:445.63px" class="cls_011"><span class="cls_011">Another option for copying files from the host to a container is the usage of volume mounts.</span></div>
<div style="position:absolute;left:126.00px;top:457.63px" class="cls_011"><span class="cls_011">You can mount a local directory to copy data into a container. For example, the following</span></div>
<div style="position:absolute;left:126.00px;top:469.63px" class="cls_011"><span class="cls_011">command sets </span><span class="cls_021">/conf</span><span class="cls_011"> host directory as the volume to use for the Apache configuration</span></div>
<div style="position:absolute;left:126.00px;top:481.63px" class="cls_011"><span class="cls_011">directory in the container. This provides a convenient way to manage the Apache server</span></div>
<div style="position:absolute;left:126.00px;top:493.62px" class="cls_011"><span class="cls_011">without having to rebuild the container image.</span></div>
<div style="position:absolute;left:119.00px;top:521.34px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">sudo podman run -v /conf:/etc/httpd/conf -d do180/apache</span></div>
<div style="position:absolute;left:108.00px;top:551.02px" class="cls_021"><span class="cls_021">podman cp</span></div>
<div style="position:absolute;left:126.00px;top:563.02px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">cp</span><span class="cls_011"> subcommand allows users to copy files both into and out of a running container. To</span></div>
<div style="position:absolute;left:126.00px;top:575.02px" class="cls_011"><span class="cls_011">copy a file into a container named </span><span class="cls_021">todoapi</span><span class="cls_011">, run the following command.</span></div>
<div style="position:absolute;left:119.00px;top:602.73px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">sudo podman cp standalone.conf</span></div>
<div style="position:absolute;left:123.80px;top:614.73px" class="cls_027"><span class="cls_027">todoapi:/opt/jboss/standalone/conf/standalone.conf</span></div>
<div style="position:absolute;left:126.00px;top:642.51px" class="cls_011"><span class="cls_011">To copy a file from the container to the host, flip the order of the previous command.</span></div>
<div style="position:absolute;left:119.00px;top:670.23px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">sudo podman cp todoapi:/opt/jboss/standalone/conf/standalone.conf .</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:505.17px;top:751.59px" class="cls_013"><span class="cls_013">271</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:231778px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background290.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">podman cp</span><span class="cls_011"> command has the advantage of working with containers that were already</span></div>
<div style="position:absolute;left:108.00px;top:65.97px" class="cls_011"><span class="cls_011">started, while the following alternative (volume mounts) requires changes to the command</span></div>
<div style="position:absolute;left:108.00px;top:77.97px" class="cls_011"><span class="cls_011">used to start a container.</span></div>
<div style="position:absolute;left:90.00px;top:99.47px" class="cls_021"><span class="cls_021">podman exec</span></div>
<div style="position:absolute;left:108.00px;top:111.47px" class="cls_011"><span class="cls_011">For containers that are already running, the </span><span class="cls_021">podman exec</span><span class="cls_011"> command can be piped to pass</span></div>
<div style="position:absolute;left:108.00px;top:123.47px" class="cls_011"><span class="cls_011">files both into and out of the running container by appending commands that are executed</span></div>
<div style="position:absolute;left:108.00px;top:135.46px" class="cls_011"><span class="cls_011">in the container. The following example shows how to pass in and execute a SQL file inside a</span></div>
<div style="position:absolute;left:108.00px;top:147.46px" class="cls_011"><span class="cls_011">MySQL container:</span></div>
<div style="position:absolute;left:101.00px;top:175.18px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">sudo podman exec -i </span><span class="cls_040">&lt;container></span><span class="cls_027"> mysql -uroot -proot &lt; </span><span class="cls_040">/path/on/host/db.sql &lt;</span></div>
<div style="position:absolute;left:105.80px;top:187.18px" class="cls_040"><span class="cls_040">db.sql</span></div>
<div style="position:absolute;left:108.00px;top:214.96px" class="cls_011"><span class="cls_011">Using the same concept, it is possible to retrieve data from a running container and place it</span></div>
<div style="position:absolute;left:108.00px;top:226.95px" class="cls_011"><span class="cls_011">in the host machine. A useful example of this is the usage of the </span><span class="cls_021">mysqldump</span><span class="cls_011"> utility, which</span></div>
<div style="position:absolute;left:108.00px;top:238.95px" class="cls_011"><span class="cls_011">creates a backup of MySQL database from the container and places it on the host.</span></div>
<div style="position:absolute;left:101.00px;top:266.67px" class="cls_026"><span class="cls_026">$ </span><span class="cls_027">sudo podman exec -it </span><span class="cls_040">&lt;containerName></span><span class="cls_027"> sh \</span></div>
<div style="position:absolute;left:101.00px;top:278.67px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-c 'exec mysqldump -h"$MYSQL_PORT_3306_TCP_ADDR" \</span></div>
<div style="position:absolute;left:101.00px;top:290.66px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-P"$MYSQL_PORT_3306_TCP_PORT" \</span></div>
<div style="position:absolute;left:101.00px;top:302.66px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-uroot -p"$MYSQL_ENV_MYSQL_ROOT_PASSWORD" </span><span class="cls_040">items</span><span class="cls_027">'</span></div>
<div style="position:absolute;left:101.00px;top:314.66px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">db_dump.sql</span></div>
<div style="position:absolute;left:108.00px;top:342.44px" class="cls_011"><span class="cls_011">The previous command uses the container environment variables to connect to the MySQL</span></div>
<div style="position:absolute;left:108.00px;top:354.44px" class="cls_011"><span class="cls_011">server to execute the </span><span class="cls_021">mysqldump</span><span class="cls_011"> command and redirects the output to a file on the host</span></div>
<div style="position:absolute;left:108.00px;top:366.44px" class="cls_011"><span class="cls_011">machine. It assumes that the container image provides the </span><span class="cls_021">mysqldump</span><span class="cls_011"> utility, so there is no</span></div>
<div style="position:absolute;left:108.00px;top:378.43px" class="cls_011"><span class="cls_011">need to install the MySQL administration tools on the host.</span></div>
<div style="position:absolute;left:108.00px;top:399.93px" class="cls_011"><span class="cls_011">The </span><span class="cls_021">oc rsync</span><span class="cls_011"> command provides functionality similar to </span><span class="cls_021">podman cp</span><span class="cls_011"> for containers running</span></div>
<div style="position:absolute;left:108.00px;top:411.93px" class="cls_011"><span class="cls_011">under OpenShift pods.</span></div>
<div style="position:absolute;left:126.00px;top:442.95px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:126.00px;top:457.33px" class="cls_011"><span class="cls_011">More information about port-forwarding is available in the Port Forwarding section</span></div>
<div style="position:absolute;left:126.00px;top:469.33px" class="cls_011"><span class="cls_011">of the OpenShift Container Platform documentation at</span></div>
<div style="position:absolute;left:126.00px;top:481.27px" class="cls_022"><span class="cls_022">Architecture</span></div>
<div style="position:absolute;left:126.00px;top:493.32px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.5/html-single/architecture/index/">https://access.redhat.com/documentation/en-us/</A> </div>
<div style="position:absolute;left:126.00px;top:505.32px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.5/html-single/architecture/index/">openshift_container_platform/4.5/html-single/architecture/index/</A> </div>
<div style="position:absolute;left:126.00px;top:526.82px" class="cls_011"><span class="cls_011">More information about the CLI commands for port-forwarding are available in the</span></div>
<div style="position:absolute;left:126.00px;top:538.82px" class="cls_011"><span class="cls_011">Port Forwarding chapter of the OpenShift Container Platform documentation at</span></div>
<div style="position:absolute;left:126.00px;top:550.76px" class="cls_022"><span class="cls_022">Developing Applications</span></div>
<div style="position:absolute;left:126.00px;top:562.81px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.5/html-single/applications/index/">https://access.redhat.com/documentation/en-us/</A> </div>
<div style="position:absolute;left:126.00px;top:574.81px" class="cls_033"><span class="cls_033"> </span><A HREF="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.5/html-single/applications/index/">openshift_container_platform/4.5/html-single/applications/index/</A> </div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">272</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:232580px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background291.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Configuring Apache Container Logs for</span></div>
<div style="position:absolute;left:108.00px;top:112.56px" class="cls_014"><span class="cls_014">Debugging</span></div>
<div style="position:absolute;left:120.00px;top:158.59px" class="cls_011"><span class="cls_011">In this exercise, you will configure an Apache httpd container to send the logs to the </span><span class="cls_021">stdout</span><span class="cls_011">,</span></div>
<div style="position:absolute;left:120.00px;top:170.59px" class="cls_011"><span class="cls_011">then review Podman logs and events.</span></div>
<div style="position:absolute;left:120.00px;top:193.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:120.00px;top:211.59px" class="cls_011"><span class="cls_011">You should be able to configure an Apache httpd container to send debug logs to </span><span class="cls_021">stdout</span></div>
<div style="position:absolute;left:120.00px;top:223.58px" class="cls_011"><span class="cls_011">and view them using the </span><span class="cls_021">podman logs</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:120.00px;top:246.65px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:120.00px;top:264.58px" class="cls_011"><span class="cls_011">A running OpenShift cluster.</span></div>
<div style="position:absolute;left:120.00px;top:286.08px" class="cls_011"><span class="cls_011">Retrieve the lab files and verify that Docker and the OpenShift cluster are running by running</span></div>
<div style="position:absolute;left:120.00px;top:298.08px" class="cls_011"><span class="cls_011">the following command.</span></div>
<div style="position:absolute;left:119.00px;top:325.80px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab troubleshoot-container start</span></div>
<div style="position:absolute;left:119.41px;top:380.42px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:137.00px;top:380.48px" class="cls_011"><span class="cls_011">Configure a Apache web server to send log messages to the standard output and update</span></div>
<div style="position:absolute;left:137.00px;top:392.48px" class="cls_011"><span class="cls_011">the default log level.</span></div>
<div style="position:absolute;left:137.00px;top:416.87px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:161.70px;top:416.87px" class="cls_011"><span class="cls_011">The default log level for the Apache httpd image is </span><span class="cls_021">warn</span><span class="cls_011">. Change the default log</span></div>
<div style="position:absolute;left:161.70px;top:428.87px" class="cls_011"><span class="cls_011">level for the container to </span><span class="cls_021">debug</span><span class="cls_011">, and redirect log messages to </span><span class="cls_021">stdout</span><span class="cls_011"> by overriding</span></div>
<div style="position:absolute;left:161.70px;top:440.87px" class="cls_011"><span class="cls_011">the default </span><span class="cls_021">httpd.conf</span><span class="cls_011"> configuration file. To do so, create a custom image from the</span></div>
<div style="position:absolute;left:161.70px;top:452.87px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011"> VM.</span></div>
<div style="position:absolute;left:161.70px;top:468.87px" class="cls_011"><span class="cls_011">Briefly review the custom </span><span class="cls_021">httpd.conf</span><span class="cls_011"> file located at </span><span class="cls_021">/home/student/DO180/</span></div>
<div style="position:absolute;left:161.70px;top:480.86px" class="cls_021"><span class="cls_021">labs/troubleshoot-container/conf/httpd.conf</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:161.70px;top:504.26px" class="cls_011"><span class="cls_011">• Observe the </span><span class="cls_021">ErrorLog</span><span class="cls_011"> directive in the file:</span></div>
<div style="position:absolute;left:119.00px;top:531.98px" class="cls_026"><span class="cls_026">ErrorLog "/dev/stdout"</span></div>
<div style="position:absolute;left:171.20px;top:559.76px" class="cls_011"><span class="cls_011">The directive sends the httpd error log messages to the container's standard</span></div>
<div style="position:absolute;left:171.20px;top:571.76px" class="cls_011"><span class="cls_011">output.</span></div>
<div style="position:absolute;left:161.70px;top:595.15px" class="cls_011"><span class="cls_011">• Observe the </span><span class="cls_021">LogLevel</span><span class="cls_011"> directive in the file.</span></div>
<div style="position:absolute;left:119.00px;top:622.87px" class="cls_026"><span class="cls_026">LogLevel debug</span></div>
<div style="position:absolute;left:171.20px;top:650.65px" class="cls_011"><span class="cls_011">The directive changes the default log level to </span><span class="cls_021">debug</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:161.70px;top:674.05px" class="cls_011"><span class="cls_011">• Observe the </span><span class="cls_021">CustomLog</span><span class="cls_011"> directive in the file.</span></div>
<div style="position:absolute;left:119.00px;top:701.76px" class="cls_026"><span class="cls_026">CustomLog "/dev/stdout" common</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.25px;top:751.59px" class="cls_013"><span class="cls_013">273</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:233382px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background292.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:153.20px;top:53.98px" class="cls_011"><span class="cls_011">The directive redirects the httpd access log messages to the container's standard</span></div>
<div style="position:absolute;left:153.20px;top:65.97px" class="cls_011"><span class="cls_011">output.</span></div>
<div style="position:absolute;left:101.41px;top:89.92px" class="cls_022"><span class="cls_022">2.</span><span class="cls_011">   Build a custom container to save an updated configuration file to the container.</span></div>
<div style="position:absolute;left:119.00px;top:114.37px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:143.70px;top:114.37px" class="cls_011"><span class="cls_011">From the terminal window, run the following commands to build a new image.</span></div>
<div style="position:absolute;left:101.00px;top:142.09px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd ~/DO180/labs/troubleshoot-container</span></div>
<div style="position:absolute;left:101.00px;top:154.09px" class="cls_026"><span class="cls_026">[student@workstation troubleshoot-container]$ </span><span class="cls_027">sudo podman build \</span></div>
<div style="position:absolute;left:101.00px;top:166.09px" class="cls_026"><span class="cls_026">></span></div>
<div style="position:absolute;left:115.40px;top:166.09px" class="cls_027"><span class="cls_027">-t troubleshoot-container .</span></div>
<div style="position:absolute;left:101.00px;top:178.08px" class="cls_026"><span class="cls_026">STEP 1: FROM quay.io/redhattraining/httpd-parent</span></div>
<div style="position:absolute;left:101.00px;top:190.08px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:202.08px" class="cls_026"><span class="cls_026">STEP 5: COMMIT troubleshoot-container</span></div>
<div style="position:absolute;left:101.00px;top:214.08px" class="cls_026"><span class="cls_026">e23d...c1de</span></div>
<div style="position:absolute;left:101.00px;top:226.07px" class="cls_026"><span class="cls_026">[student@workstation troubleshoot-container]$ </span><span class="cls_027">cd ~</span></div>
<div style="position:absolute;left:119.00px;top:256.75px" class="cls_011"><span class="cls_011">2.2.   Verify that the image is created.</span></div>
<div style="position:absolute;left:101.00px;top:284.47px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman images</span></div>
<div style="position:absolute;left:143.70px;top:306.75px" class="cls_011"><span class="cls_011">The new image must be available in the local storage.</span></div>
<div style="position:absolute;left:101.00px;top:334.47px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:283.40px;top:334.47px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:326.60px;top:334.47px" class="cls_026"><span class="cls_026">IMAGE ID   CREATED</span></div>
<div style="position:absolute;left:456.20px;top:334.47px" class="cls_026"><span class="cls_026">SIZE</span></div>
<div style="position:absolute;left:101.00px;top:346.46px" class="cls_026"><span class="cls_026">localhost/troubleshoot-container</span></div>
<div style="position:absolute;left:283.40px;top:346.46px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:326.60px;top:346.46px" class="cls_026"><span class="cls_026">e23df...</span></div>
<div style="position:absolute;left:379.40px;top:346.46px" class="cls_026"><span class="cls_026">9 seconds ago</span></div>
<div style="position:absolute;left:456.20px;top:346.46px" class="cls_026"><span class="cls_026">137MB</span></div>
<div style="position:absolute;left:101.00px;top:358.46px" class="cls_026"><span class="cls_026">quay.io/redhattraining/httpd-parent</span></div>
<div style="position:absolute;left:283.40px;top:358.46px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:326.60px;top:358.46px" class="cls_026"><span class="cls_026">0eba3...</span></div>
<div style="position:absolute;left:379.40px;top:358.46px" class="cls_026"><span class="cls_026">4 weeks ago</span></div>
<div style="position:absolute;left:456.20px;top:358.46px" class="cls_026"><span class="cls_026">137MB</span></div>
<div style="position:absolute;left:101.41px;top:388.69px" class="cls_022"><span class="cls_022">3.</span><span class="cls_011">  Create a new httpd container from the custom image.</span></div>
<div style="position:absolute;left:101.00px;top:416.46px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman run \</span></div>
<div style="position:absolute;left:101.00px;top:428.46px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--name troubleshoot-container -d \</span></div>
<div style="position:absolute;left:101.00px;top:440.46px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p 10080:80 troubleshoot-container</span></div>
<div style="position:absolute;left:101.00px;top:452.46px" class="cls_026"><span class="cls_026">4c8bb12815cc02f4eef0254632b7179bd5ce230d83373b49761b1ac41fc067a9</span></div>
<div style="position:absolute;left:101.41px;top:482.69px" class="cls_022"><span class="cls_022">4.</span><span class="cls_011">  Review the container's log messages and events.</span></div>
<div style="position:absolute;left:119.00px;top:507.14px" class="cls_011"><span class="cls_011">4.1.</span></div>
<div style="position:absolute;left:143.70px;top:507.14px" class="cls_011"><span class="cls_011">View the debug log messages from the container using the </span><span class="cls_021">podman logs</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:101.00px;top:534.86px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">sudo podman logs -f troubleshoot-container</span></div>
<div style="position:absolute;left:101.00px;top:546.86px" class="cls_026"><span class="cls_026">... [mpm_event:notice] [pid 1:tid...] AH00489: Apache/2.4.37</span></div>
<div style="position:absolute;left:101.00px;top:558.85px" class="cls_026"><span class="cls_026">... [mpm_event:info] [pid 1:tid...] AH00490: Server built: Apr</span></div>
<div style="position:absolute;left:408.20px;top:558.85px" class="cls_026"><span class="cls_026">5 2019 07:31:21</span></div>
<div style="position:absolute;left:101.00px;top:570.85px" class="cls_026"><span class="cls_026">... [core:notice] [pid 1:tid...] AH00094: Command line: 'httpd -D FOREGROUND'</span></div>
<div style="position:absolute;left:101.00px;top:582.85px" class="cls_026"><span class="cls_026">... [core:debug] [pid 1:tid ...): AH02639: Using SO_REUSEPORT: yes (1)</span></div>
<div style="position:absolute;left:101.00px;top:594.85px" class="cls_026"><span class="cls_026">... [mpm_event:debug] [pid 6:tid ...): AH02471: start_threads: Using epoll</span></div>
<div style="position:absolute;left:101.00px;top:606.85px" class="cls_026"><span class="cls_026">... [mpm_event:debug] [pid 7:tid ...): AH02471: start_threads: Using epoll</span></div>
<div style="position:absolute;left:101.00px;top:618.84px" class="cls_026"><span class="cls_026">... [mpm_event:debug] [pid 8:tid ...): AH02471: start_threads: Using epoll</span></div>
<div style="position:absolute;left:143.70px;top:641.12px" class="cls_011"><span class="cls_011">Notice the debug logs, available in the standard output.</span></div>
<div style="position:absolute;left:119.00px;top:665.52px" class="cls_011"><span class="cls_011">4.2.  Open a new terminal and access the home page of the web server by using the </span><span class="cls_021">curl</span></div>
<div style="position:absolute;left:143.70px;top:677.52px" class="cls_011"><span class="cls_011">command:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">274</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:234184px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background293.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">curl <A HREF="http://127.0.0.1:10080/">http://127.0.0.1:10080</A> </span></div>
<div style="position:absolute;left:119.00px;top:73.69px" class="cls_026"><span class="cls_026">Hello from the httpd-parent container!</span></div>
<div style="position:absolute;left:137.00px;top:102.47px" class="cls_011"><span class="cls_011">4.3.  Review the new entries in the log. Look in the terminal running the </span><span class="cls_021">podman logs</span></div>
<div style="position:absolute;left:161.70px;top:114.47px" class="cls_011"><span class="cls_011">command to see the new entries.</span></div>
<div style="position:absolute;left:119.00px;top:142.19px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:154.18px" class="cls_026"><span class="cls_026">10.88.0.1 - - [08/Dec/2020:16:29:50 +0000] "GET / HTTP/1.1" 200 39</span></div>
<div style="position:absolute;left:137.00px;top:182.96px" class="cls_011"><span class="cls_011">4.4.  Stop the Podman command with </span><span class="cls_021">Ctrl</span><span class="cls_011">+</span><span class="cls_021">C</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:108.00px;top:207.03px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:108.00px;top:228.96px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab troubleshoot-container finish</span><span class="cls_011"> script to complete this</span></div>
<div style="position:absolute;left:108.00px;top:240.96px" class="cls_011"><span class="cls_011">lab.</span></div>
<div style="position:absolute;left:119.00px;top:268.68px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab troubleshoot-container finish</span></div>
<div style="position:absolute;left:108.00px;top:296.46px" class="cls_011"><span class="cls_011">This concludes the guided exercise.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.34px;top:751.59px" class="cls_013"><span class="cls_013">275</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:234986px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background294.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_042"><span class="cls_042">Lab</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Troubleshooting Containerized</span></div>
<div style="position:absolute;left:90.00px;top:112.56px" class="cls_014"><span class="cls_014">Applications</span></div>
<div style="position:absolute;left:102.00px;top:160.15px" class="cls_043"><span class="cls_043">Performance Checklist</span></div>
<div style="position:absolute;left:102.00px;top:178.09px" class="cls_011"><span class="cls_011">In this lab, you will troubleshoot the OpenShift build and deployment process for a Node.js</span></div>
<div style="position:absolute;left:102.00px;top:190.09px" class="cls_011"><span class="cls_011">application.</span></div>
<div style="position:absolute;left:102.00px;top:213.15px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:231.09px" class="cls_011"><span class="cls_011">You should be able to identify and solve the problems raised during the build and</span></div>
<div style="position:absolute;left:102.00px;top:243.08px" class="cls_011"><span class="cls_011">deployment process of a Node.js application.</span></div>
<div style="position:absolute;left:102.00px;top:266.15px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:284.08px" class="cls_011"><span class="cls_011">A running OpenShift cluster.</span></div>
<div style="position:absolute;left:102.00px;top:305.58px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:101.00px;top:333.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab troubleshoot-review start</span></div>
<div style="position:absolute;left:90.00px;top:387.92px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:112.00px;top:387.98px" class="cls_011"><span class="cls_011">Load the configuration of your classroom environment. Run the following command to load</span></div>
<div style="position:absolute;left:112.00px;top:399.98px" class="cls_011"><span class="cls_011">the environment variables created in the first guided exercise:</span></div>
<div style="position:absolute;left:101.00px;top:427.70px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">source /usr/local/etc/ocp4.config</span></div>
<div style="position:absolute;left:90.00px;top:451.92px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:112.00px;top:451.98px" class="cls_011"><span class="cls_011">Enter your local clone of the </span><span class="cls_021">DO180-apps</span><span class="cls_011"> Git repository and checkout the </span><span class="cls_021">master</span><span class="cls_011"> branch</span></div>
<div style="position:absolute;left:112.00px;top:463.98px" class="cls_011"><span class="cls_011">of the course's repository to ensure you start this exercise from a known good state:</span></div>
<div style="position:absolute;left:101.00px;top:491.70px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd ~/DO180-apps</span></div>
<div style="position:absolute;left:101.00px;top:503.70px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git checkout master</span></div>
<div style="position:absolute;left:101.00px;top:515.70px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:90.00px;top:539.92px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:112.00px;top:539.98px" class="cls_011"><span class="cls_011">Create a new branch to save any changes you make during this exercise:</span></div>
<div style="position:absolute;left:101.00px;top:567.70px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git checkout -b troubleshoot-review</span></div>
<div style="position:absolute;left:101.00px;top:579.70px" class="cls_026"><span class="cls_026">Switched to a new branch 'troubleshoot-review'</span></div>
<div style="position:absolute;left:101.00px;top:591.70px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git push -u origin troubleshoot-review</span></div>
<div style="position:absolute;left:101.00px;top:603.70px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:615.70px" class="cls_026"><span class="cls_026">* [new branch]</span></div>
<div style="position:absolute;left:197.00px;top:615.70px" class="cls_026"><span class="cls_026">troubleshoot-review -> troubleshoot-review</span></div>
<div style="position:absolute;left:101.00px;top:627.70px" class="cls_026"><span class="cls_026">Branch 'troubleshoot-review' set up to track remote branch 'troubleshoot-review'</span></div>
<div style="position:absolute;left:105.80px;top:639.70px" class="cls_026"><span class="cls_026">from 'origin'.</span></div>
<div style="position:absolute;left:90.00px;top:663.92px" class="cls_022"><span class="cls_022">4.</span></div>
<div style="position:absolute;left:112.00px;top:663.98px" class="cls_011"><span class="cls_011">Log in to OpenShift using the configured user, password and Master API URL.</span></div>
<div style="position:absolute;left:90.00px;top:681.92px" class="cls_022"><span class="cls_022">5.</span></div>
<div style="position:absolute;left:112.00px;top:681.98px" class="cls_011"><span class="cls_011">Create a new project named </span><span class="cls_028">youruser</span><span class="cls_021">-nodejs-app</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">276</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:235788px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background295.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:108.00px;top:53.92px" class="cls_022"><span class="cls_022">6.</span></div>
<div style="position:absolute;left:130.00px;top:53.98px" class="cls_011"><span class="cls_011">In the </span><span class="cls_021">youruser-nodejs-app</span><span class="cls_011"> OpenShift project, create a new application from</span></div>
<div style="position:absolute;left:130.00px;top:65.98px" class="cls_011"><span class="cls_011">the source code located </span><span class="cls_021">nodejs-app</span><span class="cls_011"> directory in the Git repository at </span><A HREF="https://">https://</A> </span></div>
<div style="position:absolute;left:130.00px;top:77.98px" class="cls_021"><span class="cls_021">github.com/</span><span class="cls_028">yourgituser</span><span class="cls_021">/DO180-apps</span><span class="cls_011">. Name the application </span><span class="cls_021">nodejs-dev</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:130.00px;top:93.98px" class="cls_011"><span class="cls_011">Expect the build process for the application to fail. Monitor the build process and identify the</span></div>
<div style="position:absolute;left:130.00px;top:105.98px" class="cls_011"><span class="cls_011">build failure.</span></div>
<div style="position:absolute;left:108.00px;top:123.92px" class="cls_022"><span class="cls_022">7.</span></div>
<div style="position:absolute;left:130.00px;top:123.98px" class="cls_011"><span class="cls_011">Update the version of the </span><span class="cls_021">express</span><span class="cls_011"> dependency in the </span><span class="cls_021">package.json</span><span class="cls_011"> file with a value of</span></div>
<div style="position:absolute;left:130.00px;top:135.98px" class="cls_021"><span class="cls_021">4.x</span><span class="cls_011">. Commit and push the changes to the Git repository.</span></div>
<div style="position:absolute;left:108.00px;top:153.92px" class="cls_022"><span class="cls_022">8.</span></div>
<div style="position:absolute;left:130.00px;top:153.98px" class="cls_011"><span class="cls_011">Rebuild the application. Verify that the application builds without errors.</span></div>
<div style="position:absolute;left:108.00px;top:171.92px" class="cls_022"><span class="cls_022">9.</span></div>
<div style="position:absolute;left:130.00px;top:171.98px" class="cls_011"><span class="cls_011">Verify that the application is not running because of a runtime error. Review the logs and</span></div>
<div style="position:absolute;left:130.00px;top:183.98px" class="cls_011"><span class="cls_011">identify the problem.</span></div>
<div style="position:absolute;left:108.00px;top:201.92px" class="cls_022"><span class="cls_022">10.</span><span class="cls_011">   Correct the spelling of the dependency in the first line of the </span><span class="cls_021">server.js</span><span class="cls_011"> file. Commit and</span></div>
<div style="position:absolute;left:130.00px;top:213.98px" class="cls_011"><span class="cls_011">push changes to the application to the Git repository. Rebuild the application. After the</span></div>
<div style="position:absolute;left:130.00px;top:225.98px" class="cls_011"><span class="cls_011">application builds, verify that the application is running.</span></div>
<div style="position:absolute;left:108.00px;top:243.92px" class="cls_022"><span class="cls_022">11.</span></div>
<div style="position:absolute;left:130.00px;top:243.98px" class="cls_011"><span class="cls_011">Create a route for the application and test access to the application. Expect an error</span></div>
<div style="position:absolute;left:130.00px;top:255.98px" class="cls_011"><span class="cls_011">message. Review the logs to identify the error.</span></div>
<div style="position:absolute;left:108.00px;top:273.92px" class="cls_022"><span class="cls_022">12.</span></div>
<div style="position:absolute;left:130.00px;top:273.98px" class="cls_011"><span class="cls_011">Replace </span><span class="cls_021">process.environment</span><span class="cls_011"> with </span><span class="cls_021">process.env</span><span class="cls_011"> in the </span><span class="cls_021">server.js</span><span class="cls_011"> file to fix the error.</span></div>
<div style="position:absolute;left:130.00px;top:285.98px" class="cls_011"><span class="cls_011">Commit and push the application changes to the Git repository. Rebuild the application.</span></div>
<div style="position:absolute;left:130.00px;top:297.98px" class="cls_011"><span class="cls_011">When the new application deploys, verify that application does not generate errors when you</span></div>
<div style="position:absolute;left:130.00px;top:309.98px" class="cls_011"><span class="cls_011">access the application URL.</span></div>
<div style="position:absolute;left:108.00px;top:334.04px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:108.00px;top:355.98px" class="cls_011"><span class="cls_011">Grade your work by running the </span><span class="cls_021">lab troubleshoot-review grade</span><span class="cls_011"> command from your</span></div>
<div style="position:absolute;left:108.00px;top:367.97px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011"> machine. Correct any reported failures and rerun the script until successful.</span></div>
<div style="position:absolute;left:119.00px;top:395.69px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">lab troubleshoot-review grade</span></div>
<div style="position:absolute;left:108.00px;top:426.03px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:108.00px;top:447.97px" class="cls_011"><span class="cls_011">From </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab troubleshoot-review finish</span><span class="cls_011"> command to complete this</span></div>
<div style="position:absolute;left:108.00px;top:459.97px" class="cls_011"><span class="cls_011">lab.</span></div>
<div style="position:absolute;left:119.00px;top:487.68px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">lab troubleshoot-review finish</span></div>
<div style="position:absolute;left:108.00px;top:515.46px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.33px;top:751.59px" class="cls_013"><span class="cls_013">277</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:236590px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background296.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_042"><span class="cls_042">Solution</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Troubleshooting Containerized</span></div>
<div style="position:absolute;left:90.00px;top:112.56px" class="cls_014"><span class="cls_014">Applications</span></div>
<div style="position:absolute;left:102.00px;top:160.15px" class="cls_043"><span class="cls_043">Performance Checklist</span></div>
<div style="position:absolute;left:102.00px;top:178.09px" class="cls_011"><span class="cls_011">In this lab, you will troubleshoot the OpenShift build and deployment process for a Node.js</span></div>
<div style="position:absolute;left:102.00px;top:190.09px" class="cls_011"><span class="cls_011">application.</span></div>
<div style="position:absolute;left:102.00px;top:213.15px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:231.09px" class="cls_011"><span class="cls_011">You should be able to identify and solve the problems raised during the build and</span></div>
<div style="position:absolute;left:102.00px;top:243.08px" class="cls_011"><span class="cls_011">deployment process of a Node.js application.</span></div>
<div style="position:absolute;left:102.00px;top:266.15px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:284.08px" class="cls_011"><span class="cls_011">A running OpenShift cluster.</span></div>
<div style="position:absolute;left:102.00px;top:305.58px" class="cls_011"><span class="cls_011">Open a terminal on </span><span class="cls_021">workstation</span><span class="cls_011"> as the </span><span class="cls_021">student</span><span class="cls_011"> user and run the following command:</span></div>
<div style="position:absolute;left:101.00px;top:333.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab troubleshoot-review start</span></div>
<div style="position:absolute;left:90.00px;top:387.92px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:112.00px;top:387.98px" class="cls_011"><span class="cls_011">Load the configuration of your classroom environment. Run the following command to load</span></div>
<div style="position:absolute;left:112.00px;top:399.98px" class="cls_011"><span class="cls_011">the environment variables created in the first guided exercise:</span></div>
<div style="position:absolute;left:101.00px;top:427.70px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">source /usr/local/etc/ocp4.config</span></div>
<div style="position:absolute;left:90.00px;top:451.92px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:112.00px;top:451.98px" class="cls_011"><span class="cls_011">Enter your local clone of the </span><span class="cls_021">DO180-apps</span><span class="cls_011"> Git repository and checkout the </span><span class="cls_021">master</span><span class="cls_011"> branch</span></div>
<div style="position:absolute;left:112.00px;top:463.98px" class="cls_011"><span class="cls_011">of the course's repository to ensure you start this exercise from a known good state:</span></div>
<div style="position:absolute;left:101.00px;top:491.70px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd ~/DO180-apps</span></div>
<div style="position:absolute;left:101.00px;top:503.70px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git checkout master</span></div>
<div style="position:absolute;left:101.00px;top:515.70px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:90.00px;top:539.92px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:112.00px;top:539.98px" class="cls_011"><span class="cls_011">Create a new branch to save any changes you make during this exercise:</span></div>
<div style="position:absolute;left:101.00px;top:567.70px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git checkout -b troubleshoot-review</span></div>
<div style="position:absolute;left:101.00px;top:579.70px" class="cls_026"><span class="cls_026">Switched to a new branch 'troubleshoot-review'</span></div>
<div style="position:absolute;left:101.00px;top:591.70px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git push -u origin troubleshoot-review</span></div>
<div style="position:absolute;left:101.00px;top:603.70px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:615.70px" class="cls_026"><span class="cls_026">* [new branch]</span></div>
<div style="position:absolute;left:197.00px;top:615.70px" class="cls_026"><span class="cls_026">troubleshoot-review -> troubleshoot-review</span></div>
<div style="position:absolute;left:101.00px;top:627.70px" class="cls_026"><span class="cls_026">Branch 'troubleshoot-review' set up to track remote branch 'troubleshoot-review'</span></div>
<div style="position:absolute;left:105.80px;top:639.70px" class="cls_026"><span class="cls_026">from 'origin'.</span></div>
<div style="position:absolute;left:90.00px;top:663.92px" class="cls_022"><span class="cls_022">4.</span></div>
<div style="position:absolute;left:112.00px;top:663.98px" class="cls_011"><span class="cls_011">Log in to OpenShift using the configured user, password and Master API URL.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">278</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:237392px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background297.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:119.00px;top:61.70px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">oc login -u "${RHT_OCP4_DEV_USER}" \</span></div>
<div style="position:absolute;left:119.00px;top:73.70px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p "${RHT_OCP4_DEV_PASSWORD}" "${RHT_OCP4_MASTER_API}"</span></div>
<div style="position:absolute;left:119.00px;top:85.70px" class="cls_026"><span class="cls_026">Login successful.</span></div>
<div style="position:absolute;left:119.00px;top:97.70px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:108.00px;top:121.92px" class="cls_022"><span class="cls_022">5.</span></div>
<div style="position:absolute;left:130.00px;top:121.98px" class="cls_011"><span class="cls_011">Create a new project named </span><span class="cls_028">youruser</span><span class="cls_021">-nodejs-app</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:119.00px;top:149.70px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc new-project ${RHT_OCP4_DEV_USER}-nodejs-app</span></div>
<div style="position:absolute;left:119.00px;top:161.70px" class="cls_026"><span class="cls_026">Now using project "</span><span class="cls_029">youruser</span><span class="cls_026">-nodejs-app" on server "<A HREF="https://">https://</A> </span></div>
<div style="position:absolute;left:119.00px;top:173.70px" class="cls_026"><span class="cls_026">api.cluster.lab.example.com"</span></div>
<div style="position:absolute;left:119.00px;top:185.70px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:108.00px;top:209.92px" class="cls_022"><span class="cls_022">6.</span></div>
<div style="position:absolute;left:130.00px;top:209.98px" class="cls_011"><span class="cls_011">In the </span><span class="cls_021">youruser-nodejs-app</span><span class="cls_011"> OpenShift project, create a new application from</span></div>
<div style="position:absolute;left:130.00px;top:221.98px" class="cls_011"><span class="cls_011">the source code located </span><span class="cls_021">nodejs-app</span><span class="cls_011"> directory in the Git repository at </span><A HREF="https://">https://</A> </span></div>
<div style="position:absolute;left:130.00px;top:233.98px" class="cls_021"><span class="cls_021">github.com/</span><span class="cls_028">yourgituser</span><span class="cls_021">/DO180-apps</span><span class="cls_011">. Name the application </span><span class="cls_021">nodejs-dev</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:130.00px;top:249.98px" class="cls_011"><span class="cls_011">Expect the build process for the application to fail. Monitor the build process and identify the</span></div>
<div style="position:absolute;left:130.00px;top:261.98px" class="cls_011"><span class="cls_011">build failure.</span></div>
<div style="position:absolute;left:130.00px;top:286.21px" class="cls_011"><span class="cls_011">6.1.</span></div>
<div style="position:absolute;left:154.70px;top:286.21px" class="cls_011"><span class="cls_011">Run the </span><span class="cls_021">oc new-app</span><span class="cls_011"> command to create the Node.js application.</span></div>
<div style="position:absolute;left:119.00px;top:313.92px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc new-app --as-deployment-config --name nodejs-dev \</span></div>
<div style="position:absolute;left:119.00px;top:325.92px" class="cls_026"><span class="cls_026">> </span><A HREF="https://github.com/${rht_ocp4_github_user}/do180-apps#troubleshoot-review/">https://github.com/${RHT_OCP4_GITHUB_USER}/DO180-apps#troubleshoot-review</A> \</span></div>
<div style="position:absolute;left:119.00px;top:337.92px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-i nodejs:12 --context-dir=nodejs-app --build-env \</span></div>
<div style="position:absolute;left:119.00px;top:349.92px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">npm_config_registry=<A HREF="http://${rht_ocp4_nexus_server}/repository/npm-proxy/">http://${RHT_OCP4_NEXUS_SERVER}/repository/npm-proxy</A> </span></div>
<div style="position:absolute;left:119.00px;top:361.92px" class="cls_026"><span class="cls_026">--> Found image a2b5ec2 </span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:128.60px;top:385.91px" class="cls_026"><span class="cls_026">Node.js 12</span></div>
<div style="position:absolute;left:119.00px;top:397.91px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:409.91px" class="cls_026"><span class="cls_026">--> Creating resources ...</span></div>
<div style="position:absolute;left:138.20px;top:421.91px" class="cls_026"><span class="cls_026">imagestream.image.openshift.io "nodejs-dev" created</span></div>
<div style="position:absolute;left:138.20px;top:433.90px" class="cls_026"><span class="cls_026">buildconfig.build.openshift.io "nodejs-dev" created</span></div>
<div style="position:absolute;left:138.20px;top:445.90px" class="cls_026"><span class="cls_026">deploymentconfig.apps.openshift.io "nodejs-dev" created</span></div>
<div style="position:absolute;left:138.20px;top:457.90px" class="cls_026"><span class="cls_026">service "nodejs-dev" created</span></div>
<div style="position:absolute;left:119.00px;top:469.90px" class="cls_026"><span class="cls_026">--> Success</span></div>
<div style="position:absolute;left:138.20px;top:481.90px" class="cls_026"><span class="cls_026">Build scheduled, use 'oc logs -f bc/nodejs-dev' to track its progress.</span></div>
<div style="position:absolute;left:138.20px;top:493.89px" class="cls_026"><span class="cls_026">Application is not exposed. You can expose services to the outside world by</span></div>
<div style="position:absolute;left:123.80px;top:505.89px" class="cls_026"><span class="cls_026">executing one or more of the commands below:</span></div>
<div style="position:absolute;left:143.00px;top:517.89px" class="cls_026"><span class="cls_026">'oc expose svc/nodejs-dev'</span></div>
<div style="position:absolute;left:138.20px;top:529.89px" class="cls_026"><span class="cls_026">Run 'oc status' to view your app.</span></div>
<div style="position:absolute;left:130.00px;top:560.40px" class="cls_011"><span class="cls_011">6.2.  Monitor build progress with the </span><span class="cls_021">oc logs -f bc/nodejs-dev</span><span class="cls_011"> command:</span></div>
<div style="position:absolute;left:119.00px;top:588.11px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc logs -f bc/nodejs-dev</span></div>
<div style="position:absolute;left:119.00px;top:600.11px" class="cls_026"><span class="cls_026">Cloning "https://github.com/</span><span class="cls_029">yourgituser</span><span class="cls_026">/DO180-apps"</span></div>
<div style="position:absolute;left:119.00px;top:612.11px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:624.11px" class="cls_026"><span class="cls_026">STEP 8: RUN /usr/libexec/s2i/assemble</span></div>
<div style="position:absolute;left:119.00px;top:636.11px" class="cls_026"><span class="cls_026">---> Installing application source ...</span></div>
<div style="position:absolute;left:119.00px;top:648.10px" class="cls_026"><span class="cls_026">---> Installing all dependencies</span></div>
<div style="position:absolute;left:119.00px;top:660.10px" class="cls_026"><span class="cls_026">npm ERR! code ETARGET</span></div>
<div style="position:absolute;left:119.00px;top:672.10px" class="cls_026"><span class="cls_026">npm ERR! notarget No matching version found for express@4.20.</span></div>
<div style="position:absolute;left:119.00px;top:684.10px" class="cls_026"><span class="cls_026">npm ERR! notarget In most cases you or one of your dependencies are requesting</span></div>
<div style="position:absolute;left:119.00px;top:696.10px" class="cls_026"><span class="cls_026">npm ERR! notarget a package version that doesn't exist.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.13px;top:751.59px" class="cls_013"><span class="cls_013">279</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:238194px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background298.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:101.00px;top:53.69px" class="cls_026"><span class="cls_026">npm ERR! notarget</span></div>
<div style="position:absolute;left:101.00px;top:65.69px" class="cls_026"><span class="cls_026">npm ERR! notarget It was specified as a dependency of 'src'</span></div>
<div style="position:absolute;left:101.00px;top:77.69px" class="cls_026"><span class="cls_026">npm ERR! notarget</span></div>
<div style="position:absolute;left:101.00px;top:101.69px" class="cls_026"><span class="cls_026">npm ERR! A complete log of this run can be found in:</span></div>
<div style="position:absolute;left:101.00px;top:113.69px" class="cls_026"><span class="cls_026">npm ERR!</span></div>
<div style="position:absolute;left:163.40px;top:113.69px" class="cls_026"><span class="cls_026">/opt/app-root/src/.npm/_logs/2019-10-28T11_30_27_657Z-debug.log</span></div>
<div style="position:absolute;left:101.00px;top:125.68px" class="cls_026"><span class="cls_026">subprocess exited with status 1</span></div>
<div style="position:absolute;left:101.00px;top:137.68px" class="cls_026"><span class="cls_026">subprocess exited with status 1</span></div>
<div style="position:absolute;left:101.00px;top:149.68px" class="cls_026"><span class="cls_026">error: build error: error building at STEP "RUN /usr/libexec/s2i/assemble": exit</span></div>
<div style="position:absolute;left:105.80px;top:161.68px" class="cls_026"><span class="cls_026">status 1</span></div>
<div style="position:absolute;left:136.70px;top:183.96px" class="cls_011"><span class="cls_011">The build process fails, and therefore no application is running. The build log indicates</span></div>
<div style="position:absolute;left:136.70px;top:195.95px" class="cls_011"><span class="cls_011">that there is no version of the </span><span class="cls_021">express</span><span class="cls_011"> package that matches a version specification</span></div>
<div style="position:absolute;left:136.70px;top:207.95px" class="cls_011"><span class="cls_011">of </span><span class="cls_021">4.20.x</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:112.00px;top:232.35px" class="cls_011"><span class="cls_011">6.3.  Use the </span><span class="cls_021">oc get pods</span><span class="cls_011"> command to confirm that the application is not deployed:</span></div>
<div style="position:absolute;left:101.00px;top:260.07px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">oc get pods</span></div>
<div style="position:absolute;left:101.00px;top:272.07px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:201.80px;top:272.07px" class="cls_026"><span class="cls_026">READY   STATUS   RESTARTS   AGE</span></div>
<div style="position:absolute;left:101.00px;top:284.06px" class="cls_026"><span class="cls_026">nodejs-dev-1-build</span></div>
<div style="position:absolute;left:201.80px;top:284.06px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:240.20px;top:284.06px" class="cls_026"><span class="cls_026">Error</span></div>
<div style="position:absolute;left:283.40px;top:284.06px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:336.20px;top:284.06px" class="cls_026"><span class="cls_026">2m</span></div>
<div style="position:absolute;left:90.00px;top:313.69px" class="cls_022"><span class="cls_022">7.</span></div>
<div style="position:absolute;left:112.00px;top:313.74px" class="cls_011"><span class="cls_011">Update the version of the </span><span class="cls_021">express</span><span class="cls_011"> dependency in the </span><span class="cls_021">package.json</span><span class="cls_011"> file with a value of</span></div>
<div style="position:absolute;left:112.00px;top:325.74px" class="cls_021"><span class="cls_021">4.x</span><span class="cls_011">. Commit and push the changes to the Git repository.</span></div>
<div style="position:absolute;left:112.00px;top:350.14px" class="cls_011"><span class="cls_011">7.1.</span></div>
<div style="position:absolute;left:136.70px;top:350.14px" class="cls_011"><span class="cls_011">Edit the </span><span class="cls_021">package.json</span><span class="cls_011"> file in the </span><span class="cls_021">nodejs-app</span><span class="cls_011"> subdirectory, and change the version</span></div>
<div style="position:absolute;left:136.70px;top:362.14px" class="cls_011"><span class="cls_011">of the </span><span class="cls_021">express</span><span class="cls_011"> dependency to </span><span class="cls_021">4.x</span><span class="cls_011">. Save the file.</span></div>
<div style="position:absolute;left:101.00px;top:389.86px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">cd nodejs-app</span></div>
<div style="position:absolute;left:101.00px;top:423.86px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">sed -i s/4.20/4.x/ package.json</span></div>
<div style="position:absolute;left:136.70px;top:446.13px" class="cls_011"><span class="cls_011">The file contains the following content:</span></div>
<div style="position:absolute;left:101.00px;top:473.85px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">cat package.json</span></div>
<div style="position:absolute;left:101.00px;top:485.85px" class="cls_026"><span class="cls_026">{</span></div>
<div style="position:absolute;left:110.60px;top:497.85px" class="cls_026"><span class="cls_026">"name": "nodejs-app",</span></div>
<div style="position:absolute;left:110.60px;top:509.84px" class="cls_026"><span class="cls_026">"version": "1.0.0",</span></div>
<div style="position:absolute;left:110.60px;top:521.84px" class="cls_026"><span class="cls_026">"description": "Hello World App",</span></div>
<div style="position:absolute;left:110.60px;top:533.84px" class="cls_026"><span class="cls_026">"main": "server.js",</span></div>
<div style="position:absolute;left:110.60px;top:545.84px" class="cls_026"><span class="cls_026">"author": "Red Hat Training",</span></div>
<div style="position:absolute;left:110.60px;top:557.84px" class="cls_026"><span class="cls_026">"license": "ASL",</span></div>
<div style="position:absolute;left:110.60px;top:569.83px" class="cls_026"><span class="cls_026">"dependencies": {</span></div>
<div style="position:absolute;left:120.20px;top:581.83px" class="cls_026"><span class="cls_026">"express": "4.x",</span></div>
<div style="position:absolute;left:120.20px;top:593.83px" class="cls_026"><span class="cls_026">"html-errors": "latest"</span></div>
<div style="position:absolute;left:110.60px;top:605.83px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:101.00px;top:617.83px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:112.00px;top:648.51px" class="cls_011"><span class="cls_011">7.2.   Commit and push the changes made to the project.</span></div>
<div style="position:absolute;left:136.70px;top:664.50px" class="cls_011"><span class="cls_011">From the terminal window, run the following command to commit and push the</span></div>
<div style="position:absolute;left:136.70px;top:676.50px" class="cls_011"><span class="cls_011">changes:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">280</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:238996px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background299.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">git commit -am "Fixed Express release"</span></div>
<div style="position:absolute;left:119.00px;top:73.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:123.80px;top:85.69px" class="cls_026"><span class="cls_026">1 file changed, 1 insertion(+), 1 deletion(-)</span></div>
<div style="position:absolute;left:119.00px;top:97.69px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">git push</span></div>
<div style="position:absolute;left:119.00px;top:109.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:121.68px" class="cls_026"><span class="cls_026">To https://github.com/</span><span class="cls_029">yourgituser</span><span class="cls_026">/DO180-apps/</span></div>
<div style="position:absolute;left:133.40px;top:133.68px" class="cls_026"><span class="cls_026">ef6557d..73a82cd  troubleshoot-review -> troubleshoot-review</span></div>
<div style="position:absolute;left:108.00px;top:159.65px" class="cls_022"><span class="cls_022">8.</span></div>
<div style="position:absolute;left:130.00px;top:159.71px" class="cls_011"><span class="cls_011">Rebuild the application. Verify that the application builds without errors.</span></div>
<div style="position:absolute;left:130.00px;top:180.46px" class="cls_011"><span class="cls_011">8.1.</span></div>
<div style="position:absolute;left:154.70px;top:180.46px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">oc start-build</span><span class="cls_011"> command to rebuild the application.</span></div>
<div style="position:absolute;left:119.00px;top:208.17px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">oc start-build bc/nodejs-dev</span></div>
<div style="position:absolute;left:119.00px;top:220.17px" class="cls_026"><span class="cls_026">build.build.openshift.io/nodejs-dev-2 started</span></div>
<div style="position:absolute;left:130.00px;top:247.20px" class="cls_011"><span class="cls_011">8.2.  Use the </span><span class="cls_021">oc logs</span><span class="cls_011"> command to monitor the build process logs:</span></div>
<div style="position:absolute;left:119.00px;top:274.91px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">oc logs -f bc/nodejs-dev</span></div>
<div style="position:absolute;left:119.00px;top:286.91px" class="cls_026"><span class="cls_026">Cloning "https://github.com/</span><span class="cls_029">yourgituser</span><span class="cls_026">/DO180-apps"</span></div>
<div style="position:absolute;left:119.00px;top:298.91px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:310.91px" class="cls_026"><span class="cls_026">Pushing image ...image-registry.svc:5000/nodejs-app/nodejs-dev:latest</span></div>
<div style="position:absolute;left:119.00px;top:322.91px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:334.90px" class="cls_026"><span class="cls_026">Push successful</span></div>
<div style="position:absolute;left:154.70px;top:357.18px" class="cls_011"><span class="cls_011">The build succeeds if an image is pushed to the internal OpenShift registry.</span></div>
<div style="position:absolute;left:108.00px;top:376.87px" class="cls_022"><span class="cls_022">9.</span></div>
<div style="position:absolute;left:130.00px;top:376.93px" class="cls_011"><span class="cls_011">Verify that the application is not running because of a runtime error. Review the logs and</span></div>
<div style="position:absolute;left:130.00px;top:388.93px" class="cls_011"><span class="cls_011">identify the problem.</span></div>
<div style="position:absolute;left:130.00px;top:409.67px" class="cls_011"><span class="cls_011">9.1.</span></div>
<div style="position:absolute;left:154.70px;top:409.67px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">oc get pods</span><span class="cls_011"> command to check the status of the deployment of the</span></div>
<div style="position:absolute;left:154.70px;top:421.67px" class="cls_011"><span class="cls_011">application pod. Eventually, you see that the first application deployment has a status</span></div>
<div style="position:absolute;left:154.70px;top:433.67px" class="cls_011"><span class="cls_011">of </span><span class="cls_021">CrashLoopBackoff</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:461.39px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">oc get pods</span></div>
<div style="position:absolute;left:119.00px;top:473.39px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:224.60px;top:473.39px" class="cls_026"><span class="cls_026">READY   STATUS</span></div>
<div style="position:absolute;left:354.20px;top:473.39px" class="cls_026"><span class="cls_026">RESTARTS   AGE</span></div>
<div style="position:absolute;left:119.00px;top:485.38px" class="cls_026"><span class="cls_026">nodejs-dev-1-build</span></div>
<div style="position:absolute;left:224.60px;top:485.38px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:485.38px" class="cls_026"><span class="cls_026">Error</span></div>
<div style="position:absolute;left:354.20px;top:485.38px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:407.00px;top:485.38px" class="cls_026"><span class="cls_026">4m27s</span></div>
<div style="position:absolute;left:119.00px;top:497.38px" class="cls_026"><span class="cls_026">nodejs-dev-1-deploy</span></div>
<div style="position:absolute;left:224.60px;top:497.38px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:497.38px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:354.20px;top:497.38px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:407.00px;top:497.38px" class="cls_026"><span class="cls_026">28s</span></div>
<div style="position:absolute;left:119.00px;top:509.38px" class="cls_026"><span class="cls_026">nodejs-dev-1-skf56</span></div>
<div style="position:absolute;left:224.60px;top:509.38px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:509.38px" class="cls_026"><span class="cls_026">CrashLoopBackOff</span></div>
<div style="position:absolute;left:354.20px;top:509.38px" class="cls_026"><span class="cls_026">2</span></div>
<div style="position:absolute;left:407.00px;top:509.38px" class="cls_026"><span class="cls_026">25s</span></div>
<div style="position:absolute;left:119.00px;top:521.38px" class="cls_026"><span class="cls_026">nodejs-dev-2-build</span></div>
<div style="position:absolute;left:224.60px;top:521.38px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:521.38px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:354.20px;top:521.38px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:407.00px;top:521.38px" class="cls_026"><span class="cls_026">58s</span></div>
<div style="position:absolute;left:130.00px;top:548.40px" class="cls_011"><span class="cls_011">9.2.  Use the </span><span class="cls_021">oc logs -f dc/nodejs-dev</span><span class="cls_011"> command to follow the logs for the</span></div>
<div style="position:absolute;left:154.70px;top:560.40px" class="cls_011"><span class="cls_011">application deployment:</span></div>
<div style="position:absolute;left:119.00px;top:588.12px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">oc logs -f dc/nodejs-dev</span></div>
<div style="position:absolute;left:119.00px;top:600.12px" class="cls_026"><span class="cls_026">Environment:</span></div>
<div style="position:absolute;left:128.60px;top:612.11px" class="cls_026"><span class="cls_026">DEV_MODE=false</span></div>
<div style="position:absolute;left:128.60px;top:624.11px" class="cls_026"><span class="cls_026">NODE_ENV=production</span></div>
<div style="position:absolute;left:128.60px;top:636.11px" class="cls_026"><span class="cls_026">DEBUG_PORT=5858</span></div>
<div style="position:absolute;left:119.00px;top:648.11px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:672.10px" class="cls_026"><span class="cls_026">Error: Cannot find module 'http-error'</span></div>
<div style="position:absolute;left:119.00px;top:696.10px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:505.01px;top:751.59px" class="cls_013"><span class="cls_013">281</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:239798px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background300.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:101.00px;top:65.69px" class="cls_026"><span class="cls_026">npm info nodejs-app@1.0.0 Failed to exec start script</span></div>
<div style="position:absolute;left:101.00px;top:77.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:89.69px" class="cls_026"><span class="cls_026">npm ERR! code ELIFECYCLE</span></div>
<div style="position:absolute;left:101.00px;top:101.69px" class="cls_026"><span class="cls_026">npm ERR! errno 1</span></div>
<div style="position:absolute;left:101.00px;top:113.68px" class="cls_026"><span class="cls_026">npm ERR! nodejs-app@1.0.0 start: `node server.js`</span></div>
<div style="position:absolute;left:101.00px;top:125.68px" class="cls_026"><span class="cls_026">npm ERR! Exit status 1</span></div>
<div style="position:absolute;left:101.00px;top:137.68px" class="cls_026"><span class="cls_026">npm ERR!</span></div>
<div style="position:absolute;left:101.00px;top:149.68px" class="cls_026"><span class="cls_026">npm ERR! Failed at the nodejs-app@1.0.0 start script.</span></div>
<div style="position:absolute;left:101.00px;top:161.68px" class="cls_026"><span class="cls_026">npm ERR! This is probably not a problem with npm. There is likely additional</span></div>
<div style="position:absolute;left:105.80px;top:173.68px" class="cls_026"><span class="cls_026">logging output above.</span></div>
<div style="position:absolute;left:101.00px;top:185.67px" class="cls_026"><span class="cls_026">npm timing npm Completed in 159ms</span></div>
<div style="position:absolute;left:101.00px;top:197.67px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:136.70px;top:219.95px" class="cls_011"><span class="cls_011">The log indicates that the </span><span class="cls_021">server.js</span><span class="cls_011"> file attempts to load a module named </span><span class="cls_021">http-</span></div>
<div style="position:absolute;left:136.70px;top:231.95px" class="cls_021"><span class="cls_021">error</span><span class="cls_011">. The </span><span class="cls_021">dependencies</span><span class="cls_011"> variable in the </span><span class="cls_021">packages</span><span class="cls_011"> file indicates that the module</span></div>
<div style="position:absolute;left:136.70px;top:243.95px" class="cls_011"><span class="cls_011">name is </span><span class="cls_021">html-errors</span><span class="cls_011">, not </span><span class="cls_021">http-error</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:265.76px" class="cls_022"><span class="cls_022">10.</span><span class="cls_011">   Correct the spelling of the dependency in the first line of the </span><span class="cls_021">server.js</span><span class="cls_011"> file. Commit and</span></div>
<div style="position:absolute;left:112.00px;top:277.82px" class="cls_011"><span class="cls_011">push changes to the application to the Git repository. Rebuild the application. After the</span></div>
<div style="position:absolute;left:112.00px;top:289.82px" class="cls_011"><span class="cls_011">application builds, verify that the application is running.</span></div>
<div style="position:absolute;left:112.00px;top:312.69px" class="cls_011"><span class="cls_011">10.1.  Correct the spelling of the module in the first line of the </span><span class="cls_021">server.js</span><span class="cls_011"> from </span><span class="cls_021">http-</span></div>
<div style="position:absolute;left:136.70px;top:324.68px" class="cls_021"><span class="cls_021">error</span><span class="cls_011"> to </span><span class="cls_021">html-errors</span><span class="cls_011">. Save the file.</span></div>
<div style="position:absolute;left:101.00px;top:352.40px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">sed -i s/http-error/html-errors/ server.js</span></div>
<div style="position:absolute;left:136.70px;top:374.68px" class="cls_011"><span class="cls_011">The file contains the following content:</span></div>
<div style="position:absolute;left:101.00px;top:402.40px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">cat server.js</span></div>
<div style="position:absolute;left:101.00px;top:414.39px" class="cls_026"><span class="cls_026">var createError = require('html-errors');</span></div>
<div style="position:absolute;left:101.00px;top:438.39px" class="cls_026"><span class="cls_026">var express = require('express');</span></div>
<div style="position:absolute;left:101.00px;top:450.39px" class="cls_026"><span class="cls_026">app = express();</span></div>
<div style="position:absolute;left:101.00px;top:474.39px" class="cls_026"><span class="cls_026">app.get('/', function (req, res) {</span></div>
<div style="position:absolute;left:110.60px;top:486.38px" class="cls_026"><span class="cls_026">res.send('Hello World from pod: ' + process.environment.HOSTNAME + '\n')</span></div>
<div style="position:absolute;left:101.00px;top:498.38px" class="cls_026"><span class="cls_026">});</span></div>
<div style="position:absolute;left:101.00px;top:522.38px" class="cls_026"><span class="cls_026">app.listen(8080, function () {</span></div>
<div style="position:absolute;left:110.60px;top:534.37px" class="cls_026"><span class="cls_026">console.log('Example app listening on port 8080!');</span></div>
<div style="position:absolute;left:101.00px;top:546.37px" class="cls_026"><span class="cls_026">});</span></div>
<div style="position:absolute;left:112.00px;top:575.52px" class="cls_011"><span class="cls_011">10.2.  Commit and push the changes made to the project.</span></div>
<div style="position:absolute;left:101.00px;top:603.24px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">git commit -am "Fixed module typo"</span></div>
<div style="position:absolute;left:101.00px;top:615.24px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:105.80px;top:627.24px" class="cls_026"><span class="cls_026">1 file changed, 1 insertion(+), 1 deletion(-)</span></div>
<div style="position:absolute;left:101.00px;top:639.23px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">git push</span></div>
<div style="position:absolute;left:101.00px;top:651.23px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:663.23px" class="cls_026"><span class="cls_026">To https://github.com/</span><span class="cls_029">yourgituser</span><span class="cls_026">/DO180-apps/</span></div>
<div style="position:absolute;left:115.40px;top:675.23px" class="cls_026"><span class="cls_026">ef6557d..73a82cd  troubleshoot-review -> troubleshoot-review</span></div>
<div style="position:absolute;left:112.00px;top:704.38px" class="cls_011"><span class="cls_011">10.3.  Use the </span><span class="cls_021">oc start-build</span><span class="cls_011"> command to rebuild the application.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">282</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:240600px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background301.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">oc start-build bc/nodejs-dev</span></div>
<div style="position:absolute;left:119.00px;top:73.69px" class="cls_026"><span class="cls_026">build.build.openshift.io/nodejs-dev-3 started</span></div>
<div style="position:absolute;left:130.00px;top:102.88px" class="cls_011"><span class="cls_011">10.4.  Use the </span><span class="cls_021">oc logs</span><span class="cls_011"> command to monitor the build process logs:</span></div>
<div style="position:absolute;left:119.00px;top:130.60px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">oc logs -f bc/nodejs-dev</span></div>
<div style="position:absolute;left:119.00px;top:142.60px" class="cls_026"><span class="cls_026">Cloning "https://github.com/</span><span class="cls_029">yourgituser</span><span class="cls_026">/DO180-apps"</span></div>
<div style="position:absolute;left:119.00px;top:154.60px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:166.60px" class="cls_026"><span class="cls_026">Pushing image ...-image-registry.svc:5000/nodejs-app/nodejs-dev:latest</span></div>
<div style="position:absolute;left:119.00px;top:178.59px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:190.59px" class="cls_026"><span class="cls_026">Push successful</span></div>
<div style="position:absolute;left:130.00px;top:219.78px" class="cls_011"><span class="cls_011">10.5.  Use the </span><span class="cls_021">oc get pods -w</span><span class="cls_011"> command to monitor the deployment of pods for the</span></div>
<div style="position:absolute;left:154.70px;top:231.78px" class="cls_021"><span class="cls_021">nodejs-dev</span><span class="cls_011"> application:</span></div>
<div style="position:absolute;left:119.00px;top:259.50px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">oc get pods -w</span></div>
<div style="position:absolute;left:119.00px;top:271.49px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:224.60px;top:271.49px" class="cls_026"><span class="cls_026">READY   STATUS</span></div>
<div style="position:absolute;left:320.60px;top:271.49px" class="cls_026"><span class="cls_026">RESTARTS   AGE</span></div>
<div style="position:absolute;left:119.00px;top:283.49px" class="cls_026"><span class="cls_026">nodejs-dev-1-build</span></div>
<div style="position:absolute;left:224.60px;top:283.49px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:283.49px" class="cls_026"><span class="cls_026">Error</span></div>
<div style="position:absolute;left:320.60px;top:283.49px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:373.40px;top:283.49px" class="cls_026"><span class="cls_026">11m</span></div>
<div style="position:absolute;left:119.00px;top:295.49px" class="cls_026"><span class="cls_026">nodejs-dev-1-deploy</span></div>
<div style="position:absolute;left:224.60px;top:295.49px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:295.49px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:320.60px;top:295.49px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:373.40px;top:295.49px" class="cls_026"><span class="cls_026">7m11s</span></div>
<div style="position:absolute;left:119.00px;top:307.49px" class="cls_026"><span class="cls_026">nodejs-dev-2-9nds4</span></div>
<div style="position:absolute;left:224.60px;top:307.49px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:263.00px;top:307.49px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:320.60px;top:307.49px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:373.40px;top:307.49px" class="cls_026"><span class="cls_026">56s</span></div>
<div style="position:absolute;left:119.00px;top:319.49px" class="cls_026"><span class="cls_026">nodejs-dev-2-build</span></div>
<div style="position:absolute;left:224.60px;top:319.49px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:319.49px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:320.60px;top:319.49px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:373.40px;top:319.49px" class="cls_026"><span class="cls_026">7m41s</span></div>
<div style="position:absolute;left:119.00px;top:331.48px" class="cls_026"><span class="cls_026">nodejs-dev-2-deploy</span></div>
<div style="position:absolute;left:224.60px;top:331.48px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:331.48px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:320.60px;top:331.48px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:373.40px;top:331.48px" class="cls_026"><span class="cls_026">61s</span></div>
<div style="position:absolute;left:119.00px;top:343.48px" class="cls_026"><span class="cls_026">nodejs-dev-3-build</span></div>
<div style="position:absolute;left:224.60px;top:343.48px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:343.48px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:320.60px;top:343.48px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:373.40px;top:343.48px" class="cls_026"><span class="cls_026">94s</span></div>
<div style="position:absolute;left:154.70px;top:365.76px" class="cls_011"><span class="cls_011">After a third build, the second deployment results in a status of </span><span class="cls_021">Running</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:108.00px;top:387.61px" class="cls_022"><span class="cls_022">11.</span></div>
<div style="position:absolute;left:130.00px;top:387.67px" class="cls_011"><span class="cls_011">Create a route for the application and test access to the application. Expect an error</span></div>
<div style="position:absolute;left:130.00px;top:399.67px" class="cls_011"><span class="cls_011">message. Review the logs to identify the error.</span></div>
<div style="position:absolute;left:130.00px;top:422.58px" class="cls_011"><span class="cls_011">11.1.</span></div>
<div style="position:absolute;left:154.70px;top:422.58px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">oc expose</span><span class="cls_011"> command to create a route for the </span><span class="cls_021">nodejs-dev</span><span class="cls_011"> application:</span></div>
<div style="position:absolute;left:119.00px;top:450.30px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">oc expose svc nodejs-dev</span></div>
<div style="position:absolute;left:119.00px;top:462.30px" class="cls_026"><span class="cls_026">route.route.openshift.io/nodejs-dev exposed</span></div>
<div style="position:absolute;left:130.00px;top:491.49px" class="cls_011"><span class="cls_011">11.2.  Use the </span><span class="cls_021">oc get route</span><span class="cls_011"> command to retrieve the URL of </span><span class="cls_021">nodejs-dev</span><span class="cls_011"> route:</span></div>
<div style="position:absolute;left:119.00px;top:519.21px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">oc get route</span></div>
<div style="position:absolute;left:119.00px;top:531.21px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:181.40px;top:531.21px" class="cls_026"><span class="cls_026">HOST/PORT</span></div>
<div style="position:absolute;left:119.00px;top:543.20px" class="cls_026"><span class="cls_026">nodejs-dev</span></div>
<div style="position:absolute;left:181.40px;top:543.20px" class="cls_026"><span class="cls_026">nodejs-dev-</span><span class="cls_029">your_user</span><span class="cls_026">-nodejs-app.</span><span class="cls_029">wildcard_domain</span><span class="cls_026">    ...</span></div>
<div style="position:absolute;left:130.00px;top:572.39px" class="cls_011"><span class="cls_011">11.3.  Use the </span><span class="cls_021">curl</span><span class="cls_011"> to access the route. Expect an error message to display.</span></div>
<div style="position:absolute;left:119.00px;top:600.11px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">curl \</span></div>
<div style="position:absolute;left:119.00px;top:612.11px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">nodejs-dev-${RHT_OCP4_DEV_USER}-nodejs-app.${RHT_OCP4_WILDCARD_DOMAIN}</span></div>
<div style="position:absolute;left:119.00px;top:624.11px" class="cls_026"><span class="cls_026">&lt;!DOCTYPE html></span></div>
<div style="position:absolute;left:119.00px;top:636.10px" class="cls_026"><span class="cls_026">&lt;html lang="en"></span></div>
<div style="position:absolute;left:119.00px;top:648.10px" class="cls_026"><span class="cls_026">&lt;head></span></div>
<div style="position:absolute;left:119.00px;top:660.10px" class="cls_026"><span class="cls_026">&lt;meta charset="utf-8"></span></div>
<div style="position:absolute;left:119.00px;top:672.10px" class="cls_026"><span class="cls_026">&lt;title>Error&lt;/title></span></div>
<div style="position:absolute;left:119.00px;top:684.10px" class="cls_026"><span class="cls_026">&lt;/head></span></div>
<div style="position:absolute;left:119.00px;top:696.09px" class="cls_026"><span class="cls_026">&lt;body></span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.09px;top:751.59px" class="cls_013"><span class="cls_013">283</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:241402px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background302.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:101.00px;top:53.69px" class="cls_026"><span class="cls_026">&lt;pre>Internal Server Error&lt;/pre></span></div>
<div style="position:absolute;left:101.00px;top:65.69px" class="cls_026"><span class="cls_026">&lt;/body></span></div>
<div style="position:absolute;left:101.00px;top:77.69px" class="cls_026"><span class="cls_026">&lt;/html></span></div>
<div style="position:absolute;left:112.00px;top:107.80px" class="cls_011"><span class="cls_011">11.4.  Review the logs for the </span><span class="cls_021">nodejs-dev</span><span class="cls_011"> deployment configuration:</span></div>
<div style="position:absolute;left:101.00px;top:135.51px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">oc logs dc/nodejs-dev</span></div>
<div style="position:absolute;left:101.00px;top:147.51px" class="cls_026"><span class="cls_026">Environment:</span></div>
<div style="position:absolute;left:105.80px;top:159.51px" class="cls_026"><span class="cls_026">DEV_MODE=false</span></div>
<div style="position:absolute;left:105.80px;top:171.51px" class="cls_026"><span class="cls_026">NODE_ENV=production</span></div>
<div style="position:absolute;left:105.80px;top:183.51px" class="cls_026"><span class="cls_026">DEBUG_PORT=5858</span></div>
<div style="position:absolute;left:101.00px;top:195.50px" class="cls_026"><span class="cls_026">Launching via npm...</span></div>
<div style="position:absolute;left:101.00px;top:207.50px" class="cls_026"><span class="cls_026">npm info it worked if it ends with ok</span></div>
<div style="position:absolute;left:101.00px;top:219.50px" class="cls_026"><span class="cls_026">npm info using npm@6.14.5</span></div>
<div style="position:absolute;left:101.00px;top:231.50px" class="cls_026"><span class="cls_026">npm info using node@v12.18.2</span></div>
<div style="position:absolute;left:101.00px;top:243.49px" class="cls_026"><span class="cls_026">npm info lifecycle nodejs-app@1.0.0~prestart: nodejs-app@1.0.0</span></div>
<div style="position:absolute;left:101.00px;top:255.49px" class="cls_026"><span class="cls_026">npm info lifecycle nodejs-app@1.0.0~start: nodejs-app@1.0.0</span></div>
<div style="position:absolute;left:101.00px;top:279.49px" class="cls_026"><span class="cls_026">Example app listening on port 8080!</span></div>
<div style="position:absolute;left:101.00px;top:291.49px" class="cls_026"><span class="cls_026">TypeError: Cannot read property 'HOSTNAME' of undefined</span></div>
<div style="position:absolute;left:101.00px;top:303.49px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:136.70px;top:325.76px" class="cls_011"><span class="cls_011">The corresponding section of the </span><span class="cls_021">server.js</span><span class="cls_011"> file is:</span></div>
<div style="position:absolute;left:101.00px;top:353.48px" class="cls_026"><span class="cls_026">app.get('/', function (req, res) {</span></div>
<div style="position:absolute;left:110.60px;top:365.48px" class="cls_026"><span class="cls_026">res.send('Hello World from pod: ' + process.environment.HOSTNAME + '\n')</span></div>
<div style="position:absolute;left:101.00px;top:377.48px" class="cls_026"><span class="cls_026">});</span></div>
<div style="position:absolute;left:136.70px;top:399.76px" class="cls_011"><span class="cls_011">A </span><span class="cls_021">process</span><span class="cls_011"> object in Node.js contains a reference to a </span><span class="cls_021">env</span><span class="cls_011"> object, not a </span><span class="cls_021">environment</span></div>
<div style="position:absolute;left:136.70px;top:411.75px" class="cls_011"><span class="cls_011">object.</span></div>
<div style="position:absolute;left:90.00px;top:434.52px" class="cls_022"><span class="cls_022">12.</span></div>
<div style="position:absolute;left:112.00px;top:434.58px" class="cls_011"><span class="cls_011">Replace </span><span class="cls_021">process.environment</span><span class="cls_011"> with </span><span class="cls_021">process.env</span><span class="cls_011"> in the </span><span class="cls_021">server.js</span><span class="cls_011"> file to fix the error.</span></div>
<div style="position:absolute;left:112.00px;top:446.58px" class="cls_011"><span class="cls_011">Commit and push the application changes to the Git repository. Rebuild the application.</span></div>
<div style="position:absolute;left:112.00px;top:458.58px" class="cls_011"><span class="cls_011">When the new application deploys, verify that application does not generate errors when you</span></div>
<div style="position:absolute;left:112.00px;top:470.58px" class="cls_011"><span class="cls_011">access the application URL.</span></div>
<div style="position:absolute;left:112.00px;top:494.40px" class="cls_011"><span class="cls_011">12.1.   Replace </span><span class="cls_021">process.environment</span><span class="cls_011"> with </span><span class="cls_021">process.env</span><span class="cls_011"> in the </span><span class="cls_021">server.js</span><span class="cls_011"> file to fix the</span></div>
<div style="position:absolute;left:136.70px;top:506.40px" class="cls_011"><span class="cls_011">error.</span></div>
<div style="position:absolute;left:101.00px;top:534.12px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">sed -i \</span></div>
<div style="position:absolute;left:101.00px;top:546.12px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">s/process.environment/process.env/ server.js</span></div>
<div style="position:absolute;left:136.70px;top:568.40px" class="cls_011"><span class="cls_011">The file contains the following content:</span></div>
<div style="position:absolute;left:101.00px;top:596.11px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">cat server.js</span></div>
<div style="position:absolute;left:101.00px;top:608.11px" class="cls_026"><span class="cls_026">var createError = require('html-errors');</span></div>
<div style="position:absolute;left:101.00px;top:632.11px" class="cls_026"><span class="cls_026">var express = require('express');</span></div>
<div style="position:absolute;left:101.00px;top:644.11px" class="cls_026"><span class="cls_026">app = express();</span></div>
<div style="position:absolute;left:101.00px;top:668.10px" class="cls_026"><span class="cls_026">app.get('/', function (req, res) {</span></div>
<div style="position:absolute;left:110.60px;top:680.10px" class="cls_026"><span class="cls_026">res.send('Hello World from pod: ' + process.env.HOSTNAME + '\n')</span></div>
<div style="position:absolute;left:101.00px;top:692.10px" class="cls_026"><span class="cls_026">});</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">284</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:242204px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background303.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:119.00px;top:53.69px" class="cls_026"><span class="cls_026">app.listen(8080, function () {</span></div>
<div style="position:absolute;left:128.60px;top:65.69px" class="cls_026"><span class="cls_026">console.log('Example app listening on port 8080!');</span></div>
<div style="position:absolute;left:119.00px;top:77.69px" class="cls_026"><span class="cls_026">});</span></div>
<div style="position:absolute;left:130.00px;top:108.37px" class="cls_011"><span class="cls_011">12.2.  Commit and push the changes made to the project.</span></div>
<div style="position:absolute;left:119.00px;top:136.09px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">git commit -am "Fixed process.env"</span></div>
<div style="position:absolute;left:119.00px;top:148.09px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:123.80px;top:160.08px" class="cls_026"><span class="cls_026">1 file changed, 1 insertion(+), 1 deletion(-)</span></div>
<div style="position:absolute;left:119.00px;top:172.08px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">git push</span></div>
<div style="position:absolute;left:119.00px;top:184.08px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:196.08px" class="cls_026"><span class="cls_026">To https://github.com/</span><span class="cls_029">yourgituser</span><span class="cls_026">/DO180-apps/</span></div>
<div style="position:absolute;left:133.40px;top:208.07px" class="cls_026"><span class="cls_026">ef6557d..73a82cd  troubleshoot-review -> troubleshoot-review</span></div>
<div style="position:absolute;left:130.00px;top:238.75px" class="cls_011"><span class="cls_011">12.3.  Use the </span><span class="cls_021">oc start-build</span><span class="cls_011"> command to rebuild the application.</span></div>
<div style="position:absolute;left:119.00px;top:266.47px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">oc start-build bc/nodejs-dev</span></div>
<div style="position:absolute;left:119.00px;top:278.47px" class="cls_026"><span class="cls_026">build.build.openshift.io/nodejs-dev-4 started</span></div>
<div style="position:absolute;left:130.00px;top:309.15px" class="cls_011"><span class="cls_011">12.4.  Use the </span><span class="cls_021">oc logs</span><span class="cls_011"> command to monitor the build process logs:</span></div>
<div style="position:absolute;left:119.00px;top:336.86px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">oc logs -f bc/nodejs-dev</span></div>
<div style="position:absolute;left:119.00px;top:348.86px" class="cls_026"><span class="cls_026">Cloning "https://github.com/</span><span class="cls_029">yourgituser</span><span class="cls_026">/DO180-apps"</span></div>
<div style="position:absolute;left:119.00px;top:360.86px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:372.86px" class="cls_026"><span class="cls_026">Pushing image ...image-registry.svc:5000/nodejs-app/nodejs-dev:latest</span></div>
<div style="position:absolute;left:119.00px;top:384.86px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:396.86px" class="cls_026"><span class="cls_026">Push successful</span></div>
<div style="position:absolute;left:130.00px;top:427.53px" class="cls_011"><span class="cls_011">12.5.  Use the </span><span class="cls_021">oc get pods</span><span class="cls_011"> command to monitor the deployment of pods for the </span><span class="cls_021">nodejs-</span></div>
<div style="position:absolute;left:154.70px;top:439.53px" class="cls_021"><span class="cls_021">dev</span><span class="cls_011"> application:</span></div>
<div style="position:absolute;left:119.00px;top:467.25px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">oc get pods</span></div>
<div style="position:absolute;left:119.00px;top:479.25px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:224.60px;top:479.25px" class="cls_026"><span class="cls_026">READY   STATUS</span></div>
<div style="position:absolute;left:320.60px;top:479.25px" class="cls_026"><span class="cls_026">RESTARTS   AGE</span></div>
<div style="position:absolute;left:119.00px;top:491.24px" class="cls_026"><span class="cls_026">nodejs-dev-1-build</span></div>
<div style="position:absolute;left:224.60px;top:491.24px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:491.24px" class="cls_026"><span class="cls_026">Error</span></div>
<div style="position:absolute;left:320.60px;top:491.24px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:373.40px;top:491.24px" class="cls_026"><span class="cls_026">21m</span></div>
<div style="position:absolute;left:119.00px;top:503.24px" class="cls_026"><span class="cls_026">nodejs-dev-1-deploy</span></div>
<div style="position:absolute;left:224.60px;top:503.24px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:503.24px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:320.60px;top:503.24px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:373.40px;top:503.24px" class="cls_026"><span class="cls_026">17m</span></div>
<div style="position:absolute;left:119.00px;top:515.24px" class="cls_026"><span class="cls_026">nodejs-dev-2-build</span></div>
<div style="position:absolute;left:224.60px;top:515.24px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:515.24px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:320.60px;top:515.24px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:373.40px;top:515.24px" class="cls_026"><span class="cls_026">17m</span></div>
<div style="position:absolute;left:119.00px;top:527.24px" class="cls_026"><span class="cls_026">nodejs-dev-2-deploy</span></div>
<div style="position:absolute;left:224.60px;top:527.24px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:527.24px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:320.60px;top:527.24px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:373.40px;top:527.24px" class="cls_026"><span class="cls_026">11m</span></div>
<div style="position:absolute;left:119.00px;top:539.24px" class="cls_026"><span class="cls_026">nodejs-dev-3-build</span></div>
<div style="position:absolute;left:224.60px;top:539.24px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:539.24px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:320.60px;top:539.24px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:373.40px;top:539.24px" class="cls_026"><span class="cls_026">11m</span></div>
<div style="position:absolute;left:119.00px;top:551.23px" class="cls_026"><span class="cls_026">nodejs-dev-3-deploy</span></div>
<div style="position:absolute;left:224.60px;top:551.23px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:551.23px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:320.60px;top:551.23px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:373.40px;top:551.23px" class="cls_026"><span class="cls_026">20s</span></div>
<div style="position:absolute;left:119.00px;top:563.23px" class="cls_026"><span class="cls_026">nodejs-dev-3-wlpps</span></div>
<div style="position:absolute;left:224.60px;top:563.23px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:263.00px;top:563.23px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:320.60px;top:563.23px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:373.40px;top:563.23px" class="cls_026"><span class="cls_026">17s</span></div>
<div style="position:absolute;left:119.00px;top:575.23px" class="cls_026"><span class="cls_026">nodejs-dev-4-build</span></div>
<div style="position:absolute;left:224.60px;top:575.23px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:263.00px;top:575.23px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:320.60px;top:575.23px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:373.40px;top:575.23px" class="cls_026"><span class="cls_026">48s</span></div>
<div style="position:absolute;left:154.70px;top:597.51px" class="cls_011"><span class="cls_011">After a fourth build, the third deployment has a status of </span><span class="cls_021">Running</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:130.00px;top:621.91px" class="cls_011"><span class="cls_011">12.6.  Use the </span><span class="cls_021">curl</span><span class="cls_011"> command to test the application. The application displays a </span><span class="cls_021">Hello</span></div>
<div style="position:absolute;left:154.70px;top:633.91px" class="cls_021"><span class="cls_021">World</span><span class="cls_011"> message containing the host name of the application pod:</span></div>
<div style="position:absolute;left:119.00px;top:661.62px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">curl \</span></div>
<div style="position:absolute;left:119.00px;top:673.62px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">nodejs-dev-${RHT_OCP4_DEV_USER}-nodejs-app.${RHT_OCP4_WILDCARD_DOMAIN}</span></div>
<div style="position:absolute;left:119.00px;top:685.62px" class="cls_026"><span class="cls_026">Hello World from pod: nodejs-dev-3-wlpps</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.18px;top:751.59px" class="cls_013"><span class="cls_013">285</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:243006px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background304.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:90.00px;top:52.04px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:90.00px;top:73.98px" class="cls_011"><span class="cls_011">Grade your work by running the </span><span class="cls_021">lab troubleshoot-review grade</span><span class="cls_011"> command from your</span></div>
<div style="position:absolute;left:90.00px;top:85.97px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011"> machine. Correct any reported failures and rerun the script until successful.</span></div>
<div style="position:absolute;left:101.00px;top:113.69px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">lab troubleshoot-review grade</span></div>
<div style="position:absolute;left:90.00px;top:144.03px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:165.97px" class="cls_011"><span class="cls_011">From </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab troubleshoot-review finish</span><span class="cls_011"> command to complete this</span></div>
<div style="position:absolute;left:90.00px;top:177.97px" class="cls_011"><span class="cls_011">lab.</span></div>
<div style="position:absolute;left:101.00px;top:205.68px" class="cls_026"><span class="cls_026">[student@workstation nodejs-app]$ </span><span class="cls_027">lab troubleshoot-review finish</span></div>
<div style="position:absolute;left:90.00px;top:233.46px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">286</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:243808px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background305.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 8 |</span><span class="cls_019"> Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:108.00px;top:83.06px" class="cls_014"><span class="cls_014">Summary</span></div>
<div style="position:absolute;left:108.00px;top:135.98px" class="cls_011"><span class="cls_011">In this chapter, you learned:</span></div>
<div style="position:absolute;left:108.00px;top:157.47px" class="cls_011"><span class="cls_011">• Applications typically log activity, such as events, warnings and errors, to aid the analysis of</span></div>
<div style="position:absolute;left:117.50px;top:169.47px" class="cls_011"><span class="cls_011">application behavior.</span></div>
<div style="position:absolute;left:108.00px;top:190.97px" class="cls_011"><span class="cls_011">• Container applications should print log data to standard output, instead of to a file, to enable</span></div>
<div style="position:absolute;left:117.50px;top:202.97px" class="cls_011"><span class="cls_011">easy access to logs.</span></div>
<div style="position:absolute;left:108.00px;top:224.47px" class="cls_011"><span class="cls_011">• To review the logs for a container deployed locally with Podman, use the </span><span class="cls_021">podman logs</span></div>
<div style="position:absolute;left:117.50px;top:236.46px" class="cls_011"><span class="cls_011">command.</span></div>
<div style="position:absolute;left:108.00px;top:257.96px" class="cls_011"><span class="cls_011">• Use the </span><span class="cls_021">oc logs</span><span class="cls_011"> command to access logs for </span><span class="cls_021">BuildConfig</span><span class="cls_011"> and </span><span class="cls_021">DeploymentConfig</span></div>
<div style="position:absolute;left:117.50px;top:269.96px" class="cls_011"><span class="cls_011">objects, as well as individual pods within an OpenShift project.</span></div>
<div style="position:absolute;left:108.00px;top:291.46px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">-f</span><span class="cls_011"> option allows you to monitor the log output in near real-time for both the </span><span class="cls_021">podman logs</span></div>
<div style="position:absolute;left:117.50px;top:303.46px" class="cls_011"><span class="cls_011">and </span><span class="cls_021">oc logs</span><span class="cls_011"> commands.</span></div>
<div style="position:absolute;left:108.00px;top:324.95px" class="cls_011"><span class="cls_011">• Use the </span><span class="cls_021">oc port-forward</span><span class="cls_011"> command to connect directly to a port on an application pod. You</span></div>
<div style="position:absolute;left:117.50px;top:336.95px" class="cls_011"><span class="cls_011">should only leverage this technique on non-production pods, because interactions can alter the</span></div>
<div style="position:absolute;left:117.50px;top:348.95px" class="cls_011"><span class="cls_011">behavior of the pod.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.17px;top:751.59px" class="cls_013"><span class="cls_013">287</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:244610px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background306.jpg" width=612 height=792></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">288</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:245412px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background307.jpg" width=612 height=792></div>
<div style="position:absolute;left:126.00px;top:69.76px" class="cls_030"><span class="cls_030">Chapter 9</span></div>
<div style="position:absolute;left:126.00px;top:175.50px" class="cls_031"><span class="cls_031">Comprehensive Review</span></div>
<div style="position:absolute;left:146.00px;top:228.67px" class="cls_018"><span class="cls_018">Goal</span></div>
<div style="position:absolute;left:252.88px;top:228.01px" class="cls_008"><span class="cls_008">Review tasks from  Red Hat OpenShift I: Containers</span></div>
<div style="position:absolute;left:252.88px;top:240.01px" class="cls_008"><span class="cls_008">& Kubernetes</span></div>
<div style="position:absolute;left:146.00px;top:268.67px" class="cls_018"><span class="cls_018">Objectives</span></div>
<div style="position:absolute;left:252.88px;top:268.01px" class="cls_008"><span class="cls_008">•  Review tasks from  Red Hat OpenShift I:</span></div>
<div style="position:absolute;left:267.88px;top:280.01px" class="cls_008"><span class="cls_008">Containers & Kubernetes</span></div>
<div style="position:absolute;left:146.00px;top:308.67px" class="cls_018"><span class="cls_018">Sections</span></div>
<div style="position:absolute;left:252.88px;top:308.01px" class="cls_008"><span class="cls_008">•  Comprehensive Review</span></div>
<div style="position:absolute;left:146.00px;top:340.67px" class="cls_018"><span class="cls_018">Lab</span></div>
<div style="position:absolute;left:252.88px;top:340.01px" class="cls_008"><span class="cls_008">•  Comprehensive Review of Introduction</span></div>
<div style="position:absolute;left:267.88px;top:352.01px" class="cls_008"><span class="cls_008">to Containers, Kubernetes, and Red Hat</span></div>
<div style="position:absolute;left:267.88px;top:364.01px" class="cls_008"><span class="cls_008">OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:502.97px;top:751.59px" class="cls_013"><span class="cls_013">289</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:246214px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background308.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 9 |</span><span class="cls_019"> Comprehensive Review</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Comprehensive Review</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, you should be able to demonstrate knowledge and skills learned in</span></div>
<div style="position:absolute;left:90.00px;top:170.97px" class="cls_011"><span class="cls_011">Red Hat OpenShift I: Containers & Kubernetes.</span></div>
<div style="position:absolute;left:90.00px;top:193.26px" class="cls_024"><span class="cls_024">Reviewing Red Hat OpenShift I: Containers &</span></div>
<div style="position:absolute;left:90.00px;top:210.26px" class="cls_024"><span class="cls_024">Kubernetes</span></div>
<div style="position:absolute;left:90.00px;top:234.97px" class="cls_011"><span class="cls_011">Before beginning the comprehensive review lab for this course, students should be comfortable</span></div>
<div style="position:absolute;left:90.00px;top:246.97px" class="cls_011"><span class="cls_011">with the topics covered in the following chapters.</span></div>
<div style="position:absolute;left:90.00px;top:271.05px" class="cls_049"><span class="cls_049">Chapter 1, Introducing Container Technology</span></div>
<div style="position:absolute;left:90.00px;top:293.11px" class="cls_011"><span class="cls_011">Describe how applications run in containers orchestrated by Red Hat OpenShift Container</span></div>
<div style="position:absolute;left:90.00px;top:305.11px" class="cls_011"><span class="cls_011">Platform.</span></div>
<div style="position:absolute;left:90.00px;top:326.60px" class="cls_011"><span class="cls_011">• Describe the difference between container applications and traditional deployments.</span></div>
<div style="position:absolute;left:90.00px;top:348.05px" class="cls_011"><span class="cls_011">• Describe the basics of container architecture.</span></div>
<div style="position:absolute;left:90.00px;top:369.50px" class="cls_011"><span class="cls_011">• Describe the benefits of orchestrating applications and OpenShift Container Platform.</span></div>
<div style="position:absolute;left:90.00px;top:393.57px" class="cls_049"><span class="cls_049">Chapter 2, Creating Containerized Services</span></div>
<div style="position:absolute;left:90.00px;top:415.63px" class="cls_011"><span class="cls_011">Provision a service using container technology.</span></div>
<div style="position:absolute;left:90.00px;top:437.13px" class="cls_011"><span class="cls_011">• Create a database server from a container image.</span></div>
<div style="position:absolute;left:90.00px;top:461.21px" class="cls_049"><span class="cls_049">Chapter 3, Managing Containers</span></div>
<div style="position:absolute;left:90.00px;top:483.27px" class="cls_011"><span class="cls_011">Modify prebuilt container images to create and manage containerized services.</span></div>
<div style="position:absolute;left:90.00px;top:504.77px" class="cls_011"><span class="cls_011">• Manage a container's life cycle from creation to deletion.</span></div>
<div style="position:absolute;left:90.00px;top:526.21px" class="cls_011"><span class="cls_011">• Save container application data with persistent storage.</span></div>
<div style="position:absolute;left:90.00px;top:547.66px" class="cls_011"><span class="cls_011">• Describe how to use port forwarding to access a container.</span></div>
<div style="position:absolute;left:90.00px;top:571.74px" class="cls_049"><span class="cls_049">Chapter 4, Managing Container Images</span></div>
<div style="position:absolute;left:90.00px;top:593.80px" class="cls_011"><span class="cls_011">Manage the life cycle of a container image from creation to deletion.</span></div>
<div style="position:absolute;left:90.00px;top:615.30px" class="cls_011"><span class="cls_011">• Search for and pull images from remote registries.</span></div>
<div style="position:absolute;left:90.00px;top:636.74px" class="cls_011"><span class="cls_011">• Export, import, and manage container images locally and in a registry.</span></div>
<div style="position:absolute;left:90.00px;top:660.82px" class="cls_049"><span class="cls_049">Chapter 5, Creating Custom Container Images</span></div>
<div style="position:absolute;left:90.00px;top:682.88px" class="cls_011"><span class="cls_011">Design and code a Dockerfile to build a custom container image.</span></div>
<div style="position:absolute;left:90.00px;top:704.38px" class="cls_011"><span class="cls_011">• Describe the approaches for creating custom container images.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">290</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:247016px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background309.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 9 |</span><span class="cls_019"> Comprehensive Review</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">• Create a container image using common Dockerfile commands.</span></div>
<div style="position:absolute;left:108.00px;top:78.05px" class="cls_049"><span class="cls_049">Chapter 6, Deploying Containerized Applications on</span></div>
<div style="position:absolute;left:108.00px;top:92.19px" class="cls_049"><span class="cls_049">OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:114.25px" class="cls_011"><span class="cls_011">Deploy single container applications on OpenShift Container Platform.</span></div>
<div style="position:absolute;left:108.00px;top:135.75px" class="cls_011"><span class="cls_011">• Describe the architecture of Kubernetes and Red Hat OpenShift Container Platform.</span></div>
<div style="position:absolute;left:108.00px;top:159.15px" class="cls_011"><span class="cls_011">• Create standard Kubernetes resources.</span></div>
<div style="position:absolute;left:108.00px;top:182.55px" class="cls_011"><span class="cls_011">• Create a route to a service.</span></div>
<div style="position:absolute;left:108.00px;top:205.95px" class="cls_011"><span class="cls_011">• Build an application using the Source-to-Image facility of OpenShift Container Platform.</span></div>
<div style="position:absolute;left:108.00px;top:229.34px" class="cls_011"><span class="cls_011">• Create an application using the OpenShift web console.</span></div>
<div style="position:absolute;left:108.00px;top:253.42px" class="cls_049"><span class="cls_049">Chapter 7, Deploying Multi-Container Applications</span></div>
<div style="position:absolute;left:108.00px;top:275.48px" class="cls_011"><span class="cls_011">Deploy applications that are containerized using multiple container images.</span></div>
<div style="position:absolute;left:108.00px;top:296.98px" class="cls_011"><span class="cls_011">• Describe considerations for containerizing applications with multiple container images.</span></div>
<div style="position:absolute;left:108.00px;top:320.38px" class="cls_011"><span class="cls_011">• Deploy a multi-container application on OpenShift using a template.</span></div>
<div style="position:absolute;left:108.00px;top:344.45px" class="cls_049"><span class="cls_049">Chapter 8, Troubleshooting Containerized Applications</span></div>
<div style="position:absolute;left:108.00px;top:366.52px" class="cls_011"><span class="cls_011">Troubleshoot a containerized application deployed on OpenShift.</span></div>
<div style="position:absolute;left:108.00px;top:388.01px" class="cls_011"><span class="cls_011">• Troubleshoot an application build and deployment on OpenShift.</span></div>
<div style="position:absolute;left:108.00px;top:411.41px" class="cls_011"><span class="cls_011">• Implement techniques for troubleshooting and debugging containerized applications.</span></div>
<div style="position:absolute;left:108.00px;top:433.69px" class="cls_024"><span class="cls_024">General Container, Kubernetes, and OpenShift Hints</span></div>
<div style="position:absolute;left:108.00px;top:458.41px" class="cls_011"><span class="cls_011">These hints may save some time in completing the comprehensive review lab:</span></div>
<div style="position:absolute;left:108.00px;top:481.81px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">podman</span><span class="cls_011"> command allows you to build, run, and manage container images. Use the </span><span class="cls_021">man</span></div>
<div style="position:absolute;left:117.50px;top:493.81px" class="cls_021"><span class="cls_021">podman</span><span class="cls_011"> command to access Podman documentation. Use the </span><span class="cls_021">man podman </span><span class="cls_028">subcommand</span></div>
<div style="position:absolute;left:117.50px;top:505.80px" class="cls_011"><span class="cls_011">command to get more information about each subcommand.</span></div>
<div style="position:absolute;left:108.00px;top:529.20px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">oc</span><span class="cls_011"> command allows you to create and manage OpenShift resources. Use the </span><span class="cls_021">man oc</span><span class="cls_011"> or</span></div>
<div style="position:absolute;left:117.50px;top:541.20px" class="cls_021"><span class="cls_021">oc help</span><span class="cls_011"> commands to access OpenShift command-line documentation. OpenShift commands</span></div>
<div style="position:absolute;left:117.50px;top:553.20px" class="cls_011"><span class="cls_011">that are particularly useful include:</span></div>
<div style="position:absolute;left:117.50px;top:576.60px" class="cls_022"><span class="cls_022">oc login -u &lt;username> -p &lt;password> &lt;master_api_url></span></div>
<div style="position:absolute;left:135.50px;top:588.59px" class="cls_011"><span class="cls_011">Log in to OpenShift as the specified user. Find both credentials and master API URI in the</span></div>
<div style="position:absolute;left:135.50px;top:600.59px" class="cls_011"><span class="cls_011">lab page.</span></div>
<div style="position:absolute;left:117.50px;top:623.99px" class="cls_022"><span class="cls_022">oc new-project</span></div>
<div style="position:absolute;left:135.50px;top:635.99px" class="cls_011"><span class="cls_011">Create a new project (namespace) to contain OpenShift resources.</span></div>
<div style="position:absolute;left:117.50px;top:659.39px" class="cls_022"><span class="cls_022">oc project</span></div>
<div style="position:absolute;left:135.50px;top:671.38px" class="cls_011"><span class="cls_011">Select the current project (namespace) to which all subsequent commands apply.</span></div>
<div style="position:absolute;left:117.50px;top:694.78px" class="cls_022"><span class="cls_022">oc create -f</span></div>
<div style="position:absolute;left:135.50px;top:706.78px" class="cls_011"><span class="cls_011">Create a resource from a file.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.97px;top:751.59px" class="cls_013"><span class="cls_013">291</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:247818px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background310.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 9 |</span><span class="cls_019"> Comprehensive Review</span></div>
<div style="position:absolute;left:99.50px;top:53.98px" class="cls_022"><span class="cls_022">oc process</span></div>
<div style="position:absolute;left:117.50px;top:65.97px" class="cls_011"><span class="cls_011">Processes a template file applying the parameter values to each included resource. Create</span></div>
<div style="position:absolute;left:117.50px;top:77.97px" class="cls_011"><span class="cls_011">those resources with the </span><span class="cls_021">oc create</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:99.50px;top:99.47px" class="cls_022"><span class="cls_022">oc get</span></div>
<div style="position:absolute;left:117.50px;top:111.47px" class="cls_011"><span class="cls_011">Display the runtime status and attributes of OpenShift resources.</span></div>
<div style="position:absolute;left:99.50px;top:132.97px" class="cls_022"><span class="cls_022">oc describe</span></div>
<div style="position:absolute;left:117.50px;top:144.96px" class="cls_011"><span class="cls_011">Display detailed information about OpenShift resources.</span></div>
<div style="position:absolute;left:99.50px;top:166.46px" class="cls_022"><span class="cls_022">oc delete</span></div>
<div style="position:absolute;left:117.50px;top:178.46px" class="cls_011"><span class="cls_011">Delete OpenShift resources.</span></div>
<div style="position:absolute;left:90.00px;top:199.96px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:199.96px" class="cls_011"><span class="cls_011">Before mounting any volumes on the Podman and OpenShift host, ensure you apply the correct</span></div>
<div style="position:absolute;left:99.50px;top:211.96px" class="cls_011"><span class="cls_011">SELinux context to the directory. The correct context is </span><span class="cls_021">container_file_t</span><span class="cls_011">. Also, make sure</span></div>
<div style="position:absolute;left:99.50px;top:223.95px" class="cls_011"><span class="cls_011">the ownership and permissions of the directory are set according to the </span><span class="cls_021">USER</span><span class="cls_011"> directive in the</span></div>
<div style="position:absolute;left:99.50px;top:235.95px" class="cls_011"><span class="cls_011">Dockerfile that was used to build the container being deployed. Most of the time you will have</span></div>
<div style="position:absolute;left:99.50px;top:247.95px" class="cls_011"><span class="cls_011">to use the numeric UID and GID rather than the user and group names to adjust ownership and</span></div>
<div style="position:absolute;left:99.50px;top:259.95px" class="cls_011"><span class="cls_011">permissions of the volume directory.</span></div>
<div style="position:absolute;left:90.00px;top:281.45px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:281.45px" class="cls_011"><span class="cls_011">In this classroom, all RPM repositories are defined locally. You must configure the repository</span></div>
<div style="position:absolute;left:99.50px;top:293.44px" class="cls_011"><span class="cls_011">definitions in a custom container image (Dockerfile) before running </span><span class="cls_021">yum</span><span class="cls_011"> commands.</span></div>
<div style="position:absolute;left:90.00px;top:314.94px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:314.94px" class="cls_011"><span class="cls_011">When executing commands in a Dockerfile, combine as many related commands as possible into</span></div>
<div style="position:absolute;left:99.50px;top:326.94px" class="cls_011"><span class="cls_011">one </span><span class="cls_021">RUN</span><span class="cls_011"> directive. This reduces the number of image layers in the container image.</span></div>
<div style="position:absolute;left:90.00px;top:348.44px" class="cls_011"><span class="cls_011">•</span></div>
<div style="position:absolute;left:99.50px;top:348.44px" class="cls_011"><span class="cls_011">A best practice for designing a Dockerfile includes the use of environment variables for</span></div>
<div style="position:absolute;left:99.50px;top:360.44px" class="cls_011"><span class="cls_011">specifying repeated constants throughout the file.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">292</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:248620px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background311.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 9 |</span><span class="cls_019"> Comprehensive Review</span></div>
<div style="position:absolute;left:121.50px;top:52.48px" class="cls_042"><span class="cls_042">Lab</span></div>
<div style="position:absolute;left:108.00px;top:91.56px" class="cls_014"><span class="cls_014">Containerizing and Deploying a Software</span></div>
<div style="position:absolute;left:108.00px;top:112.56px" class="cls_014"><span class="cls_014">Application</span></div>
<div style="position:absolute;left:120.00px;top:158.59px" class="cls_011"><span class="cls_011">In this review, you will containerize a Nexus server, build and test it using Podman, and deploy</span></div>
<div style="position:absolute;left:120.00px;top:170.59px" class="cls_011"><span class="cls_011">it to an OpenShift cluster.</span></div>
<div style="position:absolute;left:120.00px;top:193.65px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:120.00px;top:211.59px" class="cls_011"><span class="cls_011">You should be able to:</span></div>
<div style="position:absolute;left:120.00px;top:234.98px" class="cls_011"><span class="cls_011">• Write a Dockerfile that successfully containerizes a Nexus server.</span></div>
<div style="position:absolute;left:120.00px;top:258.38px" class="cls_011"><span class="cls_011">• Build a Nexus server container image and deploy it using Podman.</span></div>
<div style="position:absolute;left:120.00px;top:281.78px" class="cls_011"><span class="cls_011">• Deploy the Nexus server container image to an OpenShift cluster.</span></div>
<div style="position:absolute;left:120.00px;top:304.84px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:120.00px;top:322.78px" class="cls_011"><span class="cls_011">Run the set-up script for this comprehensive review.</span></div>
<div style="position:absolute;left:119.00px;top:350.49px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab comprehensive-review start</span></div>
<div style="position:absolute;left:120.00px;top:378.27px" class="cls_011"><span class="cls_011">The lab files are located in the </span><span class="cls_021">/home/student/DO180/labs/comprehensive-review</span></div>
<div style="position:absolute;left:120.00px;top:390.27px" class="cls_011"><span class="cls_011">directory. The solution files are located in the </span><span class="cls_021">/home/student/DO180/solutions/</span></div>
<div style="position:absolute;left:120.00px;top:402.27px" class="cls_021"><span class="cls_021">comprehensive-review</span><span class="cls_011"> directory.</span></div>
<div style="position:absolute;left:120.00px;top:425.33px" class="cls_043"><span class="cls_043">Instructions</span></div>
<div style="position:absolute;left:120.00px;top:443.27px" class="cls_011"><span class="cls_011">Use the following steps to create and test a containerized Nexus server both locally and in</span></div>
<div style="position:absolute;left:120.00px;top:455.27px" class="cls_011"><span class="cls_011">OpenShift:</span></div>
<div style="position:absolute;left:108.00px;top:495.33px" class="cls_002"><span class="cls_002">Steps</span></div>
<div style="position:absolute;left:108.00px;top:517.21px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:130.00px;top:517.26px" class="cls_011"><span class="cls_011">Create a container image that starts an instance of a Nexus server:</span></div>
<div style="position:absolute;left:130.00px;top:540.66px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">/home/student/DO180/labs/comprehensive-review/image</span><span class="cls_011"> directory</span></div>
<div style="position:absolute;left:139.50px;top:552.66px" class="cls_011"><span class="cls_011">contains files for building the container image. Execute the </span><span class="cls_021">get-nexus-bundle.sh</span></div>
<div style="position:absolute;left:139.50px;top:564.66px" class="cls_011"><span class="cls_011">script to retrieve the Nexus server files.</span></div>
<div style="position:absolute;left:130.00px;top:588.06px" class="cls_011"><span class="cls_011">• Write a Dockerfile that containerizes the Nexus server. The Dockerfile must be located in</span></div>
<div style="position:absolute;left:139.50px;top:600.06px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">/home/student/DO180/labs/comprehensive-review/image</span><span class="cls_011"> directory. The</span></div>
<div style="position:absolute;left:139.50px;top:612.06px" class="cls_011"><span class="cls_011">Dockerfile must also:</span></div>
<div style="position:absolute;left:139.50px;top:635.46px" class="cls_011"><span class="cls_011">- Use a base image of </span><span class="cls_021">ubi7/ubi:7.7</span><span class="cls_011"> and set an arbitrary maintainer.</span></div>
<div style="position:absolute;left:139.50px;top:658.86px" class="cls_011"><span class="cls_011">- Set the environment variable </span><span class="cls_021">NEXUS_VERSION</span><span class="cls_011"> to </span><span class="cls_021">2.14.3-02</span><span class="cls_011">, and set </span><span class="cls_021">NEXUS_HOME</span><span class="cls_011"> to</span></div>
<div style="position:absolute;left:149.00px;top:670.86px" class="cls_021"><span class="cls_021">/opt/nexus</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:139.50px;top:694.26px" class="cls_011"><span class="cls_011">- Install the java-1.8.0-openjdk-devel package</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.05px;top:751.59px" class="cls_013"><span class="cls_013">293</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:249422px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background312.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 9 |</span><span class="cls_019"> Comprehensive Review</span></div>
<div style="position:absolute;left:131.00px;top:53.98px" class="cls_011"><span class="cls_011">The RPM repositories are configured in the provided </span><span class="cls_021">training.repo</span><span class="cls_011"> file. Be sure to</span></div>
<div style="position:absolute;left:131.00px;top:65.98px" class="cls_011"><span class="cls_011">add this file to the container in the </span><span class="cls_021">/etc/yum.repos.d</span><span class="cls_011"> directory.</span></div>
<div style="position:absolute;left:121.50px;top:89.38px" class="cls_011"><span class="cls_011">- Run a command to create a </span><span class="cls_021">nexus</span><span class="cls_011"> user and group. They both have a UID and GID of</span></div>
<div style="position:absolute;left:131.00px;top:101.38px" class="cls_021"><span class="cls_021">1001</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:121.50px;top:124.78px" class="cls_011"><span class="cls_011">- Unpack the </span><span class="cls_021">nexus-2.14.3-02-bundle.tar.gz</span><span class="cls_011"> file to the </span><span class="cls_021">${NEXUS_HOME}/</span></div>
<div style="position:absolute;left:131.00px;top:136.78px" class="cls_011"><span class="cls_011">directory. Add the</span><span class="cls_021">nexus-start.sh</span><span class="cls_011"> to the same directory.</span></div>
<div style="position:absolute;left:131.00px;top:158.28px" class="cls_011"><span class="cls_011">Run a command, </span><span class="cls_021">ln -s ${NEXUS_HOME}/nexus-${NEXUS_VERSION}</span></div>
<div style="position:absolute;left:131.00px;top:170.28px" class="cls_021"><span class="cls_021">${NEXUS_HOME}/nexus2</span><span class="cls_011">, to create a symlink in the container. Run a command to</span></div>
<div style="position:absolute;left:131.00px;top:182.28px" class="cls_011"><span class="cls_011">recursively change the ownership of the Nexus home directory to </span><span class="cls_021">nexus:nexus</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:121.50px;top:205.68px" class="cls_011"><span class="cls_011">- Make the container run as the </span><span class="cls_021">nexus</span><span class="cls_011"> user, and set the working directory to </span><span class="cls_021">/opt/</span></div>
<div style="position:absolute;left:131.00px;top:217.68px" class="cls_021"><span class="cls_021">nexus</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:121.50px;top:241.08px" class="cls_011"><span class="cls_011">- Define a volume mount point for the </span><span class="cls_021">/opt/nexus/sonatype-work</span><span class="cls_011"> container</span></div>
<div style="position:absolute;left:131.00px;top:253.08px" class="cls_011"><span class="cls_011">directory. The Nexus server stores data in this directory.</span></div>
<div style="position:absolute;left:121.50px;top:276.48px" class="cls_011"><span class="cls_011">- Set the default container command to </span><span class="cls_021">nexus-start.sh</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:121.50px;top:297.98px" class="cls_011"><span class="cls_011">There are two </span><span class="cls_021">*.snippet</span><span class="cls_011"> files in the </span><span class="cls_021">/home/student/DO180/labs/comprehensive-</span></div>
<div style="position:absolute;left:121.50px;top:309.98px" class="cls_021"><span class="cls_021">review/images</span><span class="cls_011"> directory that provide the commands needed to create the nexus</span></div>
<div style="position:absolute;left:121.50px;top:321.98px" class="cls_011"><span class="cls_011">account and install Java. Use the files to assist you in writing the Dockerfile.</span></div>
<div style="position:absolute;left:112.00px;top:345.38px" class="cls_011"><span class="cls_011">• Build the container image with the name </span><span class="cls_021">nexus</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:363.32px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:112.00px;top:363.38px" class="cls_011"><span class="cls_011">Build and test the container image using Podman with a volume mount:</span></div>
<div style="position:absolute;left:112.00px;top:386.78px" class="cls_011"><span class="cls_011">• Use the script </span><span class="cls_021">/home/student/DO180/labs/comprehensive-review/deploy/</span></div>
<div style="position:absolute;left:121.50px;top:398.78px" class="cls_021"><span class="cls_021">local/run-persistent.sh</span><span class="cls_011"> to start a new container with a volume mount.</span></div>
<div style="position:absolute;left:112.00px;top:422.18px" class="cls_011"><span class="cls_011">• Review the container logs to verify that the server is started and running.</span></div>
<div style="position:absolute;left:112.00px;top:445.58px" class="cls_011"><span class="cls_011">• Test access to the container service using the URL: </span><span class="cls_021">http://</span><span class="cls_028">&lt;container IP</span></div>
<div style="position:absolute;left:121.50px;top:457.58px" class="cls_028"><span class="cls_028">address></span><span class="cls_021">:8081/nexus</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:112.00px;top:480.98px" class="cls_011"><span class="cls_011">• Remove the test container.</span></div>
<div style="position:absolute;left:90.00px;top:498.92px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:112.00px;top:498.98px" class="cls_011"><span class="cls_011">Deploy the Nexus server container image to the OpenShift cluster. You must:</span></div>
<div style="position:absolute;left:112.00px;top:522.38px" class="cls_011"><span class="cls_011">• Tag the Nexus server container image as </span><span class="cls_021">quay.io/${RHT_OCP4_QUAY_USER}/</span></div>
<div style="position:absolute;left:121.50px;top:534.38px" class="cls_021"><span class="cls_021">nexus:latest</span><span class="cls_011">, and push it the private registry.</span></div>
<div style="position:absolute;left:112.00px;top:557.78px" class="cls_011"><span class="cls_011">• Create an OpenShift project with a name of </span><span class="cls_021">${RHT_OCP4_DEV_USER}-review</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:112.00px;top:581.18px" class="cls_011"><span class="cls_011">• Process the </span><span class="cls_021">deploy/openshift/resources/nexus-template.json</span><span class="cls_011"> template and</span></div>
<div style="position:absolute;left:121.50px;top:593.18px" class="cls_011"><span class="cls_011">create the Kubernetes resources.</span></div>
<div style="position:absolute;left:112.00px;top:616.58px" class="cls_011"><span class="cls_011">• Create a route for the Nexus service. Verify that you can access </span><A HREF="http://nexus-/">http://nexus-</A> </span></div>
<div style="position:absolute;left:121.50px;top:628.58px" class="cls_021"><span class="cls_021">${RHT_OCP4_DEV_USER}-review.${RHT_OCP4_WILDCARD_DOMAIN}/nexus/</span><span class="cls_011"> from</span></div>
<div style="position:absolute;left:121.50px;top:640.58px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:664.64px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:90.00px;top:686.58px" class="cls_011"><span class="cls_011">After deploying the Nexus server container image to the OpenShift cluster, verify your work by</span></div>
<div style="position:absolute;left:90.00px;top:698.57px" class="cls_011"><span class="cls_011">running the lab grading script:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">294</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:250224px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background313.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 9 |</span><span class="cls_019"> Comprehensive Review</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab comprehensive-review grade</span></div>
<div style="position:absolute;left:108.00px;top:92.04px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:108.00px;top:113.97px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab comprehensive-review finish</span><span class="cls_011"> command to complete this</span></div>
<div style="position:absolute;left:108.00px;top:125.97px" class="cls_011"><span class="cls_011">lab.</span></div>
<div style="position:absolute;left:119.00px;top:153.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab comprehensive-review finish</span></div>
<div style="position:absolute;left:108.00px;top:181.47px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.14px;top:751.59px" class="cls_013"><span class="cls_013">295</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:251026px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background314.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 9 |</span><span class="cls_019"> Comprehensive Review</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_042"><span class="cls_042">Solution</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Containerizing and Deploying a Software</span></div>
<div style="position:absolute;left:90.00px;top:112.56px" class="cls_014"><span class="cls_014">Application</span></div>
<div style="position:absolute;left:102.00px;top:158.59px" class="cls_011"><span class="cls_011">In this review, you will containerize a Nexus server, build and test it using Podman, and deploy</span></div>
<div style="position:absolute;left:102.00px;top:170.59px" class="cls_011"><span class="cls_011">it to an OpenShift cluster.</span></div>
<div style="position:absolute;left:102.00px;top:193.65px" class="cls_043"><span class="cls_043">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:211.59px" class="cls_011"><span class="cls_011">You should be able to:</span></div>
<div style="position:absolute;left:102.00px;top:234.98px" class="cls_011"><span class="cls_011">• Write a Dockerfile that successfully containerizes a Nexus server.</span></div>
<div style="position:absolute;left:102.00px;top:258.38px" class="cls_011"><span class="cls_011">• Build a Nexus server container image and deploy it using Podman.</span></div>
<div style="position:absolute;left:102.00px;top:281.78px" class="cls_011"><span class="cls_011">• Deploy the Nexus server container image to an OpenShift cluster.</span></div>
<div style="position:absolute;left:102.00px;top:304.84px" class="cls_043"><span class="cls_043">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:322.78px" class="cls_011"><span class="cls_011">Run the set-up script for this comprehensive review.</span></div>
<div style="position:absolute;left:101.00px;top:350.49px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab comprehensive-review start</span></div>
<div style="position:absolute;left:102.00px;top:378.27px" class="cls_011"><span class="cls_011">The lab files are located in the </span><span class="cls_021">/home/student/DO180/labs/comprehensive-review</span></div>
<div style="position:absolute;left:102.00px;top:390.27px" class="cls_011"><span class="cls_011">directory. The solution files are located in the </span><span class="cls_021">/home/student/DO180/solutions/</span></div>
<div style="position:absolute;left:102.00px;top:402.27px" class="cls_021"><span class="cls_021">comprehensive-review</span><span class="cls_011"> directory.</span></div>
<div style="position:absolute;left:102.00px;top:425.33px" class="cls_043"><span class="cls_043">Instructions</span></div>
<div style="position:absolute;left:102.00px;top:443.27px" class="cls_011"><span class="cls_011">Use the following steps to create and test a containerized Nexus server both locally and in</span></div>
<div style="position:absolute;left:102.00px;top:455.27px" class="cls_011"><span class="cls_011">OpenShift:</span></div>
<div style="position:absolute;left:90.00px;top:495.33px" class="cls_002"><span class="cls_002">Steps</span></div>
<div style="position:absolute;left:90.00px;top:517.21px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:112.00px;top:517.26px" class="cls_011"><span class="cls_011">Create a container image that starts an instance of a Nexus server:</span></div>
<div style="position:absolute;left:112.00px;top:540.66px" class="cls_011"><span class="cls_011">• The </span><span class="cls_021">/home/student/DO180/labs/comprehensive-review/image</span><span class="cls_011"> directory</span></div>
<div style="position:absolute;left:121.50px;top:552.66px" class="cls_011"><span class="cls_011">contains files for building the container image. Execute the </span><span class="cls_021">get-nexus-bundle.sh</span></div>
<div style="position:absolute;left:121.50px;top:564.66px" class="cls_011"><span class="cls_011">script to retrieve the Nexus server files.</span></div>
<div style="position:absolute;left:112.00px;top:588.06px" class="cls_011"><span class="cls_011">• Write a Dockerfile that containerizes the Nexus server. The Dockerfile must be located in</span></div>
<div style="position:absolute;left:121.50px;top:600.06px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">/home/student/DO180/labs/comprehensive-review/image</span><span class="cls_011"> directory. The</span></div>
<div style="position:absolute;left:121.50px;top:612.06px" class="cls_011"><span class="cls_011">Dockerfile must also:</span></div>
<div style="position:absolute;left:121.50px;top:635.46px" class="cls_011"><span class="cls_011">- Use a base image of </span><span class="cls_021">ubi7/ubi:7.7</span><span class="cls_011"> and set an arbitrary maintainer.</span></div>
<div style="position:absolute;left:121.50px;top:658.86px" class="cls_011"><span class="cls_011">- Set the environment variable </span><span class="cls_021">NEXUS_VERSION</span><span class="cls_011"> to </span><span class="cls_021">2.14.3-02</span><span class="cls_011">, and set </span><span class="cls_021">NEXUS_HOME</span><span class="cls_011"> to</span></div>
<div style="position:absolute;left:131.00px;top:670.86px" class="cls_021"><span class="cls_021">/opt/nexus</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:121.50px;top:694.26px" class="cls_011"><span class="cls_011">- Install the java-1.8.0-openjdk-devel package</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">296</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:251828px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background315.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 9 |</span><span class="cls_019"> Comprehensive Review</span></div>
<div style="position:absolute;left:149.00px;top:53.98px" class="cls_011"><span class="cls_011">The RPM repositories are configured in the provided </span><span class="cls_021">training.repo</span><span class="cls_011"> file. Be sure to</span></div>
<div style="position:absolute;left:149.00px;top:65.98px" class="cls_011"><span class="cls_011">add this file to the container in the </span><span class="cls_021">/etc/yum.repos.d</span><span class="cls_011"> directory.</span></div>
<div style="position:absolute;left:139.50px;top:89.38px" class="cls_011"><span class="cls_011">- Run a command to create a </span><span class="cls_021">nexus</span><span class="cls_011"> user and group. They both have a UID and GID of</span></div>
<div style="position:absolute;left:149.00px;top:101.38px" class="cls_021"><span class="cls_021">1001</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:139.50px;top:124.78px" class="cls_011"><span class="cls_011">- Unpack the </span><span class="cls_021">nexus-2.14.3-02-bundle.tar.gz</span><span class="cls_011"> file to the </span><span class="cls_021">${NEXUS_HOME}/</span></div>
<div style="position:absolute;left:149.00px;top:136.78px" class="cls_011"><span class="cls_011">directory. Add the</span><span class="cls_021">nexus-start.sh</span><span class="cls_011"> to the same directory.</span></div>
<div style="position:absolute;left:149.00px;top:158.28px" class="cls_011"><span class="cls_011">Run a command, </span><span class="cls_021">ln -s ${NEXUS_HOME}/nexus-${NEXUS_VERSION}</span></div>
<div style="position:absolute;left:149.00px;top:170.28px" class="cls_021"><span class="cls_021">${NEXUS_HOME}/nexus2</span><span class="cls_011">, to create a symlink in the container. Run a command to</span></div>
<div style="position:absolute;left:149.00px;top:182.28px" class="cls_011"><span class="cls_011">recursively change the ownership of the Nexus home directory to </span><span class="cls_021">nexus:nexus</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:139.50px;top:205.68px" class="cls_011"><span class="cls_011">- Make the container run as the </span><span class="cls_021">nexus</span><span class="cls_011"> user, and set the working directory to </span><span class="cls_021">/opt/</span></div>
<div style="position:absolute;left:149.00px;top:217.68px" class="cls_021"><span class="cls_021">nexus</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:139.50px;top:241.08px" class="cls_011"><span class="cls_011">- Define a volume mount point for the </span><span class="cls_021">/opt/nexus/sonatype-work</span><span class="cls_011"> container</span></div>
<div style="position:absolute;left:149.00px;top:253.08px" class="cls_011"><span class="cls_011">directory. The Nexus server stores data in this directory.</span></div>
<div style="position:absolute;left:139.50px;top:276.48px" class="cls_011"><span class="cls_011">- Set the default container command to </span><span class="cls_021">nexus-start.sh</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:139.50px;top:297.98px" class="cls_011"><span class="cls_011">There are two </span><span class="cls_021">*.snippet</span><span class="cls_011"> files in the </span><span class="cls_021">/home/student/DO180/labs/comprehensive-</span></div>
<div style="position:absolute;left:139.50px;top:309.98px" class="cls_021"><span class="cls_021">review/images</span><span class="cls_011"> directory that provide the commands needed to create the nexus</span></div>
<div style="position:absolute;left:139.50px;top:321.98px" class="cls_011"><span class="cls_011">account and install Java. Use the files to assist you in writing the Dockerfile.</span></div>
<div style="position:absolute;left:130.00px;top:345.38px" class="cls_011"><span class="cls_011">• Build the container image with the name </span><span class="cls_021">nexus</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:130.00px;top:369.78px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:154.70px;top:369.78px" class="cls_011"><span class="cls_011">Execute the </span><span class="cls_021">get-nexus-bundle.sh</span><span class="cls_011"> script to retrieve the Nexus server files.</span></div>
<div style="position:absolute;left:119.00px;top:397.49px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd /home/student/DO180/labs/comprehensive-review/image</span></div>
<div style="position:absolute;left:119.00px;top:409.49px" class="cls_026"><span class="cls_026">[student@workstation image]$ </span><span class="cls_027">./get-nexus-bundle.sh</span></div>
<div style="position:absolute;left:119.00px;top:421.49px" class="cls_026"><span class="cls_026">######################################################################## 100.0%</span></div>
<div style="position:absolute;left:119.00px;top:433.49px" class="cls_026"><span class="cls_026">Nexus bundle download successful</span></div>
<div style="position:absolute;left:130.00px;top:464.17px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:154.70px;top:464.17px" class="cls_011"><span class="cls_011">Write a Dockerfile that containerizes the Nexus server. Go to the </span><span class="cls_021">/home/student/</span></div>
<div style="position:absolute;left:154.70px;top:476.16px" class="cls_021"><span class="cls_021">DO180/labs/comprehensive-review/image</span><span class="cls_011"> directory and create the Dockerfile.</span></div>
<div style="position:absolute;left:154.70px;top:499.56px" class="cls_011"><span class="cls_011">1.2.1.  Specify the base image to use:</span></div>
<div style="position:absolute;left:119.00px;top:527.28px" class="cls_026"><span class="cls_026">FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:154.70px;top:556.96px" class="cls_011"><span class="cls_011">1.2.2. Enter an arbitrary name and email as the maintainer:</span></div>
<div style="position:absolute;left:119.00px;top:584.67px" class="cls_026"><span class="cls_026">FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:119.00px;top:608.67px" class="cls_026"><span class="cls_026">MAINTAINER </span><span class="cls_029">username &lt;username@example.com></span></div>
<div style="position:absolute;left:154.70px;top:638.35px" class="cls_011"><span class="cls_011">1.2.3. Set a build argument for </span><span class="cls_021">NEXUS_VERSION</span><span class="cls_011"> and an environment variable for</span></div>
<div style="position:absolute;left:179.40px;top:650.35px" class="cls_021"><span class="cls_021">NEXUS_HOME</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.13px;top:751.59px" class="cls_013"><span class="cls_013">297</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:252630px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background316.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 9 |</span><span class="cls_019"> Comprehensive Review</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:101.00px;top:85.69px" class="cls_026"><span class="cls_026">MAINTAINER </span><span class="cls_029">username &lt;username@example.com></span></div>
<div style="position:absolute;left:101.00px;top:109.69px" class="cls_026"><span class="cls_026">ARG NEXUS_VERSION=2.14.3-02</span></div>
<div style="position:absolute;left:101.00px;top:121.69px" class="cls_026"><span class="cls_026">ENV NEXUS_HOME=/opt/nexus</span></div>
<div style="position:absolute;left:136.70px;top:151.36px" class="cls_011"><span class="cls_011">1.2.4. Add the </span><span class="cls_021">training.repo</span><span class="cls_011"> repository to the </span><span class="cls_021">/etc/yum.repos.d</span><span class="cls_011"> directory.</span></div>
<div style="position:absolute;left:161.40px;top:163.36px" class="cls_011"><span class="cls_011">Install the Java package using </span><span class="cls_021">yum</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:101.00px;top:203.08px" class="cls_026"><span class="cls_026">ARG NEXUS_VERSION=2.14.3-02</span></div>
<div style="position:absolute;left:101.00px;top:215.07px" class="cls_026"><span class="cls_026">ENV NEXUS_HOME=/opt/nexus</span></div>
<div style="position:absolute;left:101.00px;top:239.07px" class="cls_026"><span class="cls_026">RUN yum install -y --setopt=tsflags=nodocs java-1.8.0-openjdk-devel && \</span></div>
<div style="position:absolute;left:120.20px;top:251.07px" class="cls_026"><span class="cls_026">yum clean all -y</span></div>
<div style="position:absolute;left:136.70px;top:280.75px" class="cls_011"><span class="cls_011">1.2.5. Create the server home directory and service account and group. Make home</span></div>
<div style="position:absolute;left:161.40px;top:292.75px" class="cls_011"><span class="cls_011">directory owned by the service account.</span></div>
<div style="position:absolute;left:101.00px;top:332.46px" class="cls_026"><span class="cls_026">RUN groupadd -r nexus -f -g 1001 && \</span></div>
<div style="position:absolute;left:120.20px;top:344.46px" class="cls_026"><span class="cls_026">useradd -u 1001 -r -g nexus -m -d ${NEXUS_HOME} -s /sbin/nologin \</span></div>
<div style="position:absolute;left:158.60px;top:356.46px" class="cls_026"><span class="cls_026">-c "Nexus User" nexus && \</span></div>
<div style="position:absolute;left:120.20px;top:368.45px" class="cls_026"><span class="cls_026">chown -R nexus:nexus ${NEXUS_HOME} && \</span></div>
<div style="position:absolute;left:120.20px;top:380.45px" class="cls_026"><span class="cls_026">chmod -R 755</span></div>
<div style="position:absolute;left:182.60px;top:380.45px" class="cls_026"><span class="cls_026">${NEXUS_HOME}</span></div>
<div style="position:absolute;left:136.70px;top:410.13px" class="cls_011"><span class="cls_011">1.2.6. Make the container run as the </span><span class="cls_021">nexus</span><span class="cls_011"> user.</span></div>
<div style="position:absolute;left:101.00px;top:449.85px" class="cls_026"><span class="cls_026">USER nexus</span></div>
<div style="position:absolute;left:136.70px;top:479.53px" class="cls_011"><span class="cls_011">1.2.7.  Install the Nexus server software at </span><span class="cls_021">NEXUS_HOME</span><span class="cls_011"> and add the startup script.</span></div>
<div style="position:absolute;left:161.40px;top:491.52px" class="cls_011"><span class="cls_011">Note that the </span><span class="cls_021">ADD</span><span class="cls_011"> directive will extract the Nexus files.</span></div>
<div style="position:absolute;left:161.40px;top:507.52px" class="cls_011"><span class="cls_011">Create the </span><span class="cls_021">nexus2</span><span class="cls_011"> symbolic link pointing to the Nexus server directory.</span></div>
<div style="position:absolute;left:161.40px;top:519.52px" class="cls_011"><span class="cls_011">Recursively change the ownership of the </span><span class="cls_021">${NEXUS_HOME}</span><span class="cls_011"> directory to</span></div>
<div style="position:absolute;left:161.40px;top:531.52px" class="cls_021"><span class="cls_021">nexus:nexus</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:101.00px;top:571.23px" class="cls_026"><span class="cls_026">ADD nexus-${NEXUS_VERSION}-bundle.tar.gz ${NEXUS_HOME}</span></div>
<div style="position:absolute;left:101.00px;top:583.23px" class="cls_026"><span class="cls_026">ADD nexus-start.sh ${NEXUS_HOME}/</span></div>
<div style="position:absolute;left:101.00px;top:607.23px" class="cls_026"><span class="cls_026">RUN ln -s ${NEXUS_HOME}/nexus-${NEXUS_VERSION} \</span></div>
<div style="position:absolute;left:149.00px;top:619.22px" class="cls_026"><span class="cls_026">${NEXUS_HOME}/nexus2</span></div>
<div style="position:absolute;left:136.70px;top:648.90px" class="cls_011"><span class="cls_011">1.2.8. Make </span><span class="cls_021">/opt/nexus</span><span class="cls_011"> the current working directory:</span></div>
<div style="position:absolute;left:101.00px;top:688.62px" class="cls_026"><span class="cls_026">WORKDIR ${NEXUS_HOME}</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">298</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:253432px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background317.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 9 |</span><span class="cls_019"> Comprehensive Review</span></div>
<div style="position:absolute;left:154.70px;top:53.98px" class="cls_011"><span class="cls_011">1.2.9. Define a volume mount point to store the Nexus server persistent data:</span></div>
<div style="position:absolute;left:119.00px;top:93.69px" class="cls_026"><span class="cls_026">VOLUME ["/opt/nexus/sonatype-work"]</span></div>
<div style="position:absolute;left:154.70px;top:120.71px" class="cls_011"><span class="cls_011">1.2.10. Set the </span><span class="cls_021">CMD</span><span class="cls_011"> instruction to </span><span class="cls_021">["sh", "nexus-start.sh"]</span><span class="cls_011">. The completed</span></div>
<div style="position:absolute;left:179.40px;top:132.71px" class="cls_011"><span class="cls_011">Dockerfile reads as follows:</span></div>
<div style="position:absolute;left:119.00px;top:160.43px" class="cls_026"><span class="cls_026">FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:119.00px;top:184.42px" class="cls_026"><span class="cls_026">MAINTAINER username &lt;username@example.com></span></div>
<div style="position:absolute;left:119.00px;top:208.42px" class="cls_026"><span class="cls_026">ARG NEXUS_VERSION=2.14.3-02</span></div>
<div style="position:absolute;left:119.00px;top:220.42px" class="cls_026"><span class="cls_026">ENV NEXUS_HOME=/opt/nexus</span></div>
<div style="position:absolute;left:119.00px;top:244.41px" class="cls_026"><span class="cls_026">RUN yum install -y --setopt=tsflags=nodocs java-1.8.0-openjdk-devel && \</span></div>
<div style="position:absolute;left:138.20px;top:256.41px" class="cls_026"><span class="cls_026">yum clean all -y</span></div>
<div style="position:absolute;left:119.00px;top:280.41px" class="cls_026"><span class="cls_026">RUN groupadd -r nexus -f -g 1001 && \</span></div>
<div style="position:absolute;left:138.20px;top:292.40px" class="cls_026"><span class="cls_026">useradd -u 1001 -r -g nexus -m -d ${NEXUS_HOME} -s /sbin/nologin \</span></div>
<div style="position:absolute;left:176.60px;top:304.40px" class="cls_026"><span class="cls_026">-c "Nexus User" nexus && \</span></div>
<div style="position:absolute;left:138.20px;top:316.40px" class="cls_026"><span class="cls_026">chown -R nexus:nexus ${NEXUS_HOME} && \</span></div>
<div style="position:absolute;left:138.20px;top:328.40px" class="cls_026"><span class="cls_026">chmod -R 755</span></div>
<div style="position:absolute;left:200.60px;top:328.40px" class="cls_026"><span class="cls_026">${NEXUS_HOME}</span></div>
<div style="position:absolute;left:119.00px;top:352.39px" class="cls_026"><span class="cls_026">USER nexus</span></div>
<div style="position:absolute;left:119.00px;top:376.39px" class="cls_026"><span class="cls_026">ADD nexus-${NEXUS_VERSION}-bundle.tar.gz ${NEXUS_HOME}</span></div>
<div style="position:absolute;left:119.00px;top:388.39px" class="cls_026"><span class="cls_026">ADD nexus-start.sh ${NEXUS_HOME}/</span></div>
<div style="position:absolute;left:119.00px;top:412.38px" class="cls_026"><span class="cls_026">RUN ln -s ${NEXUS_HOME}/nexus-${NEXUS_VERSION} \</span></div>
<div style="position:absolute;left:167.00px;top:424.38px" class="cls_026"><span class="cls_026">${NEXUS_HOME}/nexus2</span></div>
<div style="position:absolute;left:119.00px;top:448.38px" class="cls_026"><span class="cls_026">WORKDIR ${NEXUS_HOME}</span></div>
<div style="position:absolute;left:119.00px;top:472.37px" class="cls_026"><span class="cls_026">VOLUME ["/opt/nexus/sonatype-work"]</span></div>
<div style="position:absolute;left:119.00px;top:496.37px" class="cls_026"><span class="cls_026">CMD ["sh", "nexus-start.sh"]</span></div>
<div style="position:absolute;left:130.00px;top:524.39px" class="cls_011"><span class="cls_011">1.3.</span></div>
<div style="position:absolute;left:154.70px;top:524.39px" class="cls_011"><span class="cls_011">Build the container image with the name </span><span class="cls_021">nexus</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:552.11px" class="cls_026"><span class="cls_026">[student@workstation image]$ </span><span class="cls_027">sudo podman build --layers=false -t nexus .</span></div>
<div style="position:absolute;left:119.00px;top:564.10px" class="cls_026"><span class="cls_026">STEP 1: FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:119.00px;top:576.10px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:119.00px;top:588.10px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:600.10px" class="cls_026"><span class="cls_026">STEP 14: COMMIT </span><span class="cls_029">...output omitted...</span><span class="cls_026">localhost/nexus:latest</span></div>
<div style="position:absolute;left:119.00px;top:612.10px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:108.00px;top:639.06px" class="cls_022"><span class="cls_022">2.</span></div>
<div style="position:absolute;left:130.00px;top:639.12px" class="cls_011"><span class="cls_011">Build and test the container image using Podman with a volume mount:</span></div>
<div style="position:absolute;left:130.00px;top:659.86px" class="cls_011"><span class="cls_011">• Use the script </span><span class="cls_021">/home/student/DO180/labs/comprehensive-review/deploy/</span></div>
<div style="position:absolute;left:139.50px;top:671.86px" class="cls_021"><span class="cls_021">local/run-persistent.sh</span><span class="cls_011"> to start a new container with a volume mount.</span></div>
<div style="position:absolute;left:130.00px;top:692.60px" class="cls_011"><span class="cls_011">• Review the container logs to verify that the server is started and running.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:502.93px;top:751.59px" class="cls_013"><span class="cls_013">299</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:254234px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background318.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 9 |</span><span class="cls_019"> Comprehensive Review</span></div>
<div style="position:absolute;left:112.00px;top:53.98px" class="cls_011"><span class="cls_011">• Test access to the container service using the URL: </span><span class="cls_021">http://</span><span class="cls_028">&lt;container IP</span></div>
<div style="position:absolute;left:121.50px;top:65.98px" class="cls_028"><span class="cls_028">address></span><span class="cls_021">:8081/nexus</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:112.00px;top:87.07px" class="cls_011"><span class="cls_011">• Remove the test container.</span></div>
<div style="position:absolute;left:112.00px;top:109.16px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:136.70px;top:109.16px" class="cls_011"><span class="cls_011">Execute the </span><span class="cls_021">run-persistent.sh</span><span class="cls_011"> script. Replace the container name as shown in the</span></div>
<div style="position:absolute;left:136.70px;top:121.16px" class="cls_011"><span class="cls_011">output of the </span><span class="cls_021">podman ps</span><span class="cls_011"> command.</span></div>
<div style="position:absolute;left:101.00px;top:148.87px" class="cls_026"><span class="cls_026">[student@workstation images]$ </span><span class="cls_027">cd /home/student/DO180/labs/comprehensive-review</span></div>
<div style="position:absolute;left:101.00px;top:160.87px" class="cls_026"><span class="cls_026">[student@workstation comprehensive-review]$ </span><span class="cls_027">cd deploy/local</span></div>
<div style="position:absolute;left:101.00px;top:172.87px" class="cls_026"><span class="cls_026">[student@workstation local]$ </span><span class="cls_027">./run-persistent.sh</span></div>
<div style="position:absolute;left:101.00px;top:184.87px" class="cls_026"><span class="cls_026">80970007036bbb313d8eeb7621fada0ed3f0b4115529dc50da4dccef0da34533</span></div>
<div style="position:absolute;left:112.00px;top:213.24px" class="cls_011"><span class="cls_011">2.2.   Review the container logs to verify that the server is started and running.</span></div>
<div style="position:absolute;left:101.00px;top:240.95px" class="cls_026"><span class="cls_026">[student@workstation local]$ </span><span class="cls_027">sudo podman ps \</span></div>
<div style="position:absolute;left:101.00px;top:252.95px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">--format="{{.ID}} {{.Names}} {{.Image}}"</span></div>
<div style="position:absolute;left:101.00px;top:264.95px" class="cls_026"><span class="cls_026">81f480f21d47   inspiring_poincare   localhost/nexus:latest</span></div>
<div style="position:absolute;left:101.00px;top:276.95px" class="cls_026"><span class="cls_026">[student@workstation local]$ </span><span class="cls_027">sudo podman logs </span><span class="cls_040">inspiring_poincare</span></div>
<div style="position:absolute;left:101.00px;top:288.95px" class="cls_029"><span class="cls_029">...output omitted</span></div>
<div style="position:absolute;left:101.00px;top:300.94px" class="cls_026"><span class="cls_026">... INFO</span></div>
<div style="position:absolute;left:149.00px;top:300.94px" class="cls_026"><span class="cls_026">[jetty-main-1] ...jetty.JettyServer - Running</span></div>
<div style="position:absolute;left:101.00px;top:312.94px" class="cls_026"><span class="cls_026">... INFO</span></div>
<div style="position:absolute;left:149.00px;top:312.94px" class="cls_026"><span class="cls_026">[main] ...jetty.JettyServer - Started</span></div>
<div style="position:absolute;left:112.00px;top:341.31px" class="cls_011"><span class="cls_011">2.3.   Inspect the running container to determine its IP address. Provide this IP address to the</span></div>
<div style="position:absolute;left:136.70px;top:353.31px" class="cls_021"><span class="cls_021">curl</span><span class="cls_011"> command to test the container.</span></div>
<div style="position:absolute;left:101.00px;top:381.03px" class="cls_026"><span class="cls_026">[student@workstation local]$ </span><span class="cls_027">sudo podman inspect \</span></div>
<div style="position:absolute;left:101.00px;top:393.02px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-f '{{.NetworkSettings.IPAddress}}' </span><span class="cls_040">inspiring_poincare</span></div>
<div style="position:absolute;left:101.00px;top:405.02px" class="cls_026"><span class="cls_026">10.88.0.12</span></div>
<div style="position:absolute;left:101.00px;top:417.02px" class="cls_026"><span class="cls_026">[student@workstation local]$ </span><span class="cls_027">curl -v </span><span class="cls_040">10.88.0.12</span><span class="cls_027">:8081/nexus/ 2>&1 \</span></div>
<div style="position:absolute;left:101.00px;top:429.02px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">| grep -E 'HTTP|&lt;title>'</span></div>
<div style="position:absolute;left:101.00px;top:441.02px" class="cls_026"><span class="cls_026">> GET /nexus/ HTTP/1.1</span></div>
<div style="position:absolute;left:101.00px;top:453.01px" class="cls_026"><span class="cls_026">&lt; HTTP/1.1 200 OK</span></div>
<div style="position:absolute;left:110.60px;top:465.01px" class="cls_026"><span class="cls_026">&lt;title>Nexus Repository Manager&lt;/title></span></div>
<div style="position:absolute;left:112.00px;top:493.38px" class="cls_011"><span class="cls_011">2.4.  Remove the test container.</span></div>
<div style="position:absolute;left:101.00px;top:521.10px" class="cls_026"><span class="cls_026">[student@workstation local]$ </span><span class="cls_027">sudo podman kill </span><span class="cls_040">inspiring_poincare</span></div>
<div style="position:absolute;left:101.00px;top:533.10px" class="cls_026"><span class="cls_026">81f480f21d475af683b4b003ca6e002d37e6aaa581393d3f2f95a1a7b7eb768b</span></div>
<div style="position:absolute;left:90.00px;top:560.41px" class="cls_022"><span class="cls_022">3.</span></div>
<div style="position:absolute;left:112.00px;top:560.47px" class="cls_011"><span class="cls_011">Deploy the Nexus server container image to the OpenShift cluster. You must:</span></div>
<div style="position:absolute;left:112.00px;top:581.56px" class="cls_011"><span class="cls_011">• Tag the Nexus server container image as </span><span class="cls_021">quay.io/${RHT_OCP4_QUAY_USER}/</span></div>
<div style="position:absolute;left:121.50px;top:593.56px" class="cls_021"><span class="cls_021">nexus:latest</span><span class="cls_011">, and push it the private registry.</span></div>
<div style="position:absolute;left:112.00px;top:614.65px" class="cls_011"><span class="cls_011">• Create an OpenShift project with a name of </span><span class="cls_021">${RHT_OCP4_DEV_USER}-review</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:112.00px;top:635.74px" class="cls_011"><span class="cls_011">• Process the </span><span class="cls_021">deploy/openshift/resources/nexus-template.json</span><span class="cls_011"> template and</span></div>
<div style="position:absolute;left:121.50px;top:647.74px" class="cls_011"><span class="cls_011">create the Kubernetes resources.</span></div>
<div style="position:absolute;left:112.00px;top:668.83px" class="cls_011"><span class="cls_011">• Create a route for the Nexus service. Verify that you can access </span><A HREF="http://nexus-/">http://nexus-</A> </span></div>
<div style="position:absolute;left:121.50px;top:680.83px" class="cls_021"><span class="cls_021">${RHT_OCP4_DEV_USER}-review.${RHT_OCP4_WILDCARD_DOMAIN}/nexus/</span><span class="cls_011"> from</span></div>
<div style="position:absolute;left:121.50px;top:692.83px" class="cls_021"><span class="cls_021">workstation</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">300</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:255036px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background319.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 9 |</span><span class="cls_019"> Comprehensive Review</span></div>
<div style="position:absolute;left:130.00px;top:54.98px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:154.70px;top:54.98px" class="cls_011"><span class="cls_011">Log in to your Quay.io account.</span></div>
<div style="position:absolute;left:119.00px;top:82.69px" class="cls_026"><span class="cls_026">[student@workstation local]$ </span><span class="cls_027">sudo podman login -u ${RHT_OCP4_QUAY_USER} quay.io</span></div>
<div style="position:absolute;left:119.00px;top:94.69px" class="cls_026"><span class="cls_026">Password: </span><span class="cls_029">your_quay_password</span></div>
<div style="position:absolute;left:119.00px;top:106.69px" class="cls_026"><span class="cls_026">Login Succeeded!</span></div>
<div style="position:absolute;left:130.00px;top:135.66px" class="cls_011"><span class="cls_011">3.2.   Publish the Nexus server container image to your </span><span class="cls_021">quay.io</span><span class="cls_011"> registry.</span></div>
<div style="position:absolute;left:119.00px;top:163.38px" class="cls_026"><span class="cls_026">[student@workstation local]$ </span><span class="cls_027">sudo podman push localhost/nexus:latest \</span></div>
<div style="position:absolute;left:119.00px;top:175.38px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">quay.io/${RHT_OCP4_QUAY_USER}/nexus:latest</span></div>
<div style="position:absolute;left:119.00px;top:187.38px" class="cls_026"><span class="cls_026">Getting image source signatures</span></div>
<div style="position:absolute;left:119.00px;top:199.38px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:211.37px" class="cls_026"><span class="cls_026">Writing manifest to image destination</span></div>
<div style="position:absolute;left:119.00px;top:223.37px" class="cls_026"><span class="cls_026">Storing signatures</span></div>
<div style="position:absolute;left:130.00px;top:252.35px" class="cls_011"><span class="cls_011">3.3.  Repositories created by pushing images to </span><span class="cls_021">quay.io</span><span class="cls_011"> are private by default. Refer to</span></div>
<div style="position:absolute;left:154.70px;top:264.34px" class="cls_011"><span class="cls_011">the </span><span class="cls_021">Repositories Visibility</span><span class="cls_011">section of the Appendix C to read details about how</span></div>
<div style="position:absolute;left:154.70px;top:276.34px" class="cls_011"><span class="cls_011">change repository visibility.</span></div>
<div style="position:absolute;left:130.00px;top:299.04px" class="cls_011"><span class="cls_011">3.4.  Create the OpenShift project:</span></div>
<div style="position:absolute;left:119.00px;top:326.75px" class="cls_026"><span class="cls_026">[student@workstation local]$ </span><span class="cls_027">cd ~/DO180/labs/comprehensive-review/deploy/openshift</span></div>
<div style="position:absolute;left:119.00px;top:338.75px" class="cls_026"><span class="cls_026">[student@workstation openshift]$ </span><span class="cls_027">oc login -u ${RHT_OCP4_DEV_USER} \</span></div>
<div style="position:absolute;left:119.00px;top:350.75px" class="cls_026"><span class="cls_026">></span></div>
<div style="position:absolute;left:133.40px;top:350.75px" class="cls_027"><span class="cls_027">-p ${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}</span></div>
<div style="position:absolute;left:119.00px;top:362.75px" class="cls_026"><span class="cls_026">Login successful.</span></div>
<div style="position:absolute;left:119.00px;top:374.74px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:386.74px" class="cls_026"><span class="cls_026">[student@workstation openshift]$ </span><span class="cls_027">oc new-project ${RHT_OCP4_DEV_USER}-review</span></div>
<div style="position:absolute;left:119.00px;top:398.74px" class="cls_026"><span class="cls_026">Now using project </span><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:130.00px;top:427.72px" class="cls_011"><span class="cls_011">3.5.   Process the template and create the Kubernetes resources:</span></div>
<div style="position:absolute;left:119.00px;top:455.43px" class="cls_026"><span class="cls_026">[student@workstation openshift]$ </span><span class="cls_027">oc process -f resources/nexus-template.json \</span></div>
<div style="position:absolute;left:119.00px;top:467.43px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">-p RHT_OCP4_QUAY_USER=${RHT_OCP4_QUAY_USER} \</span></div>
<div style="position:absolute;left:119.00px;top:479.43px" class="cls_026"><span class="cls_026">></span></div>
<div style="position:absolute;left:133.40px;top:479.43px" class="cls_027"><span class="cls_027">| oc create -f -</span></div>
<div style="position:absolute;left:119.00px;top:491.43px" class="cls_026"><span class="cls_026">service/nexus created</span></div>
<div style="position:absolute;left:119.00px;top:503.42px" class="cls_026"><span class="cls_026">persistentvolumeclaim/nexus created</span></div>
<div style="position:absolute;left:119.00px;top:515.42px" class="cls_026"><span class="cls_026">deploymentconfig.apps.openshift.io/nexus created</span></div>
<div style="position:absolute;left:119.00px;top:527.42px" class="cls_026"><span class="cls_026">[student@workstation openshift]$ </span><span class="cls_027">oc get pods</span></div>
<div style="position:absolute;left:119.00px;top:539.42px" class="cls_026"><span class="cls_026">NAME</span></div>
<div style="position:absolute;left:200.60px;top:539.42px" class="cls_026"><span class="cls_026">READY   STATUS</span></div>
<div style="position:absolute;left:296.60px;top:539.42px" class="cls_026"><span class="cls_026">RESTARTS   AGE</span></div>
<div style="position:absolute;left:119.00px;top:551.42px" class="cls_026"><span class="cls_026">nexus-1-wk8rv</span></div>
<div style="position:absolute;left:200.60px;top:551.42px" class="cls_026"><span class="cls_026">1/1</span></div>
<div style="position:absolute;left:239.00px;top:551.42px" class="cls_026"><span class="cls_026">Running</span></div>
<div style="position:absolute;left:296.60px;top:551.42px" class="cls_026"><span class="cls_026">1</span></div>
<div style="position:absolute;left:349.40px;top:551.42px" class="cls_026"><span class="cls_026">1m</span></div>
<div style="position:absolute;left:119.00px;top:563.41px" class="cls_026"><span class="cls_026">nexus-1-deploy</span></div>
<div style="position:absolute;left:200.60px;top:563.41px" class="cls_026"><span class="cls_026">0/1</span></div>
<div style="position:absolute;left:239.00px;top:563.41px" class="cls_026"><span class="cls_026">Completed</span></div>
<div style="position:absolute;left:296.60px;top:563.41px" class="cls_026"><span class="cls_026">0</span></div>
<div style="position:absolute;left:349.40px;top:563.41px" class="cls_026"><span class="cls_026">2m</span></div>
<div style="position:absolute;left:130.00px;top:592.39px" class="cls_011"><span class="cls_011">3.6.  Expose the service by creating a route:</span></div>
<div style="position:absolute;left:119.00px;top:620.11px" class="cls_026"><span class="cls_026">[student@workstation openshift]$ </span><span class="cls_027">oc expose svc/nexus</span></div>
<div style="position:absolute;left:119.00px;top:632.10px" class="cls_026"><span class="cls_026">route.route.openshift.io/nexus exposed.</span></div>
<div style="position:absolute;left:119.00px;top:644.10px" class="cls_026"><span class="cls_026">[student@workstation openshift]$ </span><span class="cls_027">oc get route -o yaml</span></div>
<div style="position:absolute;left:119.00px;top:656.10px" class="cls_026"><span class="cls_026">apiVersion: v1</span></div>
<div style="position:absolute;left:119.00px;top:668.10px" class="cls_026"><span class="cls_026">items:</span></div>
<div style="position:absolute;left:119.00px;top:680.10px" class="cls_026"><span class="cls_026">- apiVersion: route.openshift.io/v1</span></div>
<div style="position:absolute;left:128.60px;top:692.09px" class="cls_026"><span class="cls_026">kind: Route</span></div>
<div style="position:absolute;left:119.00px;top:704.09px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.28px;top:751.59px" class="cls_013"><span class="cls_013">301</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:255838px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background320.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Chapter 9 |</span><span class="cls_019"> Comprehensive Review</span></div>
<div style="position:absolute;left:110.60px;top:53.69px" class="cls_026"><span class="cls_026">spec:</span></div>
<div style="position:absolute;left:120.20px;top:65.69px" class="cls_026"><span class="cls_026">host: nexus-${RHT_OCP4_DEV_USER}-review.${RHT_OCP4_WILDCARD_DOMAIN}</span></div>
<div style="position:absolute;left:101.00px;top:77.69px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:112.00px;top:106.47px" class="cls_011"><span class="cls_011">3.7.   Use a browser to connect to the Nexus server web application at </span><A HREF="http://nexus-/">http://nexus-</A> </span></div>
<div style="position:absolute;left:136.70px;top:118.47px" class="cls_021"><span class="cls_021">${RHT_OCP4_DEV_USER}-review.${RHT_OCP4_WILDCARD_DOMAIN}/nexus/</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:90.00px;top:142.53px" class="cls_002"><span class="cls_002">Evaluation</span></div>
<div style="position:absolute;left:90.00px;top:164.47px" class="cls_011"><span class="cls_011">After deploying the Nexus server container image to the OpenShift cluster, verify your work by</span></div>
<div style="position:absolute;left:90.00px;top:176.46px" class="cls_011"><span class="cls_011">running the lab grading script:</span></div>
<div style="position:absolute;left:101.00px;top:204.18px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab comprehensive-review grade</span></div>
<div style="position:absolute;left:90.00px;top:234.52px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:256.46px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab comprehensive-review finish</span><span class="cls_011"> command to complete this</span></div>
<div style="position:absolute;left:90.00px;top:268.46px" class="cls_011"><span class="cls_011">lab.</span></div>
<div style="position:absolute;left:101.00px;top:296.17px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab comprehensive-review finish</span></div>
<div style="position:absolute;left:90.00px;top:323.95px" class="cls_011"><span class="cls_011">This concludes the lab.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">302</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:256640px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background321.jpg" width=612 height=792></div>
<div style="position:absolute;left:126.00px;top:321.76px" class="cls_030"><span class="cls_030">Appendix A</span></div>
<div style="position:absolute;left:126.00px;top:400.50px" class="cls_031"><span class="cls_031">Implementing Microservices</span></div>
<div style="position:absolute;left:126.00px;top:427.50px" class="cls_031"><span class="cls_031">Architecture</span></div>
<div style="position:absolute;left:146.00px;top:480.67px" class="cls_018"><span class="cls_018">Goal</span></div>
<div style="position:absolute;left:260.00px;top:480.01px" class="cls_008"><span class="cls_008">Refactor an application into microservices.</span></div>
<div style="position:absolute;left:146.00px;top:512.67px" class="cls_018"><span class="cls_018">Objectives</span></div>
<div style="position:absolute;left:260.00px;top:512.01px" class="cls_008"><span class="cls_008">•  Divide an application across multiple</span></div>
<div style="position:absolute;left:275.00px;top:524.01px" class="cls_008"><span class="cls_008">containers to separate distinct layers and</span></div>
<div style="position:absolute;left:275.00px;top:536.01px" class="cls_008"><span class="cls_008">services.</span></div>
<div style="position:absolute;left:146.00px;top:564.67px" class="cls_018"><span class="cls_018">Sections</span></div>
<div style="position:absolute;left:260.00px;top:564.01px" class="cls_008"><span class="cls_008">•  Implementing Microservices Architectures</span></div>
<div style="position:absolute;left:275.00px;top:576.01px" class="cls_008"><span class="cls_008">(with Guided Exercise)</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:502.36px;top:751.59px" class="cls_013"><span class="cls_013">303</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:257442px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background322.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix A |</span><span class="cls_019"> Implementing Microservices Architecture</span></div>
<div style="position:absolute;left:90.00px;top:62.06px" class="cls_014"><span class="cls_014">Implementing Microservices</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Architectures</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, you should be able to:</span></div>
<div style="position:absolute;left:90.00px;top:182.37px" class="cls_011"><span class="cls_011">• Divide an application across multiple containers to separate distinct layers and services.</span></div>
<div style="position:absolute;left:90.00px;top:205.77px" class="cls_011"><span class="cls_011">• Describe typical approaches to breaking up a monolithic application into multiple deployable</span></div>
<div style="position:absolute;left:99.50px;top:217.77px" class="cls_011"><span class="cls_011">units.</span></div>
<div style="position:absolute;left:90.00px;top:241.17px" class="cls_011"><span class="cls_011">• Describe how to break the To Do List application into three containers matching its logical tiers.</span></div>
<div style="position:absolute;left:90.00px;top:263.45px" class="cls_024"><span class="cls_024">Benefits of Breaking Up a Monolithic Application into</span></div>
<div style="position:absolute;left:90.00px;top:280.45px" class="cls_024"><span class="cls_024">Containers</span></div>
<div style="position:absolute;left:90.00px;top:305.17px" class="cls_011"><span class="cls_011">Traditional application development typically has many distinct functions packaged as a single</span></div>
<div style="position:absolute;left:90.00px;top:317.16px" class="cls_011"><span class="cls_011">deployment unit, or a monolithic application. Traditional development may also deploy supporting</span></div>
<div style="position:absolute;left:90.00px;top:329.16px" class="cls_011"><span class="cls_011">services, such as databases and other middleware services, on the same server as the application.</span></div>
<div style="position:absolute;left:90.00px;top:341.16px" class="cls_011"><span class="cls_011">While monolithic applications can still be deployed into a container, many of the advantages of a</span></div>
<div style="position:absolute;left:90.00px;top:353.16px" class="cls_011"><span class="cls_011">container architecture, such as scalability and agility, are not as prevalent. Breaking up monoliths</span></div>
<div style="position:absolute;left:90.00px;top:365.16px" class="cls_011"><span class="cls_011">requires careful consideration and it is recommended that in microservices applications each</span></div>
<div style="position:absolute;left:90.00px;top:377.15px" class="cls_011"><span class="cls_011">microservice runs the minimum functionality that can be executed in isolation on each container.</span></div>
<div style="position:absolute;left:90.00px;top:398.65px" class="cls_011"><span class="cls_011">Having smaller containers and breaking up an application and its supporting services into multiple</span></div>
<div style="position:absolute;left:90.00px;top:410.65px" class="cls_011"><span class="cls_011">containers provides many advantages, such as:</span></div>
<div style="position:absolute;left:90.00px;top:434.05px" class="cls_011"><span class="cls_011">• Higher hardware utilization, because smaller containers are easier to fit into available host</span></div>
<div style="position:absolute;left:99.50px;top:446.05px" class="cls_011"><span class="cls_011">capacity.</span></div>
<div style="position:absolute;left:90.00px;top:469.44px" class="cls_011"><span class="cls_011">• Easier scaling, because parts of the application can be scaled to support an increased workload</span></div>
<div style="position:absolute;left:99.50px;top:481.44px" class="cls_011"><span class="cls_011">without scaling other parts of the application.</span></div>
<div style="position:absolute;left:90.00px;top:504.84px" class="cls_011"><span class="cls_011">• Easier upgrades, because developers can update parts of the application without affecting</span></div>
<div style="position:absolute;left:99.50px;top:516.84px" class="cls_011"><span class="cls_011">other parts of the same application.</span></div>
<div style="position:absolute;left:90.00px;top:538.34px" class="cls_011"><span class="cls_011">Two popular ways of breaking up an application are as follows:</span></div>
<div style="position:absolute;left:90.00px;top:561.73px" class="cls_011"><span class="cls_011">• Tiers: based on architectural layers.</span></div>
<div style="position:absolute;left:90.00px;top:585.13px" class="cls_011"><span class="cls_011">• Services: based on application functionality.</span></div>
<div style="position:absolute;left:90.00px;top:607.41px" class="cls_024"><span class="cls_024">Dividing Based on Layers (Tiers)</span></div>
<div style="position:absolute;left:90.00px;top:632.13px" class="cls_011"><span class="cls_011">A common way developers organize applications is in tiers, based on how close the functions are</span></div>
<div style="position:absolute;left:90.00px;top:644.13px" class="cls_011"><span class="cls_011">to end users and how far from data stores. A good example of the traditional 3-tier architecture is</span></div>
<div style="position:absolute;left:90.00px;top:656.13px" class="cls_011"><span class="cls_011">presentation, business logic, and persistence.</span></div>
<div style="position:absolute;left:90.00px;top:677.62px" class="cls_011"><span class="cls_011">This logical architecture usually corresponds to a physical deployment architecture, where the</span></div>
<div style="position:absolute;left:90.00px;top:689.62px" class="cls_011"><span class="cls_011">presentation layer would be deployed to a web server, the business layer to an application server,</span></div>
<div style="position:absolute;left:90.00px;top:701.62px" class="cls_011"><span class="cls_011">and the persistence layer to a database server.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">304</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:258244px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background323.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix A |</span><span class="cls_019"> Implementing Microservices Architecture</span></div>
<div style="position:absolute;left:108.00px;top:53.98px" class="cls_011"><span class="cls_011">Breaking up an application into tiers allows developers to specialize in particular technologies</span></div>
<div style="position:absolute;left:108.00px;top:65.97px" class="cls_011"><span class="cls_011">based on the application's tiers. For example, some developers focus on web applications, while</span></div>
<div style="position:absolute;left:108.00px;top:77.97px" class="cls_011"><span class="cls_011">others prefer database development. Another advantage is the ability to provide alternative tier</span></div>
<div style="position:absolute;left:108.00px;top:89.97px" class="cls_011"><span class="cls_011">implementations based on different technologies; for example, creating a mobile application</span></div>
<div style="position:absolute;left:108.00px;top:101.97px" class="cls_011"><span class="cls_011">as another front end for an existing application. The mobile application would be an alternative</span></div>
<div style="position:absolute;left:108.00px;top:113.97px" class="cls_011"><span class="cls_011">presentation tier, reusing the business and persistence tiers of the original web application.</span></div>
<div style="position:absolute;left:108.00px;top:135.46px" class="cls_011"><span class="cls_011">Smaller applications usually have the presentation and business tiers deployed as a single unit. For</span></div>
<div style="position:absolute;left:108.00px;top:147.46px" class="cls_011"><span class="cls_011">example, to the same web server, but as the load increases, the presentation layer is moved to its</span></div>
<div style="position:absolute;left:108.00px;top:159.46px" class="cls_011"><span class="cls_011">own deployment unit to spread the load. Smaller applications might even embed the database.</span></div>
<div style="position:absolute;left:108.00px;top:171.46px" class="cls_011"><span class="cls_011">Developers often build and deploy more demanding applications in this monolithic fashion.</span></div>
<div style="position:absolute;left:108.00px;top:192.96px" class="cls_011"><span class="cls_011">When developers break up a monolithic application into tiers, they usually apply several changes:</span></div>
<div style="position:absolute;left:108.00px;top:216.35px" class="cls_011"><span class="cls_011">• Connection parameters to a database and other middleware services, such as messaging,</span></div>
<div style="position:absolute;left:117.50px;top:228.35px" class="cls_011"><span class="cls_011">were hard-coded to fixed IP addresses or host names, usually </span><span class="cls_021">localhost</span><span class="cls_011">. They need to</span></div>
<div style="position:absolute;left:117.50px;top:240.35px" class="cls_011"><span class="cls_011">be parameterized to point to external servers that might be different from development to</span></div>
<div style="position:absolute;left:117.50px;top:252.35px" class="cls_011"><span class="cls_011">production.</span></div>
<div style="position:absolute;left:108.00px;top:275.75px" class="cls_011"><span class="cls_011">• In the case of web applications, Ajax calls cannot be made using relative URLs. They need to use</span></div>
<div style="position:absolute;left:117.50px;top:287.74px" class="cls_011"><span class="cls_011">an absolute URL pointing to a fixed public DNS host name.</span></div>
<div style="position:absolute;left:108.00px;top:311.14px" class="cls_011"><span class="cls_011">• Modern web browsers refuse Ajax calls to servers different from the one containing the script</span></div>
<div style="position:absolute;left:117.50px;top:323.14px" class="cls_011"><span class="cls_011">that makes the call, as a security measure. The application needs to have permissions for cross-</span></div>
<div style="position:absolute;left:117.50px;top:335.14px" class="cls_011"><span class="cls_011">origin resource sharing (CORS).</span></div>
<div style="position:absolute;left:108.00px;top:356.64px" class="cls_011"><span class="cls_011">After application tiers are divided so that they can run from different servers, there should be no</span></div>
<div style="position:absolute;left:108.00px;top:368.63px" class="cls_011"><span class="cls_011">problem running them from different containers.</span></div>
<div style="position:absolute;left:108.00px;top:390.92px" class="cls_024"><span class="cls_024">Dividing Based on Discrete Services</span></div>
<div style="position:absolute;left:108.00px;top:415.63px" class="cls_011"><span class="cls_011">Most complex applications are composed of many semi-independent services. For example, an</span></div>
<div style="position:absolute;left:108.00px;top:427.63px" class="cls_011"><span class="cls_011">online store would have a product catalog, shopping cart, payment, shipping, and so on.</span></div>
<div style="position:absolute;left:108.00px;top:449.13px" class="cls_011"><span class="cls_011">When a particular service in a monolithic application degrades, scaling the service to improve</span></div>
<div style="position:absolute;left:108.00px;top:461.13px" class="cls_011"><span class="cls_011">performance implies scaling all of the other constituent application services. If however</span></div>
<div style="position:absolute;left:108.00px;top:473.12px" class="cls_011"><span class="cls_011">the degraded service is part of a microservices architecture, the affected service is scaled</span></div>
<div style="position:absolute;left:108.00px;top:485.12px" class="cls_011"><span class="cls_011">independent of the other application services. The following figure illustrates service scaling for</span></div>
<div style="position:absolute;left:108.00px;top:497.12px" class="cls_011"><span class="cls_011">both a monolithic and microservices-based architecture:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:502.45px;top:751.59px" class="cls_013"><span class="cls_013">305</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:259046px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background324.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix A |</span><span class="cls_019"> Implementing Microservices Architecture</span></div>
<div style="position:absolute;left:178.45px;top:399.86px" class="cls_020"><span class="cls_020">Figure A.1: Comparison of application scaling in a monolithic</span></div>
<div style="position:absolute;left:200.17px;top:410.86px" class="cls_020"><span class="cls_020">architecture versus a microservices architecture</span></div>
<div style="position:absolute;left:90.00px;top:433.77px" class="cls_011"><span class="cls_011">Both traditional service-oriented architectures (SOA) and more recent microservices architectures</span></div>
<div style="position:absolute;left:90.00px;top:445.77px" class="cls_011"><span class="cls_011">package and deploy those function sets as distinct units. This allows each function set to be</span></div>
<div style="position:absolute;left:90.00px;top:457.77px" class="cls_011"><span class="cls_011">developed by its own team, updated, and scaled without disturbing other function sets (or</span></div>
<div style="position:absolute;left:90.00px;top:469.77px" class="cls_011"><span class="cls_011">services). Cross-functional concerns such as authentication can also be packaged and deployed</span></div>
<div style="position:absolute;left:90.00px;top:481.77px" class="cls_011"><span class="cls_011">as services that are consumed by other service implementations.</span></div>
<div style="position:absolute;left:90.00px;top:503.26px" class="cls_011"><span class="cls_011">Splitting each concern into a separated server might result in many applications. They are logically</span></div>
<div style="position:absolute;left:90.00px;top:515.26px" class="cls_011"><span class="cls_011">architected, packaged, and deployed as a small number of units, sometimes even as a single</span></div>
<div style="position:absolute;left:90.00px;top:527.26px" class="cls_011"><span class="cls_011">monolithic unit using a service approach.</span></div>
<div style="position:absolute;left:90.00px;top:548.76px" class="cls_011"><span class="cls_011">Containers enable architectures based on services to be materialized during deployment. That is</span></div>
<div style="position:absolute;left:90.00px;top:560.76px" class="cls_011"><span class="cls_011">the reason microservices and containers usually come together. However, containers alone are not</span></div>
<div style="position:absolute;left:90.00px;top:572.75px" class="cls_011"><span class="cls_011">enough; they need to be complemented by orchestration tools to manage dependencies among</span></div>
<div style="position:absolute;left:90.00px;top:584.75px" class="cls_011"><span class="cls_011">services.</span></div>
<div style="position:absolute;left:90.00px;top:606.25px" class="cls_011"><span class="cls_011">The microservices architecture takes service-based architectures to the extreme. A service</span></div>
<div style="position:absolute;left:90.00px;top:618.25px" class="cls_011"><span class="cls_011">is as small as it can be (without breaking a function set) and is deployed and managed as an</span></div>
<div style="position:absolute;left:90.00px;top:630.24px" class="cls_011"><span class="cls_011">independent unit, instead of part of a bigger application. This allows existing microservices to be</span></div>
<div style="position:absolute;left:90.00px;top:642.24px" class="cls_011"><span class="cls_011">reused to create new applications.</span></div>
<div style="position:absolute;left:90.00px;top:663.74px" class="cls_011"><span class="cls_011">To break an application into services, it needs the same kind of change as when breaking into tiers;</span></div>
<div style="position:absolute;left:90.00px;top:675.74px" class="cls_011"><span class="cls_011">for example, parameterize connection parameters to databases and other middleware services</span></div>
<div style="position:absolute;left:90.00px;top:687.74px" class="cls_011"><span class="cls_011">and deal with web browser security protections.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">306</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:259848px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background325.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix A |</span><span class="cls_019"> Implementing Microservices Architecture</span></div>
<div style="position:absolute;left:108.00px;top:52.26px" class="cls_024"><span class="cls_024">Refactoring the To Do List Application</span></div>
<div style="position:absolute;left:108.00px;top:76.98px" class="cls_011"><span class="cls_011">The To Do List application is a simple application with a single function set, so breaking it up into</span></div>
<div style="position:absolute;left:108.00px;top:88.97px" class="cls_011"><span class="cls_011">services is not really meaningful. However, refactoring it into presentation and business tiers, that</span></div>
<div style="position:absolute;left:108.00px;top:100.97px" class="cls_011"><span class="cls_011">is, into a front end and a back end to deploy into distinct containers, illustrates the same kind of</span></div>
<div style="position:absolute;left:108.00px;top:112.97px" class="cls_011"><span class="cls_011">changes that breaking up a typical application into services would need.</span></div>
<div style="position:absolute;left:108.00px;top:134.47px" class="cls_011"><span class="cls_011">The following figure shows the To Do List application deployed into three containers, one for each</span></div>
<div style="position:absolute;left:108.00px;top:146.47px" class="cls_011"><span class="cls_011">tier:</span></div>
<div style="position:absolute;left:149.69px;top:367.59px" class="cls_020"><span class="cls_020">Figure A.2: To Do List application broken into tiers and each deployed as containers</span></div>
<div style="position:absolute;left:108.00px;top:390.51px" class="cls_011"><span class="cls_011">Comparing the source code of the original monolithic application with the refactored one, this is</span></div>
<div style="position:absolute;left:108.00px;top:402.50px" class="cls_011"><span class="cls_011">an overview of the changes:</span></div>
<div style="position:absolute;left:108.00px;top:424.00px" class="cls_011"><span class="cls_011">• The front-end JavaScript in </span><span class="cls_021">script/items.js</span><span class="cls_011"> uses </span><span class="cls_021">workstation.lab.example.com</span><span class="cls_011"> as</span></div>
<div style="position:absolute;left:117.50px;top:436.00px" class="cls_011"><span class="cls_011">the host name to reach the back end.</span></div>
<div style="position:absolute;left:108.00px;top:457.50px" class="cls_011"><span class="cls_011">• The back end uses environment variables to get the database connection parameters.</span></div>
<div style="position:absolute;left:108.00px;top:478.99px" class="cls_011"><span class="cls_011">• The back end has to reply to requests using the HTTP </span><span class="cls_021">OPTIONS</span><span class="cls_011"> verb with headers telling the</span></div>
<div style="position:absolute;left:117.50px;top:490.99px" class="cls_011"><span class="cls_011">web browser to accept requests coming from different DNS domains using CORS .</span></div>
<div style="position:absolute;left:108.00px;top:512.49px" class="cls_011"><span class="cls_011">Other versions of the back end service might have similar changes. Each programming language</span></div>
<div style="position:absolute;left:108.00px;top:524.49px" class="cls_011"><span class="cls_011">and REST framework have their own syntax and features.</span></div>
<div style="position:absolute;left:144.00px;top:555.51px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:144.00px;top:569.83px" class="cls_022"><span class="cls_022">Monolithic application page in Wikipedia</span></div>
<div style="position:absolute;left:144.00px;top:581.89px" class="cls_033"><span class="cls_033"> </span><A HREF="https://en.wikipedia.org/wiki/Monolithic_application">https://en.wikipedia.org/wiki/Monolithic_application</A> </div>
<div style="position:absolute;left:144.00px;top:603.33px" class="cls_022"><span class="cls_022">CORS page in Wikipedia</span></div>
<div style="position:absolute;left:144.00px;top:615.38px" class="cls_033"><span class="cls_033"> </span><A HREF="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing">https://en.wikipedia.org/wiki/Cross-origin_resource_sharing</A> </div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:502.44px;top:751.59px" class="cls_013"><span class="cls_013">307</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:260650px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background326.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix A |</span><span class="cls_019"> Implementing Microservices Architecture</span></div>
<div style="position:absolute;left:103.50px;top:52.48px" class="cls_038"><span class="cls_038">Guided Exercise</span></div>
<div style="position:absolute;left:90.00px;top:91.56px" class="cls_014"><span class="cls_014">Refactoring the To Do List Application</span></div>
<div style="position:absolute;left:102.00px;top:137.59px" class="cls_011"><span class="cls_011">In this lab, you will refactor the To Do List application into multiple containers that are linked</span></div>
<div style="position:absolute;left:102.00px;top:149.59px" class="cls_011"><span class="cls_011">together, allowing the front-end HTML 5 application, the Node.js REST API, and the MySQL</span></div>
<div style="position:absolute;left:102.00px;top:161.59px" class="cls_011"><span class="cls_011">server to run in their own containers.</span></div>
<div style="position:absolute;left:102.00px;top:184.65px" class="cls_039"><span class="cls_039">Outcomes</span></div>
<div style="position:absolute;left:102.00px;top:202.58px" class="cls_011"><span class="cls_011">You should be able to refactor a monolithic application into its tiers and deploy each tier as a</span></div>
<div style="position:absolute;left:102.00px;top:214.58px" class="cls_011"><span class="cls_011">microservice.</span></div>
<div style="position:absolute;left:102.00px;top:237.64px" class="cls_039"><span class="cls_039">Before You Begin</span></div>
<div style="position:absolute;left:102.00px;top:255.58px" class="cls_011"><span class="cls_011">Run the following command to set up the working directories for the lab with the To Do List</span></div>
<div style="position:absolute;left:102.00px;top:267.58px" class="cls_011"><span class="cls_011">application files:</span></div>
<div style="position:absolute;left:101.00px;top:295.30px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab appendix-microservices start</span></div>
<div style="position:absolute;left:101.41px;top:349.92px" class="cls_022"><span class="cls_022">1.</span></div>
<div style="position:absolute;left:119.00px;top:349.92px" class="cls_022"><span class="cls_022">Move the HTML Files</span></div>
<div style="position:absolute;left:119.00px;top:365.98px" class="cls_011"><span class="cls_011">The first step in refactoring the To Do List application is to move the front-end code from</span></div>
<div style="position:absolute;left:119.00px;top:377.98px" class="cls_011"><span class="cls_011">the application into its own running container. This step guides you through moving the</span></div>
<div style="position:absolute;left:119.00px;top:389.98px" class="cls_011"><span class="cls_011">HTML application and its dependent files into their own directory for deployment to an</span></div>
<div style="position:absolute;left:119.00px;top:401.98px" class="cls_011"><span class="cls_011">Apache server running in a container.</span></div>
<div style="position:absolute;left:119.00px;top:426.37px" class="cls_011"><span class="cls_011">1.1.</span></div>
<div style="position:absolute;left:143.70px;top:426.37px" class="cls_011"><span class="cls_011">Move the HTML and static files to the </span><span class="cls_021">src/</span><span class="cls_011"> directory from the monolithic Node.js To</span></div>
<div style="position:absolute;left:143.70px;top:438.37px" class="cls_011"><span class="cls_011">Do List application:</span></div>
<div style="position:absolute;left:101.00px;top:466.09px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd ~/DO180/labs/appendix-microservices/apps/html5/</span></div>
<div style="position:absolute;left:101.00px;top:478.09px" class="cls_026"><span class="cls_026">[student@workstation html5]$ </span><span class="cls_027">mv \</span></div>
<div style="position:absolute;left:101.00px;top:490.08px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">~/DO180/labs/appendix-microservices/apps/nodejs/todo/* \</span></div>
<div style="position:absolute;left:101.00px;top:502.08px" class="cls_026"><span class="cls_026">> </span><span class="cls_027">~/DO180/labs/appendix-microservices/apps/html5/src/</span></div>
<div style="position:absolute;left:119.00px;top:532.76px" class="cls_011"><span class="cls_011">1.2.</span></div>
<div style="position:absolute;left:143.70px;top:532.76px" class="cls_011"><span class="cls_011">The current front-end application interacts with the API service using a relative URL.</span></div>
<div style="position:absolute;left:143.70px;top:544.76px" class="cls_011"><span class="cls_011">Because the API and front-end code will now run in separate containers, the front-</span></div>
<div style="position:absolute;left:143.70px;top:556.76px" class="cls_011"><span class="cls_011">end needs to be adjusted to point to the absolute URL of the To Do List application</span></div>
<div style="position:absolute;left:143.70px;top:568.76px" class="cls_011"><span class="cls_011">API.</span></div>
<div style="position:absolute;left:143.70px;top:584.75px" class="cls_011"><span class="cls_011">Open the </span><span class="cls_021">/home/student/DO180/labs/appendix-microservices/apps/</span></div>
<div style="position:absolute;left:143.70px;top:596.75px" class="cls_021"><span class="cls_021">html5/src/script/item.js</span><span class="cls_011"> file. At the bottom of the file, look for the following</span></div>
<div style="position:absolute;left:143.70px;top:608.75px" class="cls_011"><span class="cls_011">method:</span></div>
<div style="position:absolute;left:101.00px;top:636.47px" class="cls_026"><span class="cls_026">app.factory('itemService', function ($resource) {</span></div>
<div style="position:absolute;left:120.20px;top:648.47px" class="cls_026"><span class="cls_026">return $resource('api/items/:id');</span></div>
<div style="position:absolute;left:101.00px;top:660.46px" class="cls_026"><span class="cls_026">});</span></div>
<div style="position:absolute;left:143.70px;top:682.74px" class="cls_011"><span class="cls_011">Replace that code with the following content:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">308</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:261452px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background327.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix A |</span><span class="cls_019"> Implementing Microservices Architecture</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">app.factory('itemService', function ($resource) {</span></div>
<div style="position:absolute;left:138.20px;top:73.69px" class="cls_026"><span class="cls_026">return $resource('</span><A HREF="http://workstation.lab.example.com:30080/todo/api/">http://workstation.lab.example.com:30080/todo/api/</A> </div>
<div style="position:absolute;left:119.00px;top:85.69px" class="cls_026"><span class="cls_026">items/:id');</span></div>
<div style="position:absolute;left:119.00px;top:97.69px" class="cls_026"><span class="cls_026">});</span></div>
<div style="position:absolute;left:161.70px;top:119.97px" class="cls_011"><span class="cls_011">Make sure there are no line breaks in the new URL, save the file, and exit the editor.</span></div>
<div style="position:absolute;left:119.41px;top:143.91px" class="cls_022"><span class="cls_022">2.   Build the HTML Image</span></div>
<div style="position:absolute;left:137.00px;top:164.86px" class="cls_011"><span class="cls_011">2.1.</span></div>
<div style="position:absolute;left:161.70px;top:164.86px" class="cls_011"><span class="cls_011">Run the build script to build the Apache parent image.</span></div>
<div style="position:absolute;left:119.00px;top:192.58px" class="cls_026"><span class="cls_026">[student@workstation html5]$ </span><span class="cls_027">cd ~/DO180/labs/appendix-microservices/images/apache</span></div>
<div style="position:absolute;left:119.00px;top:204.58px" class="cls_026"><span class="cls_026">[student@workstation apache]$ </span><span class="cls_027">./build.sh</span></div>
<div style="position:absolute;left:119.00px;top:216.57px" class="cls_026"><span class="cls_026">STEP 1: FROM ubi7/ubi:7.7</span></div>
<div style="position:absolute;left:119.00px;top:228.57px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:240.57px" class="cls_026"><span class="cls_026">STEP 13: COMMIT do180/httpd</span></div>
<div style="position:absolute;left:137.00px;top:267.75px" class="cls_011"><span class="cls_011">2.2.   Verify that the image is built correctly:</span></div>
<div style="position:absolute;left:119.00px;top:295.46px" class="cls_026"><span class="cls_026">[student@workstation apache]$ </span><span class="cls_027">sudo podman images</span></div>
<div style="position:absolute;left:119.00px;top:307.46px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:229.40px;top:307.46px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:272.60px;top:307.46px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:349.40px;top:307.46px" class="cls_026"><span class="cls_026">CREATED</span></div>
<div style="position:absolute;left:445.40px;top:307.46px" class="cls_026"><span class="cls_026">SIZE</span></div>
<div style="position:absolute;left:119.00px;top:319.46px" class="cls_026"><span class="cls_026">localhost/do180/httpd</span></div>
<div style="position:absolute;left:229.40px;top:319.46px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:272.60px;top:319.46px" class="cls_026"><span class="cls_026">34376f2a318f</span></div>
<div style="position:absolute;left:349.40px;top:319.46px" class="cls_026"><span class="cls_026">2 minutes ago</span></div>
<div style="position:absolute;left:445.40px;top:319.46px" class="cls_026"><span class="cls_026">282.6 MB</span></div>
<div style="position:absolute;left:137.00px;top:358.63px" class="cls_011"><span class="cls_011">2.3.   Build the child Apache image:</span></div>
<div style="position:absolute;left:119.00px;top:386.35px" class="cls_026"><span class="cls_026">[student@workstation apache]$ </span><span class="cls_027">cd ~/DO180/labs/appendix-microservices/deploy/html5</span></div>
<div style="position:absolute;left:119.00px;top:398.35px" class="cls_026"><span class="cls_026">[student@workstation html5]$ </span><span class="cls_027">./build.sh</span></div>
<div style="position:absolute;left:119.00px;top:410.35px" class="cls_026"><span class="cls_026">STEP 1: FROM do180/httpd</span></div>
<div style="position:absolute;left:119.00px;top:422.34px" class="cls_026"><span class="cls_026">STEP 2: COPY ./src/ ${HOME}/</span></div>
<div style="position:absolute;left:119.00px;top:434.34px" class="cls_026"><span class="cls_026">--> cf11...dde1</span></div>
<div style="position:absolute;left:119.00px;top:446.34px" class="cls_026"><span class="cls_026">STEP 3: COMMIT do180/todo_frontend</span></div>
<div style="position:absolute;left:137.00px;top:473.51px" class="cls_011"><span class="cls_011">2.4.  Verify that the image is built correctly:</span></div>
<div style="position:absolute;left:119.00px;top:501.23px" class="cls_026"><span class="cls_026">[student@workstation html5]$ </span><span class="cls_027">sudo podman images</span></div>
<div style="position:absolute;left:119.00px;top:513.23px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:267.80px;top:513.23px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:311.00px;top:513.23px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:383.00px;top:513.23px" class="cls_026"><span class="cls_026">CREATED</span></div>
<div style="position:absolute;left:459.80px;top:513.23px" class="cls_026"><span class="cls_026">SIZE</span></div>
<div style="position:absolute;left:119.00px;top:525.23px" class="cls_026"><span class="cls_026">localhost/do180/todo_frontend</span></div>
<div style="position:absolute;left:267.80px;top:525.23px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:311.00px;top:525.23px" class="cls_026"><span class="cls_026">30b3fc531bc6</span></div>
<div style="position:absolute;left:383.00px;top:525.23px" class="cls_026"><span class="cls_026">2 minutes ago</span></div>
<div style="position:absolute;left:459.80px;top:525.23px" class="cls_026"><span class="cls_026">286.9 MB</span></div>
<div style="position:absolute;left:119.00px;top:537.22px" class="cls_026"><span class="cls_026">localhost/do180/httpd</span></div>
<div style="position:absolute;left:267.80px;top:537.22px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:311.00px;top:537.22px" class="cls_026"><span class="cls_026">34376f2a318f</span></div>
<div style="position:absolute;left:383.00px;top:537.22px" class="cls_026"><span class="cls_026">4 minutes ago</span></div>
<div style="position:absolute;left:459.80px;top:537.22px" class="cls_026"><span class="cls_026">282.6 MB</span></div>
<div style="position:absolute;left:119.41px;top:579.45px" class="cls_022"><span class="cls_022">3.  Modify the REST API to Connect to External Containers</span></div>
<div style="position:absolute;left:137.00px;top:600.40px" class="cls_011"><span class="cls_011">3.1.</span></div>
<div style="position:absolute;left:161.70px;top:600.40px" class="cls_011"><span class="cls_011">The REST API currently uses hard-coded values to connect to the MySQL database.</span></div>
<div style="position:absolute;left:161.70px;top:612.40px" class="cls_011"><span class="cls_011">Edit the </span><span class="cls_021">/home/student/DO180/labs/appendix-microservices/apps/</span></div>
<div style="position:absolute;left:161.70px;top:624.39px" class="cls_021"><span class="cls_021">nodejs/models/db.js</span><span class="cls_011"> file, which holds the database configuration. Update the</span></div>
<div style="position:absolute;left:161.70px;top:636.39px" class="cls_021"><span class="cls_021">dbname</span><span class="cls_011">, </span><span class="cls_021">username</span><span class="cls_011">, and </span><span class="cls_021">password</span><span class="cls_011"> values to use environment variables instead.</span></div>
<div style="position:absolute;left:161.70px;top:648.39px" class="cls_011"><span class="cls_011">Also, update the </span><span class="cls_021">params.host</span><span class="cls_011"> to point to the host name of the host running the</span></div>
<div style="position:absolute;left:161.70px;top:660.39px" class="cls_011"><span class="cls_011">MySQL container and update the </span><span class="cls_021">params.port</span><span class="cls_011"> to reflect the redirected port</span></div>
<div style="position:absolute;left:161.70px;top:672.39px" class="cls_011"><span class="cls_011">to the container. Both values are available as the </span><span class="cls_021">MYSQL_SERVICE_HOST</span><span class="cls_011"> and</span></div>
<div style="position:absolute;left:161.70px;top:684.38px" class="cls_021"><span class="cls_021">MYSQL_SERVICE_PORT</span><span class="cls_011"> environment variables, respectively. Replaced contents</span></div>
<div style="position:absolute;left:161.70px;top:696.38px" class="cls_011"><span class="cls_011">should look like this:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:502.24px;top:751.59px" class="cls_013"><span class="cls_013">309</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:262254px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background328.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix A |</span><span class="cls_019"> Implementing Microservices Architecture</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">module.exports.params = {</span></div>
<div style="position:absolute;left:120.20px;top:73.69px" class="cls_026"><span class="cls_026">dbname: process.env.MYSQL_DATABASE,</span></div>
<div style="position:absolute;left:120.20px;top:85.69px" class="cls_026"><span class="cls_026">username: process.env.MYSQL_USER,</span></div>
<div style="position:absolute;left:120.20px;top:97.69px" class="cls_026"><span class="cls_026">password: process.env.MYSQL_PASSWORD,</span></div>
<div style="position:absolute;left:120.20px;top:109.69px" class="cls_026"><span class="cls_026">params: {</span></div>
<div style="position:absolute;left:139.40px;top:121.68px" class="cls_026"><span class="cls_026">host: process.env.MYSQL_SERVICE_HOST,</span></div>
<div style="position:absolute;left:139.40px;top:133.68px" class="cls_026"><span class="cls_026">port: process.env.MYSQL_SERVICE_PORT,</span></div>
<div style="position:absolute;left:139.40px;top:145.68px" class="cls_026"><span class="cls_026">dialect: 'mysql'</span></div>
<div style="position:absolute;left:120.20px;top:157.68px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:101.00px;top:169.68px" class="cls_026"><span class="cls_026">};</span></div>
<div style="position:absolute;left:126.00px;top:208.88px" class="cls_015"><span class="cls_015">Note</span></div>
<div style="position:absolute;left:126.00px;top:223.26px" class="cls_011"><span class="cls_011">This file can be copied and pasted from </span><span class="cls_021">/home/student/DO180/solutions/</span></div>
<div style="position:absolute;left:126.00px;top:235.25px" class="cls_021"><span class="cls_021">appendix-microservices/apps/nodejs/models/db.js</span><span class="cls_011">.</span></div>
<div style="position:absolute;left:119.00px;top:268.55px" class="cls_011"><span class="cls_011">3.2.   Configure the back end to handle Cross-origin resource sharing (CORS). This occurs</span></div>
<div style="position:absolute;left:143.70px;top:280.55px" class="cls_011"><span class="cls_011">when a resource request is made from a different domain from the one in which the</span></div>
<div style="position:absolute;left:143.70px;top:292.55px" class="cls_011"><span class="cls_011">request was made. Because the API needs to handle requests from a different DNS</span></div>
<div style="position:absolute;left:143.70px;top:304.55px" class="cls_011"><span class="cls_011">domain (the front-end application), it is necessary to create security exceptions to</span></div>
<div style="position:absolute;left:143.70px;top:316.54px" class="cls_011"><span class="cls_011">allow these requests to succeed. Make the following modifications to the application</span></div>
<div style="position:absolute;left:143.70px;top:328.54px" class="cls_011"><span class="cls_011">in the language of your preference in order to handle CORS.</span></div>
<div style="position:absolute;left:143.70px;top:344.54px" class="cls_011"><span class="cls_011">Add </span><span class="cls_021">"restify-cors-middleware": "1.1.1"</span><span class="cls_011"> as a new dependency to the</span></div>
<div style="position:absolute;left:143.70px;top:356.54px" class="cls_021"><span class="cls_021">package.json</span><span class="cls_011"> file located at </span><span class="cls_021">/home/student/DO180/labs/appendix-</span></div>
<div style="position:absolute;left:143.70px;top:368.54px" class="cls_021"><span class="cls_021">microservices/apps/nodejs/package.json</span><span class="cls_011">. Remember to put a comma at</span></div>
<div style="position:absolute;left:143.70px;top:380.53px" class="cls_011"><span class="cls_011">the end of the previous dependency. Make sure the end of the file looks like this:</span></div>
<div style="position:absolute;left:120.20px;top:420.25px" class="cls_026"><span class="cls_026">"sequelize": "5.21.1",</span></div>
<div style="position:absolute;left:120.20px;top:432.25px" class="cls_026"><span class="cls_026">"mysql2": "2.0.0"</span><span class="cls_050">,</span></div>
<div style="position:absolute;left:120.20px;top:444.24px" class="cls_026"><span class="cls_026">"restify-cors-middleware": "1.1.1"</span></div>
<div style="position:absolute;left:110.60px;top:456.24px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:101.00px;top:468.24px" class="cls_026"><span class="cls_026">}</span></div>
<div style="position:absolute;left:143.70px;top:490.52px" class="cls_011"><span class="cls_011">Update the </span><span class="cls_021">app.js</span><span class="cls_011"> file located at </span><span class="cls_021">/home/student/DO180/labs/appendix-</span></div>
<div style="position:absolute;left:143.70px;top:502.52px" class="cls_021"><span class="cls_021">microservices/apps/nodejs/app.js</span><span class="cls_011"> to configure CORS usage. Require the</span></div>
<div style="position:absolute;left:143.70px;top:514.52px" class="cls_021"><span class="cls_021">restify-cors-middleware</span><span class="cls_011"> module at the second line, and then update the</span></div>
<div style="position:absolute;left:143.70px;top:526.51px" class="cls_011"><span class="cls_011">contents of the file to match the following:</span></div>
<div style="position:absolute;left:101.00px;top:554.23px" class="cls_026"><span class="cls_026">var restify = require('restify');</span></div>
<div style="position:absolute;left:101.00px;top:566.23px" class="cls_026"><span class="cls_026">var corsMiddleware = require('restify-cors-middleware');</span></div>
<div style="position:absolute;left:101.00px;top:578.23px" class="cls_026"><span class="cls_026">var controller = require('./controllers/items');</span></div>
<div style="position:absolute;left:101.00px;top:590.22px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:101.00px;top:602.22px" class="cls_026"><span class="cls_026">var server = restify.createServer()</span></div>
<div style="position:absolute;left:120.20px;top:614.22px" class="cls_026"><span class="cls_026">.use(restify.plugins.fullResponse())</span></div>
<div style="position:absolute;left:120.20px;top:626.22px" class="cls_026"><span class="cls_026">.use(restify.plugins.queryParser())</span></div>
<div style="position:absolute;left:120.20px;top:638.22px" class="cls_026"><span class="cls_026">.use(restify.plugins.bodyParser());</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">310</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:263056px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background329.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix A |</span><span class="cls_019"> Implementing Microservices Architecture</span></div>
<div style="position:absolute;left:119.00px;top:53.69px" class="cls_026"><span class="cls_026">const cors = corsMiddleware({</span></div>
<div style="position:absolute;left:128.60px;top:65.69px" class="cls_026"><span class="cls_026">origins: ['*']</span></div>
<div style="position:absolute;left:119.00px;top:77.69px" class="cls_026"><span class="cls_026">});</span></div>
<div style="position:absolute;left:119.00px;top:101.69px" class="cls_026"><span class="cls_026">server.pre(cors.preflight);</span></div>
<div style="position:absolute;left:119.00px;top:113.69px" class="cls_026"><span class="cls_026">server.use(cors.actual);</span></div>
<div style="position:absolute;left:119.00px;top:137.68px" class="cls_026"><span class="cls_026">controller.context(server, '/todo/api', model);</span></div>
<div style="position:absolute;left:161.70px;top:159.96px" class="cls_011"><span class="cls_011">The origins with value </span><span class="cls_021">["*"]</span><span class="cls_011"> instructs the server to allow any domains. In a</span></div>
<div style="position:absolute;left:161.70px;top:171.96px" class="cls_011"><span class="cls_011">production server, this value would usually be an array of domains known to require</span></div>
<div style="position:absolute;left:161.70px;top:183.96px" class="cls_011"><span class="cls_011">access to the API.</span></div>
<div style="position:absolute;left:119.41px;top:207.90px" class="cls_022"><span class="cls_022">4.  Build the REST API Image</span></div>
<div style="position:absolute;left:137.00px;top:232.07px" class="cls_011"><span class="cls_011">4.1.</span></div>
<div style="position:absolute;left:161.70px;top:232.07px" class="cls_011"><span class="cls_011">Build the REST API child image using the following command. This image uses the</span></div>
<div style="position:absolute;left:161.70px;top:244.07px" class="cls_011"><span class="cls_011">Node.js image.</span></div>
<div style="position:absolute;left:119.00px;top:271.79px" class="cls_026"><span class="cls_026">[student@workstation html5]$ </span><span class="cls_027">cd ~/DO180/labs/appendix-microservices/deploy/nodejs</span></div>
<div style="position:absolute;left:119.00px;top:283.79px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">./build.sh</span></div>
<div style="position:absolute;left:119.00px;top:295.78px" class="cls_026"><span class="cls_026">STEP 1: FROM rhscl/nodejs-4-rhel7:latest</span></div>
<div style="position:absolute;left:119.00px;top:307.78px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.00px;top:319.78px" class="cls_026"><span class="cls_026">STEP 11: COMMIT do180/todonodejs</span></div>
<div style="position:absolute;left:137.00px;top:350.18px" class="cls_011"><span class="cls_011">4.2.  Run the </span><span class="cls_021">podman images</span><span class="cls_011"> command to verify that all of the required images are built</span></div>
<div style="position:absolute;left:161.70px;top:362.18px" class="cls_011"><span class="cls_011">successfully:</span></div>
<div style="position:absolute;left:119.00px;top:389.89px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">sudo podman images</span></div>
<div style="position:absolute;left:119.00px;top:401.89px" class="cls_026"><span class="cls_026">REPOSITORY</span></div>
<div style="position:absolute;left:272.60px;top:401.89px" class="cls_026"><span class="cls_026">TAG</span></div>
<div style="position:absolute;left:315.80px;top:401.89px" class="cls_026"><span class="cls_026">IMAGE ID</span></div>
<div style="position:absolute;left:383.00px;top:401.89px" class="cls_026"><span class="cls_026">CREATED</span></div>
<div style="position:absolute;left:459.80px;top:401.89px" class="cls_026"><span class="cls_026">SIZE</span></div>
<div style="position:absolute;left:119.00px;top:413.89px" class="cls_026"><span class="cls_026">localhost/do180/httpd</span></div>
<div style="position:absolute;left:272.60px;top:413.89px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:315.80px;top:413.89px" class="cls_026"><span class="cls_026">2963ca81ac51</span></div>
<div style="position:absolute;left:383.00px;top:413.89px" class="cls_026"><span class="cls_026">5 seconds ago</span></div>
<div style="position:absolute;left:459.80px;top:413.89px" class="cls_026"><span class="cls_026">249 MB</span></div>
<div style="position:absolute;left:119.00px;top:425.89px" class="cls_026"><span class="cls_026">localhost/do180/todonodejs</span></div>
<div style="position:absolute;left:272.60px;top:425.89px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:315.80px;top:425.89px" class="cls_026"><span class="cls_026">7b64ef105c50</span></div>
<div style="position:absolute;left:383.00px;top:425.89px" class="cls_026"><span class="cls_026">7 minutes ago</span></div>
<div style="position:absolute;left:459.80px;top:425.89px" class="cls_026"><span class="cls_026">533 MB</span></div>
<div style="position:absolute;left:119.00px;top:437.89px" class="cls_026"><span class="cls_026">localhost/do180/todo_frontend</span></div>
<div style="position:absolute;left:272.60px;top:437.89px" class="cls_026"><span class="cls_026">latest</span></div>
<div style="position:absolute;left:315.80px;top:437.89px" class="cls_026"><span class="cls_026">53ad57d2306c</span></div>
<div style="position:absolute;left:383.00px;top:437.89px" class="cls_026"><span class="cls_026">9 minutes ago</span></div>
<div style="position:absolute;left:459.80px;top:437.89px" class="cls_026"><span class="cls_026">254 MB</span></div>
<div style="position:absolute;left:119.00px;top:449.88px" class="cls_029"><span class="cls_029">...output omitted...</span></div>
<div style="position:absolute;left:119.41px;top:480.11px" class="cls_022"><span class="cls_022">5.  Run the Containers</span></div>
<div style="position:absolute;left:137.00px;top:504.28px" class="cls_011"><span class="cls_011">5.1.</span></div>
<div style="position:absolute;left:161.70px;top:504.28px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">run.sh</span><span class="cls_011"> script to run the containers:</span></div>
<div style="position:absolute;left:119.00px;top:532.00px" class="cls_026"><span class="cls_026">[student@workstation nodejs]$ </span><span class="cls_027">cd linked/</span></div>
<div style="position:absolute;left:119.00px;top:544.00px" class="cls_026"><span class="cls_026">[student@workstation linked]$ </span><span class="cls_027">./run.sh</span></div>
<div style="position:absolute;left:119.00px;top:555.99px" class="cls_026"><span class="cls_026">• Creating database volume: OK</span></div>
<div style="position:absolute;left:119.00px;top:567.99px" class="cls_026"><span class="cls_026">• Launching database: OK</span></div>
<div style="position:absolute;left:119.00px;top:579.99px" class="cls_026"><span class="cls_026">• Importing database: OK</span></div>
<div style="position:absolute;left:119.00px;top:591.99px" class="cls_026"><span class="cls_026">• Launching To Do application: OK</span></div>
<div style="position:absolute;left:137.00px;top:622.39px" class="cls_011"><span class="cls_011">5.2.   Run the </span><span class="cls_021">podman ps</span><span class="cls_011"> command to confirm that all three containers are running:</span></div>
<div style="position:absolute;left:119.00px;top:650.10px" class="cls_026"><span class="cls_026">[student@workstation linked]$ </span><span class="cls_027">sudo podman ps</span></div>
<div style="position:absolute;left:119.00px;top:662.10px" class="cls_026"><span class="cls_026">... IMAGE</span></div>
<div style="position:absolute;left:287.00px;top:662.10px" class="cls_026"><span class="cls_026">... PORTS</span></div>
<div style="position:absolute;left:440.60px;top:662.10px" class="cls_026"><span class="cls_026">NAMES</span></div>
<div style="position:absolute;left:119.00px;top:674.10px" class="cls_026"><span class="cls_026">... localhost/do180/todo_frontend</span></div>
<div style="position:absolute;left:287.00px;top:674.10px" class="cls_026"><span class="cls_026">... 0.0.0.0:30000->80/tcp</span></div>
<div style="position:absolute;left:435.80px;top:674.10px" class="cls_026"><span class="cls_026">todo_frontend</span></div>
<div style="position:absolute;left:119.00px;top:686.10px" class="cls_026"><span class="cls_026">... localhost/do180/todonodejs</span></div>
<div style="position:absolute;left:287.00px;top:686.10px" class="cls_026"><span class="cls_026">... 8080/tcp, 0.0.0.0:30080... todoapi</span></div>
<div style="position:absolute;left:119.00px;top:698.09px" class="cls_026"><span class="cls_026">... localhost/rhscl/mysql-57-rhel7 ... 0.0.0.0:30306->3306/tcp</span></div>
<div style="position:absolute;left:435.80px;top:698.09px" class="cls_026"><span class="cls_026">mysql</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:506.69px;top:751.59px" class="cls_013"><span class="cls_013">311</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:263858px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background330.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix A |</span><span class="cls_019"> Implementing Microservices Architecture</span></div>
<div style="position:absolute;left:101.41px;top:53.92px" class="cls_022"><span class="cls_022">6.  Test the Application</span></div>
<div style="position:absolute;left:119.00px;top:76.48px" class="cls_011"><span class="cls_011">6.1.</span></div>
<div style="position:absolute;left:143.70px;top:76.48px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">curl</span><span class="cls_011"> command to verify that the REST API for the To Do List application is</span></div>
<div style="position:absolute;left:143.70px;top:88.47px" class="cls_011"><span class="cls_011">working correctly:</span></div>
<div style="position:absolute;left:101.00px;top:116.19px" class="cls_026"><span class="cls_026">[student@workstation linked]$ </span><span class="cls_027">curl -w "\n" 127.0.0.1:30080/todo/api/items/1</span></div>
<div style="position:absolute;left:101.00px;top:128.19px" class="cls_026"><span class="cls_026">{"description": "Pick up newspaper", "done": false, "id":1}</span></div>
<div style="position:absolute;left:119.00px;top:156.97px" class="cls_011"><span class="cls_011">6.2.  Open Firefox on </span><span class="cls_021">workstation</span><span class="cls_011"> and navigate to </span><A HREF="http://127.0.0.1:30000/">http://127.0.0.1:30000</A> </span><span class="cls_011">, where</span></div>
<div style="position:absolute;left:143.70px;top:168.97px" class="cls_011"><span class="cls_011">you should see the To Do List application.</span></div>
<div style="position:absolute;left:90.00px;top:193.03px" class="cls_002"><span class="cls_002">Finish</span></div>
<div style="position:absolute;left:90.00px;top:214.96px" class="cls_011"><span class="cls_011">On </span><span class="cls_021">workstation</span><span class="cls_011">, run the </span><span class="cls_021">lab appendix-microservices finish</span><span class="cls_011"> script to complete this</span></div>
<div style="position:absolute;left:90.00px;top:226.96px" class="cls_011"><span class="cls_011">lab.</span></div>
<div style="position:absolute;left:101.00px;top:254.68px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab appendix-microservices finish</span></div>
<div style="position:absolute;left:90.00px;top:282.46px" class="cls_011"><span class="cls_011">This concludes the guided exercise.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">312</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:264660px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background331.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix A |</span><span class="cls_019"> Implementing Microservices Architecture</span></div>
<div style="position:absolute;left:108.00px;top:83.06px" class="cls_014"><span class="cls_014">Summary</span></div>
<div style="position:absolute;left:108.00px;top:135.98px" class="cls_011"><span class="cls_011">In this chapter, you learned:</span></div>
<div style="position:absolute;left:108.00px;top:157.47px" class="cls_011"><span class="cls_011">• Breaking a monolithic application into multiple containers allows for greater application</span></div>
<div style="position:absolute;left:117.50px;top:169.47px" class="cls_011"><span class="cls_011">scalability, makes upgrades easier, and allows higher hardware utilization.</span></div>
<div style="position:absolute;left:108.00px;top:190.97px" class="cls_011"><span class="cls_011">• The three common tiers for logical division of an application are the presentation tier, the</span></div>
<div style="position:absolute;left:117.50px;top:202.97px" class="cls_011"><span class="cls_011">business tier, and the persistence tier.</span></div>
<div style="position:absolute;left:108.00px;top:224.47px" class="cls_011"><span class="cls_011">• Cross-Origin Resource Sharing (CORS) can prevent Ajax calls to servers different from the</span></div>
<div style="position:absolute;left:117.50px;top:236.46px" class="cls_011"><span class="cls_011">one where the pages were downloaded. Be sure to make provisions to allow CORS from other</span></div>
<div style="position:absolute;left:117.50px;top:248.46px" class="cls_011"><span class="cls_011">containers in the application.</span></div>
<div style="position:absolute;left:108.00px;top:269.96px" class="cls_011"><span class="cls_011">• Container images are intended to be immutable, but configurations can be passed in either at</span></div>
<div style="position:absolute;left:117.50px;top:281.96px" class="cls_011"><span class="cls_011">image build time or by creating persistent storage for configurations.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.77px;top:751.59px" class="cls_013"><span class="cls_013">313</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:265462px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background332.jpg" width=612 height=792></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">314</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:266264px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background333.jpg" width=612 height=792></div>
<div style="position:absolute;left:126.00px;top:321.76px" class="cls_030"><span class="cls_030">Appendix B</span></div>
<div style="position:absolute;left:126.00px;top:427.50px" class="cls_031"><span class="cls_031">Creating a GitHub Account</span></div>
<div style="position:absolute;left:146.00px;top:480.67px" class="cls_018"><span class="cls_018">Goal</span></div>
<div style="position:absolute;left:260.00px;top:480.01px" class="cls_008"><span class="cls_008">Describe how to create a GitHub account for labs</span></div>
<div style="position:absolute;left:260.00px;top:492.01px" class="cls_008"><span class="cls_008">in the course.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.86px;top:751.59px" class="cls_013"><span class="cls_013">315</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:267066px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background334.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix B |</span><span class="cls_019"> Creating a GitHub Account</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Creating a GitHub Account</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, you should be able to create a GitHub account and create public Git</span></div>
<div style="position:absolute;left:90.00px;top:170.97px" class="cls_011"><span class="cls_011">repositories for the labs in the course.</span></div>
<div style="position:absolute;left:90.00px;top:195.04px" class="cls_002"><span class="cls_002">Creating a GitHub Account</span></div>
<div style="position:absolute;left:90.00px;top:216.97px" class="cls_011"><span class="cls_011">You need a GitHub account to create one or more public Git repositories for the labs in this course.</span></div>
<div style="position:absolute;left:90.00px;top:228.97px" class="cls_011"><span class="cls_011">If you already have a GitHub account, you can skip the steps listed in this appendix.</span></div>
<div style="position:absolute;left:126.00px;top:261.61px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:126.00px;top:275.99px" class="cls_011"><span class="cls_011">If you already have a GitHub account, ensure that you only create public Git</span></div>
<div style="position:absolute;left:126.00px;top:287.99px" class="cls_011"><span class="cls_011">repositories for the labs in this course. The lab grading scripts and instructions</span></div>
<div style="position:absolute;left:126.00px;top:299.99px" class="cls_011"><span class="cls_011">require unauthenticated access to clone the repository. The repositories must be</span></div>
<div style="position:absolute;left:126.00px;top:311.98px" class="cls_011"><span class="cls_011">accessible without providing passwords, SSH keys, or GPG keys.</span></div>
<div style="position:absolute;left:90.00px;top:349.88px" class="cls_011"><span class="cls_011">To create a new GitHub account, perform the following steps:</span></div>
<div style="position:absolute;left:90.00px;top:373.00px" class="cls_011"><span class="cls_011">1.</span></div>
<div style="position:absolute;left:109.00px;top:373.00px" class="cls_011"><span class="cls_011">Navigate to </span><A HREF="https://github.com">https://github.com</A> using a web browser.</div>
<div style="position:absolute;left:90.00px;top:396.12px" class="cls_011"><span class="cls_011">2.</span></div>
<div style="position:absolute;left:109.00px;top:396.12px" class="cls_011"><span class="cls_011">Enter the required details and then click Sign up for GitHub.</span></div>
<div style="position:absolute;left:223.24px;top:623.23px" class="cls_020"><span class="cls_020">Figure B.1: Creating a GitHub account</span></div>
<div style="position:absolute;left:90.00px;top:645.26px" class="cls_011"><span class="cls_011">3.</span></div>
<div style="position:absolute;left:109.00px;top:645.26px" class="cls_011"><span class="cls_011">You will receive an email with instructions on how to activate your GitHub account. Verify your</span></div>
<div style="position:absolute;left:109.00px;top:657.26px" class="cls_011"><span class="cls_011">email address and then sign in to the GitHub website using the username and password you</span></div>
<div style="position:absolute;left:109.00px;top:669.26px" class="cls_011"><span class="cls_011">provided during account creation.</span></div>
<div style="position:absolute;left:90.00px;top:692.38px" class="cls_011"><span class="cls_011">4.</span></div>
<div style="position:absolute;left:109.00px;top:692.38px" class="cls_011"><span class="cls_011">After you have logged in to GitHub, you can create new Git repositories by clicking New in the</span></div>
<div style="position:absolute;left:109.00px;top:704.38px" class="cls_011"><span class="cls_011">Repositories pane on the left of the GitHub home page.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">316</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:267868px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background335.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix B |</span><span class="cls_019"> Creating a GitHub Account</span></div>
<div style="position:absolute;left:234.13px;top:345.30px" class="cls_020"><span class="cls_020">Figure B.2: Creating a new Git repository</span></div>
<div style="position:absolute;left:127.00px;top:368.22px" class="cls_011"><span class="cls_011">Alternatively, click the plus icon (+) in the upper-right corner (to the right of the bell icon) and</span></div>
<div style="position:absolute;left:127.00px;top:380.22px" class="cls_011"><span class="cls_011">then click New repository.</span></div>
<div style="position:absolute;left:237.17px;top:695.85px" class="cls_020"><span class="cls_020">Figure B.3: Creating new Git repository</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.85px;top:751.59px" class="cls_013"><span class="cls_013">317</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:268670px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background336.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix B |</span><span class="cls_019"> Creating a GitHub Account</span></div>
<div style="position:absolute;left:126.00px;top:63.50px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:126.00px;top:77.83px" class="cls_012"><span class="cls_012">Signing up for a new GitHub account</span></div>
<div style="position:absolute;left:126.00px;top:89.97px" class="cls_033"><span class="cls_033"> </span><A HREF="https://help.github.com/en/articles/signing-up-for-a-new-github-account">https://help.github.com/en/articles/signing-up-for-a-new-github-account</A> </div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">318</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:269472px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background337.jpg" width=612 height=792></div>
<div style="position:absolute;left:126.00px;top:321.76px" class="cls_030"><span class="cls_030">Appendix C</span></div>
<div style="position:absolute;left:126.00px;top:427.50px" class="cls_031"><span class="cls_031">Creating a Quay Account</span></div>
<div style="position:absolute;left:146.00px;top:480.67px" class="cls_018"><span class="cls_018">Goal</span></div>
<div style="position:absolute;left:260.00px;top:480.01px" class="cls_008"><span class="cls_008">Describe how to create a Quay account for labs in</span></div>
<div style="position:absolute;left:260.00px;top:492.01px" class="cls_008"><span class="cls_008">the course.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:504.65px;top:751.59px" class="cls_013"><span class="cls_013">319</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:270274px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background338.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix C |</span><span class="cls_019"> Creating a Quay Account</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Creating a Quay Account</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, you should be able to create a Quay account and create public</span></div>
<div style="position:absolute;left:90.00px;top:170.97px" class="cls_011"><span class="cls_011">container image repositories for the labs in the course.</span></div>
<div style="position:absolute;left:90.00px;top:195.04px" class="cls_002"><span class="cls_002">Creating a Quay Account</span></div>
<div style="position:absolute;left:90.00px;top:216.97px" class="cls_011"><span class="cls_011">You need a Quay account to create one or more public container image repositories for the labs</span></div>
<div style="position:absolute;left:90.00px;top:228.97px" class="cls_011"><span class="cls_011">in this course. If you already have a Quay account, you can skip the steps to create a new account</span></div>
<div style="position:absolute;left:90.00px;top:240.97px" class="cls_011"><span class="cls_011">listed in this appendix.</span></div>
<div style="position:absolute;left:126.00px;top:273.89px" class="cls_015"><span class="cls_015">Important</span></div>
<div style="position:absolute;left:126.00px;top:288.27px" class="cls_011"><span class="cls_011">If you already have a Quay account, ensure that you only create public container</span></div>
<div style="position:absolute;left:126.00px;top:300.26px" class="cls_011"><span class="cls_011">image repositories for the labs in this course. The lab grading scripts and</span></div>
<div style="position:absolute;left:126.00px;top:312.26px" class="cls_011"><span class="cls_011">instructions require unauthenticated access to pull container images from the</span></div>
<div style="position:absolute;left:126.00px;top:324.26px" class="cls_011"><span class="cls_011">repository.</span></div>
<div style="position:absolute;left:90.00px;top:362.16px" class="cls_011"><span class="cls_011">To create a new Quay account, perform the following steps:</span></div>
<div style="position:absolute;left:90.00px;top:385.56px" class="cls_011"><span class="cls_011">1.</span></div>
<div style="position:absolute;left:109.00px;top:385.56px" class="cls_011"><span class="cls_011">Navigate to </span><A HREF="https://quay.io">https://quay.io</A> using a web browser.</div>
<div style="position:absolute;left:90.00px;top:408.95px" class="cls_011"><span class="cls_011">2.</span></div>
<div style="position:absolute;left:109.00px;top:408.95px" class="cls_011"><span class="cls_011">Click Sign in in the upper-right corner (next to the search bar).</span></div>
<div style="position:absolute;left:90.00px;top:432.35px" class="cls_011"><span class="cls_011">3.</span></div>
<div style="position:absolute;left:109.00px;top:432.35px" class="cls_011"><span class="cls_011">On the Sign in page, you can log in using your Google or GitHub credentials (created in</span></div>
<div style="position:absolute;left:109.00px;top:444.35px" class="cls_011"><span class="cls_011">Appendix A).</span></div>
<div style="position:absolute;left:190.57px;top:602.48px" class="cls_020"><span class="cls_020">Figure C.1: Sign in using Google or GitHub credentials.</span></div>
<div style="position:absolute;left:109.00px;top:625.40px" class="cls_011"><span class="cls_011">Alternatively, click Create Account to create a new account.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">320</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:271076px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background339.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix C |</span><span class="cls_019"> Creating a Quay Account</span></div>
<div style="position:absolute;left:246.09px;top:274.31px" class="cls_020"><span class="cls_020">Figure C.2: Creating a new account</span></div>
<div style="position:absolute;left:108.00px;top:296.62px" class="cls_011"><span class="cls_011">4.</span></div>
<div style="position:absolute;left:127.00px;top:296.62px" class="cls_011"><span class="cls_011">If you chose to skip the Google or GitHub log-in method and instead opted to create a new</span></div>
<div style="position:absolute;left:127.00px;top:308.62px" class="cls_011"><span class="cls_011">account, you will receive an email with instructions on how to activate your Quay account.</span></div>
<div style="position:absolute;left:127.00px;top:320.62px" class="cls_011"><span class="cls_011">Verify your email address and then sign in to the Quay website with the username and</span></div>
<div style="position:absolute;left:127.00px;top:332.62px" class="cls_011"><span class="cls_011">password you provided during account creation.</span></div>
<div style="position:absolute;left:108.00px;top:356.01px" class="cls_011"><span class="cls_011">5.</span></div>
<div style="position:absolute;left:127.00px;top:356.01px" class="cls_011"><span class="cls_011">After you have logged in to Quay you can create new image repositories by clicking Create</span></div>
<div style="position:absolute;left:127.00px;top:368.01px" class="cls_011"><span class="cls_011">New Repository on the Repositories page.</span></div>
<div style="position:absolute;left:227.57px;top:606.43px" class="cls_020"><span class="cls_020">Figure C.3: Creating a new image repository</span></div>
<div style="position:absolute;left:127.00px;top:629.35px" class="cls_011"><span class="cls_011">Alternatively, click the plus icon (+) in the upper-right corner (to the left of the bell icon), and</span></div>
<div style="position:absolute;left:127.00px;top:641.34px" class="cls_011"><span class="cls_011">then click New Repository.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:505.09px;top:751.59px" class="cls_013"><span class="cls_013">321</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:271878px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background340.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix C |</span><span class="cls_019"> Creating a Quay Account</span></div>
<div style="position:absolute;left:209.38px;top:225.30px" class="cls_020"><span class="cls_020">Figure C.4: Creating a new image repository</span></div>
<div style="position:absolute;left:126.00px;top:255.24px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:126.00px;top:269.56px" class="cls_012"><span class="cls_012">Getting Started with Quay.io</span></div>
<div style="position:absolute;left:126.00px;top:281.70px" class="cls_033"><span class="cls_033"> </span><A HREF="https://docs.quay.io/solution/getting-started.html">https://docs.quay.io/solution/getting-started.html</A> </div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">322</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:272680px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background341.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix C |</span><span class="cls_019"> Creating a Quay Account</span></div>
<div style="position:absolute;left:108.00px;top:83.06px" class="cls_014"><span class="cls_014">Repositories Visibility</span></div>
<div style="position:absolute;left:108.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:108.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, you should be able to control repository visibility on Quay.io.</span></div>
<div style="position:absolute;left:108.00px;top:181.26px" class="cls_024"><span class="cls_024">Quay.io Repositories Visibility</span></div>
<div style="position:absolute;left:108.00px;top:205.97px" class="cls_011"><span class="cls_011">Quay.io offers the possibility of creating public and private repositories. Public repositories can be</span></div>
<div style="position:absolute;left:108.00px;top:217.97px" class="cls_011"><span class="cls_011">read by anyone without restrictions, despite write permissions must be explicitly granted. Private</span></div>
<div style="position:absolute;left:108.00px;top:229.97px" class="cls_011"><span class="cls_011">repositories have both read and write permissions restricted. Nevertheless, the number of private</span></div>
<div style="position:absolute;left:108.00px;top:241.97px" class="cls_011"><span class="cls_011">repositories in </span><span class="cls_021">quay.io</span><span class="cls_011"> is limited depending on the namespace's plan.</span></div>
<div style="position:absolute;left:108.00px;top:266.03px" class="cls_002"><span class="cls_002">Default Repository Visibility</span></div>
<div style="position:absolute;left:108.00px;top:287.97px" class="cls_011"><span class="cls_011">Repositories created by pushing images to </span><span class="cls_021">quay.io</span><span class="cls_011"> are private by default. In order OpenShift (or</span></div>
<div style="position:absolute;left:108.00px;top:299.96px" class="cls_011"><span class="cls_011">any other tool) to fetch those images you can either configure a private key in both OpenShift and</span></div>
<div style="position:absolute;left:108.00px;top:311.96px" class="cls_011"><span class="cls_011">Quay, or make the repository public, so no authentication is required. Setting up private keys is out</span></div>
<div style="position:absolute;left:108.00px;top:323.96px" class="cls_011"><span class="cls_011">of scope of this document.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.17px;top:751.59px" class="cls_013"><span class="cls_013">323</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:273482px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background342.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix C |</span><span class="cls_019"> Creating a Quay Account</span></div>
<div style="position:absolute;left:90.00px;top:464.36px" class="cls_002"><span class="cls_002">Updating Repository Visibility</span></div>
<div style="position:absolute;left:90.00px;top:486.29px" class="cls_011"><span class="cls_011">In order to set repository visibility to public select the appropriate repository in </span><A HREF="https://">https://</A> </span></div>
<div style="position:absolute;left:90.00px;top:498.29px" class="cls_021"><span class="cls_021">quay.io/repository/</span><span class="cls_011"> (log in to your account if needed) and open the </span><span class="cls_021">Settings</span><span class="cls_011"> page by</span></div>
<div style="position:absolute;left:90.00px;top:510.29px" class="cls_011"><span class="cls_011">clicking on the gear on the left-bottom edge. Scroll down to the </span><span class="cls_021">Repository Visibility</span></div>
<div style="position:absolute;left:90.00px;top:522.29px" class="cls_011"><span class="cls_011">section and click on the Make Public button.</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">324</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:274284px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background343.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix C |</span><span class="cls_019"> Creating a Quay Account</span></div>
<div style="position:absolute;left:108.00px;top:363.42px" class="cls_011"><span class="cls_011">Get back the the list of repositories. The lock icon besides the repository name have disappeared,</span></div>
<div style="position:absolute;left:108.00px;top:375.41px" class="cls_011"><span class="cls_011">indicating the repository became public.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.26px;top:751.59px" class="cls_013"><span class="cls_013">325</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:275086px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background344.jpg" width=612 height=792></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">326</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:275888px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background345.jpg" width=612 height=792></div>
<div style="position:absolute;left:126.00px;top:321.76px" class="cls_030"><span class="cls_030">Appendix D</span></div>
<div style="position:absolute;left:126.00px;top:427.50px" class="cls_031"><span class="cls_031">Useful Git Commands</span></div>
<div style="position:absolute;left:146.00px;top:480.67px" class="cls_018"><span class="cls_018">Goal</span></div>
<div style="position:absolute;left:260.00px;top:480.01px" class="cls_008"><span class="cls_008">Describe useful Git commands that are used for</span></div>
<div style="position:absolute;left:260.00px;top:492.01px" class="cls_008"><span class="cls_008">the labs in this course.</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.25px;top:751.59px" class="cls_013"><span class="cls_013">327</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:276690px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background346.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix D |</span><span class="cls_019"> Useful Git Commands</span></div>
<div style="position:absolute;left:90.00px;top:83.06px" class="cls_014"><span class="cls_014">Git Commands</span></div>
<div style="position:absolute;left:90.00px;top:134.26px" class="cls_024"><span class="cls_024">Objectives</span></div>
<div style="position:absolute;left:90.00px;top:158.98px" class="cls_011"><span class="cls_011">After completing this section, you should be able to restart and redo exercises in this course. You</span></div>
<div style="position:absolute;left:90.00px;top:170.97px" class="cls_011"><span class="cls_011">should also be able to switch from one incomplete exercise to perform another, and later continue</span></div>
<div style="position:absolute;left:90.00px;top:182.97px" class="cls_011"><span class="cls_011">the previous exercise where you left off.</span></div>
<div style="position:absolute;left:90.00px;top:205.25px" class="cls_024"><span class="cls_024">Working with Git Branches</span></div>
<div style="position:absolute;left:90.00px;top:229.97px" class="cls_011"><span class="cls_011">This course uses a Git repository hosted on GitHub to store the application course code source</span></div>
<div style="position:absolute;left:90.00px;top:241.97px" class="cls_011"><span class="cls_011">code. At the beginning of the course, you create your own fork of this repository, which is also</span></div>
<div style="position:absolute;left:90.00px;top:253.97px" class="cls_011"><span class="cls_011">hosted on GitHub.</span></div>
<div style="position:absolute;left:90.00px;top:275.46px" class="cls_011"><span class="cls_011">During this course, you work with a local copy of your fork, which you clone to the </span><span class="cls_021">workstation</span></div>
<div style="position:absolute;left:90.00px;top:287.46px" class="cls_011"><span class="cls_011">VM. The term origin refers to the remote repository from which a local repository is cloned.</span></div>
<div style="position:absolute;left:90.00px;top:308.96px" class="cls_011"><span class="cls_011">As you work through the exercises in the course, you use separate Git branches for each exercise.</span></div>
<div style="position:absolute;left:90.00px;top:320.96px" class="cls_011"><span class="cls_011">All changes you make to the source code happen in a new branch that you create only for that</span></div>
<div style="position:absolute;left:90.00px;top:332.96px" class="cls_011"><span class="cls_011">exercise. Never make any changes on the </span><span class="cls_021">master</span><span class="cls_011"> branch.</span></div>
<div style="position:absolute;left:90.00px;top:354.45px" class="cls_011"><span class="cls_011">A list of scenarios and the corresponding Git commands that you can use to work with branches,</span></div>
<div style="position:absolute;left:90.00px;top:366.45px" class="cls_011"><span class="cls_011">and to recover to a known good state are listed below.</span></div>
<div style="position:absolute;left:90.00px;top:390.51px" class="cls_002"><span class="cls_002">Redoing an Exercise from Scratch</span></div>
<div style="position:absolute;left:90.00px;top:412.45px" class="cls_011"><span class="cls_011">To redo an exercise from scratch after you have completed it, perform the following steps:</span></div>
<div style="position:absolute;left:90.00px;top:435.85px" class="cls_011"><span class="cls_011">1.</span></div>
<div style="position:absolute;left:109.00px;top:435.85px" class="cls_011"><span class="cls_011">You commit and push all the changes in your local branch as part of performing the exercise.</span></div>
<div style="position:absolute;left:109.00px;top:447.85px" class="cls_011"><span class="cls_011">You finished the exercise by running its </span><span class="cls_021">finish</span><span class="cls_011"> subcommand to clean up all resources:</span></div>
<div style="position:absolute;left:101.00px;top:475.56px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab </span><span class="cls_040">your-exercise</span><span class="cls_027"> finish</span></div>
<div style="position:absolute;left:90.00px;top:505.24px" class="cls_011"><span class="cls_011">2.</span></div>
<div style="position:absolute;left:109.00px;top:505.24px" class="cls_011"><span class="cls_011">Change to your local clone of the </span><span class="cls_021">DO180-apps</span><span class="cls_011"> repository and switch to the </span><span class="cls_021">master</span><span class="cls_011"> branch:</span></div>
<div style="position:absolute;left:101.00px;top:532.96px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd ~/DO180-apps</span></div>
<div style="position:absolute;left:101.00px;top:544.96px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git checkout master</span></div>
<div style="position:absolute;left:90.00px;top:574.64px" class="cls_011"><span class="cls_011">3.</span></div>
<div style="position:absolute;left:109.00px;top:574.64px" class="cls_011"><span class="cls_011">Delete your local branch:</span></div>
<div style="position:absolute;left:101.00px;top:602.35px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git branch -d </span><span class="cls_040">your-branch</span></div>
<div style="position:absolute;left:90.00px;top:632.03px" class="cls_011"><span class="cls_011">4.</span></div>
<div style="position:absolute;left:109.00px;top:632.03px" class="cls_011"><span class="cls_011">Delete the remote branch on your personal GitHub account:</span></div>
<div style="position:absolute;left:101.00px;top:659.75px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git push origin --delete </span><span class="cls_040">your-branch</span></div>
<div style="position:absolute;left:90.00px;top:689.43px" class="cls_011"><span class="cls_011">5.</span></div>
<div style="position:absolute;left:109.00px;top:689.43px" class="cls_011"><span class="cls_011">Use the </span><span class="cls_021">start</span><span class="cls_011"> subcommand to restart the exercise:</span></div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">328</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:277492px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background347.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix D |</span><span class="cls_019"> Useful Git Commands</span></div>
<div style="position:absolute;left:119.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">cd ~</span></div>
<div style="position:absolute;left:119.00px;top:73.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab </span><span class="cls_040">your-exercise</span><span class="cls_027"> start</span></div>
<div style="position:absolute;left:108.00px;top:104.04px" class="cls_002"><span class="cls_002">Abandoning a Partially Completed Exercise and Restarting it</span></div>
<div style="position:absolute;left:108.00px;top:118.04px" class="cls_002"><span class="cls_002">from Scratch</span></div>
<div style="position:absolute;left:108.00px;top:139.97px" class="cls_011"><span class="cls_011">You may run into a scenario where you have partially completed a few steps in the exercise, and</span></div>
<div style="position:absolute;left:108.00px;top:151.97px" class="cls_011"><span class="cls_011">you want to abandon the current attempt, and restart it from scratch. Perform the following steps:</span></div>
<div style="position:absolute;left:108.00px;top:174.18px" class="cls_011"><span class="cls_011">1.</span></div>
<div style="position:absolute;left:127.00px;top:174.18px" class="cls_011"><span class="cls_011">Run the exercise's </span><span class="cls_021">finish</span><span class="cls_011"> subcommand to clean up all resources.</span></div>
<div style="position:absolute;left:119.00px;top:201.89px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab </span><span class="cls_040">your-exercise</span><span class="cls_027"> finish</span></div>
<div style="position:absolute;left:108.00px;top:230.38px" class="cls_011"><span class="cls_011">2.</span></div>
<div style="position:absolute;left:127.00px;top:230.38px" class="cls_011"><span class="cls_011">Enter your local clone of the </span><span class="cls_021">DO180-apps</span><span class="cls_011"> repository and discard any pending changes on the</span></div>
<div style="position:absolute;left:127.00px;top:242.38px" class="cls_011"><span class="cls_011">current branch using </span><span class="cls_021">git stash</span><span class="cls_011">:</span></div>
<div style="position:absolute;left:119.00px;top:270.10px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd ~/DO180-apps</span></div>
<div style="position:absolute;left:119.00px;top:282.09px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git stash</span></div>
<div style="position:absolute;left:108.00px;top:310.58px" class="cls_011"><span class="cls_011">3.</span></div>
<div style="position:absolute;left:127.00px;top:310.58px" class="cls_011"><span class="cls_011">Switch to the </span><span class="cls_021">master</span><span class="cls_011"> branch of your local repository:</span></div>
<div style="position:absolute;left:119.00px;top:338.30px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git checkout master</span></div>
<div style="position:absolute;left:108.00px;top:366.78px" class="cls_011"><span class="cls_011">4.</span></div>
<div style="position:absolute;left:127.00px;top:366.78px" class="cls_011"><span class="cls_011">Delete your local branch:</span></div>
<div style="position:absolute;left:119.00px;top:394.50px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git branch -d </span><span class="cls_040">your-branch</span></div>
<div style="position:absolute;left:108.00px;top:422.99px" class="cls_011"><span class="cls_011">5.</span></div>
<div style="position:absolute;left:127.00px;top:422.99px" class="cls_011"><span class="cls_011">Delete the remote branch on your personal GitHub account:</span></div>
<div style="position:absolute;left:119.00px;top:450.70px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git push origin --delete </span><span class="cls_040">your-branch</span></div>
<div style="position:absolute;left:108.00px;top:479.19px" class="cls_011"><span class="cls_011">6.</span></div>
<div style="position:absolute;left:127.00px;top:479.19px" class="cls_011"><span class="cls_011">You can now restart the exercise by running its </span><span class="cls_021">start</span><span class="cls_011"> subcommand:</span></div>
<div style="position:absolute;left:119.00px;top:506.91px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">cd ~</span></div>
<div style="position:absolute;left:119.00px;top:518.91px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab </span><span class="cls_040">your-exercise</span><span class="cls_027"> start</span></div>
<div style="position:absolute;left:108.00px;top:549.25px" class="cls_002"><span class="cls_002">Switching to a Different Exercise from an Incomplete Exercise</span></div>
<div style="position:absolute;left:108.00px;top:571.19px" class="cls_011"><span class="cls_011">You may run into a scenario where you have partially completed a few steps in an exercise, but you</span></div>
<div style="position:absolute;left:108.00px;top:583.18px" class="cls_011"><span class="cls_011">want to switch to a different exercise, and revisit the current exercise at a later time.</span></div>
<div style="position:absolute;left:108.00px;top:604.68px" class="cls_011"><span class="cls_011">Avoid leaving too many exercises uncompleted to revisit later. These exercises tie up cloud</span></div>
<div style="position:absolute;left:108.00px;top:616.68px" class="cls_011"><span class="cls_011">resources and you may use up your allotted quota on the cloud provider and on the OpenShift</span></div>
<div style="position:absolute;left:108.00px;top:628.68px" class="cls_011"><span class="cls_011">cluster you share with other students. If you think it may be a while until you can go back to the</span></div>
<div style="position:absolute;left:108.00px;top:640.68px" class="cls_011"><span class="cls_011">current exercise, consider abandoning it and later restarting from scratch.</span></div>
<div style="position:absolute;left:108.00px;top:662.17px" class="cls_011"><span class="cls_011">If you prefer to pause the current exercise and work on the next one, perform the following steps:</span></div>
<div style="position:absolute;left:108.00px;top:684.38px" class="cls_011"><span class="cls_011">1.</span></div>
<div style="position:absolute;left:127.00px;top:684.38px" class="cls_011"><span class="cls_011">Commit any pending changes in your local repository and push them to your personal GitHub</span></div>
<div style="position:absolute;left:127.00px;top:696.38px" class="cls_011"><span class="cls_011">account. You may want to record the step where you stopped the exercise:</span></div>
<div style="position:absolute;left:108.00px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
<div style="position:absolute;left:503.05px;top:751.59px" class="cls_013"><span class="cls_013">329</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:278294px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="03e06e34-93a8-11eb-8b25-0cc47a792c0a_id_03e06e34-93a8-11eb-8b25-0cc47a792c0a_files/background348.jpg" width=612 height=792></div>
<div style="position:absolute;left:90.00px;top:30.28px" class="cls_032"><span class="cls_032">Appendix D |</span><span class="cls_019"> Useful Git Commands</span></div>
<div style="position:absolute;left:101.00px;top:61.69px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">cd ~/DO180-apps</span></div>
<div style="position:absolute;left:101.00px;top:73.69px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git commit -a -m 'Paused at step X.Y'</span></div>
<div style="position:absolute;left:101.00px;top:85.69px" class="cls_026"><span class="cls_026">[student@workstation DO180-apps]$ </span><span class="cls_027">git push</span></div>
<div style="position:absolute;left:90.00px;top:113.47px" class="cls_011"><span class="cls_011">2.</span></div>
<div style="position:absolute;left:109.00px;top:113.47px" class="cls_011"><span class="cls_011">Do not run the </span><span class="cls_021">finish</span><span class="cls_011"> command of the original exercise. This is important to leave your</span></div>
<div style="position:absolute;left:109.00px;top:125.47px" class="cls_011"><span class="cls_011">existing OpenShift projects unchanged, so you can resume later.</span></div>
<div style="position:absolute;left:90.00px;top:146.97px" class="cls_011"><span class="cls_011">3.</span></div>
<div style="position:absolute;left:109.00px;top:146.97px" class="cls_011"><span class="cls_011">Start the next exercise by running its </span><span class="cls_021">start</span><span class="cls_011"> subcommand:</span></div>
<div style="position:absolute;left:101.00px;top:174.68px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">lab </span><span class="cls_040">your-exercise</span><span class="cls_027"> start</span></div>
<div style="position:absolute;left:90.00px;top:202.46px" class="cls_011"><span class="cls_011">4.</span></div>
<div style="position:absolute;left:109.00px;top:202.46px" class="cls_011"><span class="cls_011">The next exercise switches to the </span><span class="cls_021">master</span><span class="cls_011"> branch and optionally creates a new branch for its</span></div>
<div style="position:absolute;left:109.00px;top:214.46px" class="cls_011"><span class="cls_011">changes. This means the changes made to the original exercise in the original branch are left</span></div>
<div style="position:absolute;left:109.00px;top:226.46px" class="cls_011"><span class="cls_011">untouched.</span></div>
<div style="position:absolute;left:90.00px;top:247.96px" class="cls_011"><span class="cls_011">5.</span></div>
<div style="position:absolute;left:109.00px;top:247.96px" class="cls_011"><span class="cls_011">Later, after you have completed the next exercise, and you want to go back to the original</span></div>
<div style="position:absolute;left:109.00px;top:259.95px" class="cls_011"><span class="cls_011">exercise, switch back to its branch:</span></div>
<div style="position:absolute;left:101.00px;top:287.67px" class="cls_026"><span class="cls_026">[student@workstation ~]$ </span><span class="cls_027">git checkout </span><span class="cls_040">original-branch</span></div>
<div style="position:absolute;left:109.00px;top:315.45px" class="cls_011"><span class="cls_011">Then you can continue with the original exercise at the step where you left off.</span></div>
<div style="position:absolute;left:126.00px;top:346.47px" class="cls_015"><span class="cls_015">References</span></div>
<div style="position:absolute;left:126.00px;top:360.79px" class="cls_022"><span class="cls_022">Git branch man page</span></div>
<div style="position:absolute;left:126.00px;top:372.85px" class="cls_033"><span class="cls_033"> </span><A HREF="https://git-scm.com/docs/git-branch">https://git-scm.com/docs/git-branch</A> </div>
<div style="position:absolute;left:126.00px;top:394.29px" class="cls_022"><span class="cls_022">What is a Git branch?</span></div>
<div style="position:absolute;left:126.00px;top:406.34px" class="cls_033"><span class="cls_033"> </span><A HREF="https://git-scm.com/book/en/v2/Git-Branching-Branches-in-a-Nutshell">https://git-scm.com/book/en/v2/Git-Branching-Branches-in-a-Nutshell</A> </div>
<div style="position:absolute;left:126.00px;top:427.78px" class="cls_022"><span class="cls_022">Git Tools - Stashing</span></div>
<div style="position:absolute;left:126.00px;top:439.84px" class="cls_033"><span class="cls_033"> </span><A HREF="https://git-scm.com/book/en/v2/Git-Tools-Stashing-and-Cleaning">https://git-scm.com/book/en/v2/Git-Tools-Stashing-and-Cleaning</A> </div>
<div style="position:absolute;left:95.00px;top:751.59px" class="cls_013"><span class="cls_013">330</span></div>
<div style="position:absolute;left:389.86px;top:751.13px" class="cls_005"><span class="cls_005">DO180-OCP4.5-en-3-20201217</span></div>
</div>

</body>
</html>
